From a1b39b4b09b1f27f65ae52742ebd466123ff3e87 Mon Sep 17 00:00:00 2001
From: David Rosca <nowrep@gmail.com>
Date: Thu, 28 May 2015 10:08:58 +0200
Subject: [PATCH 16/36] GreaseMonkey: Show script dialog when creating new user
 script

---
 src/plugins/GreaseMonkey/settings/gm_settings.cpp | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/plugins/GreaseMonkey/settings/gm_settings.cpp b/src/plugins/GreaseMonkey/settings/gm_settings.cpp
index 5f55b6d..09927eb 100644
--- a/src/plugins/GreaseMonkey/settings/gm_settings.cpp
+++ b/src/plugins/GreaseMonkey/settings/gm_settings.cpp
@@ -116,7 +116,7 @@ void GM_Settings::newScript()
                                 "// @namespace   qupzilla.com \n"
                                 "// @description Script description \n"
                                 "// @include     * \n"
-                                "// @version     1 \n"
+                                "// @version     1.0.0 \n"
                                 "// ==/UserScript==\n\n");
 
     const QString fileName = QSL("%1/%2.user.js").arg(m_manager->scriptsDirectory(), QzTools::filterCharsFromFilename(name));
@@ -129,7 +129,8 @@ void GM_Settings::newScript()
     GM_Script *gmScript = new GM_Script(m_manager, file.fileName());
     m_manager->addScript(gmScript);
 
-    QDesktopServices::openUrl(QUrl::fromLocalFile(file.fileName()));
+    GM_SettingsScriptInfo* dialog = new GM_SettingsScriptInfo(gmScript, this);
+    dialog->open();
 }
 
 void GM_Settings::loadScripts()
-- 
2.5.1

