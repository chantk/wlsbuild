/* valaccodecontrolflowmodule.c generated by valac, the Vala compiler
 * generated from valaccodecontrolflowmodule.vala, do not modify */

/* valaccodecontrolflowmodule.vala
 *
 * Copyright (C) 2006-2009  Jürg Billeter
 * Copyright (C) 2006-2008  Raffaele Sandrini
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 *	Raffaele Sandrini <raffaele@sandrini.ch>
 */

#include <glib.h>
#include <glib-object.h>
#include <vala.h>
#include <valagee.h>
#include <valaccode.h>
#include <stdlib.h>
#include <string.h>


#define VALA_TYPE_CCODE_BASE_MODULE (vala_ccode_base_module_get_type ())
#define VALA_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModule))
#define VALA_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))
#define VALA_IS_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_IS_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_CCODE_BASE_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))

typedef struct _ValaCCodeBaseModule ValaCCodeBaseModule;
typedef struct _ValaCCodeBaseModuleClass ValaCCodeBaseModuleClass;
typedef struct _ValaCCodeBaseModulePrivate ValaCCodeBaseModulePrivate;

#define VALA_TYPE_CCODE_DECLARATION_SPACE (vala_ccode_declaration_space_get_type ())
#define VALA_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpace))
#define VALA_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))
#define VALA_IS_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_IS_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_CCODE_DECLARATION_SPACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))

typedef struct _ValaCCodeDeclarationSpace ValaCCodeDeclarationSpace;
typedef struct _ValaCCodeDeclarationSpaceClass ValaCCodeDeclarationSpaceClass;

#define VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT (vala_ccode_base_module_emit_context_get_type ())
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContext))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))

typedef struct _ValaCCodeBaseModuleEmitContext ValaCCodeBaseModuleEmitContext;
typedef struct _ValaCCodeBaseModuleEmitContextClass ValaCCodeBaseModuleEmitContextClass;

#define VALA_TYPE_CCODE_STRUCT_MODULE (vala_ccode_struct_module_get_type ())
#define VALA_CCODE_STRUCT_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModule))
#define VALA_CCODE_STRUCT_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModuleClass))
#define VALA_IS_CCODE_STRUCT_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_STRUCT_MODULE))
#define VALA_IS_CCODE_STRUCT_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_STRUCT_MODULE))
#define VALA_CCODE_STRUCT_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModuleClass))

typedef struct _ValaCCodeStructModule ValaCCodeStructModule;
typedef struct _ValaCCodeStructModuleClass ValaCCodeStructModuleClass;
typedef struct _ValaCCodeStructModulePrivate ValaCCodeStructModulePrivate;

#define VALA_TYPE_CCODE_METHOD_MODULE (vala_ccode_method_module_get_type ())
#define VALA_CCODE_METHOD_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModule))
#define VALA_CCODE_METHOD_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModuleClass))
#define VALA_IS_CCODE_METHOD_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_METHOD_MODULE))
#define VALA_IS_CCODE_METHOD_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_METHOD_MODULE))
#define VALA_CCODE_METHOD_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModuleClass))

typedef struct _ValaCCodeMethodModule ValaCCodeMethodModule;
typedef struct _ValaCCodeMethodModuleClass ValaCCodeMethodModuleClass;
typedef struct _ValaCCodeMethodModulePrivate ValaCCodeMethodModulePrivate;

#define VALA_TYPE_CCODE_CONTROL_FLOW_MODULE (vala_ccode_control_flow_module_get_type ())
#define VALA_CCODE_CONTROL_FLOW_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_CONTROL_FLOW_MODULE, ValaCCodeControlFlowModule))
#define VALA_CCODE_CONTROL_FLOW_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_CONTROL_FLOW_MODULE, ValaCCodeControlFlowModuleClass))
#define VALA_IS_CCODE_CONTROL_FLOW_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_CONTROL_FLOW_MODULE))
#define VALA_IS_CCODE_CONTROL_FLOW_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_CONTROL_FLOW_MODULE))
#define VALA_CCODE_CONTROL_FLOW_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_CONTROL_FLOW_MODULE, ValaCCodeControlFlowModuleClass))

typedef struct _ValaCCodeControlFlowModule ValaCCodeControlFlowModule;
typedef struct _ValaCCodeControlFlowModuleClass ValaCCodeControlFlowModuleClass;
typedef struct _ValaCCodeControlFlowModulePrivate ValaCCodeControlFlowModulePrivate;
#define _vala_ccode_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_node_unref (var), NULL)))
#define _vala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_node_unref (var), NULL)))
#define _vala_collection_object_unref0(var) ((var == NULL) ? NULL : (var = (vala_collection_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

struct _ValaCCodeBaseModule {
	ValaCodeGenerator parent_instance;
	ValaCCodeBaseModulePrivate * priv;
	ValaSymbol* root_symbol;
	ValaCCodeBaseModuleEmitContext* emit_context;
	ValaCCodeDeclarationSpace* header_declarations;
	ValaCCodeDeclarationSpace* internal_header_declarations;
	ValaCCodeDeclarationSpace* source_declarations;
	ValaCCodeFragment* source_signal_marshaller_declaration;
	ValaCCodeFragment* source_type_member_definition;
	ValaCCodeFragment* class_init_fragment;
	ValaCCodeFragment* base_init_fragment;
	ValaCCodeFragment* class_finalize_fragment;
	ValaCCodeFragment* base_finalize_fragment;
	ValaCCodeFragment* instance_init_fragment;
	ValaCCodeFragment* instance_finalize_fragment;
	ValaCCodeFragment* source_signal_marshaller_definition;
	ValaCCodeStruct* param_spec_struct;
	ValaCCodeStruct* closure_struct;
	ValaCCodeEnum* prop_enum;
	ValaCCodeFunction* function;
	ValaCCodeFragment* pre_statement_fragment;
	ValaSet* user_marshal_set;
	ValaSet* predefined_marshal_set;
	gint next_regex_id;
	gboolean in_constructor;
	gboolean in_static_or_class_context;
	gint next_coroutine_state;
	ValaDataType* void_type;
	ValaDataType* bool_type;
	ValaDataType* char_type;
	ValaDataType* uchar_type;
	ValaDataType* unichar_type;
	ValaDataType* short_type;
	ValaDataType* ushort_type;
	ValaDataType* int_type;
	ValaDataType* uint_type;
	ValaDataType* long_type;
	ValaDataType* ulong_type;
	ValaDataType* int8_type;
	ValaDataType* uint8_type;
	ValaDataType* int16_type;
	ValaDataType* uint16_type;
	ValaDataType* int32_type;
	ValaDataType* uint32_type;
	ValaDataType* int64_type;
	ValaDataType* uint64_type;
	ValaDataType* string_type;
	ValaDataType* regex_type;
	ValaDataType* float_type;
	ValaDataType* double_type;
	ValaTypeSymbol* gtype_type;
	ValaTypeSymbol* gobject_type;
	ValaErrorType* gerror_type;
	ValaClass* glist_type;
	ValaClass* gslist_type;
	ValaClass* gnode_type;
	ValaClass* gvaluearray_type;
	ValaTypeSymbol* gstringbuilder_type;
	ValaTypeSymbol* garray_type;
	ValaTypeSymbol* gbytearray_type;
	ValaTypeSymbol* gptrarray_type;
	ValaTypeSymbol* gthreadpool_type;
	ValaDataType* gquark_type;
	ValaStruct* gvalue_type;
	ValaClass* gvariant_type;
	ValaStruct* mutex_type;
	ValaTypeSymbol* type_module_type;
	ValaTypeSymbol* dbus_proxy_type;
	ValaTypeSymbol* dbus_object_type;
	gboolean in_plugin;
	char* module_init_param_name;
	gboolean gvaluecollector_h_needed;
	gboolean requires_array_free;
	gboolean requires_array_move;
	gboolean requires_array_length;
	gboolean requires_strcmp0;
	ValaSet* wrappers;
};

struct _ValaCCodeBaseModuleClass {
	ValaCodeGeneratorClass parent_class;
	void (*append_vala_array_free) (ValaCCodeBaseModule* self);
	void (*append_vala_array_move) (ValaCCodeBaseModule* self);
	void (*append_vala_array_length) (ValaCCodeBaseModule* self);
	gboolean (*generate_enum_declaration) (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_class_struct_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_struct_declaration) (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_delegate_declaration) (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_cparameters) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
	ValaCCodeExpression* (*get_dup_func_expression) (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
	char* (*append_struct_array_free) (ValaCCodeBaseModule* self, ValaStruct* st);
	ValaCCodeExpression* (*get_unref_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
	void (*append_local_free) (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
	char* (*get_delegate_target_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_delegate_target_cexpression) (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify);
	char* (*get_delegate_target_destroy_notify_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_ref_cexpression) (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
	void (*generate_class_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_interface_declaration) (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_method_declaration) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_error_domain_declaration) (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space);
	ValaCCodeExpression* (*deserialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*serialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*get_implicit_cast_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
	gboolean (*is_gobject_property) (ValaCCodeBaseModule* self, ValaProperty* prop);
	char* (*get_custom_creturn_type) (ValaCCodeBaseModule* self, ValaMethod* m);
	void (*generate_dynamic_method_wrapper) (ValaCCodeBaseModule* self, ValaDynamicMethod* method);
	gboolean (*method_has_wrapper) (ValaCCodeBaseModule* self, ValaMethod* method);
	ValaCCodeExpression* (*get_construct_property_assignment) (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
	ValaCCodeFunctionCall* (*get_param_spec) (ValaCCodeBaseModule* self, ValaProperty* prop);
	ValaCCodeFunctionCall* (*get_signal_creation) (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type);
	ValaCCodeFragment* (*register_dbus_info) (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable);
	char* (*get_dynamic_property_getter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_property_setter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_signal_cname) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_after_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_disconnect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	void (*generate_marshaller) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus);
	char* (*get_marshaller_function) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus);
	char* (*get_array_length_cname) (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
	char* (*get_parameter_array_length_cname) (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim);
	ValaCCodeExpression* (*get_array_length_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
	char* (*get_array_size_cname) (ValaCCodeBaseModule* self, const char* array_cname);
	ValaCCodeExpression* (*get_array_size_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr);
	void (*add_simple_check) (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
};

struct _ValaCCodeStructModule {
	ValaCCodeBaseModule parent_instance;
	ValaCCodeStructModulePrivate * priv;
};

struct _ValaCCodeStructModuleClass {
	ValaCCodeBaseModuleClass parent_class;
};

struct _ValaCCodeMethodModule {
	ValaCCodeStructModule parent_instance;
	ValaCCodeMethodModulePrivate * priv;
};

struct _ValaCCodeMethodModuleClass {
	ValaCCodeStructModuleClass parent_class;
	void (*generate_method_result_declaration) (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map);
	void (*generate_parameter) (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map);
};

struct _ValaCCodeControlFlowModule {
	ValaCCodeMethodModule parent_instance;
	ValaCCodeControlFlowModulePrivate * priv;
};

struct _ValaCCodeControlFlowModuleClass {
	ValaCCodeMethodModuleClass parent_class;
};


static gpointer vala_ccode_control_flow_module_parent_class = NULL;

GType vala_ccode_base_module_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_declaration_space_ref (gpointer instance);
void vala_ccode_declaration_space_unref (gpointer instance);
GParamSpec* vala_param_spec_ccode_declaration_space (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_value_set_ccode_declaration_space (GValue* value, gpointer v_object);
void vala_value_take_ccode_declaration_space (GValue* value, gpointer v_object);
gpointer vala_value_get_ccode_declaration_space (const GValue* value);
GType vala_ccode_declaration_space_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_base_module_emit_context_ref (gpointer instance);
void vala_ccode_base_module_emit_context_unref (gpointer instance);
GParamSpec* vala_ccode_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_ccode_base_module_value_set_emit_context (GValue* value, gpointer v_object);
void vala_ccode_base_module_value_take_emit_context (GValue* value, gpointer v_object);
gpointer vala_ccode_base_module_value_get_emit_context (const GValue* value);
GType vala_ccode_base_module_emit_context_get_type (void) G_GNUC_CONST;
GType vala_ccode_struct_module_get_type (void) G_GNUC_CONST;
GType vala_ccode_method_module_get_type (void) G_GNUC_CONST;
GType vala_ccode_control_flow_module_get_type (void) G_GNUC_CONST;
enum  {
	VALA_CCODE_CONTROL_FLOW_MODULE_DUMMY_PROPERTY
};
static void vala_ccode_control_flow_module_real_visit_if_statement (ValaCodeVisitor* base, ValaIfStatement* stmt);
void vala_ccode_base_module_create_temp_decl (ValaCCodeBaseModule* self, ValaStatement* stmt, ValaList* temp_vars);
static void vala_ccode_control_flow_module_visit_string_switch_statement (ValaCCodeControlFlowModule* self, ValaSwitchStatement* stmt);
ValaLocalVariable* vala_ccode_base_module_get_temp_variable (ValaCCodeBaseModule* self, ValaDataType* type, gboolean value_owned, ValaCodeNode* node_reference, gboolean init);
ValaCCodeExpression* vala_ccode_base_module_get_variable_cexpression (ValaCCodeBaseModule* self, const char* name);
gboolean vala_ccode_base_module_is_constant_ccode_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr);
static void vala_ccode_control_flow_module_real_visit_switch_statement (ValaCodeVisitor* base, ValaSwitchStatement* stmt);
static void vala_ccode_control_flow_module_real_visit_switch_label (ValaCodeVisitor* base, ValaSwitchLabel* label);
static void vala_ccode_control_flow_module_real_visit_loop (ValaCodeVisitor* base, ValaLoop* stmt);
ValaCodeContext* vala_ccode_base_module_get_context (ValaCCodeBaseModule* self);
void vala_ccode_declaration_space_add_include (ValaCCodeDeclarationSpace* self, const char* filename, gboolean local);
static void vala_ccode_control_flow_module_real_visit_foreach_statement (ValaCodeVisitor* base, ValaForeachStatement* stmt);
void vala_ccode_base_module_append_temp_decl (ValaCCodeBaseModule* self, ValaCCodeFragment* cfrag, ValaList* temp_vars);
ValaMethod* vala_ccode_base_module_get_current_method (ValaCCodeBaseModule* self);
void vala_ccode_base_module_add_simple_check (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
ValaCCodeExpression* vala_ccode_base_module_get_array_length_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
char* vala_ccode_base_module_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
ValaCCodeExpression* vala_ccode_base_module_transform_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
ValaArrayList* vala_ccode_base_module_get_temp_vars (ValaCCodeBaseModule* self);
ValaCCodeExpression* vala_ccode_base_module_convert_from_generic_pointer (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr, ValaDataType* actual_type);
ValaCCodeExpression* vala_ccode_base_module_get_ref_cexpression (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
gboolean vala_ccode_base_module_requires_destroy (ValaCCodeBaseModule* self, ValaDataType* type);
ValaCCodeExpression* vala_ccode_base_module_get_unref_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
static void vala_ccode_control_flow_module_real_visit_break_statement (ValaCodeVisitor* base, ValaBreakStatement* stmt);
void vala_ccode_base_module_create_local_free (ValaCCodeBaseModule* self, ValaCodeNode* stmt, gboolean stop_at_loop);
static void vala_ccode_control_flow_module_real_visit_continue_statement (ValaCodeVisitor* base, ValaContinueStatement* stmt);
ValaCCodeControlFlowModule* vala_ccode_control_flow_module_new (void);
ValaCCodeControlFlowModule* vala_ccode_control_flow_module_construct (GType object_type);
ValaCCodeMethodModule* vala_ccode_method_module_new (void);
ValaCCodeMethodModule* vala_ccode_method_module_construct (GType object_type);



static void vala_ccode_control_flow_module_real_visit_if_statement (ValaCodeVisitor* base, ValaIfStatement* stmt) {
	ValaCCodeControlFlowModule * self;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_emit ((ValaCodeNode*) vala_if_statement_get_true_statement (stmt), (ValaCodeGenerator*) self);
	if (vala_if_statement_get_false_statement (stmt) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_if_statement_get_false_statement (stmt), (ValaCodeGenerator*) self);
	}
	if (vala_if_statement_get_false_statement (stmt) != NULL) {
		ValaCCodeIfStatement* _tmp0_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_if_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_if_statement_get_condition (stmt))), VALA_CCODE_STATEMENT (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_if_statement_get_true_statement (stmt))), VALA_CCODE_STATEMENT (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_if_statement_get_false_statement (stmt))))));
		_vala_ccode_node_unref0 (_tmp0_);
	} else {
		ValaCCodeIfStatement* _tmp1_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp1_ = vala_ccode_if_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_if_statement_get_condition (stmt))), VALA_CCODE_STATEMENT (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_if_statement_get_true_statement (stmt))), NULL)));
		_vala_ccode_node_unref0 (_tmp1_);
	}
	vala_ccode_base_module_create_temp_decl ((ValaCCodeBaseModule*) self, (ValaStatement*) stmt, (ValaList*) vala_if_statement_get_condition (stmt)->temp_vars);
}


static gpointer _vala_ccode_node_ref0 (gpointer self) {
	return self ? vala_ccode_node_ref (self) : NULL;
}


static void vala_ccode_control_flow_module_visit_string_switch_statement (ValaCCodeControlFlowModule* self, ValaSwitchStatement* stmt) {
	ValaLocalVariable* temp_var;
	ValaCCodeExpression* ctemp;
	ValaCCodeAssignment* cinit;
	ValaCCodeConstant* czero;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* free_call;
	ValaCCodeFragment* cswitchblock;
	ValaCCodeConstant* _tmp2_;
	ValaCCodeBinaryExpression* _tmp3_;
	ValaCCodeBinaryExpression* cisnull;
	ValaCCodeIdentifier* _tmp4_;
	ValaCCodeFunctionCall* _tmp5_;
	ValaCCodeFunctionCall* cquark;
	ValaCCodeConstant* _tmp6_;
	ValaCCodeConditionalExpression* _tmp7_;
	ValaCCodeConditionalExpression* ccond;
	ValaLocalVariable* _tmp8_;
	gint label_count;
	ValaCCodeExpressionStatement* _tmp16_;
	ValaCCodeExpression* _tmp17_;
	ValaCCodeAssignment* _tmp18_;
	ValaCCodeExpressionStatement* _tmp19_;
	ValaList* default_statements;
	ValaCCodeStatement* ctopstmt;
	ValaCCodeIfStatement* coldif;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stmt != NULL);
	temp_var = vala_ccode_base_module_get_temp_variable ((ValaCCodeBaseModule*) self, vala_expression_get_value_type (vala_switch_statement_get_expression (stmt)), vala_data_type_get_value_owned (vala_expression_get_value_type (vala_switch_statement_get_expression (stmt))), (ValaCodeNode*) stmt, FALSE);
	vala_expression_add_temp_var (vala_switch_statement_get_expression (stmt), temp_var);
	ctemp = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) temp_var));
	cinit = vala_ccode_assignment_new (ctemp, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_switch_statement_get_expression (stmt))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE);
	czero = vala_ccode_constant_new ("0");
	free_call = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("g_free"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	vala_ccode_function_call_add_argument (free_call, ctemp);
	cswitchblock = vala_ccode_fragment_new ();
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cswitchblock);
	cisnull = (_tmp3_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp2_ = vala_ccode_constant_new ("NULL")), ctemp), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	cquark = (_tmp5_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new ("g_quark_from_string"))), _vala_ccode_node_unref0 (_tmp4_), _tmp5_);
	vala_ccode_function_call_add_argument (cquark, ctemp);
	ccond = (_tmp7_ = vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_constant_new ("0")), (ValaCCodeExpression*) cquark), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
	temp_var = (_tmp8_ = vala_ccode_base_module_get_temp_variable ((ValaCCodeBaseModule*) self, ((ValaCCodeBaseModule*) self)->gquark_type, TRUE, NULL, TRUE), _vala_code_node_unref0 (temp_var), _tmp8_);
	vala_expression_add_temp_var (vala_switch_statement_get_expression (stmt), temp_var);
	label_count = 0;
	{
		ValaList* _tmp9_;
		ValaIterator* _tmp10_;
		ValaIterator* _section_it;
		_section_it = (_tmp10_ = vala_iterable_iterator ((ValaIterable*) (_tmp9_ = vala_switch_statement_get_sections (stmt))), _vala_collection_object_unref0 (_tmp9_), _tmp10_);
		while (TRUE) {
			ValaSwitchSection* section;
			if (!vala_iterator_next (_section_it)) {
				break;
			}
			section = (ValaSwitchSection*) vala_iterator_get (_section_it);
			if (vala_switch_section_has_default_label (section)) {
				_vala_code_node_unref0 (section);
				continue;
			}
			{
				ValaList* _tmp11_;
				ValaIterator* _tmp12_;
				ValaIterator* _label_it;
				_label_it = (_tmp12_ = vala_iterable_iterator ((ValaIterable*) (_tmp11_ = vala_switch_section_get_labels (section))), _vala_collection_object_unref0 (_tmp11_), _tmp12_);
				while (TRUE) {
					ValaSwitchLabel* label;
					ValaCCodeExpression* cexpr;
					if (!vala_iterator_next (_label_it)) {
						break;
					}
					label = (ValaSwitchLabel*) vala_iterator_get (_label_it);
					cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_switch_label_get_expression (label))));
					if (vala_ccode_base_module_is_constant_ccode_expression ((ValaCCodeBaseModule*) self, cexpr)) {
						char* cname;
						char* _tmp13_;
						ValaCCodeDeclaration* _tmp14_;
						ValaCCodeDeclaration* _cdecl_;
						ValaCCodeVariableDeclarator* _tmp15_;
						cname = g_strdup_printf ("%s_label%d", vala_symbol_get_name ((ValaSymbol*) temp_var), label_count++);
						_cdecl_ = (_tmp14_ = vala_ccode_declaration_new (_tmp13_ = vala_data_type_get_cname (((ValaCCodeBaseModule*) self)->gquark_type)), _g_free0 (_tmp13_), _tmp14_);
						vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
						vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp15_ = vala_ccode_variable_declarator_new (cname, (ValaCCodeExpression*) czero, NULL)));
						_vala_ccode_node_unref0 (_tmp15_);
						vala_ccode_fragment_append (cswitchblock, (ValaCCodeNode*) _cdecl_);
						_vala_ccode_node_unref0 (_cdecl_);
						_g_free0 (cname);
					}
					_vala_ccode_node_unref0 (cexpr);
					_vala_code_node_unref0 (label);
				}
				_vala_collection_object_unref0 (_label_it);
			}
			_vala_code_node_unref0 (section);
		}
		_vala_collection_object_unref0 (_section_it);
	}
	vala_ccode_fragment_append (cswitchblock, (ValaCCodeNode*) (_tmp16_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cinit)));
	_vala_ccode_node_unref0 (_tmp16_);
	ctemp = (_tmp17_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) temp_var)), _vala_ccode_node_unref0 (ctemp), _tmp17_);
	cinit = (_tmp18_ = vala_ccode_assignment_new (ctemp, (ValaCCodeExpression*) ccond, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (cinit), _tmp18_);
	vala_ccode_fragment_append (cswitchblock, (ValaCCodeNode*) (_tmp19_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cinit)));
	_vala_ccode_node_unref0 (_tmp19_);
	vala_ccode_base_module_create_temp_decl ((ValaCCodeBaseModule*) self, (ValaStatement*) stmt, (ValaList*) vala_switch_statement_get_expression (stmt)->temp_vars);
	if (vala_data_type_get_value_owned (vala_expression_get_value_type (vala_switch_statement_get_expression (stmt)))) {
		ValaCCodeExpressionStatement* _tmp20_;
		vala_ccode_fragment_append (cswitchblock, (ValaCCodeNode*) (_tmp20_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) free_call)));
		_vala_ccode_node_unref0 (_tmp20_);
	}
	default_statements = NULL;
	label_count = 0;
	ctopstmt = NULL;
	coldif = NULL;
	{
		ValaList* _tmp21_;
		ValaIterator* _tmp22_;
		ValaIterator* _section_it;
		_section_it = (_tmp22_ = vala_iterable_iterator ((ValaIterable*) (_tmp21_ = vala_switch_statement_get_sections (stmt))), _vala_collection_object_unref0 (_tmp21_), _tmp22_);
		while (TRUE) {
			ValaSwitchSection* section;
			ValaCCodeBinaryExpression* cor;
			ValaCCodeBlock* cblock;
			ValaCCodeConstant* _tmp41_;
			ValaCCodeSwitchStatement* _tmp42_;
			ValaCCodeSwitchStatement* cswitch;
			ValaCCodeLabel* _tmp43_;
			ValaCCodeIfStatement* cif;
			ValaCCodeIfStatement* _tmp45_;
			if (!vala_iterator_next (_section_it)) {
				break;
			}
			section = (ValaSwitchSection*) vala_iterator_get (_section_it);
			if (vala_switch_section_has_default_label (section)) {
				ValaList* _tmp23_;
				default_statements = (_tmp23_ = vala_block_get_statements ((ValaBlock*) section), _vala_collection_object_unref0 (default_statements), _tmp23_);
				_vala_code_node_unref0 (section);
				continue;
			}
			cor = NULL;
			{
				ValaList* _tmp24_;
				ValaIterator* _tmp25_;
				ValaIterator* _label_it;
				_label_it = (_tmp25_ = vala_iterable_iterator ((ValaIterable*) (_tmp24_ = vala_switch_section_get_labels (section))), _vala_collection_object_unref0 (_tmp24_), _tmp25_);
				while (TRUE) {
					ValaSwitchLabel* label;
					ValaCCodeExpression* cexpr;
					ValaCCodeBinaryExpression* ccmp;
					if (!vala_iterator_next (_label_it)) {
						break;
					}
					label = (ValaSwitchLabel*) vala_iterator_get (_label_it);
					cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_switch_label_get_expression (label))));
					if (vala_ccode_base_module_is_constant_ccode_expression ((ValaCCodeBaseModule*) self, cexpr)) {
						char* _tmp26_;
						ValaCCodeIdentifier* _tmp27_;
						ValaCCodeIdentifier* cname;
						ValaCCodeBinaryExpression* ccondition;
						ValaCCodeIdentifier* _tmp28_;
						ValaCCodeFunctionCall* _tmp29_;
						ValaCCodeFunctionCall* ccall;
						ValaCCodeAssignment* _tmp30_;
						ValaCCodeExpression* _tmp31_;
						cname = (_tmp27_ = vala_ccode_identifier_new (_tmp26_ = g_strdup_printf ("%s_label%d", vala_symbol_get_name ((ValaSymbol*) temp_var), label_count++)), _g_free0 (_tmp26_), _tmp27_);
						ccondition = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, (ValaCCodeExpression*) czero, (ValaCCodeExpression*) cname);
						ccall = (_tmp29_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp28_ = vala_ccode_identifier_new ("g_quark_from_static_string"))), _vala_ccode_node_unref0 (_tmp28_), _tmp29_);
						cinit = (_tmp30_ = vala_ccode_assignment_new ((ValaCCodeExpression*) cname, (ValaCCodeExpression*) ccall, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (cinit), _tmp30_);
						vala_ccode_function_call_add_argument (ccall, cexpr);
						cexpr = (_tmp31_ = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) ccondition, (ValaCCodeExpression*) cname, (ValaCCodeExpression*) cinit), _vala_ccode_node_unref0 (cexpr), _tmp31_);
						_vala_ccode_node_unref0 (ccall);
						_vala_ccode_node_unref0 (ccondition);
						_vala_ccode_node_unref0 (cname);
					} else {
						ValaCCodeIdentifier* _tmp32_;
						ValaCCodeFunctionCall* _tmp33_;
						ValaCCodeFunctionCall* ccall;
						ValaCCodeExpression* _tmp34_;
						ccall = (_tmp33_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp32_ = vala_ccode_identifier_new ("g_quark_from_string"))), _vala_ccode_node_unref0 (_tmp32_), _tmp33_);
						vala_ccode_function_call_add_argument (ccall, cexpr);
						cexpr = (_tmp34_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cexpr), _tmp34_);
						_vala_ccode_node_unref0 (ccall);
					}
					ccmp = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, ctemp, cexpr);
					if (cor == NULL) {
						ValaCCodeBinaryExpression* _tmp35_;
						cor = (_tmp35_ = _vala_ccode_node_ref0 (ccmp), _vala_ccode_node_unref0 (cor), _tmp35_);
					} else {
						ValaCCodeBinaryExpression* _tmp36_;
						cor = (_tmp36_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cor, (ValaCCodeExpression*) ccmp), _vala_ccode_node_unref0 (cor), _tmp36_);
					}
					_vala_ccode_node_unref0 (ccmp);
					_vala_ccode_node_unref0 (cexpr);
					_vala_code_node_unref0 (label);
				}
				_vala_collection_object_unref0 (_label_it);
			}
			cblock = vala_ccode_block_new ();
			{
				ValaList* _tmp37_;
				ValaIterator* _tmp38_;
				ValaIterator* _body_stmt_it;
				_body_stmt_it = (_tmp38_ = vala_iterable_iterator ((ValaIterable*) (_tmp37_ = vala_block_get_statements ((ValaBlock*) section))), _vala_collection_object_unref0 (_tmp37_), _tmp38_);
				while (TRUE) {
					ValaCodeNode* body_stmt;
					if (!vala_iterator_next (_body_stmt_it)) {
						break;
					}
					body_stmt = (ValaCodeNode*) ((ValaStatement*) vala_iterator_get (_body_stmt_it));
					if (VALA_IS_CCODE_FRAGMENT (vala_code_node_get_ccodenode (body_stmt))) {
						{
							ValaList* _tmp39_;
							ValaIterator* _tmp40_;
							ValaIterator* _cstmt_it;
							_cstmt_it = (_tmp40_ = vala_iterable_iterator ((ValaIterable*) (_tmp39_ = vala_ccode_fragment_get_children (VALA_CCODE_FRAGMENT (vala_code_node_get_ccodenode (body_stmt))))), _vala_collection_object_unref0 (_tmp39_), _tmp40_);
							while (TRUE) {
								ValaCCodeNode* cstmt;
								if (!vala_iterator_next (_cstmt_it)) {
									break;
								}
								cstmt = (ValaCCodeNode*) vala_iterator_get (_cstmt_it);
								vala_ccode_block_add_statement (cblock, cstmt);
								_vala_ccode_node_unref0 (cstmt);
							}
							_vala_collection_object_unref0 (_cstmt_it);
						}
					} else {
						vala_ccode_block_add_statement (cblock, vala_code_node_get_ccodenode (body_stmt));
					}
					_vala_code_node_unref0 (body_stmt);
				}
				_vala_collection_object_unref0 (_body_stmt_it);
			}
			cswitch = (_tmp42_ = vala_ccode_switch_statement_new ((ValaCCodeExpression*) (_tmp41_ = vala_ccode_constant_new ("0"))), _vala_ccode_node_unref0 (_tmp41_), _tmp42_);
			vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) (_tmp43_ = vala_ccode_label_new ("default")));
			_vala_ccode_node_unref0 (_tmp43_);
			vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) cblock);
			cif = vala_ccode_if_statement_new ((ValaCCodeExpression*) cor, (ValaCCodeStatement*) cswitch, NULL);
			if (coldif != NULL) {
				vala_ccode_if_statement_set_false_statement (coldif, (ValaCCodeStatement*) cif);
			} else {
				ValaCCodeStatement* _tmp44_;
				ctopstmt = (_tmp44_ = _vala_ccode_node_ref0 ((ValaCCodeStatement*) cif), _vala_ccode_node_unref0 (ctopstmt), _tmp44_);
			}
			coldif = (_tmp45_ = _vala_ccode_node_ref0 (cif), _vala_ccode_node_unref0 (coldif), _tmp45_);
			_vala_ccode_node_unref0 (cif);
			_vala_ccode_node_unref0 (cswitch);
			_vala_ccode_node_unref0 (cblock);
			_vala_ccode_node_unref0 (cor);
			_vala_code_node_unref0 (section);
		}
		_vala_collection_object_unref0 (_section_it);
	}
	if (default_statements != NULL) {
		ValaCCodeBlock* cblock;
		ValaCCodeConstant* _tmp46_;
		ValaCCodeSwitchStatement* _tmp47_;
		ValaCCodeSwitchStatement* cswitch;
		ValaCCodeLabel* _tmp48_;
		cblock = vala_ccode_block_new ();
		{
			ValaIterator* _body_stmt_it;
			_body_stmt_it = vala_iterable_iterator ((ValaIterable*) default_statements);
			while (TRUE) {
				ValaCodeNode* body_stmt;
				if (!vala_iterator_next (_body_stmt_it)) {
					break;
				}
				body_stmt = (ValaCodeNode*) ((ValaStatement*) vala_iterator_get (_body_stmt_it));
				vala_ccode_block_add_statement (cblock, vala_code_node_get_ccodenode (body_stmt));
				_vala_code_node_unref0 (body_stmt);
			}
			_vala_collection_object_unref0 (_body_stmt_it);
		}
		cswitch = (_tmp47_ = vala_ccode_switch_statement_new ((ValaCCodeExpression*) (_tmp46_ = vala_ccode_constant_new ("0"))), _vala_ccode_node_unref0 (_tmp46_), _tmp47_);
		vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) (_tmp48_ = vala_ccode_label_new ("default")));
		_vala_ccode_node_unref0 (_tmp48_);
		vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) cblock);
		if (coldif == NULL) {
			ValaCCodeStatement* _tmp49_;
			ctopstmt = (_tmp49_ = _vala_ccode_node_ref0 ((ValaCCodeStatement*) cswitch), _vala_ccode_node_unref0 (ctopstmt), _tmp49_);
		} else {
			vala_ccode_if_statement_set_false_statement (coldif, (ValaCCodeStatement*) cswitch);
		}
		_vala_ccode_node_unref0 (cswitch);
		_vala_ccode_node_unref0 (cblock);
	}
	vala_ccode_fragment_append (cswitchblock, (ValaCCodeNode*) ctopstmt);
	_vala_ccode_node_unref0 (coldif);
	_vala_ccode_node_unref0 (ctopstmt);
	_vala_collection_object_unref0 (default_statements);
	_vala_ccode_node_unref0 (ccond);
	_vala_ccode_node_unref0 (cquark);
	_vala_ccode_node_unref0 (cisnull);
	_vala_ccode_node_unref0 (cswitchblock);
	_vala_ccode_node_unref0 (free_call);
	_vala_ccode_node_unref0 (czero);
	_vala_ccode_node_unref0 (cinit);
	_vala_ccode_node_unref0 (ctemp);
	_vala_code_node_unref0 (temp_var);
}


static void vala_ccode_control_flow_module_real_visit_switch_statement (ValaCodeVisitor* base, ValaSwitchStatement* stmt) {
	ValaCCodeControlFlowModule * self;
	ValaCCodeSwitchStatement* cswitch;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _section_it;
		_section_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_switch_statement_get_sections (stmt))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaSwitchSection* section;
			if (!vala_iterator_next (_section_it)) {
				break;
			}
			section = (ValaSwitchSection*) vala_iterator_get (_section_it);
			vala_code_node_emit ((ValaCodeNode*) section, (ValaCodeGenerator*) self);
			_vala_code_node_unref0 (section);
		}
		_vala_collection_object_unref0 (_section_it);
	}
	if (vala_data_type_compatible (vala_expression_get_value_type (vala_switch_statement_get_expression (stmt)), ((ValaCCodeBaseModule*) self)->string_type)) {
		vala_ccode_control_flow_module_visit_string_switch_statement (self, stmt);
		return;
	}
	cswitch = vala_ccode_switch_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_switch_statement_get_expression (stmt))));
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cswitch);
	{
		ValaList* _tmp2_;
		ValaIterator* _tmp3_;
		ValaIterator* _section_it;
		_section_it = (_tmp3_ = vala_iterable_iterator ((ValaIterable*) (_tmp2_ = vala_switch_statement_get_sections (stmt))), _vala_collection_object_unref0 (_tmp2_), _tmp3_);
		while (TRUE) {
			ValaSwitchSection* section;
			if (!vala_iterator_next (_section_it)) {
				break;
			}
			section = (ValaSwitchSection*) vala_iterator_get (_section_it);
			if (vala_switch_section_has_default_label (section)) {
				ValaCCodeLabel* _tmp4_;
				ValaCCodeBlock* cdefaultblock;
				vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) (_tmp4_ = vala_ccode_label_new ("default")));
				_vala_ccode_node_unref0 (_tmp4_);
				cdefaultblock = vala_ccode_block_new ();
				vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) cdefaultblock);
				{
					ValaList* _tmp5_;
					ValaIterator* _tmp6_;
					ValaIterator* _default_stmt_it;
					_default_stmt_it = (_tmp6_ = vala_iterable_iterator ((ValaIterable*) (_tmp5_ = vala_block_get_statements ((ValaBlock*) section))), _vala_collection_object_unref0 (_tmp5_), _tmp6_);
					while (TRUE) {
						ValaCodeNode* default_stmt;
						if (!vala_iterator_next (_default_stmt_it)) {
							break;
						}
						default_stmt = (ValaCodeNode*) ((ValaStatement*) vala_iterator_get (_default_stmt_it));
						vala_ccode_block_add_statement (cdefaultblock, vala_code_node_get_ccodenode (default_stmt));
						_vala_code_node_unref0 (default_stmt);
					}
					_vala_collection_object_unref0 (_default_stmt_it);
				}
				_vala_ccode_node_unref0 (cdefaultblock);
				_vala_code_node_unref0 (section);
				continue;
			}
			{
				ValaList* _tmp7_;
				ValaIterator* _tmp8_;
				ValaIterator* _label_it;
				_label_it = (_tmp8_ = vala_iterable_iterator ((ValaIterable*) (_tmp7_ = vala_switch_section_get_labels (section))), _vala_collection_object_unref0 (_tmp7_), _tmp8_);
				while (TRUE) {
					ValaSwitchLabel* label;
					ValaCCodeCaseStatement* _tmp9_;
					if (!vala_iterator_next (_label_it)) {
						break;
					}
					label = (ValaSwitchLabel*) vala_iterator_get (_label_it);
					vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, (ValaCCodeNode*) (_tmp9_ = vala_ccode_case_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_switch_label_get_expression (label))))));
					_vala_ccode_node_unref0 (_tmp9_);
					_vala_code_node_unref0 (label);
				}
				_vala_collection_object_unref0 (_label_it);
			}
			vala_ccode_block_add_statement ((ValaCCodeBlock*) cswitch, vala_code_node_get_ccodenode ((ValaCodeNode*) section));
			_vala_code_node_unref0 (section);
		}
		_vala_collection_object_unref0 (_section_it);
	}
	vala_ccode_base_module_create_temp_decl ((ValaCCodeBaseModule*) self, (ValaStatement*) stmt, (ValaList*) vala_switch_statement_get_expression (stmt)->temp_vars);
	_vala_ccode_node_unref0 (cswitch);
}


static void vala_ccode_control_flow_module_real_visit_switch_label (ValaCodeVisitor* base, ValaSwitchLabel* label) {
	ValaCCodeControlFlowModule * self;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (label != NULL);
	if (vala_switch_label_get_expression (label) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_switch_label_get_expression (label), (ValaCodeGenerator*) self);
		vala_code_visitor_visit_end_full_expression ((ValaCodeVisitor*) self, vala_switch_label_get_expression (label));
	}
}


static void vala_ccode_control_flow_module_real_visit_loop (ValaCodeVisitor* base, ValaLoop* stmt) {
	ValaCCodeControlFlowModule * self;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_emit ((ValaCodeNode*) vala_loop_get_body (stmt), (ValaCodeGenerator*) self);
	if (vala_code_context_get_profile (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self)) == VALA_PROFILE_GOBJECT) {
		ValaCCodeConstant* _tmp0_;
		ValaCCodeWhileStatement* _tmp1_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp1_ = vala_ccode_while_statement_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_constant_new ("TRUE")), VALA_CCODE_STATEMENT (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_loop_get_body (stmt))))));
		_vala_ccode_node_unref0 (_tmp1_);
		_vala_ccode_node_unref0 (_tmp0_);
	} else {
		ValaCCodeConstant* _tmp2_;
		ValaCCodeWhileStatement* _tmp3_;
		vala_ccode_declaration_space_add_include (((ValaCCodeBaseModule*) self)->source_declarations, "stdbool.h", FALSE);
		vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp3_ = vala_ccode_while_statement_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_constant_new ("true")), VALA_CCODE_STATEMENT (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_loop_get_body (stmt))))));
		_vala_ccode_node_unref0 (_tmp3_);
		_vala_ccode_node_unref0 (_tmp2_);
	}
}


static gpointer _vala_code_node_ref0 (gpointer self) {
	return self ? vala_code_node_ref (self) : NULL;
}


static void vala_ccode_control_flow_module_real_visit_foreach_statement (ValaCodeVisitor* base, ValaForeachStatement* stmt) {
	ValaCCodeControlFlowModule * self;
	ValaCCodeBlock* cblock;
	ValaCCodeFragment* cfrag;
	ValaLocalVariable* collection_backup;
	ValaDataType* collection_type;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp8_ = FALSE;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_emit ((ValaCodeNode*) vala_foreach_statement_get_body (stmt), (ValaCodeGenerator*) self);
	vala_code_visitor_visit_block ((ValaCodeVisitor*) self, (ValaBlock*) stmt);
	cblock = vala_ccode_block_new ();
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cblock);
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_base_module_append_temp_decl ((ValaCCodeBaseModule*) self, cfrag, (ValaList*) vala_foreach_statement_get_collection (stmt)->temp_vars);
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
	collection_backup = _vala_code_node_ref0 (vala_foreach_statement_get_collection_variable (stmt));
	collection_type = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) collection_backup));
	array_type = _vala_code_node_ref0 ((_tmp0_ = collection_type, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (array_type != NULL) {
		vala_array_type_set_fixed_length (array_type, FALSE);
	}
	if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
		_tmp1_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		char* _tmp2_;
		ValaCCodeExpression* _tmp3_;
		ValaCCodeAssignment* _tmp4_;
		ValaCCodeExpressionStatement* _tmp5_;
		vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp2_ = vala_data_type_get_cname (collection_type), vala_symbol_get_name ((ValaSymbol*) collection_backup), NULL);
		_g_free0 (_tmp2_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp5_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_assignment_new (_tmp3_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_foreach_statement_get_collection (stmt))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
		_vala_ccode_node_unref0 (_tmp5_);
		_vala_ccode_node_unref0 (_tmp4_);
		_vala_ccode_node_unref0 (_tmp3_);
	} else {
		char* _tmp6_;
		ValaCCodeDeclaration* _tmp7_;
		ValaCCodeDeclaration* ccoldecl;
		ValaCCodeVariableDeclarator* ccolvardecl;
		ccoldecl = (_tmp7_ = vala_ccode_declaration_new (_tmp6_ = vala_data_type_get_cname (collection_type)), _g_free0 (_tmp6_), _tmp7_);
		ccolvardecl = vala_ccode_variable_declarator_new (vala_symbol_get_name ((ValaSymbol*) collection_backup), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_foreach_statement_get_collection (stmt))), NULL);
		vala_ccode_node_set_line ((ValaCCodeNode*) ccolvardecl, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
		vala_ccode_declaration_add_declarator (ccoldecl, (ValaCCodeDeclarator*) ccolvardecl);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) ccoldecl);
		_vala_ccode_node_unref0 (ccolvardecl);
		_vala_ccode_node_unref0 (ccoldecl);
	}
	if (vala_code_node_get_tree_can_fail ((ValaCodeNode*) stmt)) {
		_tmp8_ = vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_foreach_statement_get_collection (stmt));
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		ValaCCodeFragment* _tmp9_;
		cfrag = (_tmp9_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (cfrag), _tmp9_);
		vala_ccode_base_module_add_simple_check ((ValaCCodeBaseModule*) self, (ValaCodeNode*) vala_foreach_statement_get_collection (stmt), cfrag, FALSE);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
	}
	if (VALA_IS_ARRAY_TYPE (vala_expression_get_value_type (vala_foreach_statement_get_collection (stmt)))) {
		ValaArrayType* _tmp10_;
		ValaCCodeExpression* array_len;
		gboolean _tmp11_ = FALSE;
		char* it_name;
		gboolean _tmp19_ = FALSE;
		ValaCCodeBlock* cbody;
		ValaCCodeExpression* _tmp21_;
		ValaCCodeExpression* _tmp22_;
		ValaCCodeExpression* _tmp23_;
		ValaCCodeExpression* element_expr;
		ValaDataType* element_type;
		ValaCCodeExpression* _tmp24_;
		ValaCCodeFragment* _tmp25_;
		gboolean _tmp26_ = FALSE;
		ValaCCodeExpression* _tmp45_;
		ValaCCodeBinaryExpression* _tmp46_;
		ValaCCodeBinaryExpression* ccond;
		ValaCCodeForStatement* cfor;
		ValaCCodeExpression* _tmp47_;
		ValaCCodeConstant* _tmp48_;
		ValaCCodeAssignment* _tmp49_;
		ValaCCodeExpression* _tmp50_;
		ValaCCodeExpression* _tmp51_;
		ValaCCodeConstant* _tmp52_;
		ValaCCodeBinaryExpression* _tmp53_;
		ValaCCodeAssignment* _tmp54_;
		array_type = (_tmp10_ = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_expression_get_value_type (vala_foreach_statement_get_collection (stmt)))), _vala_code_node_unref0 (array_type), _tmp10_);
		array_len = vala_ccode_base_module_get_array_length_cexpression ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_collection (stmt), -1);
		if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
			_tmp11_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
		} else {
			_tmp11_ = FALSE;
		}
		if (_tmp11_) {
			char* _tmp12_;
			char* _tmp13_;
			ValaCCodeExpression* _tmp14_;
			ValaCCodeAssignment* _tmp15_;
			ValaCCodeExpressionStatement* _tmp16_;
			vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, "int", _tmp12_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup), 1), NULL);
			_g_free0 (_tmp12_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp16_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp15_ = vala_ccode_assignment_new (_tmp14_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, _tmp13_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup), 1)), array_len, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp16_);
			_vala_ccode_node_unref0 (_tmp15_);
			_vala_ccode_node_unref0 (_tmp14_);
			_g_free0 (_tmp13_);
		} else {
			ValaCCodeDeclaration* clendecl;
			char* _tmp17_;
			ValaCCodeVariableDeclarator* _tmp18_;
			clendecl = vala_ccode_declaration_new ("int");
			vala_ccode_declaration_add_declarator (clendecl, (ValaCCodeDeclarator*) (_tmp18_ = vala_ccode_variable_declarator_new (_tmp17_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup), 1), array_len, NULL)));
			_vala_ccode_node_unref0 (_tmp18_);
			_g_free0 (_tmp17_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) clendecl);
			_vala_ccode_node_unref0 (clendecl);
		}
		it_name = g_strconcat (vala_foreach_statement_get_variable_name (stmt), "_it", NULL);
		if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
			_tmp19_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
		} else {
			_tmp19_ = FALSE;
		}
		if (_tmp19_) {
			vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, "int", it_name, NULL);
		} else {
			ValaCCodeDeclaration* citdecl;
			ValaCCodeVariableDeclarator* _tmp20_;
			citdecl = vala_ccode_declaration_new ("int");
			vala_ccode_declaration_add_declarator (citdecl, (ValaCCodeDeclarator*) (_tmp20_ = vala_ccode_variable_declarator_new (it_name, NULL, NULL)));
			_vala_ccode_node_unref0 (_tmp20_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) citdecl);
			_vala_ccode_node_unref0 (citdecl);
		}
		cbody = vala_ccode_block_new ();
		element_expr = (_tmp23_ = (ValaCCodeExpression*) vala_ccode_element_access_new (_tmp21_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup)), _tmp22_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name)), _vala_ccode_node_unref0 (_tmp22_), _vala_ccode_node_unref0 (_tmp21_), _tmp23_);
		element_type = vala_data_type_copy (vala_array_type_get_element_type (array_type));
		vala_data_type_set_value_owned (element_type, FALSE);
		element_expr = (_tmp24_ = vala_ccode_base_module_transform_expression ((ValaCCodeBaseModule*) self, element_expr, element_type, vala_foreach_statement_get_type_reference (stmt), NULL), _vala_ccode_node_unref0 (element_expr), _tmp24_);
		cfrag = (_tmp25_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (cfrag), _tmp25_);
		vala_ccode_base_module_append_temp_decl ((ValaCCodeBaseModule*) self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
		vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) cfrag);
		vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
		if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
			_tmp26_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
		} else {
			_tmp26_ = FALSE;
		}
		if (_tmp26_) {
			char* _tmp27_;
			ValaCCodeExpression* _tmp28_;
			ValaCCodeAssignment* _tmp29_;
			ValaCCodeExpressionStatement* _tmp30_;
			vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp27_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt)), vala_foreach_statement_get_variable_name (stmt), NULL);
			_g_free0 (_tmp27_);
			vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) (_tmp30_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp29_ = vala_ccode_assignment_new (_tmp28_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt)), element_expr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp30_);
			_vala_ccode_node_unref0 (_tmp29_);
			_vala_ccode_node_unref0 (_tmp28_);
		} else {
			char* _tmp31_;
			ValaCCodeDeclaration* _tmp32_;
			ValaCCodeDeclaration* _cdecl_;
			ValaCCodeVariableDeclarator* _tmp33_;
			_cdecl_ = (_tmp32_ = vala_ccode_declaration_new (_tmp31_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt))), _g_free0 (_tmp31_), _tmp32_);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp33_ = vala_ccode_variable_declarator_new (vala_foreach_statement_get_variable_name (stmt), element_expr, NULL)));
			_vala_ccode_node_unref0 (_tmp33_);
			vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) _cdecl_);
			_vala_ccode_node_unref0 (_cdecl_);
		}
		if (VALA_IS_ARRAY_TYPE (vala_foreach_statement_get_type_reference (stmt))) {
			ValaArrayType* inner_array_type;
			inner_array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_foreach_statement_get_type_reference (stmt)));
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp34_;
					_tmp34_ = TRUE;
					while (TRUE) {
						gboolean _tmp35_ = FALSE;
						if (!_tmp34_) {
							dim++;
						}
						_tmp34_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (inner_array_type))) {
							break;
						}
						if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
							_tmp35_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
						} else {
							_tmp35_ = FALSE;
						}
						if (_tmp35_) {
							char* _tmp36_;
							char* _tmp37_;
							ValaCCodeExpression* _tmp38_;
							ValaCCodeConstant* _tmp39_;
							ValaCCodeAssignment* _tmp40_;
							ValaCCodeExpressionStatement* _tmp41_;
							vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, "int", _tmp36_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt), dim), NULL);
							_g_free0 (_tmp36_);
							vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) (_tmp41_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp40_ = vala_ccode_assignment_new (_tmp38_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, _tmp37_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt), dim)), (ValaCCodeExpression*) (_tmp39_ = vala_ccode_constant_new ("-1")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
							_vala_ccode_node_unref0 (_tmp41_);
							_vala_ccode_node_unref0 (_tmp40_);
							_vala_ccode_node_unref0 (_tmp39_);
							_vala_ccode_node_unref0 (_tmp38_);
							_g_free0 (_tmp37_);
						} else {
							ValaCCodeDeclaration* _cdecl_;
							char* _tmp42_;
							ValaCCodeConstant* _tmp43_;
							ValaCCodeVariableDeclarator* _tmp44_;
							_cdecl_ = vala_ccode_declaration_new ("int");
							vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp44_ = vala_ccode_variable_declarator_new (_tmp42_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt), dim), (ValaCCodeExpression*) (_tmp43_ = vala_ccode_constant_new ("-1")), NULL)));
							_vala_ccode_node_unref0 (_tmp44_);
							_vala_ccode_node_unref0 (_tmp43_);
							_g_free0 (_tmp42_);
							vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) _cdecl_);
							_vala_ccode_node_unref0 (_cdecl_);
						}
					}
				}
			}
			_vala_code_node_unref0 (inner_array_type);
		}
		vala_ccode_block_add_statement (cbody, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_foreach_statement_get_body (stmt)));
		ccond = (_tmp46_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_LESS_THAN, _tmp45_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), array_len), _vala_ccode_node_unref0 (_tmp45_), _tmp46_);
		cfor = vala_ccode_for_statement_new ((ValaCCodeExpression*) ccond, (ValaCCodeStatement*) cbody);
		vala_ccode_for_statement_add_initializer (cfor, (ValaCCodeExpression*) (_tmp49_ = vala_ccode_assignment_new (_tmp47_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), (ValaCCodeExpression*) (_tmp48_ = vala_ccode_constant_new ("0")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp49_);
		_vala_ccode_node_unref0 (_tmp48_);
		_vala_ccode_node_unref0 (_tmp47_);
		vala_ccode_for_statement_add_iterator (cfor, (ValaCCodeExpression*) (_tmp54_ = vala_ccode_assignment_new (_tmp50_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), (ValaCCodeExpression*) (_tmp53_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, _tmp51_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), (ValaCCodeExpression*) (_tmp52_ = vala_ccode_constant_new ("1")))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp54_);
		_vala_ccode_node_unref0 (_tmp53_);
		_vala_ccode_node_unref0 (_tmp52_);
		_vala_ccode_node_unref0 (_tmp51_);
		_vala_ccode_node_unref0 (_tmp50_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfor);
		_vala_ccode_node_unref0 (cfor);
		_vala_ccode_node_unref0 (ccond);
		_vala_code_node_unref0 (element_type);
		_vala_ccode_node_unref0 (element_expr);
		_vala_ccode_node_unref0 (cbody);
		_g_free0 (it_name);
		_vala_ccode_node_unref0 (array_len);
	} else {
		gboolean _tmp55_ = FALSE;
		ValaObjectType* _tmp56_;
		gboolean _tmp57_;
		if ((_tmp57_ = vala_data_type_compatible (vala_expression_get_value_type (vala_foreach_statement_get_collection (stmt)), (ValaDataType*) (_tmp56_ = vala_object_type_new ((ValaObjectTypeSymbol*) ((ValaCCodeBaseModule*) self)->glist_type))), _vala_code_node_unref0 (_tmp56_), _tmp57_)) {
			_tmp55_ = TRUE;
		} else {
			ValaObjectType* _tmp58_;
			_tmp55_ = vala_data_type_compatible (vala_expression_get_value_type (vala_foreach_statement_get_collection (stmt)), (ValaDataType*) (_tmp58_ = vala_object_type_new ((ValaObjectTypeSymbol*) ((ValaCCodeBaseModule*) self)->gslist_type)));
			_vala_code_node_unref0 (_tmp58_);
		}
		if (_tmp55_) {
			char* it_name;
			gboolean _tmp59_ = FALSE;
			ValaCCodeBlock* cbody;
			ValaCCodeExpression* _tmp63_;
			ValaCCodeExpression* _tmp64_;
			ValaCCodeExpression* element_expr;
			ValaList* _tmp65_;
			gboolean _tmp66_;
			ValaList* _tmp67_;
			ValaDataType* _tmp68_;
			ValaDataType* _tmp69_;
			ValaDataType* element_data_type;
			ValaCCodeExpression* _tmp70_;
			ValaCCodeExpression* _tmp71_;
			ValaCCodeFragment* _tmp72_;
			gboolean _tmp73_ = FALSE;
			ValaCCodeExpression* _tmp80_;
			ValaCCodeConstant* _tmp81_;
			ValaCCodeBinaryExpression* _tmp82_;
			ValaCCodeBinaryExpression* ccond;
			ValaCCodeForStatement* cfor;
			ValaCCodeExpression* _tmp83_;
			ValaCCodeExpression* _tmp84_;
			ValaCCodeAssignment* _tmp85_;
			ValaCCodeExpression* _tmp86_;
			ValaCCodeExpression* _tmp87_;
			ValaCCodeMemberAccess* _tmp88_;
			ValaCCodeAssignment* _tmp89_;
			it_name = g_strdup_printf ("%s_it", vala_foreach_statement_get_variable_name (stmt));
			if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
				_tmp59_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
			} else {
				_tmp59_ = FALSE;
			}
			if (_tmp59_) {
				char* _tmp60_;
				vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp60_ = vala_data_type_get_cname (collection_type), it_name, NULL);
				_g_free0 (_tmp60_);
			} else {
				char* _tmp61_;
				ValaCCodeDeclaration* _tmp62_;
				ValaCCodeDeclaration* citdecl;
				ValaCCodeVariableDeclarator* citvardecl;
				citdecl = (_tmp62_ = vala_ccode_declaration_new (_tmp61_ = vala_data_type_get_cname (collection_type)), _g_free0 (_tmp61_), _tmp62_);
				citvardecl = vala_ccode_variable_declarator_new (it_name, NULL, NULL);
				vala_ccode_node_set_line ((ValaCCodeNode*) citvardecl, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
				vala_ccode_declaration_add_declarator (citdecl, (ValaCCodeDeclarator*) citvardecl);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) citdecl);
				_vala_ccode_node_unref0 (citvardecl);
				_vala_ccode_node_unref0 (citdecl);
			}
			cbody = vala_ccode_block_new ();
			element_expr = (_tmp64_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (_tmp63_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), "data"), _vala_ccode_node_unref0 (_tmp63_), _tmp64_);
			if ((_tmp66_ = vala_collection_get_size ((ValaCollection*) (_tmp65_ = vala_data_type_get_type_arguments (collection_type))) != 1, _vala_collection_object_unref0 (_tmp65_), _tmp66_)) {
				vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) stmt), "internal error: missing generic type argument");
				vala_code_node_set_error ((ValaCodeNode*) stmt, TRUE);
				_vala_ccode_node_unref0 (element_expr);
				_vala_ccode_node_unref0 (cbody);
				_g_free0 (it_name);
				_vala_code_node_unref0 (array_type);
				_vala_code_node_unref0 (collection_type);
				_vala_code_node_unref0 (collection_backup);
				_vala_ccode_node_unref0 (cfrag);
				_vala_ccode_node_unref0 (cblock);
				return;
			}
			element_data_type = (_tmp69_ = vala_data_type_copy (_tmp68_ = (ValaDataType*) vala_list_get (_tmp67_ = vala_data_type_get_type_arguments (collection_type), 0)), _vala_code_node_unref0 (_tmp68_), _vala_collection_object_unref0 (_tmp67_), _tmp69_);
			vala_data_type_set_value_owned (element_data_type, FALSE);
			element_expr = (_tmp70_ = vala_ccode_base_module_convert_from_generic_pointer ((ValaCCodeBaseModule*) self, element_expr, element_data_type), _vala_ccode_node_unref0 (element_expr), _tmp70_);
			element_expr = (_tmp71_ = vala_ccode_base_module_transform_expression ((ValaCCodeBaseModule*) self, element_expr, element_data_type, vala_foreach_statement_get_type_reference (stmt), NULL), _vala_ccode_node_unref0 (element_expr), _tmp71_);
			cfrag = (_tmp72_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (cfrag), _tmp72_);
			vala_ccode_base_module_append_temp_decl ((ValaCCodeBaseModule*) self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
			vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) cfrag);
			vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
			if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
				_tmp73_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
			} else {
				_tmp73_ = FALSE;
			}
			if (_tmp73_) {
				char* _tmp74_;
				ValaCCodeExpression* _tmp75_;
				ValaCCodeAssignment* _tmp76_;
				ValaCCodeExpressionStatement* _tmp77_;
				vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp74_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt)), vala_foreach_statement_get_variable_name (stmt), NULL);
				_g_free0 (_tmp74_);
				vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) (_tmp77_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp76_ = vala_ccode_assignment_new (_tmp75_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt)), element_expr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp77_);
				_vala_ccode_node_unref0 (_tmp76_);
				_vala_ccode_node_unref0 (_tmp75_);
			} else {
				char* _tmp78_;
				ValaCCodeDeclaration* _tmp79_;
				ValaCCodeDeclaration* _cdecl_;
				ValaCCodeVariableDeclarator* cvardecl;
				_cdecl_ = (_tmp79_ = vala_ccode_declaration_new (_tmp78_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt))), _g_free0 (_tmp78_), _tmp79_);
				cvardecl = vala_ccode_variable_declarator_new (vala_foreach_statement_get_variable_name (stmt), element_expr, NULL);
				vala_ccode_node_set_line ((ValaCCodeNode*) cvardecl, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
				vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) cvardecl);
				vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) _cdecl_);
				_vala_ccode_node_unref0 (cvardecl);
				_vala_ccode_node_unref0 (_cdecl_);
			}
			vala_ccode_block_add_statement (cbody, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_foreach_statement_get_body (stmt)));
			ccond = (_tmp82_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, _tmp80_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), (ValaCCodeExpression*) (_tmp81_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp81_), _vala_ccode_node_unref0 (_tmp80_), _tmp82_);
			cfor = vala_ccode_for_statement_new ((ValaCCodeExpression*) ccond, (ValaCCodeStatement*) cbody);
			vala_ccode_for_statement_add_initializer (cfor, (ValaCCodeExpression*) (_tmp85_ = vala_ccode_assignment_new (_tmp83_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), _tmp84_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup)), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
			_vala_ccode_node_unref0 (_tmp85_);
			_vala_ccode_node_unref0 (_tmp84_);
			_vala_ccode_node_unref0 (_tmp83_);
			vala_ccode_for_statement_add_iterator (cfor, (ValaCCodeExpression*) (_tmp89_ = vala_ccode_assignment_new (_tmp86_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), (ValaCCodeExpression*) (_tmp88_ = vala_ccode_member_access_new_pointer (_tmp87_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, it_name), "next")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
			_vala_ccode_node_unref0 (_tmp89_);
			_vala_ccode_node_unref0 (_tmp88_);
			_vala_ccode_node_unref0 (_tmp87_);
			_vala_ccode_node_unref0 (_tmp86_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfor);
			_vala_ccode_node_unref0 (cfor);
			_vala_ccode_node_unref0 (ccond);
			_vala_code_node_unref0 (element_data_type);
			_vala_ccode_node_unref0 (element_expr);
			_vala_ccode_node_unref0 (cbody);
			_g_free0 (it_name);
		} else {
			ValaObjectType* _tmp90_;
			gboolean _tmp91_;
			if ((_tmp91_ = vala_data_type_compatible (vala_expression_get_value_type (vala_foreach_statement_get_collection (stmt)), (ValaDataType*) (_tmp90_ = vala_object_type_new ((ValaObjectTypeSymbol*) ((ValaCCodeBaseModule*) self)->gvaluearray_type))), _vala_code_node_unref0 (_tmp90_), _tmp91_)) {
				char* arr_index;
				gboolean _tmp92_ = FALSE;
				ValaCCodeBlock* cbody;
				ValaCCodeIdentifier* _tmp96_;
				ValaCCodeFunctionCall* _tmp97_;
				ValaCCodeFunctionCall* get_item;
				ValaCCodeExpression* _tmp98_;
				ValaCCodeExpression* _tmp99_;
				ValaCCodeExpression* element_expr;
				ValaCCodeFragment* _tmp102_;
				gboolean _tmp103_ = FALSE;
				ValaCCodeExpression* _tmp110_;
				ValaCCodeExpression* _tmp111_;
				ValaCCodeMemberAccess* _tmp112_;
				ValaCCodeBinaryExpression* _tmp113_;
				ValaCCodeBinaryExpression* ccond;
				ValaCCodeForStatement* cfor;
				ValaCCodeExpression* _tmp114_;
				ValaCCodeConstant* _tmp115_;
				ValaCCodeAssignment* _tmp116_;
				ValaCCodeExpression* _tmp117_;
				ValaCCodeExpression* _tmp118_;
				ValaCCodeConstant* _tmp119_;
				ValaCCodeBinaryExpression* _tmp120_;
				ValaCCodeAssignment* _tmp121_;
				arr_index = g_strdup_printf ("%s_index", vala_foreach_statement_get_variable_name (stmt));
				if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
					_tmp92_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
				} else {
					_tmp92_ = FALSE;
				}
				if (_tmp92_) {
					char* _tmp93_;
					vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp93_ = vala_data_type_get_cname (((ValaCCodeBaseModule*) self)->uint_type), arr_index, NULL);
					_g_free0 (_tmp93_);
				} else {
					char* _tmp94_;
					ValaCCodeDeclaration* _tmp95_;
					ValaCCodeDeclaration* citdecl;
					ValaCCodeVariableDeclarator* citvardecl;
					citdecl = (_tmp95_ = vala_ccode_declaration_new (_tmp94_ = vala_data_type_get_cname (((ValaCCodeBaseModule*) self)->uint_type)), _g_free0 (_tmp94_), _tmp95_);
					citvardecl = vala_ccode_variable_declarator_new (arr_index, NULL, NULL);
					vala_ccode_node_set_line ((ValaCCodeNode*) citvardecl, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
					vala_ccode_declaration_add_declarator (citdecl, (ValaCCodeDeclarator*) citvardecl);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) citdecl);
					_vala_ccode_node_unref0 (citvardecl);
					_vala_ccode_node_unref0 (citdecl);
				}
				cbody = vala_ccode_block_new ();
				get_item = (_tmp97_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp96_ = vala_ccode_identifier_new ("g_value_array_get_nth"))), _vala_ccode_node_unref0 (_tmp96_), _tmp97_);
				vala_ccode_function_call_add_argument (get_item, _tmp98_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup)));
				_vala_ccode_node_unref0 (_tmp98_);
				vala_ccode_function_call_add_argument (get_item, _tmp99_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, arr_index));
				_vala_ccode_node_unref0 (_tmp99_);
				element_expr = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) get_item);
				if (vala_data_type_get_value_owned (vala_foreach_statement_get_type_reference (stmt))) {
					ValaStructValueType* _tmp100_;
					ValaCCodeExpression* _tmp101_;
					element_expr = (_tmp101_ = vala_ccode_base_module_get_ref_cexpression ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_type_reference (stmt), element_expr, NULL, (ValaCodeNode*) (_tmp100_ = vala_struct_value_type_new (((ValaCCodeBaseModule*) self)->gvalue_type))), _vala_ccode_node_unref0 (element_expr), _tmp101_);
					_vala_code_node_unref0 (_tmp100_);
				}
				cfrag = (_tmp102_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (cfrag), _tmp102_);
				vala_ccode_base_module_append_temp_decl ((ValaCCodeBaseModule*) self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
				vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) cfrag);
				vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars ((ValaCCodeBaseModule*) self));
				if (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self) != NULL) {
					_tmp103_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method ((ValaCCodeBaseModule*) self));
				} else {
					_tmp103_ = FALSE;
				}
				if (_tmp103_) {
					char* _tmp104_;
					ValaCCodeExpression* _tmp105_;
					ValaCCodeAssignment* _tmp106_;
					ValaCCodeExpressionStatement* _tmp107_;
					vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, _tmp104_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt)), vala_foreach_statement_get_variable_name (stmt), NULL);
					_g_free0 (_tmp104_);
					vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) (_tmp107_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp106_ = vala_ccode_assignment_new (_tmp105_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_foreach_statement_get_variable_name (stmt)), element_expr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
					_vala_ccode_node_unref0 (_tmp107_);
					_vala_ccode_node_unref0 (_tmp106_);
					_vala_ccode_node_unref0 (_tmp105_);
				} else {
					char* _tmp108_;
					ValaCCodeDeclaration* _tmp109_;
					ValaCCodeDeclaration* _cdecl_;
					ValaCCodeVariableDeclarator* cvardecl;
					_cdecl_ = (_tmp109_ = vala_ccode_declaration_new (_tmp108_ = vala_data_type_get_cname (vala_foreach_statement_get_type_reference (stmt))), _g_free0 (_tmp108_), _tmp109_);
					cvardecl = vala_ccode_variable_declarator_new (vala_foreach_statement_get_variable_name (stmt), element_expr, NULL);
					vala_ccode_node_set_line ((ValaCCodeNode*) cvardecl, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) cvardecl);
					vala_ccode_block_add_statement (cbody, (ValaCCodeNode*) _cdecl_);
					_vala_ccode_node_unref0 (cvardecl);
					_vala_ccode_node_unref0 (_cdecl_);
				}
				vala_ccode_block_add_statement (cbody, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_foreach_statement_get_body (stmt)));
				ccond = (_tmp113_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_LESS_THAN, _tmp110_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, arr_index), (ValaCCodeExpression*) (_tmp112_ = vala_ccode_member_access_new_pointer (_tmp111_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) collection_backup)), "n_values"))), _vala_ccode_node_unref0 (_tmp112_), _vala_ccode_node_unref0 (_tmp111_), _vala_ccode_node_unref0 (_tmp110_), _tmp113_);
				cfor = vala_ccode_for_statement_new ((ValaCCodeExpression*) ccond, (ValaCCodeStatement*) cbody);
				vala_ccode_for_statement_add_initializer (cfor, (ValaCCodeExpression*) (_tmp116_ = vala_ccode_assignment_new (_tmp114_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, arr_index), (ValaCCodeExpression*) (_tmp115_ = vala_ccode_constant_new ("0")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp116_);
				_vala_ccode_node_unref0 (_tmp115_);
				_vala_ccode_node_unref0 (_tmp114_);
				vala_ccode_for_statement_add_iterator (cfor, (ValaCCodeExpression*) (_tmp121_ = vala_ccode_assignment_new (_tmp117_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, arr_index), (ValaCCodeExpression*) (_tmp120_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, _tmp118_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, arr_index), (ValaCCodeExpression*) (_tmp119_ = vala_ccode_constant_new ("1")))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp121_);
				_vala_ccode_node_unref0 (_tmp120_);
				_vala_ccode_node_unref0 (_tmp119_);
				_vala_ccode_node_unref0 (_tmp118_);
				_vala_ccode_node_unref0 (_tmp117_);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfor);
				_vala_ccode_node_unref0 (cfor);
				_vala_ccode_node_unref0 (ccond);
				_vala_ccode_node_unref0 (element_expr);
				_vala_ccode_node_unref0 (get_item);
				_vala_ccode_node_unref0 (cbody);
				_g_free0 (arr_index);
			}
		}
	}
	{
		ValaList* _tmp122_;
		ValaIterator* _tmp123_;
		ValaIterator* _local_it;
		_local_it = (_tmp123_ = vala_iterable_iterator ((ValaIterable*) (_tmp122_ = vala_block_get_local_variables ((ValaBlock*) stmt))), _vala_collection_object_unref0 (_tmp122_), _tmp123_);
		while (TRUE) {
			ValaLocalVariable* local;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			if (vala_ccode_base_module_requires_destroy ((ValaCCodeBaseModule*) self, vala_variable_get_variable_type ((ValaVariable*) local))) {
				ValaMemberAccess* ma;
				ValaCCodeExpression* _tmp124_;
				ValaCCodeExpression* _tmp125_;
				ValaCCodeExpressionStatement* _tmp126_;
				ValaCCodeExpressionStatement* cunref;
				ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
				cunref = (_tmp126_ = vala_ccode_expression_statement_new (_tmp125_ = vala_ccode_base_module_get_unref_expression ((ValaCCodeBaseModule*) self, _tmp124_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE)), _vala_ccode_node_unref0 (_tmp125_), _vala_ccode_node_unref0 (_tmp124_), _tmp126_);
				vala_ccode_node_set_line ((ValaCCodeNode*) cunref, vala_ccode_node_get_line ((ValaCCodeNode*) cblock));
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cunref);
				_vala_ccode_node_unref0 (cunref);
				_vala_code_node_unref0 (ma);
			}
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	_vala_code_node_unref0 (array_type);
	_vala_code_node_unref0 (collection_type);
	_vala_code_node_unref0 (collection_backup);
	_vala_ccode_node_unref0 (cfrag);
	_vala_ccode_node_unref0 (cblock);
}


static void vala_ccode_control_flow_module_real_visit_break_statement (ValaCodeVisitor* base, ValaBreakStatement* stmt) {
	ValaCCodeControlFlowModule * self;
	ValaCCodeBreakStatement* _tmp0_;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_break_statement_new ()));
	_vala_ccode_node_unref0 (_tmp0_);
	vala_ccode_base_module_create_local_free ((ValaCCodeBaseModule*) self, (ValaCodeNode*) stmt, TRUE);
}


static void vala_ccode_control_flow_module_real_visit_continue_statement (ValaCodeVisitor* base, ValaContinueStatement* stmt) {
	ValaCCodeControlFlowModule * self;
	ValaCCodeContinueStatement* _tmp0_;
	self = (ValaCCodeControlFlowModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_continue_statement_new ()));
	_vala_ccode_node_unref0 (_tmp0_);
	vala_ccode_base_module_create_local_free ((ValaCCodeBaseModule*) self, (ValaCodeNode*) stmt, TRUE);
}


ValaCCodeControlFlowModule* vala_ccode_control_flow_module_construct (GType object_type) {
	ValaCCodeControlFlowModule* self = NULL;
	self = (ValaCCodeControlFlowModule*) vala_ccode_method_module_construct (object_type);
	return self;
}


ValaCCodeControlFlowModule* vala_ccode_control_flow_module_new (void) {
	return vala_ccode_control_flow_module_construct (VALA_TYPE_CCODE_CONTROL_FLOW_MODULE);
}


static void vala_ccode_control_flow_module_class_init (ValaCCodeControlFlowModuleClass * klass) {
	vala_ccode_control_flow_module_parent_class = g_type_class_peek_parent (klass);
	VALA_CODE_VISITOR_CLASS (klass)->visit_if_statement = vala_ccode_control_flow_module_real_visit_if_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_switch_statement = vala_ccode_control_flow_module_real_visit_switch_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_switch_label = vala_ccode_control_flow_module_real_visit_switch_label;
	VALA_CODE_VISITOR_CLASS (klass)->visit_loop = vala_ccode_control_flow_module_real_visit_loop;
	VALA_CODE_VISITOR_CLASS (klass)->visit_foreach_statement = vala_ccode_control_flow_module_real_visit_foreach_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_break_statement = vala_ccode_control_flow_module_real_visit_break_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_continue_statement = vala_ccode_control_flow_module_real_visit_continue_statement;
}


static void vala_ccode_control_flow_module_instance_init (ValaCCodeControlFlowModule * self) {
}


GType vala_ccode_control_flow_module_get_type (void) {
	static volatile gsize vala_ccode_control_flow_module_type_id__volatile = 0;
	if (g_once_init_enter (&vala_ccode_control_flow_module_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ValaCCodeControlFlowModuleClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_ccode_control_flow_module_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaCCodeControlFlowModule), 0, (GInstanceInitFunc) vala_ccode_control_flow_module_instance_init, NULL };
		GType vala_ccode_control_flow_module_type_id;
		vala_ccode_control_flow_module_type_id = g_type_register_static (VALA_TYPE_CCODE_METHOD_MODULE, "ValaCCodeControlFlowModule", &g_define_type_info, 0);
		g_once_init_leave (&vala_ccode_control_flow_module_type_id__volatile, vala_ccode_control_flow_module_type_id);
	}
	return vala_ccode_control_flow_module_type_id__volatile;
}




