/* valaccodebasemodule.c generated by valac, the Vala compiler
 * generated from valaccodebasemodule.vala, do not modify */

/* valaccodebasemodule.vala
 *
 * Copyright (C) 2006-2010  Jürg Billeter
 * Copyright (C) 2006-2008  Raffaele Sandrini
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 * 	Raffaele Sandrini <raffaele@sandrini.ch>
 */

#include <glib.h>
#include <glib-object.h>
#include <vala.h>
#include <valagee.h>
#include <valaccode.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <float.h>
#include <math.h>
#include <gobject/gvaluecollector.h>


#define VALA_TYPE_CCODE_BASE_MODULE (vala_ccode_base_module_get_type ())
#define VALA_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModule))
#define VALA_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))
#define VALA_IS_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_IS_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_CCODE_BASE_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))

typedef struct _ValaCCodeBaseModule ValaCCodeBaseModule;
typedef struct _ValaCCodeBaseModuleClass ValaCCodeBaseModuleClass;
typedef struct _ValaCCodeBaseModulePrivate ValaCCodeBaseModulePrivate;

#define VALA_TYPE_CCODE_DECLARATION_SPACE (vala_ccode_declaration_space_get_type ())
#define VALA_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpace))
#define VALA_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))
#define VALA_IS_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_IS_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_CCODE_DECLARATION_SPACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))

typedef struct _ValaCCodeDeclarationSpace ValaCCodeDeclarationSpace;
typedef struct _ValaCCodeDeclarationSpaceClass ValaCCodeDeclarationSpaceClass;

#define VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT (vala_ccode_base_module_emit_context_get_type ())
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContext))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))

typedef struct _ValaCCodeBaseModuleEmitContext ValaCCodeBaseModuleEmitContext;
typedef struct _ValaCCodeBaseModuleEmitContextClass ValaCCodeBaseModuleEmitContextClass;
#define _vala_code_context_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_context_unref (var), NULL)))
#define _vala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_node_unref (var), NULL)))
#define _vala_ccode_base_module_emit_context_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_base_module_emit_context_unref (var), NULL)))
#define _vala_collection_object_unref0(var) ((var == NULL) ? NULL : (var = (vala_collection_object_unref (var), NULL)))
#define _vala_ccode_declaration_space_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_declaration_space_unref (var), NULL)))
#define _vala_ccode_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_node_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _vala_source_file_unref0(var) ((var == NULL) ? NULL : (var = (vala_source_file_unref (var), NULL)))
#define _fclose0(var) ((var == NULL) ? NULL : (var = (fclose (var), NULL)))
typedef struct _ValaCCodeDeclarationSpacePrivate ValaCCodeDeclarationSpacePrivate;
#define _vala_ccode_writer_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_writer_unref (var), NULL)))
#define _vala_comment_unref0(var) ((var == NULL) ? NULL : (var = (vala_comment_unref (var), NULL)))
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _ValaCCodeBaseModuleEmitContextPrivate ValaCCodeBaseModuleEmitContextPrivate;
typedef struct _ValaCCodeBaseModuleParamSpecEmitContext ValaCCodeBaseModuleParamSpecEmitContext;

struct _ValaCCodeBaseModule {
	ValaCodeGenerator parent_instance;
	ValaCCodeBaseModulePrivate * priv;
	ValaSymbol* root_symbol;
	ValaCCodeBaseModuleEmitContext* emit_context;
	ValaCCodeDeclarationSpace* header_declarations;
	ValaCCodeDeclarationSpace* internal_header_declarations;
	ValaCCodeDeclarationSpace* source_declarations;
	ValaCCodeFragment* source_signal_marshaller_declaration;
	ValaCCodeFragment* source_type_member_definition;
	ValaCCodeFragment* class_init_fragment;
	ValaCCodeFragment* base_init_fragment;
	ValaCCodeFragment* class_finalize_fragment;
	ValaCCodeFragment* base_finalize_fragment;
	ValaCCodeFragment* instance_init_fragment;
	ValaCCodeFragment* instance_finalize_fragment;
	ValaCCodeFragment* source_signal_marshaller_definition;
	ValaCCodeStruct* param_spec_struct;
	ValaCCodeStruct* closure_struct;
	ValaCCodeEnum* prop_enum;
	ValaCCodeFunction* function;
	ValaCCodeFragment* pre_statement_fragment;
	ValaSet* user_marshal_set;
	ValaSet* predefined_marshal_set;
	gint next_regex_id;
	gboolean in_constructor;
	gboolean in_static_or_class_context;
	gint next_coroutine_state;
	ValaDataType* void_type;
	ValaDataType* bool_type;
	ValaDataType* char_type;
	ValaDataType* uchar_type;
	ValaDataType* unichar_type;
	ValaDataType* short_type;
	ValaDataType* ushort_type;
	ValaDataType* int_type;
	ValaDataType* uint_type;
	ValaDataType* long_type;
	ValaDataType* ulong_type;
	ValaDataType* int8_type;
	ValaDataType* uint8_type;
	ValaDataType* int16_type;
	ValaDataType* uint16_type;
	ValaDataType* int32_type;
	ValaDataType* uint32_type;
	ValaDataType* int64_type;
	ValaDataType* uint64_type;
	ValaDataType* string_type;
	ValaDataType* regex_type;
	ValaDataType* float_type;
	ValaDataType* double_type;
	ValaTypeSymbol* gtype_type;
	ValaTypeSymbol* gobject_type;
	ValaErrorType* gerror_type;
	ValaClass* glist_type;
	ValaClass* gslist_type;
	ValaClass* gnode_type;
	ValaClass* gvaluearray_type;
	ValaTypeSymbol* gstringbuilder_type;
	ValaTypeSymbol* garray_type;
	ValaTypeSymbol* gbytearray_type;
	ValaTypeSymbol* gptrarray_type;
	ValaTypeSymbol* gthreadpool_type;
	ValaDataType* gquark_type;
	ValaStruct* gvalue_type;
	ValaClass* gvariant_type;
	ValaStruct* mutex_type;
	ValaTypeSymbol* type_module_type;
	ValaTypeSymbol* dbus_proxy_type;
	ValaTypeSymbol* dbus_object_type;
	gboolean in_plugin;
	char* module_init_param_name;
	gboolean gvaluecollector_h_needed;
	gboolean requires_array_free;
	gboolean requires_array_move;
	gboolean requires_array_length;
	gboolean requires_strcmp0;
	ValaSet* wrappers;
};

struct _ValaCCodeBaseModuleClass {
	ValaCodeGeneratorClass parent_class;
	void (*append_vala_array_free) (ValaCCodeBaseModule* self);
	void (*append_vala_array_move) (ValaCCodeBaseModule* self);
	void (*append_vala_array_length) (ValaCCodeBaseModule* self);
	gboolean (*generate_enum_declaration) (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_class_struct_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_struct_declaration) (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_delegate_declaration) (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_cparameters) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
	ValaCCodeExpression* (*get_dup_func_expression) (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
	char* (*append_struct_array_free) (ValaCCodeBaseModule* self, ValaStruct* st);
	ValaCCodeExpression* (*get_unref_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
	void (*append_local_free) (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
	char* (*get_delegate_target_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_delegate_target_cexpression) (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify);
	char* (*get_delegate_target_destroy_notify_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_ref_cexpression) (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
	void (*generate_class_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_interface_declaration) (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_method_declaration) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_error_domain_declaration) (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space);
	ValaCCodeExpression* (*deserialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*serialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*get_implicit_cast_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
	gboolean (*is_gobject_property) (ValaCCodeBaseModule* self, ValaProperty* prop);
	char* (*get_custom_creturn_type) (ValaCCodeBaseModule* self, ValaMethod* m);
	void (*generate_dynamic_method_wrapper) (ValaCCodeBaseModule* self, ValaDynamicMethod* method);
	gboolean (*method_has_wrapper) (ValaCCodeBaseModule* self, ValaMethod* method);
	ValaCCodeExpression* (*get_construct_property_assignment) (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
	ValaCCodeFunctionCall* (*get_param_spec) (ValaCCodeBaseModule* self, ValaProperty* prop);
	ValaCCodeFunctionCall* (*get_signal_creation) (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type);
	ValaCCodeFragment* (*register_dbus_info) (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable);
	char* (*get_dynamic_property_getter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_property_setter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_signal_cname) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_after_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_disconnect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	void (*generate_marshaller) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus);
	char* (*get_marshaller_function) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus);
	char* (*get_array_length_cname) (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
	char* (*get_parameter_array_length_cname) (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim);
	ValaCCodeExpression* (*get_array_length_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
	char* (*get_array_size_cname) (ValaCCodeBaseModule* self, const char* array_cname);
	ValaCCodeExpression* (*get_array_size_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr);
	void (*add_simple_check) (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
};

struct _ValaCCodeBaseModulePrivate {
	ValaCodeContext* _context;
	ValaList* emit_context_stack;
	ValaSet* reserved_identifiers;
	gint next_block_id;
	ValaMap* block_map;
	ValaSet* generated_external_symbols;
	gint next_variant_function_id;
};

struct _ValaCCodeDeclarationSpace {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ValaCCodeDeclarationSpacePrivate * priv;
	ValaCCodeFragment* include_directives;
	ValaCCodeFragment* type_declaration;
	ValaCCodeFragment* type_definition;
	ValaCCodeFragment* type_member_declaration;
	ValaCCodeFragment* constant_declaration;
};

struct _ValaCCodeDeclarationSpaceClass {
	GTypeClass parent_class;
	void (*finalize) (ValaCCodeDeclarationSpace *self);
};

struct _ValaCCodeBaseModuleEmitContext {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ValaCCodeBaseModuleEmitContextPrivate * priv;
	ValaSymbol* current_symbol;
	ValaArrayList* symbol_stack;
	ValaTryStatement* current_try;
	ValaCCodeSwitchStatement* state_switch_statement;
	ValaArrayList* temp_vars;
	ValaArrayList* temp_ref_vars;
	gint next_temp_var_id;
	gboolean current_method_inner_error;
	ValaMap* variable_name_map;
};

struct _ValaCCodeBaseModuleEmitContextClass {
	GTypeClass parent_class;
	void (*finalize) (ValaCCodeBaseModuleEmitContext *self);
};

struct _ValaCCodeBaseModuleParamSpecEmitContext {
	GParamSpec parent_instance;
};


static gpointer vala_ccode_base_module_emit_context_parent_class = NULL;
static gpointer vala_ccode_base_module_parent_class = NULL;

GType vala_ccode_base_module_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_declaration_space_ref (gpointer instance);
void vala_ccode_declaration_space_unref (gpointer instance);
GParamSpec* vala_param_spec_ccode_declaration_space (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_value_set_ccode_declaration_space (GValue* value, gpointer v_object);
void vala_value_take_ccode_declaration_space (GValue* value, gpointer v_object);
gpointer vala_value_get_ccode_declaration_space (const GValue* value);
GType vala_ccode_declaration_space_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_base_module_emit_context_ref (gpointer instance);
void vala_ccode_base_module_emit_context_unref (gpointer instance);
GParamSpec* vala_ccode_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_ccode_base_module_value_set_emit_context (GValue* value, gpointer v_object);
void vala_ccode_base_module_value_take_emit_context (GValue* value, gpointer v_object);
gpointer vala_ccode_base_module_value_get_emit_context (const GValue* value);
GType vala_ccode_base_module_emit_context_get_type (void) G_GNUC_CONST;
#define VALA_CCODE_BASE_MODULE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModulePrivate))
enum  {
	VALA_CCODE_BASE_MODULE_DUMMY_PROPERTY
};
ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_new (ValaSymbol* symbol);
ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_construct (GType object_type, ValaSymbol* symbol);
ValaBlock* vala_ccode_base_module_next_closure_block (ValaCCodeBaseModule* self, ValaSymbol* sym);
ValaCCodeBaseModule* vala_ccode_base_module_new (void);
ValaCCodeBaseModule* vala_ccode_base_module_construct (GType object_type);
static void vala_ccode_base_module_real_emit (ValaCodeGenerator* base, ValaCodeContext* context);
void vala_ccode_base_module_set_context (ValaCCodeBaseModule* self, ValaCodeContext* value);
ValaCCodeDeclarationSpace* vala_ccode_declaration_space_new (void);
ValaCCodeDeclarationSpace* vala_ccode_declaration_space_construct (GType object_type);
void vala_ccode_declaration_space_set_is_header (ValaCCodeDeclarationSpace* self, gboolean value);
static char* vala_ccode_base_module_get_define_for_filename (const char* filename);
void vala_ccode_base_module_push_context (ValaCCodeBaseModule* self, ValaCCodeBaseModuleEmitContext* emit_context);
void vala_ccode_base_module_pop_context (ValaCCodeBaseModule* self);
ValaCCodeIdentifier* vala_ccode_base_module_get_value_setter_function (ValaCCodeBaseModule* self, ValaDataType* type_reference);
ValaCCodeIdentifier* vala_ccode_base_module_get_value_taker_function (ValaCCodeBaseModule* self, ValaDataType* type_reference);
static ValaCCodeIdentifier* vala_ccode_base_module_get_value_getter_function (ValaCCodeBaseModule* self, ValaDataType* type_reference);
void vala_ccode_base_module_append_vala_array_free (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_append_vala_array_free (ValaCCodeBaseModule* self);
void vala_ccode_base_module_append_vala_array_move (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_append_vala_array_move (ValaCCodeBaseModule* self);
void vala_ccode_base_module_append_vala_array_length (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_append_vala_array_length (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_append_vala_strcmp0 (ValaCCodeBaseModule* self);
void vala_ccode_declaration_space_add_include (ValaCCodeDeclarationSpace* self, const char* filename, gboolean local);
void vala_ccode_declaration_space_add_type_member_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_ccode_base_module_real_visit_source_file (ValaCodeVisitor* base, ValaSourceFile* source_file);
ValaCodeContext* vala_ccode_base_module_get_context (ValaCCodeBaseModule* self);
gboolean vala_ccode_base_module_generate_enum_declaration (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
static gboolean vala_ccode_base_module_real_generate_enum_declaration (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
gboolean vala_ccode_declaration_space_add_symbol_declaration (ValaCCodeDeclarationSpace* self, ValaSymbol* sym, const char* name);
void vala_ccode_declaration_space_add_type_definition (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
void vala_ccode_declaration_space_add_type_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_ccode_base_module_real_visit_enum (ValaCodeVisitor* base, ValaEnum* en);
void vala_ccode_base_module_visit_member (ValaCCodeBaseModule* self, ValaSymbol* m);
char* vala_ccode_base_module_get_symbol_lock_name (ValaCCodeBaseModule* self, const char* symname);
void vala_ccode_base_module_generate_constant_declaration (ValaCCodeBaseModule* self, ValaConstant* c, ValaCCodeDeclarationSpace* decl_space, gboolean definition);
void vala_ccode_base_module_generate_type_declaration (ValaCCodeBaseModule* self, ValaDataType* type, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_declaration_space_add_constant_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_ccode_base_module_real_visit_constant (ValaCodeVisitor* base, ValaConstant* c);
void vala_ccode_base_module_generate_field_declaration (ValaCCodeBaseModule* self, ValaField* f, ValaCCodeDeclarationSpace* decl_space);
char* vala_ccode_base_module_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
char* vala_ccode_base_module_get_delegate_target_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
char* vala_ccode_base_module_get_delegate_target_destroy_notify_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
static void vala_ccode_base_module_real_visit_field (ValaCodeVisitor* base, ValaField* f);
void vala_ccode_base_module_check_type (ValaCCodeBaseModule* self, ValaDataType* type);
ValaDataType* vala_ccode_base_module_get_data_type_for_symbol (ValaTypeSymbol* sym);
ValaCCodeExpression* vala_ccode_base_module_get_array_length_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
ValaCCodeExpression* vala_ccode_base_module_get_array_size_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr);
void vala_ccode_base_module_append_temp_decl (ValaCCodeBaseModule* self, ValaCCodeFragment* cfrag, ValaList* temp_vars);
ValaArrayList* vala_ccode_base_module_get_temp_vars (ValaCCodeBaseModule* self);
ValaArrayList* vala_ccode_base_module_get_temp_ref_vars (ValaCCodeBaseModule* self);
ValaCCodeExpression* vala_ccode_base_module_get_unref_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
ValaCCodeExpression* vala_ccode_base_module_get_variable_cexpression (ValaCCodeBaseModule* self, const char* name);
gboolean vala_ccode_base_module_requires_destroy (ValaCCodeBaseModule* self, ValaDataType* type);
ValaCCodeExpression* vala_ccode_base_module_default_value_for_type (ValaCCodeBaseModule* self, ValaDataType* type, gboolean initializer_expression);
gboolean vala_ccode_base_module_is_constant_ccode_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr);
char* vala_ccode_base_module_get_array_size_cname (ValaCCodeBaseModule* self, const char* array_cname);
ValaLocalVariable* vala_ccode_base_module_get_temp_variable (ValaCCodeBaseModule* self, ValaDataType* type, gboolean value_owned, ValaCodeNode* node_reference, gboolean init);
char* vala_ccode_base_module_get_variable_cname (ValaCCodeBaseModule* self, const char* name);
gboolean vala_ccode_base_module_is_pure_ccode_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr);
static void vala_ccode_base_module_real_visit_formal_parameter (ValaCodeVisitor* base, ValaFormalParameter* p);
static void vala_ccode_base_module_real_visit_property (ValaCodeVisitor* base, ValaProperty* prop);
void vala_ccode_base_module_generate_class_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_interface_declaration (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_delegate_declaration (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_struct_declaration (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_error_domain_declaration (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_class_struct_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_class_struct_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_struct_declaration (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_delegate_declaration (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_cparameters (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
static void vala_ccode_base_module_real_generate_cparameters (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
void vala_ccode_base_module_generate_property_accessor_declaration (ValaCCodeBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_visit_property_accessor (ValaCodeVisitor* base, ValaPropertyAccessor* acc);
gboolean vala_ccode_base_module_is_gobject_property (ValaCCodeBaseModule* self, ValaProperty* prop);
ValaDataType* vala_ccode_base_module_get_current_return_type (ValaCCodeBaseModule* self);
static ValaCCodeStatement* vala_ccode_base_module_create_property_type_check_statement (ValaCCodeBaseModule* self, ValaProperty* prop, gboolean check_return_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name);
ValaCCodeExpression* vala_ccode_base_module_transform_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
gboolean vala_ccode_base_module_get_current_method_inner_error (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_visit_destructor (ValaCodeVisitor* base, ValaDestructor* d);
void vala_ccode_base_module_set_current_method_inner_error (ValaCCodeBaseModule* self, gboolean value);
gint vala_ccode_base_module_get_block_id (ValaCCodeBaseModule* self, ValaBlock* b);
static void vala_ccode_base_module_capture_parameter (ValaCCodeBaseModule* self, ValaFormalParameter* param, ValaCCodeStruct* data, ValaCCodeBlock* cblock, gint block_id, ValaCCodeBlock* free_block);
gboolean vala_ccode_base_module_requires_copy (ValaCCodeBaseModule* self, ValaDataType* type);
ValaCCodeExpression* vala_ccode_base_module_get_ref_cexpression (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
char* vala_ccode_base_module_get_parameter_array_length_cname (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim);
ValaMethod* vala_ccode_base_module_get_current_method (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_visit_block (ValaCodeVisitor* base, ValaBlock* b);
void vala_ccode_base_module_emit_context_push_symbol (ValaCCodeBaseModuleEmitContext* self, ValaSymbol* symbol);
ValaPropertyAccessor* vala_ccode_base_module_get_current_property_accessor (ValaCCodeBaseModule* self);
ValaClass* vala_ccode_base_module_get_current_class (ValaCCodeBaseModule* self);
ValaCCodeExpression* vala_ccode_base_module_get_dup_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
ValaCCodeExpression* vala_ccode_base_module_get_result_cexpression (ValaCCodeBaseModule* self, const char* cname);
void vala_ccode_base_module_emit_context_pop_symbol (ValaCCodeBaseModuleEmitContext* self);
static void vala_ccode_base_module_real_visit_empty_statement (ValaCodeVisitor* base, ValaEmptyStatement* stmt);
static void vala_ccode_base_module_real_visit_declaration_statement (ValaCodeVisitor* base, ValaDeclarationStatement* stmt);
void vala_ccode_base_module_create_temp_decl (ValaCCodeBaseModule* self, ValaStatement* stmt, ValaList* temp_vars);
ValaMap* vala_ccode_base_module_get_variable_name_map (ValaCCodeBaseModule* self);
gint vala_ccode_base_module_get_next_temp_var_id (ValaCCodeBaseModule* self);
void vala_ccode_base_module_set_next_temp_var_id (ValaCCodeBaseModule* self, gint value);
static gboolean vala_ccode_base_module_has_simple_struct_initializer (ValaCCodeBaseModule* self, ValaLocalVariable* local);
static void vala_ccode_base_module_real_visit_local_variable (ValaCodeVisitor* base, ValaLocalVariable* local);
ValaCCodeExpression* vala_ccode_base_module_get_delegate_target_cexpression (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify);
void vala_ccode_base_module_add_simple_check (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
static void vala_ccode_base_module_real_visit_initializer_list (ValaCodeVisitor* base, ValaInitializerList* list);
static gboolean vala_ccode_base_module_is_in_generic_type (ValaCCodeBaseModule* self, ValaDataType* type);
ValaSymbol* vala_ccode_base_module_get_current_symbol (ValaCCodeBaseModule* self);
static ValaCCodeExpression* vala_ccode_base_module_get_type_id_expression (ValaCCodeBaseModule* self, ValaDataType* type, gboolean is_chainup);
gboolean vala_ccode_base_module_get_in_creation_method (ValaCCodeBaseModule* self);
static ValaCCodeExpression* vala_ccode_base_module_real_get_dup_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
char* vala_ccode_base_module_generate_dup_func_wrapper (ValaCCodeBaseModule* self, ValaDataType* type);
static char* vala_ccode_base_module_generate_struct_dup_wrapper (ValaCCodeBaseModule* self, ValaValueType* value_type);
static void vala_ccode_base_module_make_comparable_cexpression (ValaCCodeBaseModule* self, ValaDataType** left_type, ValaCCodeExpression** cleft, ValaDataType** right_type, ValaCCodeExpression** cright);
ValaCCodeExpression* vala_ccode_base_module_try_cast_value_to_type (ValaCCodeBaseModule* self, ValaCCodeExpression* ccodeexpr, ValaDataType* from, ValaDataType* to, ValaExpression* expr);
ValaCCodeFunctionCall* vala_ccode_base_module_generate_instance_cast (ValaCCodeBaseModule* self, ValaCCodeExpression* expr, ValaTypeSymbol* type);
static char* vala_ccode_base_module_generate_struct_equal_function (ValaCCodeBaseModule* self, ValaStruct* st);
gboolean vala_ccode_base_module_add_wrapper (ValaCCodeBaseModule* self, const char* wrapper_name);
static char* vala_ccode_base_module_generate_numeric_equal_function (ValaCCodeBaseModule* self, ValaStruct* st);
static void vala_ccode_base_module_generate_struct_copy_function (ValaCCodeBaseModule* self, ValaStruct* st);
char* vala_ccode_base_module_generate_free_func_wrapper (ValaCCodeBaseModule* self, ValaDataType* type);
static void vala_ccode_base_module_generate_struct_destroy_function (ValaCCodeBaseModule* self, ValaStruct* st);
ValaCCodeExpression* vala_ccode_base_module_get_destroy_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, gboolean is_chainup);
static char* vala_ccode_base_module_generate_collection_free_wrapper (ValaCCodeBaseModule* self, ValaDataType* collection_type, ValaCCodeIdentifier* element_destroy_func_expression);
ValaTypeSymbol* vala_ccode_base_module_get_current_type_symbol (ValaCCodeBaseModule* self);
char* vala_ccode_base_module_append_struct_array_free (ValaCCodeBaseModule* self, ValaStruct* st);
static char* vala_ccode_base_module_real_append_struct_array_free (ValaCCodeBaseModule* self, ValaStruct* st);
static ValaCCodeExpression* vala_ccode_base_module_real_get_unref_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
static void vala_ccode_base_module_real_visit_end_full_expression (ValaCodeVisitor* base, ValaExpression* expr);
static void vala_ccode_base_module_real_visit_expression_statement (ValaCodeVisitor* base, ValaExpressionStatement* stmt);
void vala_ccode_base_module_append_local_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
static void vala_ccode_base_module_real_append_local_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
static void vala_ccode_base_module_append_param_free (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeFragment* cfrag);
void vala_ccode_base_module_append_error_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, ValaTryStatement* current_try);
void vala_ccode_base_module_create_local_free (ValaCCodeBaseModule* self, ValaCodeNode* stmt, gboolean stop_at_loop);
gboolean vala_ccode_base_module_variable_accessible_in_finally (ValaCCodeBaseModule* self, ValaLocalVariable* local);
ValaTryStatement* vala_ccode_base_module_get_current_try (ValaCCodeBaseModule* self);
static void vala_ccode_base_module_real_visit_return_statement (ValaCodeVisitor* base, ValaReturnStatement* stmt);
ValaCCodeStatement* vala_ccode_base_module_create_postcondition_statement (ValaCCodeBaseModule* self, ValaExpression* postcondition);
static ValaCCodeExpression* vala_ccode_base_module_get_lock_expression (ValaCCodeBaseModule* self, ValaStatement* stmt, ValaExpression* resource);
static void vala_ccode_base_module_real_visit_lock_statement (ValaCodeVisitor* base, ValaLockStatement* stmt);
static void vala_ccode_base_module_real_visit_unlock_statement (ValaCodeVisitor* base, ValaUnlockStatement* stmt);
static void vala_ccode_base_module_real_visit_delete_statement (ValaCodeVisitor* base, ValaDeleteStatement* stmt);
static void vala_ccode_base_module_real_visit_expression (ValaCodeVisitor* base, ValaExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_convert_from_generic_pointer (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr, ValaDataType* actual_type);
ValaCCodeExpression* vala_ccode_base_module_convert_to_generic_pointer (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr, ValaDataType* actual_type);
static void vala_ccode_base_module_real_visit_boolean_literal (ValaCodeVisitor* base, ValaBooleanLiteral* expr);
static void vala_ccode_base_module_real_visit_character_literal (ValaCodeVisitor* base, ValaCharacterLiteral* expr);
static void vala_ccode_base_module_real_visit_integer_literal (ValaCodeVisitor* base, ValaIntegerLiteral* expr);
static void vala_ccode_base_module_real_visit_real_literal (ValaCodeVisitor* base, ValaRealLiteral* expr);
static void vala_ccode_base_module_real_visit_string_literal (ValaCodeVisitor* base, ValaStringLiteral* expr);
static void vala_ccode_base_module_real_visit_regex_literal (ValaCodeVisitor* base, ValaRegexLiteral* expr);
static void vala_ccode_base_module_real_visit_null_literal (ValaCodeVisitor* base, ValaNullLiteral* expr);
static char* vala_ccode_base_module_real_get_delegate_target_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
static ValaCCodeExpression* vala_ccode_base_module_real_get_delegate_target_cexpression (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify);
static char* vala_ccode_base_module_real_get_delegate_target_destroy_notify_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
static void vala_ccode_base_module_real_visit_base_access (ValaCodeVisitor* base, ValaBaseAccess* expr);
static void vala_ccode_base_module_real_visit_postfix_expression (ValaCodeVisitor* base, ValaPostfixExpression* expr);
static ValaMemberAccess* vala_ccode_base_module_find_property_access (ValaCCodeBaseModule* self, ValaExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_get_property_set_call (ValaCCodeBaseModule* self, ValaProperty* prop, ValaMemberAccess* ma, ValaCCodeExpression* cexpr, ValaExpression* rhs);
static gboolean vala_ccode_base_module_is_limited_generic_type (ValaCCodeBaseModule* self, ValaDataType* type);
static gboolean vala_ccode_base_module_is_ref_function_void (ValaCCodeBaseModule* self, ValaDataType* type);
static ValaCCodeExpression* vala_ccode_base_module_real_get_ref_cexpression (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
static gboolean vala_ccode_base_module_is_reference_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg);
static gboolean vala_ccode_base_module_is_nullable_value_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg);
static gboolean vala_ccode_base_module_is_signed_integer_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg);
static gboolean vala_ccode_base_module_is_unsigned_integer_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg);
static void vala_ccode_base_module_check_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg);
static void vala_ccode_base_module_real_generate_class_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_interface_declaration (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_generate_method_declaration (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_method_declaration (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
static void vala_ccode_base_module_real_generate_error_domain_declaration (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_base_module_add_generic_type_arguments (ValaCCodeBaseModule* self, ValaMap* arg_map, ValaList* type_args, ValaCodeNode* expr, gboolean is_chainup);
gint vala_ccode_base_module_get_param_pos (ValaCCodeBaseModule* self, double param_pos, gboolean ellipsis);
static void vala_ccode_base_module_real_visit_object_creation_expression (ValaCodeVisitor* base, ValaObjectCreationExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_handle_struct_argument (ValaCCodeBaseModule* self, ValaFormalParameter* param, ValaExpression* arg, ValaCCodeExpression* cexpr);
char* vala_ccode_base_module_get_custom_creturn_type (ValaCCodeBaseModule* self, ValaMethod* m);
static void vala_ccode_base_module_real_visit_sizeof_expression (ValaCodeVisitor* base, ValaSizeofExpression* expr);
static void vala_ccode_base_module_real_visit_typeof_expression (ValaCodeVisitor* base, ValaTypeofExpression* expr);
static void vala_ccode_base_module_real_visit_unary_expression (ValaCodeVisitor* base, ValaUnaryExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_try_cast_variant_to_type (ValaCCodeBaseModule* self, ValaCCodeExpression* ccodeexpr, ValaDataType* from, ValaDataType* to, ValaExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_deserialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr);
static ValaCCodeExpression* vala_ccode_base_module_real_deserialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr);
ValaCCodeExpression* vala_ccode_base_module_serialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr);
static ValaCCodeExpression* vala_ccode_base_module_real_serialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr);
static void vala_ccode_base_module_real_visit_cast_expression (ValaCodeVisitor* base, ValaCastExpression* expr);
static ValaCCodeExpression* vala_ccode_base_module_create_type_check (ValaCCodeBaseModule* self, ValaCCodeNode* ccodenode, ValaDataType* type);
static void vala_ccode_base_module_real_visit_named_argument (ValaCodeVisitor* base, ValaNamedArgument* expr);
static void vala_ccode_base_module_real_visit_pointer_indirection (ValaCodeVisitor* base, ValaPointerIndirection* expr);
static void vala_ccode_base_module_real_visit_addressof_expression (ValaCodeVisitor* base, ValaAddressofExpression* expr);
static void vala_ccode_base_module_real_visit_reference_transfer_expression (ValaCodeVisitor* base, ValaReferenceTransferExpression* expr);
static void vala_ccode_base_module_real_visit_binary_expression (ValaCodeVisitor* base, ValaBinaryExpression* expr);
static char* vala_ccode_base_module_generate_array_contains_wrapper (ValaCCodeBaseModule* self, ValaArrayType* array_type);
char* vala_ccode_base_module_get_type_check_function (ValaCCodeBaseModule* self, ValaTypeSymbol* type);
static void vala_ccode_base_module_real_visit_type_check (ValaCodeVisitor* base, ValaTypeCheck* expr);
static void vala_ccode_base_module_real_visit_lambda_expression (ValaCodeVisitor* base, ValaLambdaExpression* l);
ValaCCodeExpression* vala_ccode_base_module_get_implicit_cast_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
static ValaCCodeExpression* vala_ccode_base_module_real_get_implicit_cast_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
ValaCCodeNode* vala_ccode_base_module_get_ccodenode (ValaCCodeBaseModule* self, ValaCodeNode* node);
char* vala_ccode_base_module_get_dynamic_property_setter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
gboolean vala_ccode_base_module_is_address_of_possible (ValaCCodeBaseModule* self, ValaExpression* e);
ValaCCodeExpression* vala_ccode_base_module_get_address_of_expression (ValaCCodeBaseModule* self, ValaExpression* e, ValaCCodeExpression* ce);
gboolean vala_ccode_base_module_add_generated_external_symbol (ValaCCodeBaseModule* self, ValaSymbol* external_symbol);
ValaCCodeStatement* vala_ccode_base_module_create_type_check_statement (ValaCCodeBaseModule* self, ValaCodeNode* method_node, ValaDataType* ret_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name);
static void vala_ccode_base_module_real_visit_class (ValaCodeVisitor* base, ValaClass* cl);
static gboolean vala_ccode_base_module_real_is_gobject_property (ValaCCodeBaseModule* self, ValaProperty* prop);
ValaDataType* vala_ccode_base_module_get_this_type (ValaCCodeBaseModule* self);
gboolean vala_ccode_declaration_space_add_declaration (ValaCCodeDeclarationSpace* self, const char* name);
static char* vala_ccode_base_module_real_get_custom_creturn_type (ValaCCodeBaseModule* self, ValaMethod* m);
void vala_ccode_base_module_generate_dynamic_method_wrapper (ValaCCodeBaseModule* self, ValaDynamicMethod* method);
static void vala_ccode_base_module_real_generate_dynamic_method_wrapper (ValaCCodeBaseModule* self, ValaDynamicMethod* method);
gboolean vala_ccode_base_module_method_has_wrapper (ValaCCodeBaseModule* self, ValaMethod* method);
static gboolean vala_ccode_base_module_real_method_has_wrapper (ValaCCodeBaseModule* self, ValaMethod* method);
ValaCCodeExpression* vala_ccode_base_module_get_construct_property_assignment (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
static ValaCCodeExpression* vala_ccode_base_module_real_get_construct_property_assignment (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
ValaCCodeFunctionCall* vala_ccode_base_module_get_param_spec (ValaCCodeBaseModule* self, ValaProperty* prop);
static ValaCCodeFunctionCall* vala_ccode_base_module_real_get_param_spec (ValaCCodeBaseModule* self, ValaProperty* prop);
ValaCCodeFunctionCall* vala_ccode_base_module_get_signal_creation (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type);
static ValaCCodeFunctionCall* vala_ccode_base_module_real_get_signal_creation (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type);
ValaCCodeFragment* vala_ccode_base_module_register_dbus_info (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable);
static ValaCCodeFragment* vala_ccode_base_module_real_register_dbus_info (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable);
char* vala_ccode_base_module_get_dynamic_property_getter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
static char* vala_ccode_base_module_real_get_dynamic_property_getter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
static char* vala_ccode_base_module_real_get_dynamic_property_setter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
char* vala_ccode_base_module_get_dynamic_signal_cname (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
static char* vala_ccode_base_module_real_get_dynamic_signal_cname (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
char* vala_ccode_base_module_get_dynamic_signal_connect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
static char* vala_ccode_base_module_real_get_dynamic_signal_connect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
char* vala_ccode_base_module_get_dynamic_signal_connect_after_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
static char* vala_ccode_base_module_real_get_dynamic_signal_connect_after_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
char* vala_ccode_base_module_get_dynamic_signal_disconnect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
static char* vala_ccode_base_module_real_get_dynamic_signal_disconnect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
void vala_ccode_base_module_generate_marshaller (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus);
static void vala_ccode_base_module_real_generate_marshaller (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus);
char* vala_ccode_base_module_get_marshaller_function (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus);
static char* vala_ccode_base_module_real_get_marshaller_function (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus);
static char* vala_ccode_base_module_real_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
static char* vala_ccode_base_module_real_get_parameter_array_length_cname (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim);
static ValaCCodeExpression* vala_ccode_base_module_real_get_array_length_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
static char* vala_ccode_base_module_real_get_array_size_cname (ValaCCodeBaseModule* self, const char* array_cname);
static ValaCCodeExpression* vala_ccode_base_module_real_get_array_size_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr);
static void vala_ccode_base_module_real_add_simple_check (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
void vala_ccode_base_module_set_current_try (ValaCCodeBaseModule* self, ValaTryStatement* value);
ValaBlock* vala_ccode_base_module_get_current_closure_block (ValaCCodeBaseModule* self);
ValaCCodeSwitchStatement* vala_ccode_base_module_get_state_switch_statement (ValaCCodeBaseModule* self);
void vala_ccode_base_module_set_state_switch_statement (ValaCCodeBaseModule* self, ValaCCodeSwitchStatement* value);
enum  {
	VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_DUMMY_PROPERTY
};
static void vala_ccode_base_module_emit_context_finalize (ValaCCodeBaseModuleEmitContext* obj);
static void vala_ccode_base_module_finalize (ValaCodeVisitor* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);
static int _vala_strcmp0 (const char * str1, const char * str2);



ValaBlock* vala_ccode_base_module_next_closure_block (ValaCCodeBaseModule* self, ValaSymbol* sym) {
	ValaBlock* result = NULL;
	ValaBlock* block;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (sym != NULL, NULL);
	block = NULL;
	while (TRUE) {
		ValaSymbol* _tmp0_;
		gboolean _tmp1_ = FALSE;
		gboolean _tmp2_ = FALSE;
		block = (_tmp0_ = sym, VALA_IS_BLOCK (_tmp0_) ? ((ValaBlock*) _tmp0_) : NULL);
		if (VALA_IS_BLOCK (sym)) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = VALA_IS_METHOD (sym);
		}
		if (!_tmp1_) {
			break;
		}
		if (block != NULL) {
			_tmp2_ = vala_block_get_captured (block);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			break;
		}
		sym = vala_symbol_get_parent_symbol (sym);
	}
	result = block;
	return result;
}


ValaCCodeBaseModule* vala_ccode_base_module_construct (GType object_type) {
	ValaCCodeBaseModule* self = NULL;
	ValaSet* _tmp0_;
	ValaSet* _tmp1_;
	self = (ValaCCodeBaseModule*) vala_code_generator_construct (object_type);
	self->predefined_marshal_set = (_tmp0_ = (ValaSet*) vala_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal), _vala_collection_object_unref0 (self->predefined_marshal_set), _tmp0_);
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:VOID");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:BOOLEAN");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:CHAR");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:UCHAR");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:INT");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:UINT");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:LONG");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:ULONG");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:ENUM");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:FLAGS");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:FLOAT");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:DOUBLE");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:STRING");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:POINTER");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:OBJECT");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "STRING:OBJECT,POINTER");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "VOID:UINT,POINTER");
	vala_collection_add ((ValaCollection*) self->predefined_marshal_set, "BOOLEAN:FLAGS");
	self->priv->reserved_identifiers = (_tmp1_ = (ValaSet*) vala_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal), _vala_collection_object_unref0 (self->priv->reserved_identifiers), _tmp1_);
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Bool");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Complex");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Imaginary");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "asm");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "auto");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "break");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "case");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "char");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "const");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "continue");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "default");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "do");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "double");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "else");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "enum");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "extern");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "float");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "for");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "goto");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "if");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "inline");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "int");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "long");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "register");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "restrict");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "return");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "short");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "signed");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "sizeof");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "static");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "struct");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "switch");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "typedef");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "union");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "unsigned");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "void");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "volatile");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "while");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "cdecl");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "error");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "result");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "self");
	return self;
}


ValaCCodeBaseModule* vala_ccode_base_module_new (void) {
	return vala_ccode_base_module_construct (VALA_TYPE_CCODE_BASE_MODULE);
}


static gpointer _vala_code_node_ref0 (gpointer self) {
	return self ? vala_code_node_ref (self) : NULL;
}


static gpointer _vala_ccode_node_ref0 (gpointer self) {
	return self ? vala_ccode_node_ref (self) : NULL;
}


static void vala_ccode_base_module_real_emit (ValaCodeGenerator* base, ValaCodeContext* context) {
	ValaCCodeBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaStruct* _tmp1_;
	ValaDataType* _tmp2_;
	ValaStruct* _tmp3_;
	ValaDataType* _tmp4_;
	ValaStruct* _tmp5_;
	ValaDataType* _tmp6_;
	ValaStruct* _tmp7_;
	ValaDataType* _tmp8_;
	ValaStruct* _tmp9_;
	ValaDataType* _tmp10_;
	ValaStruct* _tmp11_;
	ValaDataType* _tmp12_;
	ValaStruct* _tmp13_;
	ValaDataType* _tmp14_;
	ValaStruct* _tmp15_;
	ValaDataType* _tmp16_;
	ValaStruct* _tmp17_;
	ValaDataType* _tmp18_;
	ValaStruct* _tmp19_;
	ValaDataType* _tmp20_;
	ValaStruct* _tmp21_;
	ValaDataType* _tmp22_;
	ValaStruct* _tmp23_;
	ValaDataType* _tmp24_;
	ValaStruct* _tmp25_;
	ValaDataType* _tmp26_;
	ValaStruct* _tmp27_;
	ValaDataType* _tmp28_;
	ValaStruct* _tmp29_;
	ValaDataType* _tmp30_;
	ValaStruct* _tmp31_;
	ValaDataType* _tmp32_;
	ValaStruct* _tmp33_;
	ValaDataType* _tmp34_;
	ValaStruct* _tmp35_;
	ValaDataType* _tmp36_;
	ValaStruct* _tmp37_;
	ValaDataType* _tmp38_;
	ValaClass* _tmp39_;
	ValaDataType* _tmp40_;
	ValaStruct* unichar_struct;
	ValaCCodeDeclarationSpace* _tmp68_;
	ValaCCodeDeclarationSpace* _tmp69_;
	ValaList* source_files;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (context != NULL);
	vala_ccode_base_module_set_context (self, context);
	self->root_symbol = (_tmp0_ = _vala_code_node_ref0 ((ValaSymbol*) vala_code_context_get_root (context)), _vala_code_node_unref0 (self->root_symbol), _tmp0_);
	self->bool_type = (_tmp2_ = (ValaDataType*) vala_boolean_type_new (_tmp1_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "bool"))), _vala_code_node_unref0 (self->bool_type), _tmp2_);
	_vala_code_node_unref0 (_tmp1_);
	self->char_type = (_tmp4_ = (ValaDataType*) vala_integer_type_new (_tmp3_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "char")), NULL, NULL), _vala_code_node_unref0 (self->char_type), _tmp4_);
	_vala_code_node_unref0 (_tmp3_);
	self->uchar_type = (_tmp6_ = (ValaDataType*) vala_integer_type_new (_tmp5_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uchar")), NULL, NULL), _vala_code_node_unref0 (self->uchar_type), _tmp6_);
	_vala_code_node_unref0 (_tmp5_);
	self->short_type = (_tmp8_ = (ValaDataType*) vala_integer_type_new (_tmp7_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "short")), NULL, NULL), _vala_code_node_unref0 (self->short_type), _tmp8_);
	_vala_code_node_unref0 (_tmp7_);
	self->ushort_type = (_tmp10_ = (ValaDataType*) vala_integer_type_new (_tmp9_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "ushort")), NULL, NULL), _vala_code_node_unref0 (self->ushort_type), _tmp10_);
	_vala_code_node_unref0 (_tmp9_);
	self->int_type = (_tmp12_ = (ValaDataType*) vala_integer_type_new (_tmp11_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int")), NULL, NULL), _vala_code_node_unref0 (self->int_type), _tmp12_);
	_vala_code_node_unref0 (_tmp11_);
	self->uint_type = (_tmp14_ = (ValaDataType*) vala_integer_type_new (_tmp13_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint")), NULL, NULL), _vala_code_node_unref0 (self->uint_type), _tmp14_);
	_vala_code_node_unref0 (_tmp13_);
	self->long_type = (_tmp16_ = (ValaDataType*) vala_integer_type_new (_tmp15_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "long")), NULL, NULL), _vala_code_node_unref0 (self->long_type), _tmp16_);
	_vala_code_node_unref0 (_tmp15_);
	self->ulong_type = (_tmp18_ = (ValaDataType*) vala_integer_type_new (_tmp17_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "ulong")), NULL, NULL), _vala_code_node_unref0 (self->ulong_type), _tmp18_);
	_vala_code_node_unref0 (_tmp17_);
	self->int8_type = (_tmp20_ = (ValaDataType*) vala_integer_type_new (_tmp19_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int8")), NULL, NULL), _vala_code_node_unref0 (self->int8_type), _tmp20_);
	_vala_code_node_unref0 (_tmp19_);
	self->uint8_type = (_tmp22_ = (ValaDataType*) vala_integer_type_new (_tmp21_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint8")), NULL, NULL), _vala_code_node_unref0 (self->uint8_type), _tmp22_);
	_vala_code_node_unref0 (_tmp21_);
	self->int16_type = (_tmp24_ = (ValaDataType*) vala_integer_type_new (_tmp23_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int16")), NULL, NULL), _vala_code_node_unref0 (self->int16_type), _tmp24_);
	_vala_code_node_unref0 (_tmp23_);
	self->uint16_type = (_tmp26_ = (ValaDataType*) vala_integer_type_new (_tmp25_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint16")), NULL, NULL), _vala_code_node_unref0 (self->uint16_type), _tmp26_);
	_vala_code_node_unref0 (_tmp25_);
	self->int32_type = (_tmp28_ = (ValaDataType*) vala_integer_type_new (_tmp27_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int32")), NULL, NULL), _vala_code_node_unref0 (self->int32_type), _tmp28_);
	_vala_code_node_unref0 (_tmp27_);
	self->uint32_type = (_tmp30_ = (ValaDataType*) vala_integer_type_new (_tmp29_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint32")), NULL, NULL), _vala_code_node_unref0 (self->uint32_type), _tmp30_);
	_vala_code_node_unref0 (_tmp29_);
	self->int64_type = (_tmp32_ = (ValaDataType*) vala_integer_type_new (_tmp31_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int64")), NULL, NULL), _vala_code_node_unref0 (self->int64_type), _tmp32_);
	_vala_code_node_unref0 (_tmp31_);
	self->uint64_type = (_tmp34_ = (ValaDataType*) vala_integer_type_new (_tmp33_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint64")), NULL, NULL), _vala_code_node_unref0 (self->uint64_type), _tmp34_);
	_vala_code_node_unref0 (_tmp33_);
	self->float_type = (_tmp36_ = (ValaDataType*) vala_floating_type_new (_tmp35_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "float"))), _vala_code_node_unref0 (self->float_type), _tmp36_);
	_vala_code_node_unref0 (_tmp35_);
	self->double_type = (_tmp38_ = (ValaDataType*) vala_floating_type_new (_tmp37_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "double"))), _vala_code_node_unref0 (self->double_type), _tmp38_);
	_vala_code_node_unref0 (_tmp37_);
	self->string_type = (_tmp40_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) (_tmp39_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "string")))), _vala_code_node_unref0 (self->string_type), _tmp40_);
	_vala_code_node_unref0 (_tmp39_);
	unichar_struct = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "unichar"));
	if (unichar_struct != NULL) {
		ValaDataType* _tmp41_;
		self->unichar_type = (_tmp41_ = (ValaDataType*) vala_integer_type_new (unichar_struct, NULL, NULL), _vala_code_node_unref0 (self->unichar_type), _tmp41_);
	}
	if (vala_code_context_get_profile (context) == VALA_PROFILE_GOBJECT) {
		ValaSymbol* glib_ns;
		ValaTypeSymbol* _tmp42_;
		ValaTypeSymbol* _tmp43_;
		ValaErrorType* _tmp44_;
		ValaClass* _tmp45_;
		ValaClass* _tmp46_;
		ValaClass* _tmp47_;
		ValaClass* _tmp48_;
		ValaTypeSymbol* _tmp49_;
		ValaTypeSymbol* _tmp50_;
		ValaTypeSymbol* _tmp51_;
		ValaTypeSymbol* _tmp52_;
		ValaTypeSymbol* _tmp53_;
		ValaStruct* _tmp54_;
		ValaDataType* _tmp55_;
		ValaStruct* _tmp56_;
		ValaClass* _tmp57_;
		ValaStruct* _tmp58_;
		ValaTypeSymbol* _tmp59_;
		ValaSymbol* _tmp60_;
		ValaClass* _tmp61_;
		ValaDataType* _tmp62_;
		ValaTypeSymbol* _tmp66_;
		ValaSymbol* dbus_ns;
		glib_ns = vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "GLib");
		self->gtype_type = (_tmp42_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Type")), _vala_code_node_unref0 (self->gtype_type), _tmp42_);
		self->gobject_type = (_tmp43_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Object")), _vala_code_node_unref0 (self->gobject_type), _tmp43_);
		self->gerror_type = (_tmp44_ = vala_error_type_new (NULL, NULL, NULL), _vala_code_node_unref0 (self->gerror_type), _tmp44_);
		self->glist_type = (_tmp45_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "List")), _vala_code_node_unref0 (self->glist_type), _tmp45_);
		self->gslist_type = (_tmp46_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "SList")), _vala_code_node_unref0 (self->gslist_type), _tmp46_);
		self->gnode_type = (_tmp47_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Node")), _vala_code_node_unref0 (self->gnode_type), _tmp47_);
		self->gvaluearray_type = (_tmp48_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "ValueArray")), _vala_code_node_unref0 (self->gvaluearray_type), _tmp48_);
		self->gstringbuilder_type = (_tmp49_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "StringBuilder")), _vala_code_node_unref0 (self->gstringbuilder_type), _tmp49_);
		self->garray_type = (_tmp50_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Array")), _vala_code_node_unref0 (self->garray_type), _tmp50_);
		self->gbytearray_type = (_tmp51_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "ByteArray")), _vala_code_node_unref0 (self->gbytearray_type), _tmp51_);
		self->gptrarray_type = (_tmp52_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "PtrArray")), _vala_code_node_unref0 (self->gptrarray_type), _tmp52_);
		self->gthreadpool_type = (_tmp53_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "ThreadPool")), _vala_code_node_unref0 (self->gthreadpool_type), _tmp53_);
		self->gquark_type = (_tmp55_ = (ValaDataType*) vala_integer_type_new (_tmp54_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Quark")), NULL, NULL), _vala_code_node_unref0 (self->gquark_type), _tmp55_);
		_vala_code_node_unref0 (_tmp54_);
		self->gvalue_type = (_tmp56_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Value")), _vala_code_node_unref0 (self->gvalue_type), _tmp56_);
		self->gvariant_type = (_tmp57_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "Variant")), _vala_code_node_unref0 (self->gvariant_type), _tmp57_);
		self->mutex_type = (_tmp58_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "StaticRecMutex")), _vala_code_node_unref0 (self->mutex_type), _tmp58_);
		self->type_module_type = (_tmp59_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "TypeModule")), _vala_code_node_unref0 (self->type_module_type), _tmp59_);
		self->regex_type = (_tmp62_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) (_tmp61_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (_tmp60_ = vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "GLib")), "Regex")))), _vala_code_node_unref0 (self->regex_type), _tmp62_);
		_vala_code_node_unref0 (_tmp61_);
		_vala_code_node_unref0 (_tmp60_);
		if (vala_code_context_get_module_init_method (context) != NULL) {
			{
				ValaList* _tmp63_;
				ValaIterator* _tmp64_;
				ValaIterator* _parameter_it;
				_parameter_it = (_tmp64_ = vala_iterable_iterator ((ValaIterable*) (_tmp63_ = vala_method_get_parameters (vala_code_context_get_module_init_method (context)))), _vala_collection_object_unref0 (_tmp63_), _tmp64_);
				while (TRUE) {
					ValaFormalParameter* parameter;
					if (!vala_iterator_next (_parameter_it)) {
						break;
					}
					parameter = (ValaFormalParameter*) vala_iterator_get (_parameter_it);
					if (vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) parameter)) == self->type_module_type) {
						char* _tmp65_;
						self->in_plugin = TRUE;
						self->module_init_param_name = (_tmp65_ = g_strdup (vala_symbol_get_name ((ValaSymbol*) parameter)), _g_free0 (self->module_init_param_name), _tmp65_);
						_vala_code_node_unref0 (parameter);
						break;
					}
					_vala_code_node_unref0 (parameter);
				}
				_vala_collection_object_unref0 (_parameter_it);
			}
			if (!self->in_plugin) {
				vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) vala_code_context_get_module_init_method (context)), "[ModuleInit] requires a parameter of type `GLib.TypeModule'");
			}
		}
		self->dbus_proxy_type = (_tmp66_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (glib_ns), "DBusProxy")), _vala_code_node_unref0 (self->dbus_proxy_type), _tmp66_);
		dbus_ns = vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "DBus");
		if (dbus_ns != NULL) {
			ValaTypeSymbol* _tmp67_;
			self->dbus_object_type = (_tmp67_ = VALA_TYPESYMBOL (vala_scope_lookup (vala_symbol_get_scope (dbus_ns), "Object")), _vala_code_node_unref0 (self->dbus_object_type), _tmp67_);
		}
		_vala_code_node_unref0 (dbus_ns);
		_vala_code_node_unref0 (glib_ns);
	}
	self->header_declarations = (_tmp68_ = vala_ccode_declaration_space_new (), _vala_ccode_declaration_space_unref0 (self->header_declarations), _tmp68_);
	vala_ccode_declaration_space_set_is_header (self->header_declarations, TRUE);
	self->internal_header_declarations = (_tmp69_ = vala_ccode_declaration_space_new (), _vala_ccode_declaration_space_unref0 (self->internal_header_declarations), _tmp69_);
	vala_ccode_declaration_space_set_is_header (self->internal_header_declarations, TRUE);
	source_files = vala_code_context_get_source_files (context);
	{
		ValaIterator* _file_it;
		_file_it = vala_iterable_iterator ((ValaIterable*) source_files);
		while (TRUE) {
			ValaSourceFile* file;
			if (!vala_iterator_next (_file_it)) {
				break;
			}
			file = (ValaSourceFile*) vala_iterator_get (_file_it);
			if (!vala_source_file_get_external_package (file)) {
				vala_source_file_accept (file, (ValaCodeVisitor*) self);
			}
			_vala_source_file_unref0 (file);
		}
		_vala_collection_object_unref0 (_file_it);
	}
	if (vala_code_context_get_symbols_filename (context) != NULL) {
		FILE* stream;
		FILE* _tmp73_;
		stream = fopen (vala_code_context_get_symbols_filename (context), "w");
		if (stream == NULL) {
			char* _tmp70_;
			vala_report_error (NULL, _tmp70_ = g_strdup_printf ("unable to open `%s' for writing", vala_code_context_get_symbols_filename (context)));
			_g_free0 (_tmp70_);
			_fclose0 (stream);
			_vala_collection_object_unref0 (source_files);
			_vala_code_node_unref0 (unichar_struct);
			return;
		}
		{
			ValaList* _tmp71_;
			ValaIterator* _tmp72_;
			ValaIterator* _node_it;
			_node_it = (_tmp72_ = vala_iterable_iterator ((ValaIterable*) (_tmp71_ = vala_ccode_fragment_get_children (self->header_declarations->type_member_declaration))), _vala_collection_object_unref0 (_tmp71_), _tmp72_);
			while (TRUE) {
				ValaCCodeNode* node;
				if (!vala_iterator_next (_node_it)) {
					break;
				}
				node = (ValaCCodeNode*) vala_iterator_get (_node_it);
				if (VALA_IS_CCODE_FUNCTION (node)) {
					ValaCCodeFunction* func;
					func = _vala_ccode_node_ref0 (VALA_CCODE_FUNCTION (node));
					fputs (vala_ccode_function_get_name (func), stream);
					fputc ('\n', stream);
					_vala_ccode_node_unref0 (func);
				}
				_vala_ccode_node_unref0 (node);
			}
			_vala_collection_object_unref0 (_node_it);
		}
		stream = (_tmp73_ = NULL, _fclose0 (stream), _tmp73_);
		_fclose0 (stream);
	}
	if (vala_code_context_get_header_filename (context) != NULL) {
		ValaCCodeWriter* writer;
		char* _tmp75_;
		ValaCCodeOnceSection* _tmp76_;
		ValaCCodeOnceSection* once;
		ValaCCodeNewline* _tmp77_;
		ValaCCodeNewline* _tmp78_;
		ValaCCodeNewline* _tmp81_;
		ValaCCodeNewline* _tmp82_;
		ValaCCodeNewline* _tmp83_;
		ValaCCodeNewline* _tmp84_;
		ValaCCodeNewline* _tmp85_;
		ValaCCodeNewline* _tmp88_;
		writer = vala_ccode_writer_new (vala_code_context_get_header_filename (context), NULL);
		if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (context))) {
			char* _tmp74_;
			vala_report_error (NULL, _tmp74_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
			_g_free0 (_tmp74_);
			_vala_ccode_writer_unref0 (writer);
			_vala_collection_object_unref0 (source_files);
			_vala_code_node_unref0 (unichar_struct);
			return;
		}
		vala_ccode_writer_write_newline (writer);
		once = (_tmp76_ = vala_ccode_once_section_new (_tmp75_ = vala_ccode_base_module_get_define_for_filename (vala_ccode_writer_get_filename (writer))), _g_free0 (_tmp75_), _tmp76_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp77_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp77_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->include_directives);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp78_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp78_);
		if (vala_code_context_get_profile (context) == VALA_PROFILE_GOBJECT) {
			ValaCCodeIdentifier* _tmp79_;
			ValaCCodeNewline* _tmp80_;
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp79_ = vala_ccode_identifier_new ("G_BEGIN_DECLS")));
			_vala_ccode_node_unref0 (_tmp79_);
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp80_ = vala_ccode_newline_new ()));
			_vala_ccode_node_unref0 (_tmp80_);
		}
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp81_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp81_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp82_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp82_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_definition);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp83_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp83_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_member_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp84_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp84_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->constant_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp85_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp85_);
		if (vala_code_context_get_profile (context) == VALA_PROFILE_GOBJECT) {
			ValaCCodeIdentifier* _tmp86_;
			ValaCCodeNewline* _tmp87_;
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp86_ = vala_ccode_identifier_new ("G_END_DECLS")));
			_vala_ccode_node_unref0 (_tmp86_);
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp87_ = vala_ccode_newline_new ()));
			_vala_ccode_node_unref0 (_tmp87_);
		}
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp88_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp88_);
		vala_ccode_node_write ((ValaCCodeNode*) once, writer);
		vala_ccode_writer_close (writer);
		_vala_ccode_node_unref0 (once);
		_vala_ccode_writer_unref0 (writer);
	}
	if (vala_code_context_get_internal_header_filename (context) != NULL) {
		ValaCCodeWriter* writer;
		char* _tmp90_;
		ValaCCodeOnceSection* _tmp91_;
		ValaCCodeOnceSection* once;
		ValaCCodeNewline* _tmp92_;
		ValaCCodeNewline* _tmp93_;
		ValaCCodeNewline* _tmp96_;
		ValaCCodeNewline* _tmp97_;
		ValaCCodeNewline* _tmp98_;
		ValaCCodeNewline* _tmp99_;
		ValaCCodeNewline* _tmp100_;
		ValaCCodeNewline* _tmp103_;
		writer = vala_ccode_writer_new (vala_code_context_get_internal_header_filename (context), NULL);
		if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (context))) {
			char* _tmp89_;
			vala_report_error (NULL, _tmp89_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
			_g_free0 (_tmp89_);
			_vala_ccode_writer_unref0 (writer);
			_vala_collection_object_unref0 (source_files);
			_vala_code_node_unref0 (unichar_struct);
			return;
		}
		vala_ccode_writer_write_newline (writer);
		once = (_tmp91_ = vala_ccode_once_section_new (_tmp90_ = vala_ccode_base_module_get_define_for_filename (vala_ccode_writer_get_filename (writer))), _g_free0 (_tmp90_), _tmp91_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp92_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp92_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->internal_header_declarations->include_directives);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp93_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp93_);
		if (vala_code_context_get_profile (context) == VALA_PROFILE_GOBJECT) {
			ValaCCodeIdentifier* _tmp94_;
			ValaCCodeNewline* _tmp95_;
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp94_ = vala_ccode_identifier_new ("G_BEGIN_DECLS")));
			_vala_ccode_node_unref0 (_tmp94_);
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp95_ = vala_ccode_newline_new ()));
			_vala_ccode_node_unref0 (_tmp95_);
		}
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp96_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp96_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->internal_header_declarations->type_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp97_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp97_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->internal_header_declarations->type_definition);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp98_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp98_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->internal_header_declarations->type_member_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp99_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp99_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->internal_header_declarations->constant_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp100_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp100_);
		if (vala_code_context_get_profile (context) == VALA_PROFILE_GOBJECT) {
			ValaCCodeIdentifier* _tmp101_;
			ValaCCodeNewline* _tmp102_;
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp101_ = vala_ccode_identifier_new ("G_END_DECLS")));
			_vala_ccode_node_unref0 (_tmp101_);
			vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp102_ = vala_ccode_newline_new ()));
			_vala_ccode_node_unref0 (_tmp102_);
		}
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp103_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp103_);
		vala_ccode_node_write ((ValaCCodeNode*) once, writer);
		vala_ccode_writer_close (writer);
		_vala_ccode_node_unref0 (once);
		_vala_ccode_writer_unref0 (writer);
	}
	_vala_collection_object_unref0 (source_files);
	_vala_code_node_unref0 (unichar_struct);
}


static gpointer _vala_ccode_base_module_emit_context_ref0 (gpointer self) {
	return self ? vala_ccode_base_module_emit_context_ref (self) : NULL;
}


void vala_ccode_base_module_push_context (ValaCCodeBaseModule* self, ValaCCodeBaseModuleEmitContext* emit_context) {
	ValaCCodeBaseModuleEmitContext* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (emit_context != NULL);
	if (self->emit_context != NULL) {
		vala_collection_add ((ValaCollection*) self->priv->emit_context_stack, self->emit_context);
	}
	self->emit_context = (_tmp0_ = _vala_ccode_base_module_emit_context_ref0 (emit_context), _vala_ccode_base_module_emit_context_unref0 (self->emit_context), _tmp0_);
}


void vala_ccode_base_module_pop_context (ValaCCodeBaseModule* self) {
	g_return_if_fail (self != NULL);
	if (vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) > 0) {
		ValaCCodeBaseModuleEmitContext* _tmp0_;
		self->emit_context = (_tmp0_ = (ValaCCodeBaseModuleEmitContext*) vala_list_get (self->priv->emit_context_stack, vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) - 1), _vala_ccode_base_module_emit_context_unref0 (self->emit_context), _tmp0_);
		vala_list_remove_at (self->priv->emit_context_stack, vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) - 1);
	} else {
		ValaCCodeBaseModuleEmitContext* _tmp1_;
		self->emit_context = (_tmp1_ = NULL, _vala_ccode_base_module_emit_context_unref0 (self->emit_context), _tmp1_);
	}
}


ValaCCodeIdentifier* vala_ccode_base_module_get_value_setter_function (ValaCCodeBaseModule* self, ValaDataType* type_reference) {
	ValaCCodeIdentifier* result = NULL;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type_reference != NULL, NULL);
	array_type = _vala_code_node_ref0 ((_tmp0_ = type_reference, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (vala_data_type_get_data_type (type_reference) != NULL) {
		char* _tmp1_;
		ValaCCodeIdentifier* _tmp2_;
		result = (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_typesymbol_get_set_value_function (vala_data_type_get_data_type (type_reference))), _g_free0 (_tmp1_), _tmp2_);
		_vala_code_node_unref0 (array_type);
		return result;
	} else {
		gboolean _tmp3_ = FALSE;
		if (array_type != NULL) {
			_tmp3_ = vala_data_type_get_data_type (vala_array_type_get_element_type (array_type)) == vala_data_type_get_data_type (self->string_type);
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			result = vala_ccode_identifier_new ("g_value_set_boxed");
			_vala_code_node_unref0 (array_type);
			return result;
		} else {
			result = vala_ccode_identifier_new ("g_value_set_pointer");
			_vala_code_node_unref0 (array_type);
			return result;
		}
	}
	_vala_code_node_unref0 (array_type);
}


ValaCCodeIdentifier* vala_ccode_base_module_get_value_taker_function (ValaCCodeBaseModule* self, ValaDataType* type_reference) {
	ValaCCodeIdentifier* result = NULL;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type_reference != NULL, NULL);
	array_type = _vala_code_node_ref0 ((_tmp0_ = type_reference, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (vala_data_type_get_data_type (type_reference) != NULL) {
		char* _tmp1_;
		ValaCCodeIdentifier* _tmp2_;
		result = (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_typesymbol_get_take_value_function (vala_data_type_get_data_type (type_reference))), _g_free0 (_tmp1_), _tmp2_);
		_vala_code_node_unref0 (array_type);
		return result;
	} else {
		gboolean _tmp3_ = FALSE;
		if (array_type != NULL) {
			_tmp3_ = vala_data_type_get_data_type (vala_array_type_get_element_type (array_type)) == vala_data_type_get_data_type (self->string_type);
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			result = vala_ccode_identifier_new ("g_value_take_boxed");
			_vala_code_node_unref0 (array_type);
			return result;
		} else {
			result = vala_ccode_identifier_new ("g_value_set_pointer");
			_vala_code_node_unref0 (array_type);
			return result;
		}
	}
	_vala_code_node_unref0 (array_type);
}


static ValaCCodeIdentifier* vala_ccode_base_module_get_value_getter_function (ValaCCodeBaseModule* self, ValaDataType* type_reference) {
	ValaCCodeIdentifier* result = NULL;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type_reference != NULL, NULL);
	array_type = _vala_code_node_ref0 ((_tmp0_ = type_reference, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (vala_data_type_get_data_type (type_reference) != NULL) {
		char* _tmp1_;
		ValaCCodeIdentifier* _tmp2_;
		result = (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_typesymbol_get_get_value_function (vala_data_type_get_data_type (type_reference))), _g_free0 (_tmp1_), _tmp2_);
		_vala_code_node_unref0 (array_type);
		return result;
	} else {
		gboolean _tmp3_ = FALSE;
		if (array_type != NULL) {
			_tmp3_ = vala_data_type_get_data_type (vala_array_type_get_element_type (array_type)) == vala_data_type_get_data_type (self->string_type);
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			result = vala_ccode_identifier_new ("g_value_get_boxed");
			_vala_code_node_unref0 (array_type);
			return result;
		} else {
			result = vala_ccode_identifier_new ("g_value_get_pointer");
			_vala_code_node_unref0 (array_type);
			return result;
		}
	}
	_vala_code_node_unref0 (array_type);
}


static void vala_ccode_base_module_real_append_vala_array_free (ValaCCodeBaseModule* self) {
	g_return_if_fail (self != NULL);
}


void vala_ccode_base_module_append_vala_array_free (ValaCCodeBaseModule* self) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->append_vala_array_free (self);
}


static void vala_ccode_base_module_real_append_vala_array_move (ValaCCodeBaseModule* self) {
	g_return_if_fail (self != NULL);
}


void vala_ccode_base_module_append_vala_array_move (ValaCCodeBaseModule* self) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->append_vala_array_move (self);
}


static void vala_ccode_base_module_real_append_vala_array_length (ValaCCodeBaseModule* self) {
	g_return_if_fail (self != NULL);
}


void vala_ccode_base_module_append_vala_array_length (ValaCCodeBaseModule* self) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->append_vala_array_length (self);
}


static void vala_ccode_base_module_append_vala_strcmp0 (ValaCCodeBaseModule* self) {
	ValaCCodeFunction* fun;
	ValaCCodeFormalParameter* _tmp0_;
	ValaCCodeFormalParameter* _tmp1_;
	ValaCCodeFunction* _tmp2_;
	ValaCCodeIdentifier* _tmp3_;
	ValaCCodeIdentifier* _tmp4_;
	ValaCCodeBinaryExpression* _tmp5_;
	ValaCCodeBinaryExpression* cineq;
	ValaCCodeBlock* _tmp6_;
	ValaCCodeBlock* cblock;
	ValaCCodeIdentifier* _tmp7_;
	ValaCCodeConstant* _tmp8_;
	ValaCCodeBinaryExpression* _tmp9_;
	ValaCCodeIfStatement* _tmp10_;
	ValaCCodeIfStatement* cif;
	ValaCCodeUnaryExpression* _tmp11_;
	ValaCCodeReturnStatement* _tmp12_;
	ValaCCodeBlock* _tmp13_;
	ValaCCodeIdentifier* _tmp14_;
	ValaCCodeConstant* _tmp15_;
	ValaCCodeBinaryExpression* _tmp16_;
	ValaCCodeIfStatement* _tmp17_;
	ValaCCodeReturnStatement* _tmp18_;
	ValaCCodeIdentifier* _tmp19_;
	ValaCCodeFunctionCall* _tmp20_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeIdentifier* _tmp21_;
	ValaCCodeIdentifier* _tmp22_;
	ValaCCodeReturnStatement* _tmp23_;
	g_return_if_fail (self != NULL);
	vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
	;
	fun = vala_ccode_function_new ("_vala_strcmp0", "int");
	vala_ccode_function_set_modifiers (fun, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (fun, _tmp0_ = vala_ccode_formal_parameter_new ("str1", "const char *"));
	_vala_ccode_node_unref0 (_tmp0_);
	vala_ccode_function_add_parameter (fun, _tmp1_ = vala_ccode_formal_parameter_new ("str2", "const char *"));
	_vala_ccode_node_unref0 (_tmp1_);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp2_ = vala_ccode_function_copy (fun)));
	_vala_ccode_node_unref0 (_tmp2_);
	cineq = (_tmp5_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("str1")), (ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new ("str2"))), _vala_ccode_node_unref0 (_tmp4_), _vala_ccode_node_unref0 (_tmp3_), _tmp5_);
	vala_ccode_function_set_block (fun, _tmp6_ = vala_ccode_block_new ());
	_vala_ccode_node_unref0 (_tmp6_);
	cblock = vala_ccode_block_new ();
	cif = (_tmp10_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("str1")), (ValaCCodeExpression*) (_tmp8_ = vala_ccode_constant_new ("NULL")))), (ValaCCodeStatement*) cblock, NULL), _vala_ccode_node_unref0 (_tmp9_), _vala_ccode_node_unref0 (_tmp8_), _vala_ccode_node_unref0 (_tmp7_), _tmp10_);
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp12_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_MINUS, (ValaCCodeExpression*) cineq)))));
	_vala_ccode_node_unref0 (_tmp12_);
	_vala_ccode_node_unref0 (_tmp11_);
	vala_ccode_block_add_statement (vala_ccode_function_get_block (fun), (ValaCCodeNode*) cif);
	cblock = (_tmp13_ = vala_ccode_block_new (), _vala_ccode_node_unref0 (cblock), _tmp13_);
	cif = (_tmp17_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) (_tmp16_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("str2")), (ValaCCodeExpression*) (_tmp15_ = vala_ccode_constant_new ("NULL")))), (ValaCCodeStatement*) cblock, NULL), _vala_ccode_node_unref0 (cif), _tmp17_);
	_vala_ccode_node_unref0 (_tmp16_);
	_vala_ccode_node_unref0 (_tmp15_);
	_vala_ccode_node_unref0 (_tmp14_);
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp18_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) cineq)));
	_vala_ccode_node_unref0 (_tmp18_);
	vala_ccode_block_add_statement (vala_ccode_function_get_block (fun), (ValaCCodeNode*) cif);
	ccall = (_tmp20_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new ("strcmp"))), _vala_ccode_node_unref0 (_tmp19_), _tmp20_);
	vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new ("str1")));
	_vala_ccode_node_unref0 (_tmp21_);
	vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_identifier_new ("str2")));
	_vala_ccode_node_unref0 (_tmp22_);
	vala_ccode_block_add_statement (vala_ccode_function_get_block (fun), (ValaCCodeNode*) (_tmp23_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) ccall)));
	_vala_ccode_node_unref0 (_tmp23_);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) fun);
	_vala_ccode_node_unref0 (ccall);
	_vala_ccode_node_unref0 (cif);
	_vala_ccode_node_unref0 (cblock);
	_vala_ccode_node_unref0 (cineq);
	_vala_ccode_node_unref0 (fun);
}


static void vala_ccode_base_module_real_visit_source_file (ValaCodeVisitor* base, ValaSourceFile* source_file) {
	ValaCCodeBaseModule * self;
	ValaCCodeDeclarationSpace* _tmp0_;
	ValaCCodeFragment* _tmp1_;
	ValaCCodeFragment* _tmp2_;
	ValaCCodeFragment* _tmp3_;
	ValaSet* _tmp4_;
	ValaSet* _tmp5_;
	ValaSet* _tmp6_;
	char* _tmp7_;
	ValaCCodeWriter* _tmp8_;
	ValaCCodeWriter* writer;
	ValaList* comments;
	ValaCCodeDeclarationSpace* _tmp10_;
	ValaCCodeFragment* _tmp11_;
	ValaCCodeFragment* _tmp12_;
	ValaCCodeFragment* _tmp13_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (source_file != NULL);
	self->source_declarations = (_tmp0_ = vala_ccode_declaration_space_new (), _vala_ccode_declaration_space_unref0 (self->source_declarations), _tmp0_);
	self->source_type_member_definition = (_tmp1_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (self->source_type_member_definition), _tmp1_);
	self->source_signal_marshaller_definition = (_tmp2_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (self->source_signal_marshaller_definition), _tmp2_);
	self->source_signal_marshaller_declaration = (_tmp3_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (self->source_signal_marshaller_declaration), _tmp3_);
	self->user_marshal_set = (_tmp4_ = (ValaSet*) vala_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal), _vala_collection_object_unref0 (self->user_marshal_set), _tmp4_);
	self->next_regex_id = 0;
	self->gvaluecollector_h_needed = FALSE;
	self->requires_array_free = FALSE;
	self->requires_array_move = FALSE;
	self->requires_array_length = FALSE;
	self->requires_strcmp0 = FALSE;
	self->wrappers = (_tmp5_ = (ValaSet*) vala_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal), _vala_collection_object_unref0 (self->wrappers), _tmp5_);
	self->priv->generated_external_symbols = (_tmp6_ = (ValaSet*) vala_hash_set_new (VALA_TYPE_SYMBOL, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_hash, g_direct_equal), _vala_collection_object_unref0 (self->priv->generated_external_symbols), _tmp6_);
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		vala_ccode_declaration_space_add_include (self->header_declarations, "glib.h", FALSE);
		vala_ccode_declaration_space_add_include (self->internal_header_declarations, "glib.h", FALSE);
		vala_ccode_declaration_space_add_include (self->source_declarations, "glib.h", FALSE);
		vala_ccode_declaration_space_add_include (self->source_declarations, "glib-object.h", FALSE);
	}
	vala_source_file_accept_children (source_file, (ValaCodeVisitor*) self);
	if (vala_report_get_errors (vala_code_context_get_report (self->priv->_context)) > 0) {
		return;
	}
	if (self->requires_array_free) {
		vala_ccode_base_module_append_vala_array_free (self);
	}
	if (self->requires_array_move) {
		vala_ccode_base_module_append_vala_array_move (self);
	}
	if (self->requires_array_length) {
		vala_ccode_base_module_append_vala_array_length (self);
	}
	if (self->requires_strcmp0) {
		vala_ccode_base_module_append_vala_strcmp0 (self);
	}
	if (self->gvaluecollector_h_needed) {
		vala_ccode_declaration_space_add_include (self->source_declarations, "gobject/gvaluecollector.h", FALSE);
	}
	writer = (_tmp8_ = vala_ccode_writer_new (_tmp7_ = vala_source_file_get_csource_filename (source_file), vala_source_file_get_filename (source_file)), _g_free0 (_tmp7_), _tmp8_);
	if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (self->priv->_context))) {
		char* _tmp9_;
		vala_report_error (NULL, _tmp9_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
		_g_free0 (_tmp9_);
		_vala_ccode_writer_unref0 (writer);
		return;
	}
	vala_ccode_writer_set_line_directives (writer, vala_code_context_get_debug (self->priv->_context));
	comments = vala_source_file_get_comments (source_file);
	if (comments != NULL) {
		{
			ValaIterator* _comment_it;
			_comment_it = vala_iterable_iterator ((ValaIterable*) comments);
			while (TRUE) {
				ValaComment* comment;
				ValaCCodeComment* ccomment;
				if (!vala_iterator_next (_comment_it)) {
					break;
				}
				comment = (ValaComment*) vala_iterator_get (_comment_it);
				ccomment = vala_ccode_comment_new (vala_comment_get_content (comment));
				vala_ccode_node_write ((ValaCCodeNode*) ccomment, writer);
				_vala_ccode_node_unref0 (ccomment);
				_vala_comment_unref0 (comment);
			}
			_vala_collection_object_unref0 (_comment_it);
		}
	}
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write ((ValaCCodeNode*) self->source_declarations->include_directives, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->type_declaration, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->type_definition, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write_declaration ((ValaCCodeNode*) self->source_declarations->type_member_declaration, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write ((ValaCCodeNode*) self->source_declarations->type_member_declaration, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->constant_declaration, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write_declaration ((ValaCCodeNode*) self->source_signal_marshaller_declaration, writer);
	vala_ccode_node_write ((ValaCCodeNode*) self->source_signal_marshaller_declaration, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write ((ValaCCodeNode*) self->source_type_member_definition, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_node_write ((ValaCCodeNode*) self->source_signal_marshaller_definition, writer);
	vala_ccode_writer_write_newline (writer);
	vala_ccode_writer_close (writer);
	self->source_declarations = (_tmp10_ = NULL, _vala_ccode_declaration_space_unref0 (self->source_declarations), _tmp10_);
	self->source_type_member_definition = (_tmp11_ = NULL, _vala_ccode_node_unref0 (self->source_type_member_definition), _tmp11_);
	self->source_signal_marshaller_definition = (_tmp12_ = NULL, _vala_ccode_node_unref0 (self->source_signal_marshaller_definition), _tmp12_);
	self->source_signal_marshaller_declaration = (_tmp13_ = NULL, _vala_ccode_node_unref0 (self->source_signal_marshaller_declaration), _tmp13_);
	_vala_collection_object_unref0 (comments);
	_vala_ccode_writer_unref0 (writer);
}


static glong string_get_length (const char* self) {
	glong result;
	g_return_val_if_fail (self != NULL, 0L);
	result = g_utf8_strlen (self, (gssize) (-1));
	return result;
}


static char* vala_ccode_base_module_get_define_for_filename (const char* filename) {
	char* result = NULL;
	GString* define;
	char* i;
	g_return_val_if_fail (filename != NULL, NULL);
	define = g_string_new ("__");
	i = g_strdup (filename);
	while (TRUE) {
		gunichar c;
		gboolean _tmp0_ = FALSE;
		char* _tmp1_;
		if (!(string_get_length (i) > 0)) {
			break;
		}
		c = g_utf8_get_char (i);
		if (g_unichar_isalnum (c)) {
			_tmp0_ = c < 0x80;
		} else {
			_tmp0_ = FALSE;
		}
		if (_tmp0_) {
			g_string_append_unichar (define, g_unichar_toupper (c));
		} else {
			g_string_append_c (define, '_');
		}
		i = (_tmp1_ = g_strdup (g_utf8_next_char (i)), _g_free0 (i), _tmp1_);
	}
	g_string_append (define, "__");
	result = g_strdup (define->str);
	_g_free0 (i);
	_g_string_free0 (define);
	return result;
}


static gboolean vala_ccode_base_module_real_generate_enum_declaration (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space) {
	gboolean result = FALSE;
	char* _tmp0_;
	gboolean _tmp1_;
	char* _tmp2_;
	ValaCCodeEnum* _tmp3_;
	ValaCCodeEnum* cenum;
	gint flag_shift;
	ValaCCodeNewline* _tmp12_;
	ValaCCodeNewline* _tmp13_;
	char* _tmp14_;
	char* _tmp15_;
	char* macro;
	char* _tmp16_;
	ValaCCodeMacroReplacement* _tmp17_;
	char* _tmp18_;
	char* _tmp19_;
	char* fun_name;
	ValaCCodeFunction* regfun;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (en != NULL, FALSE);
	g_return_val_if_fail (decl_space != NULL, FALSE);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) en, _tmp0_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) en, FALSE)), _g_free0 (_tmp0_), _tmp1_)) {
		result = FALSE;
		return result;
	}
	cenum = (_tmp3_ = vala_ccode_enum_new (_tmp2_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) en, FALSE)), _g_free0 (_tmp2_), _tmp3_);
	vala_ccode_enum_set_deprecated (cenum, vala_symbol_get_deprecated ((ValaSymbol*) en));
	flag_shift = 0;
	{
		ValaList* _tmp4_;
		ValaIterator* _tmp5_;
		ValaIterator* _ev_it;
		_ev_it = (_tmp5_ = vala_iterable_iterator ((ValaIterable*) (_tmp4_ = vala_enum_get_values (en))), _vala_collection_object_unref0 (_tmp4_), _tmp5_);
		while (TRUE) {
			ValaEnumValue* ev;
			ValaCCodeEnumValue* c_ev;
			if (!vala_iterator_next (_ev_it)) {
				break;
			}
			ev = (ValaEnumValue*) vala_iterator_get (_ev_it);
			c_ev = NULL;
			if (vala_constant_get_value ((ValaConstant*) ev) == NULL) {
				char* _tmp6_;
				ValaCCodeEnumValue* _tmp7_;
				c_ev = (_tmp7_ = vala_ccode_enum_value_new (_tmp6_ = vala_constant_get_cname ((ValaConstant*) ev), NULL), _vala_ccode_node_unref0 (c_ev), _tmp7_);
				_g_free0 (_tmp6_);
				if (vala_enum_get_is_flags (en)) {
					char* _tmp8_;
					ValaCCodeConstant* _tmp9_;
					vala_ccode_enum_value_set_value (c_ev, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_constant_new (_tmp8_ = g_strdup_printf ("1 << %d", flag_shift))));
					_vala_ccode_node_unref0 (_tmp9_);
					_g_free0 (_tmp8_);
					flag_shift = flag_shift + 1;
				}
			} else {
				char* _tmp10_;
				ValaCCodeEnumValue* _tmp11_;
				vala_code_node_emit ((ValaCodeNode*) vala_constant_get_value ((ValaConstant*) ev), (ValaCodeGenerator*) self);
				c_ev = (_tmp11_ = vala_ccode_enum_value_new (_tmp10_ = vala_constant_get_cname ((ValaConstant*) ev), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value ((ValaConstant*) ev)))), _vala_ccode_node_unref0 (c_ev), _tmp11_);
				_g_free0 (_tmp10_);
			}
			vala_ccode_enum_value_set_deprecated (c_ev, vala_symbol_get_deprecated ((ValaSymbol*) ev));
			vala_ccode_enum_add_value (cenum, c_ev);
			_vala_ccode_node_unref0 (c_ev);
			_vala_code_node_unref0 (ev);
		}
		_vala_collection_object_unref0 (_ev_it);
	}
	vala_ccode_declaration_space_add_type_definition (decl_space, (ValaCCodeNode*) cenum);
	vala_ccode_declaration_space_add_type_definition (decl_space, (ValaCCodeNode*) (_tmp12_ = vala_ccode_newline_new ()));
	_vala_ccode_node_unref0 (_tmp12_);
	if (!vala_enum_get_has_type_id (en)) {
		result = TRUE;
		_vala_ccode_node_unref0 (cenum);
		return result;
	}
	vala_ccode_declaration_space_add_type_declaration (decl_space, (ValaCCodeNode*) (_tmp13_ = vala_ccode_newline_new ()));
	_vala_ccode_node_unref0 (_tmp13_);
	macro = (_tmp15_ = g_strdup_printf ("(%s_get_type ())", _tmp14_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) en, NULL)), _g_free0 (_tmp14_), _tmp15_);
	vala_ccode_declaration_space_add_type_declaration (decl_space, (ValaCCodeNode*) (_tmp17_ = vala_ccode_macro_replacement_new (_tmp16_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) en), macro)));
	_vala_ccode_node_unref0 (_tmp17_);
	_g_free0 (_tmp16_);
	fun_name = (_tmp19_ = g_strdup_printf ("%s_get_type", _tmp18_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) en, NULL)), _g_free0 (_tmp18_), _tmp19_);
	regfun = vala_ccode_function_new (fun_name, "GType");
	vala_ccode_function_set_attributes (regfun, "G_GNUC_CONST");
	if (vala_symbol_get_access ((ValaSymbol*) en) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE) {
		vala_ccode_function_set_modifiers (regfun, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_function_set_attributes (regfun, "G_GNUC_UNUSED");
	}
	vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) regfun);
	result = TRUE;
	_vala_ccode_node_unref0 (regfun);
	_g_free0 (fun_name);
	_g_free0 (macro);
	_vala_ccode_node_unref0 (cenum);
	return result;
}


gboolean vala_ccode_base_module_generate_enum_declaration (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_enum_declaration (self, en, decl_space);
}


static void vala_ccode_base_module_real_visit_enum (ValaCodeVisitor* base, ValaEnum* en) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (en != NULL);
	vala_code_node_accept_children ((ValaCodeNode*) en, (ValaCodeVisitor*) self);
	if (vala_symbol_get_comment ((ValaSymbol*) en) != NULL) {
		ValaCCodeComment* _tmp0_;
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) (_tmp0_ = vala_ccode_comment_new (vala_comment_get_content (vala_symbol_get_comment ((ValaSymbol*) en)))));
		_vala_ccode_node_unref0 (_tmp0_);
	}
	vala_ccode_base_module_generate_enum_declaration (self, en, self->source_declarations);
	if (!vala_symbol_is_internal_symbol ((ValaSymbol*) en)) {
		vala_ccode_base_module_generate_enum_declaration (self, en, self->header_declarations);
	}
	if (!vala_symbol_is_private_symbol ((ValaSymbol*) en)) {
		vala_ccode_base_module_generate_enum_declaration (self, en, self->internal_header_declarations);
	}
}


void vala_ccode_base_module_visit_member (ValaCCodeBaseModule* self, ValaSymbol* m) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	if (VALA_IS_LOCKABLE (m)) {
		_tmp0_ = vala_lockable_get_lock_used (VALA_LOCKABLE (m));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeExpression* l;
		ValaCCodeFragment* init_fragment;
		ValaCCodeFragment* finalize_fragment;
		char* _tmp17_;
		ValaCCodeIdentifier* _tmp18_;
		ValaCCodeFunctionCall* _tmp19_;
		ValaCCodeFunctionCall* initf;
		ValaCCodeUnaryExpression* _tmp20_;
		ValaCCodeExpressionStatement* _tmp21_;
		l = (ValaCCodeExpression*) vala_ccode_identifier_new ("self");
		init_fragment = _vala_ccode_node_ref0 (self->class_init_fragment);
		finalize_fragment = _vala_ccode_node_ref0 (self->class_finalize_fragment);
		if (vala_symbol_is_instance_member (m)) {
			ValaCCodeMemberAccess* _tmp1_;
			char* _tmp2_;
			ValaCCodeExpression* _tmp3_;
			ValaCCodeFragment* _tmp4_;
			ValaCCodeFragment* _tmp5_;
			l = (_tmp3_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_member_access_new_pointer (l, "priv")), _tmp2_ = vala_ccode_base_module_get_symbol_lock_name (self, vala_symbol_get_name (m))), _vala_ccode_node_unref0 (l), _tmp3_);
			_g_free0 (_tmp2_);
			_vala_ccode_node_unref0 (_tmp1_);
			init_fragment = (_tmp4_ = _vala_ccode_node_ref0 (self->instance_init_fragment), _vala_ccode_node_unref0 (init_fragment), _tmp4_);
			finalize_fragment = (_tmp5_ = _vala_ccode_node_ref0 (self->instance_finalize_fragment), _vala_ccode_node_unref0 (finalize_fragment), _tmp5_);
		} else {
			if (vala_symbol_is_class_member (m)) {
				ValaTypeSymbol* parent;
				char* _tmp6_;
				char* _tmp7_;
				ValaCCodeIdentifier* _tmp8_;
				ValaCCodeFunctionCall* _tmp9_;
				ValaCCodeFunctionCall* get_class_private_call;
				ValaCCodeIdentifier* _tmp10_;
				char* _tmp11_;
				ValaCCodeExpression* _tmp12_;
				parent = _vala_code_node_ref0 (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol (m)));
				get_class_private_call = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new (_tmp7_ = g_strdup_printf ("%s_GET_CLASS_PRIVATE", _tmp6_ = vala_typesymbol_get_upper_case_cname (parent, NULL))))), _vala_ccode_node_unref0 (_tmp8_), _g_free0 (_tmp7_), _g_free0 (_tmp6_), _tmp9_);
				vala_ccode_function_call_add_argument (get_class_private_call, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new ("klass")));
				_vala_ccode_node_unref0 (_tmp10_);
				l = (_tmp12_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) get_class_private_call, _tmp11_ = vala_ccode_base_module_get_symbol_lock_name (self, vala_symbol_get_name (m))), _vala_ccode_node_unref0 (l), _tmp12_);
				_g_free0 (_tmp11_);
				_vala_ccode_node_unref0 (get_class_private_call);
				_vala_code_node_unref0 (parent);
			} else {
				char* _tmp13_;
				char* _tmp14_;
				char* _tmp15_;
				ValaCCodeExpression* _tmp16_;
				l = (_tmp16_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp15_ = vala_ccode_base_module_get_symbol_lock_name (self, _tmp14_ = g_strdup_printf ("%s_%s", _tmp13_ = vala_symbol_get_lower_case_cname (vala_symbol_get_parent_symbol (m), NULL), vala_symbol_get_name (m)))), _vala_ccode_node_unref0 (l), _tmp16_);
				_g_free0 (_tmp15_);
				_g_free0 (_tmp14_);
				_g_free0 (_tmp13_);
			}
		}
		initf = (_tmp19_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp18_ = vala_ccode_identifier_new (_tmp17_ = vala_method_get_cname (vala_struct_get_default_construction_method (self->mutex_type))))), _vala_ccode_node_unref0 (_tmp18_), _g_free0 (_tmp17_), _tmp19_);
		vala_ccode_function_call_add_argument (initf, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, l)));
		_vala_ccode_node_unref0 (_tmp20_);
		vala_ccode_fragment_append (init_fragment, (ValaCCodeNode*) (_tmp21_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) initf)));
		_vala_ccode_node_unref0 (_tmp21_);
		if (finalize_fragment != NULL) {
			ValaCCodeIdentifier* _tmp22_;
			ValaCCodeFunctionCall* _tmp23_;
			ValaCCodeFunctionCall* fc;
			ValaCCodeUnaryExpression* _tmp24_;
			ValaCCodeExpressionStatement* _tmp25_;
			fc = (_tmp23_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp22_ = vala_ccode_identifier_new ("g_static_rec_mutex_free"))), _vala_ccode_node_unref0 (_tmp22_), _tmp23_);
			vala_ccode_function_call_add_argument (fc, (ValaCCodeExpression*) (_tmp24_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, l)));
			_vala_ccode_node_unref0 (_tmp24_);
			vala_ccode_fragment_append (finalize_fragment, (ValaCCodeNode*) (_tmp25_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) fc)));
			_vala_ccode_node_unref0 (_tmp25_);
			_vala_ccode_node_unref0 (fc);
		}
		_vala_ccode_node_unref0 (initf);
		_vala_ccode_node_unref0 (finalize_fragment);
		_vala_ccode_node_unref0 (init_fragment);
		_vala_ccode_node_unref0 (l);
	}
}


void vala_ccode_base_module_generate_constant_declaration (ValaCCodeBaseModule* self, ValaConstant* c, ValaCCodeDeclarationSpace* decl_space, gboolean definition) {
	char* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (c != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) c, _tmp0_ = vala_constant_get_cname (c)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	if (!vala_symbol_get_external ((ValaSymbol*) c)) {
		ValaExpression* _tmp2_;
		ValaInitializerList* initializer_list;
		vala_ccode_base_module_generate_type_declaration (self, vala_constant_get_type_reference (c), decl_space);
		vala_code_node_emit ((ValaCodeNode*) vala_constant_get_value (c), (ValaCodeGenerator*) self);
		initializer_list = _vala_code_node_ref0 ((_tmp2_ = vala_constant_get_value (c), VALA_IS_INITIALIZER_LIST (_tmp2_) ? ((ValaInitializerList*) _tmp2_) : NULL));
		if (initializer_list != NULL) {
			char* _tmp3_;
			ValaCCodeDeclaration* _tmp4_;
			ValaCCodeDeclaration* _cdecl_;
			char* arr;
			ValaCCodeExpression* cinitializer;
			char* _tmp7_;
			char* _tmp8_;
			ValaCCodeVariableDeclarator* _tmp9_;
			_cdecl_ = (_tmp4_ = vala_ccode_declaration_new (_tmp3_ = vala_data_type_get_const_cname (vala_constant_get_type_reference (c))), _g_free0 (_tmp3_), _tmp4_);
			arr = g_strdup ("");
			if (VALA_IS_ARRAY_TYPE (vala_constant_get_type_reference (c))) {
				char* _tmp5_;
				arr = (_tmp5_ = g_strdup_printf ("[%d]", vala_initializer_list_get_size (initializer_list)), _g_free0 (arr), _tmp5_);
			}
			cinitializer = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value (c))));
			if (!definition) {
				ValaCCodeExpression* _tmp6_;
				cinitializer = (_tmp6_ = NULL, _vala_ccode_node_unref0 (cinitializer), _tmp6_);
			}
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp9_ = vala_ccode_variable_declarator_new (_tmp8_ = g_strdup_printf ("%s%s", _tmp7_ = vala_constant_get_cname (c), arr), cinitializer, NULL)));
			_vala_ccode_node_unref0 (_tmp9_);
			_g_free0 (_tmp8_);
			_g_free0 (_tmp7_);
			if (vala_symbol_is_private_symbol ((ValaSymbol*) c)) {
				vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
			} else {
				vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
			}
			vala_ccode_declaration_space_add_constant_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
			_vala_ccode_node_unref0 (cinitializer);
			_g_free0 (arr);
			_vala_ccode_node_unref0 (_cdecl_);
		} else {
			char* _tmp10_;
			ValaCCodeMacroReplacement* _tmp11_;
			ValaCCodeMacroReplacement* cdefine;
			cdefine = (_tmp11_ = vala_ccode_macro_replacement_new_with_expression (_tmp10_ = vala_constant_get_cname (c), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value (c)))), _g_free0 (_tmp10_), _tmp11_);
			vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) cdefine);
			_vala_ccode_node_unref0 (cdefine);
		}
		_vala_code_node_unref0 (initializer_list);
	}
}


static void vala_ccode_base_module_real_visit_constant (ValaCodeVisitor* base, ValaConstant* c) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (c != NULL);
	vala_ccode_base_module_generate_constant_declaration (self, c, self->source_declarations, TRUE);
	if (!vala_symbol_is_internal_symbol ((ValaSymbol*) c)) {
		vala_ccode_base_module_generate_constant_declaration (self, c, self->header_declarations, FALSE);
	}
	if (!vala_symbol_is_private_symbol ((ValaSymbol*) c)) {
		vala_ccode_base_module_generate_constant_declaration (self, c, self->internal_header_declarations, FALSE);
	}
}


void vala_ccode_base_module_generate_field_declaration (ValaCCodeBaseModule* self, ValaField* f, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	char* field_ctype;
	ValaCCodeDeclaration* _cdecl_;
	char* _tmp3_;
	char* _tmp4_;
	ValaCCodeVariableDeclarator* _tmp5_;
	gboolean _tmp12_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (f != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) f, _tmp0_ = vala_field_get_cname (f)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	vala_ccode_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) f), decl_space);
	field_ctype = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) f));
	if (vala_field_get_is_volatile (f)) {
		char* _tmp2_;
		field_ctype = (_tmp2_ = g_strconcat ("volatile ", field_ctype, NULL), _g_free0 (field_ctype), _tmp2_);
	}
	_cdecl_ = vala_ccode_declaration_new (field_ctype);
	vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp5_ = vala_ccode_variable_declarator_new (_tmp3_ = vala_field_get_cname (f), NULL, _tmp4_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) f)))));
	_vala_ccode_node_unref0 (_tmp5_);
	_g_free0 (_tmp4_);
	_g_free0 (_tmp3_);
	if (vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
	} else {
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
	}
	if (vala_symbol_get_deprecated ((ValaSymbol*) f)) {
		vala_ccode_declaration_set_modifiers (_cdecl_, vala_ccode_declaration_get_modifiers (_cdecl_) | VALA_CCODE_MODIFIERS_DEPRECATED);
	}
	vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
	if (vala_lockable_get_lock_used ((ValaLockable*) f)) {
		char* _tmp6_;
		ValaCCodeDeclaration* _tmp7_;
		ValaCCodeDeclaration* flock;
		char* _tmp8_;
		char* _tmp9_;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeVariableDeclarator* _tmp11_;
		ValaCCodeVariableDeclarator* flock_decl;
		flock = (_tmp7_ = vala_ccode_declaration_new (_tmp6_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) self->mutex_type, FALSE)), _g_free0 (_tmp6_), _tmp7_);
		flock_decl = (_tmp11_ = vala_ccode_variable_declarator_new (_tmp9_ = vala_ccode_base_module_get_symbol_lock_name (self, _tmp8_ = vala_field_get_cname (f)), (ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("{0}")), NULL), _vala_ccode_node_unref0 (_tmp10_), _g_free0 (_tmp9_), _g_free0 (_tmp8_), _tmp11_);
		vala_ccode_declaration_add_declarator (flock, (ValaCCodeDeclarator*) flock_decl);
		if (vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
			vala_ccode_declaration_set_modifiers (flock, VALA_CCODE_MODIFIERS_STATIC);
		} else {
			vala_ccode_declaration_set_modifiers (flock, VALA_CCODE_MODIFIERS_EXTERN);
		}
		vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) flock);
		_vala_ccode_node_unref0 (flock_decl);
		_vala_ccode_node_unref0 (flock);
	}
	if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
		_tmp12_ = !vala_field_get_no_array_length (f);
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		ValaArrayType* array_type;
		array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
		if (!vala_array_type_get_fixed_length (array_type)) {
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp13_;
					_tmp13_ = TRUE;
					while (TRUE) {
						ValaDataType* len_type;
						char* _tmp14_;
						ValaCCodeDeclaration* _tmp15_;
						char* _tmp16_;
						char* _tmp17_;
						ValaCCodeVariableDeclarator* _tmp18_;
						if (!_tmp13_) {
							dim++;
						}
						_tmp13_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						len_type = vala_data_type_copy (self->int_type);
						_cdecl_ = (_tmp15_ = vala_ccode_declaration_new (_tmp14_ = vala_data_type_get_cname (len_type)), _vala_ccode_node_unref0 (_cdecl_), _tmp15_);
						_g_free0 (_tmp14_);
						vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp18_ = vala_ccode_variable_declarator_new (_tmp17_ = vala_ccode_base_module_get_array_length_cname (self, _tmp16_ = vala_field_get_cname (f), dim), NULL, NULL)));
						_vala_ccode_node_unref0 (_tmp18_);
						_g_free0 (_tmp17_);
						_g_free0 (_tmp16_);
						if (vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
							vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
						} else {
							vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
						}
						vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
						_vala_code_node_unref0 (len_type);
					}
				}
			}
		}
		_vala_code_node_unref0 (array_type);
	} else {
		if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
			ValaDelegateType* delegate_type;
			delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
			if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
				ValaCCodeDeclaration* _tmp19_;
				char* _tmp20_;
				char* _tmp21_;
				ValaCCodeVariableDeclarator* _tmp22_;
				_cdecl_ = (_tmp19_ = vala_ccode_declaration_new ("gpointer"), _vala_ccode_node_unref0 (_cdecl_), _tmp19_);
				vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp22_ = vala_ccode_variable_declarator_new (_tmp21_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp20_ = vala_field_get_cname (f)), NULL, NULL)));
				_vala_ccode_node_unref0 (_tmp22_);
				_g_free0 (_tmp21_);
				_g_free0 (_tmp20_);
				if (vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
					vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
				} else {
					vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
				}
				vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
				if (vala_data_type_get_value_owned ((ValaDataType*) delegate_type)) {
					ValaCCodeDeclaration* _tmp23_;
					char* _tmp24_;
					char* _tmp25_;
					ValaCCodeVariableDeclarator* _tmp26_;
					_cdecl_ = (_tmp23_ = vala_ccode_declaration_new ("GDestroyNotify"), _vala_ccode_node_unref0 (_cdecl_), _tmp23_);
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp26_ = vala_ccode_variable_declarator_new (_tmp25_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp24_ = vala_field_get_cname (f)), NULL, NULL)));
					_vala_ccode_node_unref0 (_tmp26_);
					_g_free0 (_tmp25_);
					_g_free0 (_tmp24_);
					if (vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
						vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
					} else {
						vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
					}
					vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
				}
			}
			_vala_code_node_unref0 (delegate_type);
		}
	}
	_vala_ccode_node_unref0 (_cdecl_);
	_g_free0 (field_ctype);
}


static void vala_ccode_base_module_real_visit_field (ValaCodeVisitor* base, ValaField* f) {
	ValaCCodeBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	gboolean is_gtypeinstance;
	ValaCCodeExpression* lhs;
	char* field_ctype;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (f != NULL);
	vala_ccode_base_module_visit_member (self, (ValaSymbol*) f);
	vala_ccode_base_module_check_type (self, vala_variable_get_variable_type ((ValaVariable*) f));
	if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f), (ValaCodeGenerator*) self);
	}
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_symbol_get_parent_symbol ((ValaSymbol*) f), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp1_ = !vala_class_get_is_compact (cl);
	} else {
		_tmp1_ = FALSE;
	}
	is_gtypeinstance = _tmp1_;
	lhs = NULL;
	field_ctype = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) f));
	if (vala_field_get_is_volatile (f)) {
		char* _tmp2_;
		field_ctype = (_tmp2_ = g_strconcat ("volatile ", field_ctype, NULL), _g_free0 (field_ctype), _tmp2_);
	}
	if (vala_field_get_binding (f) == MEMBER_BINDING_INSTANCE) {
		gboolean _tmp3_ = FALSE;
		gboolean _tmp27_ = FALSE;
		if (is_gtypeinstance) {
			_tmp3_ = vala_symbol_get_access ((ValaSymbol*) f) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE;
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			ValaCCodeIdentifier* _tmp4_;
			ValaCCodeMemberAccess* _tmp5_;
			char* _tmp6_;
			ValaCCodeExpression* _tmp7_;
			lhs = (_tmp7_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new ("self")), "priv")), _tmp6_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp7_);
			_g_free0 (_tmp6_);
			_vala_ccode_node_unref0 (_tmp5_);
			_vala_ccode_node_unref0 (_tmp4_);
		} else {
			ValaCCodeIdentifier* _tmp8_;
			char* _tmp9_;
			ValaCCodeExpression* _tmp10_;
			lhs = (_tmp10_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("self")), _tmp9_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp10_);
			_g_free0 (_tmp9_);
			_vala_ccode_node_unref0 (_tmp8_);
		}
		if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
			ValaCCodeExpression* rhs;
			ValaCCodeAssignment* _tmp11_;
			ValaCCodeExpressionStatement* _tmp12_;
			gboolean _tmp13_ = FALSE;
			gboolean _tmp14_ = FALSE;
			rhs = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
			vala_ccode_fragment_append (self->instance_init_fragment, (ValaCCodeNode*) (_tmp12_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_assignment_new (lhs, rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp12_);
			_vala_ccode_node_unref0 (_tmp11_);
			if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
				_tmp14_ = !vala_field_get_no_array_length (f);
			} else {
				_tmp14_ = FALSE;
			}
			if (_tmp14_) {
				_tmp13_ = VALA_IS_ARRAY_CREATION_EXPRESSION (vala_variable_get_initializer ((ValaVariable*) f));
			} else {
				_tmp13_ = FALSE;
			}
			if (_tmp13_) {
				ValaArrayType* array_type;
				ValaMemberAccess* this_access;
				ValaDataType* _tmp15_;
				ValaCCodeIdentifier* _tmp16_;
				ValaMemberAccess* ma;
				ValaList* sizes;
				gboolean _tmp20_ = FALSE;
				array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
				this_access = vala_member_access_new_simple ("this", NULL);
				vala_expression_set_value_type ((ValaExpression*) this_access, _tmp15_ = vala_ccode_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f))));
				_vala_code_node_unref0 (_tmp15_);
				vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp16_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp16_);
				ma = vala_member_access_new ((ValaExpression*) this_access, vala_symbol_get_name ((ValaSymbol*) f), NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
				sizes = vala_array_creation_expression_get_sizes (VALA_ARRAY_CREATION_EXPRESSION (vala_variable_get_initializer ((ValaVariable*) f)));
				{
					gint dim;
					dim = 1;
					{
						gboolean _tmp17_;
						_tmp17_ = TRUE;
						while (TRUE) {
							ValaCCodeExpression* array_len_lhs;
							ValaExpression* size;
							ValaCCodeAssignment* _tmp18_;
							ValaCCodeExpressionStatement* _tmp19_;
							if (!_tmp17_) {
								dim++;
							}
							_tmp17_ = FALSE;
							if (!(dim <= vala_array_type_get_rank (array_type))) {
								break;
							}
							array_len_lhs = vala_ccode_base_module_get_array_length_cexpression (self, (ValaExpression*) ma, dim);
							size = (ValaExpression*) vala_list_get (sizes, dim - 1);
							vala_ccode_fragment_append (self->instance_init_fragment, (ValaCCodeNode*) (_tmp19_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp18_ = vala_ccode_assignment_new (array_len_lhs, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) size)), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
							_vala_ccode_node_unref0 (_tmp19_);
							_vala_ccode_node_unref0 (_tmp18_);
							_vala_code_node_unref0 (size);
							_vala_ccode_node_unref0 (array_len_lhs);
						}
					}
				}
				if (vala_array_type_get_rank (array_type) == 1) {
					_tmp20_ = vala_symbol_is_internal_symbol ((ValaSymbol*) f);
				} else {
					_tmp20_ = FALSE;
				}
				if (_tmp20_) {
					ValaCCodeExpression* lhs_array_size;
					ValaCCodeExpression* rhs_array_len;
					ValaCCodeAssignment* _tmp21_;
					ValaCCodeExpressionStatement* _tmp22_;
					lhs_array_size = vala_ccode_base_module_get_array_size_cexpression (self, (ValaExpression*) ma);
					rhs_array_len = vala_ccode_base_module_get_array_length_cexpression (self, (ValaExpression*) ma, 1);
					vala_ccode_fragment_append (self->instance_init_fragment, (ValaCCodeNode*) (_tmp22_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_assignment_new (lhs_array_size, rhs_array_len, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
					_vala_ccode_node_unref0 (_tmp22_);
					_vala_ccode_node_unref0 (_tmp21_);
					_vala_ccode_node_unref0 (rhs_array_len);
					_vala_ccode_node_unref0 (lhs_array_size);
				}
				_vala_collection_object_unref0 (sizes);
				_vala_code_node_unref0 (ma);
				_vala_code_node_unref0 (this_access);
				_vala_code_node_unref0 (array_type);
			}
			vala_ccode_base_module_append_temp_decl (self, self->instance_init_fragment, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
			{
				ValaIterator* _local_it;
				_local_it = vala_iterable_iterator ((ValaIterable*) vala_ccode_base_module_get_temp_ref_vars (self));
				while (TRUE) {
					ValaLocalVariable* local;
					ValaMemberAccess* ma;
					ValaDataType* _tmp23_;
					ValaCCodeExpression* _tmp24_;
					ValaCCodeExpression* _tmp25_;
					ValaCCodeExpressionStatement* _tmp26_;
					if (!vala_iterator_next (_local_it)) {
						break;
					}
					local = (ValaLocalVariable*) vala_iterator_get (_local_it);
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_expression_set_value_type ((ValaExpression*) ma, _tmp23_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
					_vala_code_node_unref0 (_tmp23_);
					vala_ccode_fragment_append (self->instance_init_fragment, (ValaCCodeNode*) (_tmp26_ = vala_ccode_expression_statement_new (_tmp25_ = vala_ccode_base_module_get_unref_expression (self, _tmp24_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp26_);
					_vala_ccode_node_unref0 (_tmp25_);
					_vala_ccode_node_unref0 (_tmp24_);
					_vala_code_node_unref0 (ma);
					_vala_code_node_unref0 (local);
				}
				_vala_collection_object_unref0 (_local_it);
			}
			vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
			vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_ref_vars (self));
			_vala_ccode_node_unref0 (rhs);
		}
		if (vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) f))) {
			_tmp27_ = self->instance_finalize_fragment != NULL;
		} else {
			_tmp27_ = FALSE;
		}
		if (_tmp27_) {
			ValaMemberAccess* this_access;
			ValaDataType* _tmp28_;
			ValaSymbol* _tmp29_;
			ValaStruct* field_st;
			gboolean _tmp30_ = FALSE;
			ValaMemberAccess* ma;
			ValaDataType* _tmp33_;
			ValaCCodeExpression* _tmp34_;
			ValaCCodeExpressionStatement* _tmp35_;
			this_access = vala_member_access_new_simple ("this", NULL);
			vala_expression_set_value_type ((ValaExpression*) this_access, _tmp28_ = vala_ccode_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f))));
			_vala_code_node_unref0 (_tmp28_);
			field_st = _vala_code_node_ref0 ((_tmp29_ = vala_symbol_get_parent_symbol ((ValaSymbol*) f), VALA_IS_STRUCT (_tmp29_) ? ((ValaStruct*) _tmp29_) : NULL));
			if (field_st != NULL) {
				_tmp30_ = !vala_struct_is_simple_type (field_st);
			} else {
				_tmp30_ = FALSE;
			}
			if (_tmp30_) {
				ValaCCodeIdentifier* _tmp31_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp31_ = vala_ccode_identifier_new ("(*self)")));
				_vala_ccode_node_unref0 (_tmp31_);
			} else {
				ValaCCodeIdentifier* _tmp32_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp32_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp32_);
			}
			ma = vala_member_access_new ((ValaExpression*) this_access, vala_symbol_get_name ((ValaSymbol*) f), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
			vala_expression_set_value_type ((ValaExpression*) ma, _tmp33_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) f)));
			_vala_code_node_unref0 (_tmp33_);
			vala_ccode_fragment_append (self->instance_finalize_fragment, (ValaCCodeNode*) (_tmp35_ = vala_ccode_expression_statement_new (_tmp34_ = vala_ccode_base_module_get_unref_expression (self, lhs, vala_variable_get_variable_type ((ValaVariable*) f), (ValaExpression*) ma, FALSE))));
			_vala_ccode_node_unref0 (_tmp35_);
			_vala_ccode_node_unref0 (_tmp34_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (field_st);
			_vala_code_node_unref0 (this_access);
		}
	} else {
		if (vala_field_get_binding (f) == MEMBER_BINDING_CLASS) {
			if (!is_gtypeinstance) {
				vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) f), "class fields are not supported in compact classes");
				vala_code_node_set_error ((ValaCodeNode*) f, TRUE);
				_g_free0 (field_ctype);
				_vala_ccode_node_unref0 (lhs);
				_vala_code_node_unref0 (cl);
				return;
			}
			if (vala_symbol_get_access ((ValaSymbol*) f) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE) {
				char* _tmp36_;
				char* _tmp37_;
				ValaCCodeIdentifier* _tmp38_;
				ValaCCodeFunctionCall* _tmp39_;
				ValaCCodeFunctionCall* ccall;
				ValaCCodeIdentifier* _tmp40_;
				char* _tmp41_;
				ValaCCodeExpression* _tmp42_;
				ccall = (_tmp39_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp38_ = vala_ccode_identifier_new (_tmp37_ = g_strdup_printf ("%s_GET_CLASS_PRIVATE", _tmp36_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) cl, NULL))))), _vala_ccode_node_unref0 (_tmp38_), _g_free0 (_tmp37_), _g_free0 (_tmp36_), _tmp39_);
				vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp40_ = vala_ccode_identifier_new ("klass")));
				_vala_ccode_node_unref0 (_tmp40_);
				lhs = (_tmp42_ = (ValaCCodeExpression*) vala_ccode_member_access_new ((ValaCCodeExpression*) ccall, _tmp41_ = vala_field_get_cname (f), TRUE), _vala_ccode_node_unref0 (lhs), _tmp42_);
				_g_free0 (_tmp41_);
				_vala_ccode_node_unref0 (ccall);
			} else {
				ValaCCodeIdentifier* _tmp43_;
				char* _tmp44_;
				ValaCCodeExpression* _tmp45_;
				lhs = (_tmp45_ = (ValaCCodeExpression*) vala_ccode_member_access_new ((ValaCCodeExpression*) (_tmp43_ = vala_ccode_identifier_new ("klass")), _tmp44_ = vala_field_get_cname (f), TRUE), _vala_ccode_node_unref0 (lhs), _tmp45_);
				_g_free0 (_tmp44_);
				_vala_ccode_node_unref0 (_tmp43_);
			}
			if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
				ValaCCodeExpression* rhs;
				ValaCCodeAssignment* _tmp46_;
				ValaCCodeExpressionStatement* _tmp47_;
				rhs = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
				vala_ccode_fragment_append (self->class_init_fragment, (ValaCCodeNode*) (_tmp47_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp46_ = vala_ccode_assignment_new (lhs, rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp47_);
				_vala_ccode_node_unref0 (_tmp46_);
				vala_ccode_base_module_append_temp_decl (self, self->class_init_fragment, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
				{
					ValaIterator* _local_it;
					_local_it = vala_iterable_iterator ((ValaIterable*) vala_ccode_base_module_get_temp_ref_vars (self));
					while (TRUE) {
						ValaLocalVariable* local;
						ValaMemberAccess* ma;
						ValaDataType* _tmp48_;
						ValaCCodeExpression* _tmp49_;
						ValaCCodeExpression* _tmp50_;
						ValaCCodeExpressionStatement* _tmp51_;
						if (!vala_iterator_next (_local_it)) {
							break;
						}
						local = (ValaLocalVariable*) vala_iterator_get (_local_it);
						ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
						vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
						vala_expression_set_value_type ((ValaExpression*) ma, _tmp48_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
						_vala_code_node_unref0 (_tmp48_);
						vala_ccode_fragment_append (self->class_init_fragment, (ValaCCodeNode*) (_tmp51_ = vala_ccode_expression_statement_new (_tmp50_ = vala_ccode_base_module_get_unref_expression (self, _tmp49_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
						_vala_ccode_node_unref0 (_tmp51_);
						_vala_ccode_node_unref0 (_tmp50_);
						_vala_ccode_node_unref0 (_tmp49_);
						_vala_code_node_unref0 (ma);
						_vala_code_node_unref0 (local);
					}
					_vala_collection_object_unref0 (_local_it);
				}
				vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
				vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_ref_vars (self));
				_vala_ccode_node_unref0 (rhs);
			}
		} else {
			char* _tmp52_;
			ValaCCodeExpression* _tmp53_;
			char* _tmp54_;
			char* _tmp55_;
			ValaCCodeVariableDeclarator* _tmp56_;
			ValaCCodeVariableDeclarator* var_decl;
			ValaCCodeExpression* _tmp57_;
			ValaCCodeDeclaration* var_def;
			gboolean _tmp58_ = FALSE;
			vala_ccode_base_module_generate_field_declaration (self, f, self->source_declarations);
			if (!vala_symbol_is_internal_symbol ((ValaSymbol*) f)) {
				vala_ccode_base_module_generate_field_declaration (self, f, self->header_declarations);
			}
			if (!vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
				vala_ccode_base_module_generate_field_declaration (self, f, self->internal_header_declarations);
			}
			lhs = (_tmp53_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp52_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp53_);
			_g_free0 (_tmp52_);
			var_decl = (_tmp56_ = vala_ccode_variable_declarator_new (_tmp54_ = vala_field_get_cname (f), NULL, _tmp55_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) f))), _g_free0 (_tmp55_), _g_free0 (_tmp54_), _tmp56_);
			vala_ccode_variable_declarator_set_initializer (var_decl, _tmp57_ = vala_ccode_base_module_default_value_for_type (self, vala_variable_get_variable_type ((ValaVariable*) f), TRUE));
			_vala_ccode_node_unref0 (_tmp57_);
			if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
				ValaCCodeExpression* init;
				init = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
				if (vala_ccode_base_module_is_constant_ccode_expression (self, init)) {
					vala_ccode_variable_declarator_set_initializer (var_decl, init);
				}
				_vala_ccode_node_unref0 (init);
			}
			var_def = vala_ccode_declaration_new (field_ctype);
			vala_ccode_declaration_add_declarator (var_def, (ValaCCodeDeclarator*) var_decl);
			if (!vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
				vala_ccode_declaration_set_modifiers (var_def, VALA_CCODE_MODIFIERS_EXTERN);
			} else {
				vala_ccode_declaration_set_modifiers (var_def, VALA_CCODE_MODIFIERS_STATIC);
			}
			vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) var_def);
			if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
				_tmp58_ = !vala_field_get_no_array_length (f);
			} else {
				_tmp58_ = FALSE;
			}
			if (_tmp58_) {
				ValaArrayType* array_type;
				array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
				if (!vala_array_type_get_fixed_length (array_type)) {
					gboolean _tmp66_ = FALSE;
					{
						gint dim;
						dim = 1;
						{
							gboolean _tmp59_;
							_tmp59_ = TRUE;
							while (TRUE) {
								ValaDataType* len_type;
								char* _tmp60_;
								ValaCCodeDeclaration* _tmp61_;
								ValaCCodeDeclaration* len_def;
								char* _tmp62_;
								char* _tmp63_;
								ValaCCodeConstant* _tmp64_;
								ValaCCodeVariableDeclarator* _tmp65_;
								if (!_tmp59_) {
									dim++;
								}
								_tmp59_ = FALSE;
								if (!(dim <= vala_array_type_get_rank (array_type))) {
									break;
								}
								len_type = vala_data_type_copy (self->int_type);
								len_def = (_tmp61_ = vala_ccode_declaration_new (_tmp60_ = vala_data_type_get_cname (len_type)), _g_free0 (_tmp60_), _tmp61_);
								vala_ccode_declaration_add_declarator (len_def, (ValaCCodeDeclarator*) (_tmp65_ = vala_ccode_variable_declarator_new (_tmp63_ = vala_ccode_base_module_get_array_length_cname (self, _tmp62_ = vala_field_get_cname (f), dim), (ValaCCodeExpression*) (_tmp64_ = vala_ccode_constant_new ("0")), NULL)));
								_vala_ccode_node_unref0 (_tmp65_);
								_vala_ccode_node_unref0 (_tmp64_);
								_g_free0 (_tmp63_);
								_g_free0 (_tmp62_);
								if (!vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
									vala_ccode_declaration_set_modifiers (len_def, VALA_CCODE_MODIFIERS_EXTERN);
								} else {
									vala_ccode_declaration_set_modifiers (len_def, VALA_CCODE_MODIFIERS_STATIC);
								}
								vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) len_def);
								_vala_ccode_node_unref0 (len_def);
								_vala_code_node_unref0 (len_type);
							}
						}
					}
					if (vala_array_type_get_rank (array_type) == 1) {
						_tmp66_ = vala_symbol_is_internal_symbol ((ValaSymbol*) f);
					} else {
						_tmp66_ = FALSE;
					}
					if (_tmp66_) {
						ValaDataType* len_type;
						char* _tmp67_;
						ValaCCodeDeclaration* _tmp68_;
						ValaCCodeDeclaration* _cdecl_;
						char* _tmp69_;
						char* _tmp70_;
						ValaCCodeConstant* _tmp71_;
						ValaCCodeVariableDeclarator* _tmp72_;
						len_type = vala_data_type_copy (self->int_type);
						_cdecl_ = (_tmp68_ = vala_ccode_declaration_new (_tmp67_ = vala_data_type_get_cname (len_type)), _g_free0 (_tmp67_), _tmp68_);
						vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp72_ = vala_ccode_variable_declarator_new (_tmp70_ = vala_ccode_base_module_get_array_size_cname (self, _tmp69_ = vala_field_get_cname (f)), (ValaCCodeExpression*) (_tmp71_ = vala_ccode_constant_new ("0")), NULL)));
						_vala_ccode_node_unref0 (_tmp72_);
						_vala_ccode_node_unref0 (_tmp71_);
						_g_free0 (_tmp70_);
						_g_free0 (_tmp69_);
						vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
						vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) _cdecl_);
						_vala_ccode_node_unref0 (_cdecl_);
						_vala_code_node_unref0 (len_type);
					}
				}
				_vala_code_node_unref0 (array_type);
			} else {
				if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
					ValaDelegateType* delegate_type;
					delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
					if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
						ValaCCodeDeclaration* target_def;
						char* _tmp73_;
						char* _tmp74_;
						ValaCCodeConstant* _tmp75_;
						ValaCCodeVariableDeclarator* _tmp76_;
						target_def = vala_ccode_declaration_new ("gpointer");
						vala_ccode_declaration_add_declarator (target_def, (ValaCCodeDeclarator*) (_tmp76_ = vala_ccode_variable_declarator_new (_tmp74_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp73_ = vala_field_get_cname (f)), (ValaCCodeExpression*) (_tmp75_ = vala_ccode_constant_new ("NULL")), NULL)));
						_vala_ccode_node_unref0 (_tmp76_);
						_vala_ccode_node_unref0 (_tmp75_);
						_g_free0 (_tmp74_);
						_g_free0 (_tmp73_);
						if (!vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
							vala_ccode_declaration_set_modifiers (target_def, VALA_CCODE_MODIFIERS_EXTERN);
						} else {
							vala_ccode_declaration_set_modifiers (target_def, VALA_CCODE_MODIFIERS_STATIC);
						}
						vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) target_def);
						if (vala_data_type_get_value_owned ((ValaDataType*) delegate_type)) {
							ValaCCodeDeclaration* target_destroy_notify_def;
							char* _tmp77_;
							char* _tmp78_;
							ValaCCodeConstant* _tmp79_;
							ValaCCodeVariableDeclarator* _tmp80_;
							target_destroy_notify_def = vala_ccode_declaration_new ("GDestroyNotify");
							vala_ccode_declaration_add_declarator (target_destroy_notify_def, (ValaCCodeDeclarator*) (_tmp80_ = vala_ccode_variable_declarator_new (_tmp78_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp77_ = vala_field_get_cname (f)), (ValaCCodeExpression*) (_tmp79_ = vala_ccode_constant_new ("NULL")), NULL)));
							_vala_ccode_node_unref0 (_tmp80_);
							_vala_ccode_node_unref0 (_tmp79_);
							_g_free0 (_tmp78_);
							_g_free0 (_tmp77_);
							if (!vala_symbol_is_private_symbol ((ValaSymbol*) f)) {
								vala_ccode_declaration_set_modifiers (target_destroy_notify_def, VALA_CCODE_MODIFIERS_EXTERN);
							} else {
								vala_ccode_declaration_set_modifiers (target_destroy_notify_def, VALA_CCODE_MODIFIERS_STATIC);
							}
							vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) target_destroy_notify_def);
							_vala_ccode_node_unref0 (target_destroy_notify_def);
						}
						_vala_ccode_node_unref0 (target_def);
					}
					_vala_code_node_unref0 (delegate_type);
				}
			}
			if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
				ValaCCodeExpression* rhs;
				rhs = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
				if (!vala_ccode_base_module_is_constant_ccode_expression (self, rhs)) {
					if (VALA_IS_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) f))) {
						gboolean _tmp89_ = FALSE;
						gboolean _tmp90_ = FALSE;
						if (VALA_IS_INITIALIZER_LIST (vala_variable_get_initializer ((ValaVariable*) f))) {
							ValaCCodeBlock* block;
							ValaCCodeFragment* frag;
							ValaLocalVariable* temp_decl;
							char* _tmp81_;
							ValaCCodeDeclaration* _tmp82_;
							ValaCCodeDeclaration* _cdecl_;
							ValaCCodeVariableDeclarator* vardecl;
							char* _tmp83_;
							ValaCCodeExpression* _tmp84_;
							ValaCCodeExpression* tmp;
							ValaCCodeAssignment* _tmp85_;
							ValaCCodeExpressionStatement* _tmp86_;
							block = vala_ccode_block_new ();
							frag = vala_ccode_fragment_new ();
							temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_variable_get_variable_type ((ValaVariable*) f), TRUE, NULL, TRUE);
							_cdecl_ = (_tmp82_ = vala_ccode_declaration_new (_tmp81_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) temp_decl))), _g_free0 (_tmp81_), _tmp82_);
							vardecl = vala_ccode_variable_declarator_new (vala_symbol_get_name ((ValaSymbol*) temp_decl), rhs, NULL);
							vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) vardecl);
							vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
							vala_ccode_fragment_append (frag, (ValaCCodeNode*) _cdecl_);
							tmp = (_tmp84_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp83_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) temp_decl))), _g_free0 (_tmp83_), _tmp84_);
							vala_ccode_fragment_append (frag, (ValaCCodeNode*) (_tmp86_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp85_ = vala_ccode_assignment_new (lhs, tmp, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
							_vala_ccode_node_unref0 (_tmp86_);
							_vala_ccode_node_unref0 (_tmp85_);
							vala_ccode_block_add_statement (block, (ValaCCodeNode*) frag);
							vala_ccode_fragment_append (self->class_init_fragment, (ValaCCodeNode*) block);
							_vala_ccode_node_unref0 (tmp);
							_vala_ccode_node_unref0 (vardecl);
							_vala_ccode_node_unref0 (_cdecl_);
							_vala_code_node_unref0 (temp_decl);
							_vala_ccode_node_unref0 (frag);
							_vala_ccode_node_unref0 (block);
						} else {
							ValaCCodeAssignment* _tmp87_;
							ValaCCodeExpressionStatement* _tmp88_;
							vala_ccode_fragment_append (self->class_init_fragment, (ValaCCodeNode*) (_tmp88_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp87_ = vala_ccode_assignment_new (lhs, rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
							_vala_ccode_node_unref0 (_tmp88_);
							_vala_ccode_node_unref0 (_tmp87_);
						}
						if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
							_tmp90_ = !vala_field_get_no_array_length (f);
						} else {
							_tmp90_ = FALSE;
						}
						if (_tmp90_) {
							_tmp89_ = VALA_IS_ARRAY_CREATION_EXPRESSION (vala_variable_get_initializer ((ValaVariable*) f));
						} else {
							_tmp89_ = FALSE;
						}
						if (_tmp89_) {
							ValaArrayType* array_type;
							ValaMemberAccess* ma;
							ValaList* sizes;
							array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
							ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) f), NULL);
							vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
							sizes = vala_array_creation_expression_get_sizes (VALA_ARRAY_CREATION_EXPRESSION (vala_variable_get_initializer ((ValaVariable*) f)));
							{
								gint dim;
								dim = 1;
								{
									gboolean _tmp91_;
									_tmp91_ = TRUE;
									while (TRUE) {
										ValaCCodeExpression* array_len_lhs;
										ValaExpression* size;
										ValaCCodeAssignment* _tmp92_;
										ValaCCodeExpressionStatement* _tmp93_;
										if (!_tmp91_) {
											dim++;
										}
										_tmp91_ = FALSE;
										if (!(dim <= vala_array_type_get_rank (array_type))) {
											break;
										}
										array_len_lhs = vala_ccode_base_module_get_array_length_cexpression (self, (ValaExpression*) ma, dim);
										size = (ValaExpression*) vala_list_get (sizes, dim - 1);
										vala_ccode_fragment_append (self->class_init_fragment, (ValaCCodeNode*) (_tmp93_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp92_ = vala_ccode_assignment_new (array_len_lhs, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) size)), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
										_vala_ccode_node_unref0 (_tmp93_);
										_vala_ccode_node_unref0 (_tmp92_);
										_vala_code_node_unref0 (size);
										_vala_ccode_node_unref0 (array_len_lhs);
									}
								}
							}
							_vala_collection_object_unref0 (sizes);
							_vala_code_node_unref0 (ma);
							_vala_code_node_unref0 (array_type);
						}
						vala_ccode_base_module_append_temp_decl (self, self->class_init_fragment, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
						vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
					} else {
						vala_code_node_set_error ((ValaCodeNode*) f, TRUE);
						vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) f), "Non-constant field initializers not supported in this context");
						_vala_ccode_node_unref0 (rhs);
						_vala_ccode_node_unref0 (var_def);
						_vala_ccode_node_unref0 (var_decl);
						_g_free0 (field_ctype);
						_vala_ccode_node_unref0 (lhs);
						_vala_code_node_unref0 (cl);
						return;
					}
				}
				_vala_ccode_node_unref0 (rhs);
			}
			_vala_ccode_node_unref0 (var_def);
			_vala_ccode_node_unref0 (var_decl);
		}
	}
	_g_free0 (field_ctype);
	_vala_ccode_node_unref0 (lhs);
	_vala_code_node_unref0 (cl);
}


gboolean vala_ccode_base_module_is_constant_ccode_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr) {
	gboolean result = FALSE;
	ValaCCodeExpression* _tmp1_;
	ValaCCodeParenthesizedExpression* cparenthesized;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (cexpr != NULL, FALSE);
	if (VALA_IS_CCODE_CONSTANT (cexpr)) {
		result = TRUE;
		return result;
	} else {
		if (VALA_IS_CCODE_CAST_EXPRESSION (cexpr)) {
			ValaCCodeCastExpression* ccast;
			ccast = _vala_ccode_node_ref0 (VALA_CCODE_CAST_EXPRESSION (cexpr));
			result = vala_ccode_base_module_is_constant_ccode_expression (self, vala_ccode_cast_expression_get_inner (ccast));
			_vala_ccode_node_unref0 (ccast);
			return result;
		} else {
			if (VALA_IS_CCODE_BINARY_EXPRESSION (cexpr)) {
				ValaCCodeBinaryExpression* cbinary;
				gboolean _tmp0_ = FALSE;
				cbinary = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (cexpr));
				if (vala_ccode_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_left (cbinary))) {
					_tmp0_ = vala_ccode_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_right (cbinary));
				} else {
					_tmp0_ = FALSE;
				}
				result = _tmp0_;
				_vala_ccode_node_unref0 (cbinary);
				return result;
			}
		}
	}
	cparenthesized = _vala_ccode_node_ref0 ((_tmp1_ = cexpr, VALA_IS_CCODE_PARENTHESIZED_EXPRESSION (_tmp1_) ? ((ValaCCodeParenthesizedExpression*) _tmp1_) : NULL));
	if (NULL != cparenthesized) {
		_tmp2_ = vala_ccode_base_module_is_constant_ccode_expression (self, vala_ccode_parenthesized_expression_get_inner (cparenthesized));
	} else {
		_tmp2_ = FALSE;
	}
	result = _tmp2_;
	_vala_ccode_node_unref0 (cparenthesized);
	return result;
}


/**
 * Returns whether the passed cexpr is a pure expression, i.e. an
 * expression without side-effects.
 */
gboolean vala_ccode_base_module_is_pure_ccode_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (cexpr != NULL, FALSE);
	if (VALA_IS_CCODE_CONSTANT (cexpr)) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = VALA_IS_CCODE_IDENTIFIER (cexpr);
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		if (VALA_IS_CCODE_BINARY_EXPRESSION (cexpr)) {
			ValaCCodeBinaryExpression* cbinary;
			gboolean _tmp1_ = FALSE;
			cbinary = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (cexpr));
			if (vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_binary_expression_get_left (cbinary))) {
				_tmp1_ = vala_ccode_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_right (cbinary));
			} else {
				_tmp1_ = FALSE;
			}
			result = _tmp1_;
			_vala_ccode_node_unref0 (cbinary);
			return result;
		} else {
			if (VALA_IS_CCODE_UNARY_EXPRESSION (cexpr)) {
				ValaCCodeUnaryExpression* cunary;
				cunary = _vala_ccode_node_ref0 (VALA_CCODE_UNARY_EXPRESSION (cexpr));
				switch (vala_ccode_unary_expression_get_operator (cunary)) {
					case VALA_CCODE_UNARY_OPERATOR_PREFIX_INCREMENT:
					case VALA_CCODE_UNARY_OPERATOR_PREFIX_DECREMENT:
					case VALA_CCODE_UNARY_OPERATOR_POSTFIX_INCREMENT:
					case VALA_CCODE_UNARY_OPERATOR_POSTFIX_DECREMENT:
					{
						result = FALSE;
						_vala_ccode_node_unref0 (cunary);
						return result;
					}
					default:
					{
						result = vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_unary_expression_get_inner (cunary));
						_vala_ccode_node_unref0 (cunary);
						return result;
					}
				}
				_vala_ccode_node_unref0 (cunary);
			} else {
				if (VALA_IS_CCODE_MEMBER_ACCESS (cexpr)) {
					ValaCCodeMemberAccess* cma;
					cma = _vala_ccode_node_ref0 (VALA_CCODE_MEMBER_ACCESS (cexpr));
					result = vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_member_access_get_inner (cma));
					_vala_ccode_node_unref0 (cma);
					return result;
				} else {
					if (VALA_IS_CCODE_ELEMENT_ACCESS (cexpr)) {
						ValaCCodeElementAccess* cea;
						gboolean _tmp2_ = FALSE;
						cea = _vala_ccode_node_ref0 (VALA_CCODE_ELEMENT_ACCESS (cexpr));
						if (vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_element_access_get_container (cea))) {
							_tmp2_ = vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_element_access_get_index (cea));
						} else {
							_tmp2_ = FALSE;
						}
						result = _tmp2_;
						_vala_ccode_node_unref0 (cea);
						return result;
					} else {
						if (VALA_IS_CCODE_CAST_EXPRESSION (cexpr)) {
							ValaCCodeCastExpression* ccast;
							ccast = _vala_ccode_node_ref0 (VALA_CCODE_CAST_EXPRESSION (cexpr));
							result = vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_cast_expression_get_inner (ccast));
							_vala_ccode_node_unref0 (ccast);
							return result;
						} else {
							if (VALA_IS_CCODE_PARENTHESIZED_EXPRESSION (cexpr)) {
								ValaCCodeParenthesizedExpression* cparenthesized;
								cparenthesized = _vala_ccode_node_ref0 (VALA_CCODE_PARENTHESIZED_EXPRESSION (cexpr));
								result = vala_ccode_base_module_is_pure_ccode_expression (self, vala_ccode_parenthesized_expression_get_inner (cparenthesized));
								_vala_ccode_node_unref0 (cparenthesized);
								return result;
							}
						}
					}
				}
			}
		}
	}
	result = FALSE;
	return result;
}


static void vala_ccode_base_module_real_visit_formal_parameter (ValaCodeVisitor* base, ValaFormalParameter* p) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (p != NULL);
	if (!vala_formal_parameter_get_ellipsis (p)) {
		vala_ccode_base_module_check_type (self, vala_variable_get_variable_type ((ValaVariable*) p));
	}
}


static void vala_ccode_base_module_real_visit_property (ValaCodeVisitor* base, ValaProperty* prop) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (prop != NULL);
	vala_ccode_base_module_visit_member (self, (ValaSymbol*) prop);
	vala_ccode_base_module_check_type (self, vala_property_get_property_type (prop));
	vala_code_node_accept_children ((ValaCodeNode*) prop, (ValaCodeVisitor*) self);
}


void vala_ccode_base_module_generate_type_declaration (ValaCCodeBaseModule* self, ValaDataType* type, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	g_return_if_fail (decl_space != NULL);
	if (VALA_IS_OBJECT_TYPE (type)) {
		ValaObjectType* object_type;
		object_type = _vala_code_node_ref0 (VALA_OBJECT_TYPE (type));
		if (VALA_IS_CLASS (vala_object_type_get_type_symbol (object_type))) {
			vala_ccode_base_module_generate_class_declaration (self, VALA_CLASS (vala_object_type_get_type_symbol (object_type)), decl_space);
		} else {
			if (VALA_IS_INTERFACE (vala_object_type_get_type_symbol (object_type))) {
				vala_ccode_base_module_generate_interface_declaration (self, VALA_INTERFACE (vala_object_type_get_type_symbol (object_type)), decl_space);
			}
		}
		_vala_code_node_unref0 (object_type);
	} else {
		if (VALA_IS_DELEGATE_TYPE (type)) {
			ValaDelegateType* deleg_type;
			ValaDelegate* d;
			deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (type));
			d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
			vala_ccode_base_module_generate_delegate_declaration (self, d, decl_space);
			_vala_code_node_unref0 (d);
			_vala_code_node_unref0 (deleg_type);
		} else {
			if (VALA_IS_ENUM (vala_data_type_get_data_type (type))) {
				ValaEnum* en;
				en = _vala_code_node_ref0 (VALA_ENUM (vala_data_type_get_data_type (type)));
				vala_ccode_base_module_generate_enum_declaration (self, en, decl_space);
				_vala_code_node_unref0 (en);
			} else {
				if (VALA_IS_VALUE_TYPE (type)) {
					ValaValueType* value_type;
					value_type = _vala_code_node_ref0 (VALA_VALUE_TYPE (type));
					vala_ccode_base_module_generate_struct_declaration (self, VALA_STRUCT (vala_value_type_get_type_symbol (value_type)), decl_space);
					_vala_code_node_unref0 (value_type);
				} else {
					if (VALA_IS_ARRAY_TYPE (type)) {
						ValaArrayType* array_type;
						array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (type));
						vala_ccode_base_module_generate_type_declaration (self, vala_array_type_get_element_type (array_type), decl_space);
						_vala_code_node_unref0 (array_type);
					} else {
						if (VALA_IS_ERROR_TYPE (type)) {
							ValaErrorType* error_type;
							error_type = _vala_code_node_ref0 (VALA_ERROR_TYPE (type));
							if (vala_error_type_get_error_domain (error_type) != NULL) {
								vala_ccode_base_module_generate_error_domain_declaration (self, vala_error_type_get_error_domain (error_type), decl_space);
							}
							_vala_code_node_unref0 (error_type);
						} else {
							if (VALA_IS_POINTER_TYPE (type)) {
								ValaPointerType* pointer_type;
								pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (type));
								vala_ccode_base_module_generate_type_declaration (self, vala_pointer_type_get_base_type (pointer_type), decl_space);
								_vala_code_node_unref0 (pointer_type);
							}
						}
					}
				}
			}
		}
	}
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _type_arg_it;
		_type_arg_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_data_type_get_type_arguments (type))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaDataType* type_arg;
			if (!vala_iterator_next (_type_arg_it)) {
				break;
			}
			type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
			vala_ccode_base_module_generate_type_declaration (self, type_arg, decl_space);
			_vala_code_node_unref0 (type_arg);
		}
		_vala_collection_object_unref0 (_type_arg_it);
	}
}


static void vala_ccode_base_module_real_generate_class_struct_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (cl != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_class_struct_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_class_struct_declaration (self, cl, decl_space);
}


static void vala_ccode_base_module_real_generate_struct_declaration (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (st != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_struct_declaration (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_struct_declaration (self, st, decl_space);
}


static void vala_ccode_base_module_real_generate_delegate_declaration (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (d != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_delegate_declaration (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_delegate_declaration (self, d, decl_space);
}


static void vala_ccode_base_module_real_generate_cparameters (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
	g_return_if_fail (cparam_map != NULL);
	g_return_if_fail (func != NULL);
}


void vala_ccode_base_module_generate_cparameters (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_cparameters (self, m, decl_space, cparam_map, func, vdeclarator, carg_map, vcall, direction);
}


void vala_ccode_base_module_generate_property_accessor_declaration (ValaCCodeBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	ValaProperty* prop;
	gboolean _tmp2_ = FALSE;
	gboolean returns_real_struct;
	ValaCCodeFormalParameter* cvalueparam;
	gboolean _tmp12_ = FALSE;
	gboolean _tmp21_ = FALSE;
	gboolean _tmp22_ = FALSE;
	gboolean _tmp33_ = FALSE;
	gboolean _tmp34_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (acc != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) acc, _tmp0_ = vala_property_accessor_get_cname (acc)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	prop = _vala_code_node_ref0 (VALA_PROPERTY (vala_property_accessor_get_prop (acc)));
	if (vala_property_accessor_get_readable (acc)) {
		_tmp2_ = vala_data_type_is_real_non_null_struct_type (vala_property_get_property_type (prop));
	} else {
		_tmp2_ = FALSE;
	}
	returns_real_struct = _tmp2_;
	cvalueparam = NULL;
	if (returns_real_struct) {
		char* _tmp3_;
		char* _tmp4_;
		ValaCCodeFormalParameter* _tmp5_;
		cvalueparam = (_tmp5_ = vala_ccode_formal_parameter_new ("result", _tmp4_ = g_strconcat (_tmp3_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc)), "*", NULL)), _vala_ccode_node_unref0 (cvalueparam), _tmp5_);
		_g_free0 (_tmp4_);
		_g_free0 (_tmp3_);
	} else {
		gboolean _tmp6_ = FALSE;
		if (!vala_property_accessor_get_readable (acc)) {
			_tmp6_ = vala_data_type_is_real_non_null_struct_type (vala_property_get_property_type (prop));
		} else {
			_tmp6_ = FALSE;
		}
		if (_tmp6_) {
			char* _tmp7_;
			char* _tmp8_;
			ValaCCodeFormalParameter* _tmp9_;
			cvalueparam = (_tmp9_ = vala_ccode_formal_parameter_new ("value", _tmp8_ = g_strconcat (_tmp7_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc)), "*", NULL)), _vala_ccode_node_unref0 (cvalueparam), _tmp9_);
			_g_free0 (_tmp8_);
			_g_free0 (_tmp7_);
		} else {
			char* _tmp10_;
			ValaCCodeFormalParameter* _tmp11_;
			cvalueparam = (_tmp11_ = vala_ccode_formal_parameter_new ("value", _tmp10_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc))), _vala_ccode_node_unref0 (cvalueparam), _tmp11_);
			_g_free0 (_tmp10_);
		}
	}
	vala_ccode_base_module_generate_type_declaration (self, vala_property_accessor_get_value_type (acc), decl_space);
	if (vala_property_accessor_get_readable (acc)) {
		_tmp12_ = !returns_real_struct;
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		char* _tmp13_;
		char* _tmp14_;
		ValaCCodeFunction* _tmp15_;
		self->function = (_tmp15_ = vala_ccode_function_new (_tmp13_ = vala_property_accessor_get_cname (acc), _tmp14_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc))), _vala_ccode_node_unref0 (self->function), _tmp15_);
		_g_free0 (_tmp14_);
		_g_free0 (_tmp13_);
	} else {
		char* _tmp16_;
		ValaCCodeFunction* _tmp17_;
		self->function = (_tmp17_ = vala_ccode_function_new (_tmp16_ = vala_property_accessor_get_cname (acc), "void"), _vala_ccode_node_unref0 (self->function), _tmp17_);
		_g_free0 (_tmp16_);
	}
	if (vala_property_get_binding (prop) == MEMBER_BINDING_INSTANCE) {
		ValaTypeSymbol* t;
		ValaDataType* this_type;
		char* _tmp18_;
		ValaCCodeFormalParameter* _tmp19_;
		ValaCCodeFormalParameter* cselfparam;
		t = _vala_code_node_ref0 (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) prop)));
		this_type = vala_ccode_base_module_get_data_type_for_symbol (t);
		vala_ccode_base_module_generate_type_declaration (self, this_type, decl_space);
		cselfparam = (_tmp19_ = vala_ccode_formal_parameter_new ("self", _tmp18_ = vala_data_type_get_cname (this_type)), _g_free0 (_tmp18_), _tmp19_);
		if (VALA_IS_STRUCT (t)) {
			char* _tmp20_;
			vala_ccode_formal_parameter_set_type_name (cselfparam, _tmp20_ = g_strconcat (vala_ccode_formal_parameter_get_type_name (cselfparam), "*", NULL));
			_g_free0 (_tmp20_);
		}
		vala_ccode_function_add_parameter (self->function, cselfparam);
		_vala_ccode_node_unref0 (cselfparam);
		_vala_code_node_unref0 (this_type);
		_vala_code_node_unref0 (t);
	}
	if (vala_property_accessor_get_writable (acc)) {
		_tmp22_ = TRUE;
	} else {
		_tmp22_ = vala_property_accessor_get_construction (acc);
	}
	if (_tmp22_) {
		_tmp21_ = TRUE;
	} else {
		_tmp21_ = returns_real_struct;
	}
	if (_tmp21_) {
		vala_ccode_function_add_parameter (self->function, cvalueparam);
	}
	if (VALA_IS_ARRAY_TYPE (vala_property_accessor_get_value_type (acc))) {
		ValaArrayType* array_type;
		char* length_ctype;
		array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_property_accessor_get_value_type (acc)));
		length_ctype = g_strdup ("int");
		if (vala_property_accessor_get_readable (acc)) {
			char* _tmp23_;
			length_ctype = (_tmp23_ = g_strdup ("int*"), _g_free0 (length_ctype), _tmp23_);
		}
		{
			gint dim;
			dim = 1;
			{
				gboolean _tmp24_;
				_tmp24_ = TRUE;
				while (TRUE) {
					const char* _tmp25_;
					char* _tmp26_;
					ValaCCodeFormalParameter* _tmp27_;
					if (!_tmp24_) {
						dim++;
					}
					_tmp24_ = FALSE;
					if (!(dim <= vala_array_type_get_rank (array_type))) {
						break;
					}
					_tmp25_ = NULL;
					if (vala_property_accessor_get_readable (acc)) {
						_tmp25_ = "result";
					} else {
						_tmp25_ = "value";
					}
					vala_ccode_function_add_parameter (self->function, _tmp27_ = vala_ccode_formal_parameter_new (_tmp26_ = vala_ccode_base_module_get_array_length_cname (self, _tmp25_, dim), length_ctype));
					_vala_ccode_node_unref0 (_tmp27_);
					_g_free0 (_tmp26_);
				}
			}
		}
		_g_free0 (length_ctype);
		_vala_code_node_unref0 (array_type);
	} else {
		gboolean _tmp28_ = FALSE;
		if (VALA_IS_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))) {
			_tmp28_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (VALA_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))));
		} else {
			_tmp28_ = FALSE;
		}
		if (_tmp28_) {
			const char* _tmp29_;
			const char* _tmp30_;
			char* _tmp31_;
			ValaCCodeFormalParameter* _tmp32_;
			_tmp29_ = NULL;
			if (vala_property_accessor_get_readable (acc)) {
				_tmp29_ = "result";
			} else {
				_tmp29_ = "value";
			}
			_tmp30_ = NULL;
			if (vala_property_accessor_get_readable (acc)) {
				_tmp30_ = "gpointer*";
			} else {
				_tmp30_ = "gpointer";
			}
			vala_ccode_function_add_parameter (self->function, _tmp32_ = vala_ccode_formal_parameter_new (_tmp31_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp29_), _tmp30_));
			_vala_ccode_node_unref0 (_tmp32_);
			_g_free0 (_tmp31_);
		}
	}
	if (vala_symbol_is_private_symbol ((ValaSymbol*) prop)) {
		_tmp34_ = TRUE;
	} else {
		gboolean _tmp35_ = FALSE;
		if (!vala_property_accessor_get_readable (acc)) {
			_tmp35_ = !vala_property_accessor_get_writable (acc);
		} else {
			_tmp35_ = FALSE;
		}
		_tmp34_ = _tmp35_;
	}
	if (_tmp34_) {
		_tmp33_ = TRUE;
	} else {
		_tmp33_ = vala_symbol_get_access ((ValaSymbol*) acc) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE;
	}
	if (_tmp33_) {
		vala_ccode_function_set_modifiers (self->function, vala_ccode_function_get_modifiers (self->function) | VALA_CCODE_MODIFIERS_STATIC);
	}
	vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) self->function);
	_vala_ccode_node_unref0 (cvalueparam);
	_vala_code_node_unref0 (prop);
}


static void vala_ccode_base_module_real_visit_property_accessor (ValaCodeVisitor* base, ValaPropertyAccessor* acc) {
	ValaCCodeBaseModule * self;
	ValaCCodeBaseModuleEmitContext* _tmp0_;
	ValaProperty* prop;
	gboolean _tmp2_ = FALSE;
	gboolean returns_real_struct;
	ValaTypeSymbol* t;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp5_ = FALSE;
	gboolean _tmp6_ = FALSE;
	ValaDataType* this_type;
	char* _tmp12_;
	ValaCCodeFormalParameter* _tmp13_;
	ValaCCodeFormalParameter* cselfparam;
	ValaCCodeFormalParameter* cvalueparam;
	gboolean _tmp24_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (acc != NULL);
	vala_ccode_base_module_push_context (self, _tmp0_ = vala_ccode_base_module_emit_context_new ((ValaSymbol*) acc));
	_vala_ccode_base_module_emit_context_unref0 (_tmp0_);
	prop = _vala_code_node_ref0 (VALA_PROPERTY (vala_property_accessor_get_prop (acc)));
	if (vala_symbol_get_comment ((ValaSymbol*) acc) != NULL) {
		ValaCCodeComment* _tmp1_;
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) (_tmp1_ = vala_ccode_comment_new (vala_comment_get_content (vala_symbol_get_comment ((ValaSymbol*) acc)))));
		_vala_ccode_node_unref0 (_tmp1_);
	}
	if (vala_property_accessor_get_readable (acc)) {
		_tmp2_ = vala_data_type_is_real_non_null_struct_type (vala_property_get_property_type (prop));
	} else {
		_tmp2_ = FALSE;
	}
	returns_real_struct = _tmp2_;
	if (vala_property_accessor_get_result_var (acc) != NULL) {
		vala_code_node_accept ((ValaCodeNode*) vala_property_accessor_get_result_var (acc), (ValaCodeVisitor*) self);
	}
	t = _vala_code_node_ref0 (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) prop)));
	if (vala_property_accessor_get_construction (acc)) {
		_tmp3_ = !vala_typesymbol_is_subtype_of (t, self->gobject_type);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) acc), "construct properties require GLib.Object");
		vala_code_node_set_error ((ValaCodeNode*) acc, TRUE);
		_vala_code_node_unref0 (t);
		_vala_code_node_unref0 (prop);
		return;
	} else {
		gboolean _tmp4_ = FALSE;
		if (vala_property_accessor_get_construction (acc)) {
			_tmp4_ = !vala_ccode_base_module_is_gobject_property (self, prop);
		} else {
			_tmp4_ = FALSE;
		}
		if (_tmp4_) {
			vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) acc), "construct properties not supported for specified property type");
			vala_code_node_set_error ((ValaCodeNode*) acc, TRUE);
			_vala_code_node_unref0 (t);
			_vala_code_node_unref0 (prop);
			return;
		}
	}
	if (vala_property_get_is_abstract (prop)) {
		_tmp6_ = TRUE;
	} else {
		_tmp6_ = vala_property_get_is_virtual (prop);
	}
	if (_tmp6_) {
		_tmp5_ = TRUE;
	} else {
		gboolean _tmp7_ = FALSE;
		if (vala_property_get_base_property (prop) == NULL) {
			_tmp7_ = vala_property_get_base_interface_property (prop) == NULL;
		} else {
			_tmp7_ = FALSE;
		}
		_tmp5_ = _tmp7_;
	}
	if (_tmp5_) {
		gboolean _tmp8_ = FALSE;
		vala_ccode_base_module_generate_property_accessor_declaration (self, acc, self->source_declarations);
		if (vala_property_accessor_get_readable (acc)) {
			_tmp8_ = TRUE;
		} else {
			_tmp8_ = vala_property_accessor_get_writable (acc);
		}
		if (_tmp8_) {
			gboolean _tmp9_ = FALSE;
			gboolean _tmp11_ = FALSE;
			if (!vala_symbol_is_internal_symbol ((ValaSymbol*) prop)) {
				gboolean _tmp10_ = FALSE;
				if (vala_symbol_get_access ((ValaSymbol*) acc) == VALA_SYMBOL_ACCESSIBILITY_PUBLIC) {
					_tmp10_ = TRUE;
				} else {
					_tmp10_ = vala_symbol_get_access ((ValaSymbol*) acc) == VALA_SYMBOL_ACCESSIBILITY_PROTECTED;
				}
				_tmp9_ = _tmp10_;
			} else {
				_tmp9_ = FALSE;
			}
			if (_tmp9_) {
				vala_ccode_base_module_generate_property_accessor_declaration (self, acc, self->header_declarations);
			}
			if (!vala_symbol_is_private_symbol ((ValaSymbol*) prop)) {
				_tmp11_ = vala_symbol_get_access ((ValaSymbol*) acc) != VALA_SYMBOL_ACCESSIBILITY_PRIVATE;
			} else {
				_tmp11_ = FALSE;
			}
			if (_tmp11_) {
				vala_ccode_base_module_generate_property_accessor_declaration (self, acc, self->internal_header_declarations);
			}
		}
	}
	this_type = vala_ccode_base_module_get_data_type_for_symbol (t);
	cselfparam = (_tmp13_ = vala_ccode_formal_parameter_new ("self", _tmp12_ = vala_data_type_get_cname (this_type)), _g_free0 (_tmp12_), _tmp13_);
	if (VALA_IS_STRUCT (t)) {
		char* _tmp14_;
		vala_ccode_formal_parameter_set_type_name (cselfparam, _tmp14_ = g_strconcat (vala_ccode_formal_parameter_get_type_name (cselfparam), "*", NULL));
		_g_free0 (_tmp14_);
	}
	cvalueparam = NULL;
	if (returns_real_struct) {
		char* _tmp15_;
		char* _tmp16_;
		ValaCCodeFormalParameter* _tmp17_;
		cvalueparam = (_tmp17_ = vala_ccode_formal_parameter_new ("result", _tmp16_ = g_strconcat (_tmp15_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc)), "*", NULL)), _vala_ccode_node_unref0 (cvalueparam), _tmp17_);
		_g_free0 (_tmp16_);
		_g_free0 (_tmp15_);
	} else {
		gboolean _tmp18_ = FALSE;
		if (!vala_property_accessor_get_readable (acc)) {
			_tmp18_ = vala_data_type_is_real_non_null_struct_type (vala_property_get_property_type (prop));
		} else {
			_tmp18_ = FALSE;
		}
		if (_tmp18_) {
			char* _tmp19_;
			char* _tmp20_;
			ValaCCodeFormalParameter* _tmp21_;
			cvalueparam = (_tmp21_ = vala_ccode_formal_parameter_new ("value", _tmp20_ = g_strconcat (_tmp19_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc)), "*", NULL)), _vala_ccode_node_unref0 (cvalueparam), _tmp21_);
			_g_free0 (_tmp20_);
			_g_free0 (_tmp19_);
		} else {
			char* _tmp22_;
			ValaCCodeFormalParameter* _tmp23_;
			cvalueparam = (_tmp23_ = vala_ccode_formal_parameter_new ("value", _tmp22_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc))), _vala_ccode_node_unref0 (cvalueparam), _tmp23_);
			_g_free0 (_tmp22_);
		}
	}
	if (vala_property_get_is_abstract (prop)) {
		_tmp24_ = TRUE;
	} else {
		_tmp24_ = vala_property_get_is_virtual (prop);
	}
	if (_tmp24_) {
		ValaCCodeFunction* function;
		gboolean _tmp25_ = FALSE;
		gboolean _tmp31_ = FALSE;
		gboolean _tmp32_ = FALSE;
		gboolean _tmp43_ = FALSE;
		gboolean _tmp44_ = FALSE;
		ValaCCodeBlock* block;
		ValaCCodeFunctionCall* vcast;
		ValaCCodeIdentifier* _tmp54_;
		function = NULL;
		if (vala_property_accessor_get_readable (acc)) {
			_tmp25_ = !returns_real_struct;
		} else {
			_tmp25_ = FALSE;
		}
		if (_tmp25_) {
			char* _tmp26_;
			char* _tmp27_;
			ValaCCodeFunction* _tmp28_;
			function = (_tmp28_ = vala_ccode_function_new (_tmp26_ = vala_property_accessor_get_cname (acc), _tmp27_ = vala_data_type_get_cname (vala_ccode_base_module_get_current_return_type (self))), _vala_ccode_node_unref0 (function), _tmp28_);
			_g_free0 (_tmp27_);
			_g_free0 (_tmp26_);
		} else {
			char* _tmp29_;
			ValaCCodeFunction* _tmp30_;
			function = (_tmp30_ = vala_ccode_function_new (_tmp29_ = vala_property_accessor_get_cname (acc), "void"), _vala_ccode_node_unref0 (function), _tmp30_);
			_g_free0 (_tmp29_);
		}
		vala_ccode_function_add_parameter (function, cselfparam);
		if (vala_property_accessor_get_writable (acc)) {
			_tmp32_ = TRUE;
		} else {
			_tmp32_ = vala_property_accessor_get_construction (acc);
		}
		if (_tmp32_) {
			_tmp31_ = TRUE;
		} else {
			_tmp31_ = returns_real_struct;
		}
		if (_tmp31_) {
			vala_ccode_function_add_parameter (function, cvalueparam);
		}
		if (VALA_IS_ARRAY_TYPE (vala_property_accessor_get_value_type (acc))) {
			ValaArrayType* array_type;
			char* length_ctype;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_property_accessor_get_value_type (acc)));
			length_ctype = g_strdup ("int");
			if (vala_property_accessor_get_readable (acc)) {
				char* _tmp33_;
				length_ctype = (_tmp33_ = g_strdup ("int*"), _g_free0 (length_ctype), _tmp33_);
			}
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp34_;
					_tmp34_ = TRUE;
					while (TRUE) {
						const char* _tmp35_;
						char* _tmp36_;
						ValaCCodeFormalParameter* _tmp37_;
						if (!_tmp34_) {
							dim++;
						}
						_tmp34_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						_tmp35_ = NULL;
						if (vala_property_accessor_get_readable (acc)) {
							_tmp35_ = "result";
						} else {
							_tmp35_ = "value";
						}
						vala_ccode_function_add_parameter (function, _tmp37_ = vala_ccode_formal_parameter_new (_tmp36_ = vala_ccode_base_module_get_array_length_cname (self, _tmp35_, dim), length_ctype));
						_vala_ccode_node_unref0 (_tmp37_);
						_g_free0 (_tmp36_);
					}
				}
			}
			_g_free0 (length_ctype);
			_vala_code_node_unref0 (array_type);
		} else {
			gboolean _tmp38_ = FALSE;
			if (VALA_IS_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))) {
				_tmp38_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (VALA_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))));
			} else {
				_tmp38_ = FALSE;
			}
			if (_tmp38_) {
				const char* _tmp39_;
				const char* _tmp40_;
				char* _tmp41_;
				ValaCCodeFormalParameter* _tmp42_;
				_tmp39_ = NULL;
				if (vala_property_accessor_get_readable (acc)) {
					_tmp39_ = "result";
				} else {
					_tmp39_ = "value";
				}
				_tmp40_ = NULL;
				if (vala_property_accessor_get_readable (acc)) {
					_tmp40_ = "gpointer*";
				} else {
					_tmp40_ = "gpointer";
				}
				vala_ccode_function_add_parameter (function, _tmp42_ = vala_ccode_formal_parameter_new (_tmp41_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp39_), _tmp40_));
				_vala_ccode_node_unref0 (_tmp42_);
				_g_free0 (_tmp41_);
			}
		}
		if (vala_symbol_is_private_symbol ((ValaSymbol*) prop)) {
			_tmp44_ = TRUE;
		} else {
			gboolean _tmp45_ = FALSE;
			if (vala_property_accessor_get_readable (acc)) {
				_tmp45_ = TRUE;
			} else {
				_tmp45_ = vala_property_accessor_get_writable (acc);
			}
			_tmp44_ = !_tmp45_;
		}
		if (_tmp44_) {
			_tmp43_ = TRUE;
		} else {
			_tmp43_ = vala_symbol_get_access ((ValaSymbol*) acc) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE;
		}
		if (_tmp43_) {
			vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
		}
		block = vala_ccode_block_new ();
		vala_ccode_function_set_block (function, block);
		vcast = NULL;
		if (VALA_IS_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) prop))) {
			ValaInterface* iface;
			char* _tmp46_;
			char* _tmp47_;
			ValaCCodeIdentifier* _tmp48_;
			ValaCCodeFunctionCall* _tmp49_;
			iface = _vala_code_node_ref0 (VALA_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) prop)));
			vcast = (_tmp49_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp48_ = vala_ccode_identifier_new (_tmp47_ = g_strdup_printf ("%s_GET_INTERFACE", _tmp46_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) iface, NULL))))), _vala_ccode_node_unref0 (vcast), _tmp49_);
			_vala_ccode_node_unref0 (_tmp48_);
			_g_free0 (_tmp47_);
			_g_free0 (_tmp46_);
			_vala_code_node_unref0 (iface);
		} else {
			ValaClass* cl;
			char* _tmp50_;
			char* _tmp51_;
			ValaCCodeIdentifier* _tmp52_;
			ValaCCodeFunctionCall* _tmp53_;
			cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) prop)));
			vcast = (_tmp53_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp52_ = vala_ccode_identifier_new (_tmp51_ = g_strdup_printf ("%s_GET_CLASS", _tmp50_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) cl, NULL))))), _vala_ccode_node_unref0 (vcast), _tmp53_);
			_vala_ccode_node_unref0 (_tmp52_);
			_g_free0 (_tmp51_);
			_g_free0 (_tmp50_);
			_vala_code_node_unref0 (cl);
		}
		vala_ccode_function_call_add_argument (vcast, (ValaCCodeExpression*) (_tmp54_ = vala_ccode_identifier_new ("self")));
		_vala_ccode_node_unref0 (_tmp54_);
		if (vala_property_accessor_get_readable (acc)) {
			char* _tmp55_;
			ValaCCodeMemberAccess* _tmp56_;
			ValaCCodeFunctionCall* _tmp57_;
			ValaCCodeFunctionCall* vcall;
			ValaCCodeIdentifier* _tmp58_;
			vcall = (_tmp57_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp56_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) vcast, _tmp55_ = g_strdup_printf ("get_%s", vala_symbol_get_name ((ValaSymbol*) prop))))), _vala_ccode_node_unref0 (_tmp56_), _g_free0 (_tmp55_), _tmp57_);
			vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp58_ = vala_ccode_identifier_new ("self")));
			_vala_ccode_node_unref0 (_tmp58_);
			if (returns_real_struct) {
				ValaCCodeIdentifier* _tmp59_;
				ValaCCodeExpressionStatement* _tmp60_;
				vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp59_ = vala_ccode_identifier_new ("result")));
				_vala_ccode_node_unref0 (_tmp59_);
				vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp60_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) vcall)));
				_vala_ccode_node_unref0 (_tmp60_);
			} else {
				ValaCCodeReturnStatement* _tmp67_;
				if (VALA_IS_ARRAY_TYPE (vala_property_accessor_get_value_type (acc))) {
					ValaArrayType* array_type;
					array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_property_accessor_get_value_type (acc)));
					{
						gint dim;
						dim = 1;
						{
							gboolean _tmp61_;
							_tmp61_ = TRUE;
							while (TRUE) {
								char* _tmp62_;
								ValaCCodeIdentifier* _tmp63_;
								ValaCCodeIdentifier* len_expr;
								if (!_tmp61_) {
									dim++;
								}
								_tmp61_ = FALSE;
								if (!(dim <= vala_array_type_get_rank (array_type))) {
									break;
								}
								len_expr = (_tmp63_ = vala_ccode_identifier_new (_tmp62_ = vala_ccode_base_module_get_array_length_cname (self, "result", dim)), _g_free0 (_tmp62_), _tmp63_);
								vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) len_expr);
								_vala_ccode_node_unref0 (len_expr);
							}
						}
					}
					_vala_code_node_unref0 (array_type);
				} else {
					gboolean _tmp64_ = FALSE;
					if (VALA_IS_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))) {
						_tmp64_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (VALA_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))));
					} else {
						_tmp64_ = FALSE;
					}
					if (_tmp64_) {
						char* _tmp65_;
						ValaCCodeIdentifier* _tmp66_;
						vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp66_ = vala_ccode_identifier_new (_tmp65_ = vala_ccode_base_module_get_delegate_target_cname (self, "result"))));
						_vala_ccode_node_unref0 (_tmp66_);
						_g_free0 (_tmp65_);
					}
				}
				vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp67_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) vcall)));
				_vala_ccode_node_unref0 (_tmp67_);
			}
			_vala_ccode_node_unref0 (vcall);
		} else {
			char* _tmp68_;
			ValaCCodeMemberAccess* _tmp69_;
			ValaCCodeFunctionCall* _tmp70_;
			ValaCCodeFunctionCall* vcall;
			ValaCCodeIdentifier* _tmp71_;
			ValaCCodeIdentifier* _tmp72_;
			ValaCCodeExpressionStatement* _tmp79_;
			vcall = (_tmp70_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp69_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) vcast, _tmp68_ = g_strdup_printf ("set_%s", vala_symbol_get_name ((ValaSymbol*) prop))))), _vala_ccode_node_unref0 (_tmp69_), _g_free0 (_tmp68_), _tmp70_);
			vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp71_ = vala_ccode_identifier_new ("self")));
			_vala_ccode_node_unref0 (_tmp71_);
			vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp72_ = vala_ccode_identifier_new ("value")));
			_vala_ccode_node_unref0 (_tmp72_);
			if (VALA_IS_ARRAY_TYPE (vala_property_accessor_get_value_type (acc))) {
				ValaArrayType* array_type;
				array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_property_accessor_get_value_type (acc)));
				{
					gint dim;
					dim = 1;
					{
						gboolean _tmp73_;
						_tmp73_ = TRUE;
						while (TRUE) {
							char* _tmp74_;
							ValaCCodeIdentifier* _tmp75_;
							ValaCCodeIdentifier* len_expr;
							if (!_tmp73_) {
								dim++;
							}
							_tmp73_ = FALSE;
							if (!(dim <= vala_array_type_get_rank (array_type))) {
								break;
							}
							len_expr = (_tmp75_ = vala_ccode_identifier_new (_tmp74_ = vala_ccode_base_module_get_array_length_cname (self, "value", dim)), _g_free0 (_tmp74_), _tmp75_);
							vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) len_expr);
							_vala_ccode_node_unref0 (len_expr);
						}
					}
				}
				_vala_code_node_unref0 (array_type);
			} else {
				gboolean _tmp76_ = FALSE;
				if (VALA_IS_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))) {
					_tmp76_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (VALA_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))));
				} else {
					_tmp76_ = FALSE;
				}
				if (_tmp76_) {
					char* _tmp77_;
					ValaCCodeIdentifier* _tmp78_;
					vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp78_ = vala_ccode_identifier_new (_tmp77_ = vala_ccode_base_module_get_delegate_target_cname (self, "value"))));
					_vala_ccode_node_unref0 (_tmp78_);
					_g_free0 (_tmp77_);
				}
			}
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp79_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) vcall)));
			_vala_ccode_node_unref0 (_tmp79_);
			_vala_ccode_node_unref0 (vcall);
		}
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
		_vala_ccode_node_unref0 (vcast);
		_vala_ccode_node_unref0 (block);
		_vala_ccode_node_unref0 (function);
	}
	if (!vala_property_get_is_abstract (prop)) {
		gboolean _tmp80_ = FALSE;
		gboolean is_virtual;
		char* cname;
		ValaCCodeFunction* function;
		gboolean _tmp86_ = FALSE;
		gboolean _tmp87_ = FALSE;
		ValaObjectType* base_type;
		gboolean _tmp95_ = FALSE;
		gboolean _tmp96_ = FALSE;
		ValaCCodeFragment* init_fragment;
		gboolean _tmp110_ = FALSE;
		gboolean _tmp114_ = FALSE;
		gboolean _tmp127_ = FALSE;
		gboolean _tmp128_ = FALSE;
		if (vala_property_get_base_property (prop) != NULL) {
			_tmp80_ = TRUE;
		} else {
			_tmp80_ = vala_property_get_base_interface_property (prop) != NULL;
		}
		is_virtual = _tmp80_;
		cname = NULL;
		if (is_virtual) {
			if (vala_property_accessor_get_readable (acc)) {
				char* _tmp81_;
				char* _tmp82_;
				cname = (_tmp82_ = g_strdup_printf ("%s_real_get_%s", _tmp81_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) t, NULL), vala_symbol_get_name ((ValaSymbol*) prop)), _g_free0 (cname), _tmp82_);
				_g_free0 (_tmp81_);
			} else {
				char* _tmp83_;
				char* _tmp84_;
				cname = (_tmp84_ = g_strdup_printf ("%s_real_set_%s", _tmp83_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) t, NULL), vala_symbol_get_name ((ValaSymbol*) prop)), _g_free0 (cname), _tmp84_);
				_g_free0 (_tmp83_);
			}
		} else {
			char* _tmp85_;
			cname = (_tmp85_ = vala_property_accessor_get_cname (acc), _g_free0 (cname), _tmp85_);
		}
		function = NULL;
		if (vala_property_accessor_get_writable (acc)) {
			_tmp87_ = TRUE;
		} else {
			_tmp87_ = vala_property_accessor_get_construction (acc);
		}
		if (_tmp87_) {
			_tmp86_ = TRUE;
		} else {
			_tmp86_ = returns_real_struct;
		}
		if (_tmp86_) {
			ValaCCodeFunction* _tmp88_;
			function = (_tmp88_ = vala_ccode_function_new (cname, "void"), _vala_ccode_node_unref0 (function), _tmp88_);
		} else {
			char* _tmp89_;
			ValaCCodeFunction* _tmp90_;
			function = (_tmp90_ = vala_ccode_function_new (cname, _tmp89_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc))), _vala_ccode_node_unref0 (function), _tmp90_);
			_g_free0 (_tmp89_);
		}
		base_type = NULL;
		if (vala_property_get_binding (prop) == MEMBER_BINDING_INSTANCE) {
			if (is_virtual) {
				char* _tmp93_;
				ValaCCodeFormalParameter* _tmp94_;
				if (vala_property_get_base_property (prop) != NULL) {
					ValaObjectType* _tmp91_;
					base_type = (_tmp91_ = vala_object_type_new (VALA_OBJECT_TYPE_SYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_property_get_base_property (prop)))), _vala_code_node_unref0 (base_type), _tmp91_);
				} else {
					if (vala_property_get_base_interface_property (prop) != NULL) {
						ValaObjectType* _tmp92_;
						base_type = (_tmp92_ = vala_object_type_new (VALA_OBJECT_TYPE_SYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_property_get_base_interface_property (prop)))), _vala_code_node_unref0 (base_type), _tmp92_);
					}
				}
				vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
				vala_ccode_function_add_parameter (function, _tmp94_ = vala_ccode_formal_parameter_new ("base", _tmp93_ = vala_data_type_get_cname ((ValaDataType*) base_type)));
				_vala_ccode_node_unref0 (_tmp94_);
				_g_free0 (_tmp93_);
			} else {
				vala_ccode_function_add_parameter (function, cselfparam);
			}
		}
		if (vala_property_accessor_get_writable (acc)) {
			_tmp96_ = TRUE;
		} else {
			_tmp96_ = vala_property_accessor_get_construction (acc);
		}
		if (_tmp96_) {
			_tmp95_ = TRUE;
		} else {
			_tmp95_ = returns_real_struct;
		}
		if (_tmp95_) {
			vala_ccode_function_add_parameter (function, cvalueparam);
		}
		if (VALA_IS_ARRAY_TYPE (vala_property_accessor_get_value_type (acc))) {
			ValaArrayType* array_type;
			char* length_ctype;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_property_accessor_get_value_type (acc)));
			length_ctype = g_strdup ("int");
			if (vala_property_accessor_get_readable (acc)) {
				char* _tmp97_;
				length_ctype = (_tmp97_ = g_strdup ("int*"), _g_free0 (length_ctype), _tmp97_);
			}
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp98_;
					_tmp98_ = TRUE;
					while (TRUE) {
						const char* _tmp99_;
						char* _tmp100_;
						ValaCCodeFormalParameter* _tmp101_;
						if (!_tmp98_) {
							dim++;
						}
						_tmp98_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						_tmp99_ = NULL;
						if (vala_property_accessor_get_readable (acc)) {
							_tmp99_ = "result";
						} else {
							_tmp99_ = "value";
						}
						vala_ccode_function_add_parameter (function, _tmp101_ = vala_ccode_formal_parameter_new (_tmp100_ = vala_ccode_base_module_get_array_length_cname (self, _tmp99_, dim), length_ctype));
						_vala_ccode_node_unref0 (_tmp101_);
						_g_free0 (_tmp100_);
					}
				}
			}
			_g_free0 (length_ctype);
			_vala_code_node_unref0 (array_type);
		} else {
			gboolean _tmp102_ = FALSE;
			if (VALA_IS_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))) {
				_tmp102_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (VALA_DELEGATE_TYPE (vala_property_accessor_get_value_type (acc))));
			} else {
				_tmp102_ = FALSE;
			}
			if (_tmp102_) {
				const char* _tmp103_;
				const char* _tmp104_;
				char* _tmp105_;
				ValaCCodeFormalParameter* _tmp106_;
				_tmp103_ = NULL;
				if (vala_property_accessor_get_readable (acc)) {
					_tmp103_ = "result";
				} else {
					_tmp103_ = "value";
				}
				_tmp104_ = NULL;
				if (vala_property_accessor_get_readable (acc)) {
					_tmp104_ = "gpointer*";
				} else {
					_tmp104_ = "gpointer";
				}
				vala_ccode_function_add_parameter (function, _tmp106_ = vala_ccode_formal_parameter_new (_tmp105_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp103_), _tmp104_));
				_vala_ccode_node_unref0 (_tmp106_);
				_g_free0 (_tmp105_);
			}
		}
		if (!is_virtual) {
			gboolean _tmp107_ = FALSE;
			gboolean _tmp108_ = FALSE;
			if (vala_symbol_is_private_symbol ((ValaSymbol*) prop)) {
				_tmp108_ = TRUE;
			} else {
				gboolean _tmp109_ = FALSE;
				if (vala_property_accessor_get_readable (acc)) {
					_tmp109_ = TRUE;
				} else {
					_tmp109_ = vala_property_accessor_get_writable (acc);
				}
				_tmp108_ = !_tmp109_;
			}
			if (_tmp108_) {
				_tmp107_ = TRUE;
			} else {
				_tmp107_ = vala_symbol_get_access ((ValaSymbol*) acc) == VALA_SYMBOL_ACCESSIBILITY_PRIVATE;
			}
			if (_tmp107_) {
				vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
			}
		}
		init_fragment = vala_ccode_fragment_new ();
		if (vala_property_get_binding (prop) == MEMBER_BINDING_INSTANCE) {
			_tmp110_ = !is_virtual;
		} else {
			_tmp110_ = FALSE;
		}
		if (_tmp110_) {
			ValaCCodeStatement* check_stmt;
			gboolean _tmp111_ = FALSE;
			check_stmt = NULL;
			if (!vala_property_accessor_get_readable (acc)) {
				_tmp111_ = TRUE;
			} else {
				_tmp111_ = returns_real_struct;
			}
			if (_tmp111_) {
				ValaCCodeStatement* _tmp112_;
				check_stmt = (_tmp112_ = vala_ccode_base_module_create_property_type_check_statement (self, prop, FALSE, t, TRUE, "self"), _vala_ccode_node_unref0 (check_stmt), _tmp112_);
			} else {
				ValaCCodeStatement* _tmp113_;
				check_stmt = (_tmp113_ = vala_ccode_base_module_create_property_type_check_statement (self, prop, TRUE, t, TRUE, "self"), _vala_ccode_node_unref0 (check_stmt), _tmp113_);
			}
			if (check_stmt != NULL) {
				vala_ccode_fragment_append (init_fragment, (ValaCCodeNode*) check_stmt);
			}
			_vala_ccode_node_unref0 (check_stmt);
		}
		if (vala_property_accessor_get_readable (acc)) {
			_tmp114_ = !returns_real_struct;
		} else {
			_tmp114_ = FALSE;
		}
		if (_tmp114_) {
			gboolean _tmp115_ = FALSE;
			if (vala_property_accessor_get_return_block (acc) == NULL) {
				_tmp115_ = TRUE;
			} else {
				ValaList* _tmp116_;
				_tmp115_ = vala_collection_get_size ((ValaCollection*) (_tmp116_ = vala_basic_block_get_predecessors (vala_property_accessor_get_return_block (acc)))) > 0;
				_vala_collection_object_unref0 (_tmp116_);
			}
			if (_tmp115_) {
				char* _tmp117_;
				ValaCCodeDeclaration* _tmp118_;
				ValaCCodeDeclaration* _cdecl_;
				ValaCCodeVariableDeclarator* _tmp119_;
				_cdecl_ = (_tmp118_ = vala_ccode_declaration_new (_tmp117_ = vala_data_type_get_cname (vala_property_accessor_get_value_type (acc))), _g_free0 (_tmp117_), _tmp118_);
				vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp119_ = vala_ccode_variable_declarator_new ("result", NULL, NULL)));
				_vala_ccode_node_unref0 (_tmp119_);
				vala_ccode_fragment_append (init_fragment, (ValaCCodeNode*) _cdecl_);
				_vala_ccode_node_unref0 (_cdecl_);
			}
		}
		if (is_virtual) {
			char* _tmp120_;
			ValaCCodeDeclaration* _tmp121_;
			ValaCCodeDeclaration* _cdecl_;
			ValaCCodeIdentifier* _tmp122_;
			ValaCCodeExpression* _tmp123_;
			ValaCCodeVariableDeclarator* _tmp124_;
			_cdecl_ = (_tmp121_ = vala_ccode_declaration_new (_tmp120_ = vala_data_type_get_cname (this_type)), _g_free0 (_tmp120_), _tmp121_);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp124_ = vala_ccode_variable_declarator_new ("self", _tmp123_ = vala_ccode_base_module_transform_expression (self, (ValaCCodeExpression*) (_tmp122_ = vala_ccode_identifier_new ("base")), (ValaDataType*) base_type, this_type, NULL), NULL)));
			_vala_ccode_node_unref0 (_tmp124_);
			_vala_ccode_node_unref0 (_tmp123_);
			_vala_ccode_node_unref0 (_tmp122_);
			vala_ccode_fragment_append (init_fragment, (ValaCCodeNode*) _cdecl_);
			_vala_ccode_node_unref0 (_cdecl_);
		}
		vala_code_node_emit ((ValaCodeNode*) vala_property_accessor_get_body (acc), (ValaCodeGenerator*) self);
		vala_ccode_function_set_block (function, VALA_CCODE_BLOCK (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_property_accessor_get_body (acc))));
		vala_ccode_block_prepend_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) init_fragment);
		if (vala_ccode_base_module_get_current_method_inner_error (self)) {
			ValaCCodeDeclaration* _cdecl_;
			ValaCCodeConstant* _tmp125_;
			ValaCCodeVariableDeclarator* _tmp126_;
			_cdecl_ = vala_ccode_declaration_new ("GError *");
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp126_ = vala_ccode_variable_declarator_new_zero ("_inner_error_", (ValaCCodeExpression*) (_tmp125_ = vala_ccode_constant_new ("NULL")), NULL)));
			_vala_ccode_node_unref0 (_tmp126_);
			_vala_ccode_node_unref0 (_tmp125_);
			vala_ccode_block_add_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) _cdecl_);
			_vala_ccode_node_unref0 (_cdecl_);
		}
		if (vala_ccode_base_module_is_gobject_property (self, prop)) {
			_tmp128_ = vala_property_get_notify (prop);
		} else {
			_tmp128_ = FALSE;
		}
		if (_tmp128_) {
			gboolean _tmp129_ = FALSE;
			if (vala_property_accessor_get_writable (acc)) {
				_tmp129_ = TRUE;
			} else {
				_tmp129_ = vala_property_accessor_get_construction (acc);
			}
			_tmp127_ = _tmp129_;
		} else {
			_tmp127_ = FALSE;
		}
		if (_tmp127_) {
			ValaCCodeIdentifier* _tmp130_;
			ValaCCodeFunctionCall* _tmp131_;
			ValaCCodeFunctionCall* notify_call;
			ValaCCodeIdentifier* _tmp132_;
			ValaCCodeCastExpression* _tmp133_;
			ValaCCodeConstant* _tmp134_;
			ValaCCodeExpressionStatement* _tmp135_;
			notify_call = (_tmp131_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp130_ = vala_ccode_identifier_new ("g_object_notify"))), _vala_ccode_node_unref0 (_tmp130_), _tmp131_);
			vala_ccode_function_call_add_argument (notify_call, (ValaCCodeExpression*) (_tmp133_ = vala_ccode_cast_expression_new ((ValaCCodeExpression*) (_tmp132_ = vala_ccode_identifier_new ("self")), "GObject *")));
			_vala_ccode_node_unref0 (_tmp133_);
			_vala_ccode_node_unref0 (_tmp132_);
			vala_ccode_function_call_add_argument (notify_call, (ValaCCodeExpression*) (_tmp134_ = vala_property_get_canonical_cconstant (prop)));
			_vala_ccode_node_unref0 (_tmp134_);
			vala_ccode_block_add_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) (_tmp135_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) notify_call)));
			_vala_ccode_node_unref0 (_tmp135_);
			_vala_ccode_node_unref0 (notify_call);
		}
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
		_vala_ccode_node_unref0 (init_fragment);
		_vala_code_node_unref0 (base_type);
		_vala_ccode_node_unref0 (function);
		_g_free0 (cname);
	}
	vala_ccode_base_module_pop_context (self);
	_vala_ccode_node_unref0 (cvalueparam);
	_vala_ccode_node_unref0 (cselfparam);
	_vala_code_node_unref0 (this_type);
	_vala_code_node_unref0 (t);
	_vala_code_node_unref0 (prop);
}


static void vala_ccode_base_module_real_visit_destructor (ValaCodeVisitor* base, ValaDestructor* d) {
	ValaCCodeBaseModule * self;
	gboolean old_method_inner_error;
	gboolean _tmp0_ = FALSE;
	ValaCCodeFragment* cfrag;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (d != NULL);
	old_method_inner_error = vala_ccode_base_module_get_current_method_inner_error (self);
	vala_ccode_base_module_set_current_method_inner_error (self, FALSE);
	vala_code_node_emit ((ValaCodeNode*) vala_destructor_get_body (d), (ValaCodeGenerator*) self);
	if (vala_destructor_get_binding (d) == MEMBER_BINDING_STATIC) {
		_tmp0_ = !self->in_plugin;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) d), "static destructors are only supported for dynamic types");
		vala_code_node_set_error ((ValaCodeNode*) d, TRUE);
		return;
	}
	cfrag = vala_ccode_fragment_new ();
	if (vala_ccode_base_module_get_current_method_inner_error (self)) {
		ValaCCodeDeclaration* _cdecl_;
		ValaCCodeConstant* _tmp1_;
		ValaCCodeVariableDeclarator* _tmp2_;
		_cdecl_ = vala_ccode_declaration_new ("GError *");
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp2_ = vala_ccode_variable_declarator_new ("_inner_error_", (ValaCCodeExpression*) (_tmp1_ = vala_ccode_constant_new ("NULL")), NULL)));
		_vala_ccode_node_unref0 (_tmp2_);
		_vala_ccode_node_unref0 (_tmp1_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) _cdecl_);
		_vala_ccode_node_unref0 (_cdecl_);
	}
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_destructor_get_body (d)));
	vala_code_node_set_ccodenode ((ValaCodeNode*) d, (ValaCCodeNode*) cfrag);
	vala_ccode_base_module_set_current_method_inner_error (self, old_method_inner_error);
	_vala_ccode_node_unref0 (cfrag);
}


gint vala_ccode_base_module_get_block_id (ValaCCodeBaseModule* self, ValaBlock* b) {
	gint result = 0;
	gint _result_;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_result_ = GPOINTER_TO_INT (vala_map_get (self->priv->block_map, b));
	if (_result_ == 0) {
		_result_ = self->priv->next_block_id = self->priv->next_block_id + 1;
		vala_map_set (self->priv->block_map, b, GINT_TO_POINTER (_result_));
	}
	result = _result_;
	return result;
}


static void vala_ccode_base_module_capture_parameter (ValaCCodeBaseModule* self, ValaFormalParameter* param, ValaCCodeStruct* data, ValaCCodeBlock* cblock, gint block_id, ValaCCodeBlock* free_block) {
	ValaDataType* param_type;
	char* _tmp0_;
	char* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean is_unowned_delegate;
	ValaCCodeExpression* cparam;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	char* _tmp8_;
	ValaCCodeExpression* _tmp9_;
	char* _tmp10_;
	ValaCCodeMemberAccess* _tmp11_;
	ValaCCodeAssignment* _tmp12_;
	ValaCCodeExpressionStatement* _tmp13_;
	gboolean _tmp48_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (param != NULL);
	g_return_if_fail (data != NULL);
	g_return_if_fail (cblock != NULL);
	g_return_if_fail (free_block != NULL);
	vala_ccode_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) param), self->source_declarations);
	param_type = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param));
	vala_data_type_set_value_owned (param_type, TRUE);
	vala_ccode_struct_add_field (data, _tmp0_ = vala_data_type_get_cname (param_type), _tmp1_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)), NULL);
	_g_free0 (_tmp1_);
	_g_free0 (_tmp0_);
	if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
		_tmp2_ = !vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) param));
	} else {
		_tmp2_ = FALSE;
	}
	is_unowned_delegate = _tmp2_;
	cparam = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param));
	if (vala_data_type_is_real_non_null_struct_type (vala_variable_get_variable_type ((ValaVariable*) param))) {
		ValaCCodeExpression* _tmp3_;
		cparam = (_tmp3_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, cparam), _vala_ccode_node_unref0 (cparam), _tmp3_);
	}
	if (vala_ccode_base_module_requires_copy (self, param_type)) {
		_tmp5_ = !vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) param));
	} else {
		_tmp5_ = FALSE;
	}
	if (_tmp5_) {
		_tmp4_ = !is_unowned_delegate;
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		ValaMemberAccess* ma;
		ValaDataType* _tmp6_;
		ValaCCodeExpression* _tmp7_;
		ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
		vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
		vala_expression_set_value_type ((ValaExpression*) ma, _tmp6_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param)));
		_vala_code_node_unref0 (_tmp6_);
		vala_formal_parameter_set_captured (param, FALSE);
		cparam = (_tmp7_ = vala_ccode_base_module_get_ref_cexpression (self, vala_variable_get_variable_type ((ValaVariable*) param), cparam, (ValaExpression*) ma, (ValaCodeNode*) param), _vala_ccode_node_unref0 (cparam), _tmp7_);
		vala_formal_parameter_set_captured (param, TRUE);
		_vala_code_node_unref0 (ma);
	}
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp13_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp12_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_member_access_new_pointer (_tmp9_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp8_ = g_strdup_printf ("_data%d_", block_id)), _tmp10_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)))), cparam, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
	_vala_ccode_node_unref0 (_tmp13_);
	_vala_ccode_node_unref0 (_tmp12_);
	_vala_ccode_node_unref0 (_tmp11_);
	_g_free0 (_tmp10_);
	_vala_ccode_node_unref0 (_tmp9_);
	_g_free0 (_tmp8_);
	if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
		ValaArrayType* array_type;
		array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) param)));
		{
			gint dim;
			dim = 1;
			{
				gboolean _tmp14_;
				_tmp14_ = TRUE;
				while (TRUE) {
					char* _tmp15_;
					char* _tmp16_;
					ValaCCodeExpression* _tmp17_;
					char* _tmp18_;
					ValaCCodeMemberAccess* _tmp19_;
					char* _tmp20_;
					ValaCCodeIdentifier* _tmp21_;
					ValaCCodeAssignment* _tmp22_;
					ValaCCodeExpressionStatement* _tmp23_;
					if (!_tmp14_) {
						dim++;
					}
					_tmp14_ = FALSE;
					if (!(dim <= vala_array_type_get_rank (array_type))) {
						break;
					}
					vala_ccode_struct_add_field (data, "gint", _tmp15_ = vala_ccode_base_module_get_parameter_array_length_cname (self, param, dim), NULL);
					_g_free0 (_tmp15_);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp23_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp22_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_member_access_new_pointer (_tmp17_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp16_ = g_strdup_printf ("_data%d_", block_id)), _tmp18_ = vala_ccode_base_module_get_parameter_array_length_cname (self, param, dim))), (ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new (_tmp20_ = vala_ccode_base_module_get_parameter_array_length_cname (self, param, dim))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
					_vala_ccode_node_unref0 (_tmp23_);
					_vala_ccode_node_unref0 (_tmp22_);
					_vala_ccode_node_unref0 (_tmp21_);
					_g_free0 (_tmp20_);
					_vala_ccode_node_unref0 (_tmp19_);
					_g_free0 (_tmp18_);
					_vala_ccode_node_unref0 (_tmp17_);
					_g_free0 (_tmp16_);
				}
			}
		}
		_vala_code_node_unref0 (array_type);
	} else {
		if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
			char* _tmp24_;
			char* _tmp25_;
			char* _tmp26_;
			ValaCCodeExpression* _tmp27_;
			char* _tmp28_;
			char* _tmp29_;
			ValaCCodeMemberAccess* _tmp30_;
			char* _tmp31_;
			char* _tmp32_;
			ValaCCodeIdentifier* _tmp33_;
			ValaCCodeAssignment* _tmp34_;
			ValaCCodeExpressionStatement* _tmp35_;
			vala_ccode_struct_add_field (data, "gpointer", _tmp25_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp24_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))), NULL);
			_g_free0 (_tmp25_);
			_g_free0 (_tmp24_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp35_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp34_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_member_access_new_pointer (_tmp27_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp26_ = g_strdup_printf ("_data%d_", block_id)), _tmp29_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp28_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))))), (ValaCCodeExpression*) (_tmp33_ = vala_ccode_identifier_new (_tmp32_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp31_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp35_);
			_vala_ccode_node_unref0 (_tmp34_);
			_vala_ccode_node_unref0 (_tmp33_);
			_g_free0 (_tmp32_);
			_g_free0 (_tmp31_);
			_vala_ccode_node_unref0 (_tmp30_);
			_g_free0 (_tmp29_);
			_g_free0 (_tmp28_);
			_vala_ccode_node_unref0 (_tmp27_);
			_g_free0 (_tmp26_);
			if (vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) param))) {
				char* _tmp36_;
				char* _tmp37_;
				char* _tmp38_;
				ValaCCodeExpression* _tmp39_;
				char* _tmp40_;
				char* _tmp41_;
				ValaCCodeMemberAccess* _tmp42_;
				char* _tmp43_;
				char* _tmp44_;
				ValaCCodeIdentifier* _tmp45_;
				ValaCCodeAssignment* _tmp46_;
				ValaCCodeExpressionStatement* _tmp47_;
				vala_ccode_struct_add_field (data, "GDestroyNotify", _tmp37_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp36_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))), NULL);
				_g_free0 (_tmp37_);
				_g_free0 (_tmp36_);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp47_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp46_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp42_ = vala_ccode_member_access_new_pointer (_tmp39_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp38_ = g_strdup_printf ("_data%d_", block_id)), _tmp41_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp40_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))))), (ValaCCodeExpression*) (_tmp45_ = vala_ccode_identifier_new (_tmp44_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp43_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param))))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp47_);
				_vala_ccode_node_unref0 (_tmp46_);
				_vala_ccode_node_unref0 (_tmp45_);
				_g_free0 (_tmp44_);
				_g_free0 (_tmp43_);
				_vala_ccode_node_unref0 (_tmp42_);
				_g_free0 (_tmp41_);
				_g_free0 (_tmp40_);
				_vala_ccode_node_unref0 (_tmp39_);
				_g_free0 (_tmp38_);
			}
		}
	}
	if (vala_ccode_base_module_requires_destroy (self, param_type)) {
		_tmp48_ = !is_unowned_delegate;
	} else {
		_tmp48_ = FALSE;
	}
	if (_tmp48_) {
		gboolean old_coroutine;
		ValaMemberAccess* ma;
		ValaDataType* _tmp49_;
		char* _tmp50_;
		ValaCCodeIdentifier* _tmp51_;
		char* _tmp52_;
		ValaCCodeMemberAccess* _tmp53_;
		ValaCCodeExpression* _tmp54_;
		ValaCCodeExpressionStatement* _tmp55_;
		old_coroutine = FALSE;
		if (vala_ccode_base_module_get_current_method (self) != NULL) {
			old_coroutine = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
			vala_method_set_coroutine (vala_ccode_base_module_get_current_method (self), FALSE);
		}
		ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
		vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
		vala_expression_set_value_type ((ValaExpression*) ma, _tmp49_ = vala_data_type_copy (param_type));
		_vala_code_node_unref0 (_tmp49_);
		vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp55_ = vala_ccode_expression_statement_new (_tmp54_ = vala_ccode_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp53_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp51_ = vala_ccode_identifier_new (_tmp50_ = g_strdup_printf ("_data%d_", block_id))), _tmp52_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)))), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma, FALSE))));
		_vala_ccode_node_unref0 (_tmp55_);
		_vala_ccode_node_unref0 (_tmp54_);
		_vala_ccode_node_unref0 (_tmp53_);
		_g_free0 (_tmp52_);
		_vala_ccode_node_unref0 (_tmp51_);
		_g_free0 (_tmp50_);
		if (old_coroutine) {
			vala_method_set_coroutine (vala_ccode_base_module_get_current_method (self), TRUE);
		}
		_vala_code_node_unref0 (ma);
	}
	_vala_ccode_node_unref0 (cparam);
	_vala_code_node_unref0 (param_type);
}


static void vala_ccode_base_module_real_visit_block (ValaCodeVisitor* base, ValaBlock* b) {
	ValaCCodeBaseModule * self;
	ValaList* local_vars;
	ValaCCodeBlock* cblock;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (b != NULL);
	vala_ccode_base_module_emit_context_push_symbol (self->emit_context, (ValaSymbol*) b);
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _stmt_it;
		_stmt_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_block_get_statements (b))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaStatement* stmt;
			if (!vala_iterator_next (_stmt_it)) {
				break;
			}
			stmt = (ValaStatement*) vala_iterator_get (_stmt_it);
			vala_code_node_emit ((ValaCodeNode*) stmt, (ValaCodeGenerator*) self);
			_vala_code_node_unref0 (stmt);
		}
		_vala_collection_object_unref0 (_stmt_it);
	}
	local_vars = vala_block_get_local_variables (b);
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) local_vars);
		while (TRUE) {
			ValaLocalVariable* local;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			vala_symbol_set_active ((ValaSymbol*) local, FALSE);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	cblock = vala_ccode_block_new ();
	if (vala_block_get_captured (b)) {
		ValaBlock* parent_block;
		gint block_id;
		char* struct_name;
		ValaCCodeBlock* free_block;
		char* _tmp2_;
		ValaCCodeStruct* _tmp3_;
		ValaCCodeStruct* data;
		ValaCCodeIdentifier* _tmp47_;
		ValaCCodeFunctionCall* _tmp48_;
		ValaCCodeFunctionCall* data_alloc;
		ValaCCodeIdentifier* _tmp49_;
		gboolean _tmp50_ = FALSE;
		char* _tmp61_;
		ValaCCodeExpression* _tmp62_;
		ValaCCodeMemberAccess* _tmp63_;
		ValaCCodeIdentifier* _tmp64_;
		ValaCCodeAssignment* _tmp65_;
		ValaCCodeExpressionStatement* _tmp66_;
		char* _tmp102_;
		ValaCCodeVariableDeclarator* _tmp103_;
		ValaCCodeTypeDefinition* _tmp104_;
		ValaCCodeTypeDefinition* _typedef_;
		ValaCCodeIdentifier* _tmp105_;
		ValaCCodeFunctionCall* _tmp106_;
		ValaCCodeFunctionCall* data_free;
		ValaCCodeIdentifier* _tmp107_;
		char* _tmp108_;
		ValaCCodeIdentifier* _tmp109_;
		ValaCCodeExpressionStatement* _tmp110_;
		char* _tmp111_;
		char* _tmp112_;
		ValaCCodeFunction* _tmp113_;
		ValaCCodeFunction* ref_fun;
		char* _tmp114_;
		char* _tmp115_;
		ValaCCodeFormalParameter* _tmp116_;
		ValaCCodeFunction* _tmp117_;
		ValaCCodeBlock* _tmp118_;
		ValaCCodeIdentifier* _tmp119_;
		ValaCCodeFunctionCall* _tmp120_;
		ValaCCodeFunctionCall* ccall;
		char* _tmp121_;
		ValaCCodeIdentifier* _tmp122_;
		ValaCCodeMemberAccess* _tmp123_;
		ValaCCodeUnaryExpression* _tmp124_;
		ValaCCodeExpressionStatement* _tmp125_;
		char* _tmp126_;
		ValaCCodeIdentifier* _tmp127_;
		ValaCCodeReturnStatement* _tmp128_;
		char* _tmp129_;
		ValaCCodeFunction* _tmp130_;
		ValaCCodeFunction* unref_fun;
		char* _tmp131_;
		char* _tmp132_;
		ValaCCodeFormalParameter* _tmp133_;
		ValaCCodeFunction* _tmp134_;
		ValaCCodeBlock* _tmp135_;
		ValaCCodeIdentifier* _tmp136_;
		ValaCCodeFunctionCall* _tmp137_;
		char* _tmp138_;
		ValaCCodeIdentifier* _tmp139_;
		ValaCCodeMemberAccess* _tmp140_;
		ValaCCodeUnaryExpression* _tmp141_;
		ValaCCodeIfStatement* _tmp142_;
		parent_block = _vala_code_node_ref0 (vala_ccode_base_module_next_closure_block (self, vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
		block_id = vala_ccode_base_module_get_block_id (self, b);
		struct_name = g_strdup_printf ("Block%dData", block_id);
		free_block = vala_ccode_block_new ();
		data = (_tmp3_ = vala_ccode_struct_new (_tmp2_ = g_strconcat ("_", struct_name, NULL)), _g_free0 (_tmp2_), _tmp3_);
		vala_ccode_struct_add_field (data, "int", "_ref_count_", NULL);
		if (parent_block != NULL) {
			gint parent_block_id;
			char* _tmp4_;
			char* _tmp5_;
			char* _tmp6_;
			ValaCCodeIdentifier* _tmp7_;
			ValaCCodeFunctionCall* _tmp8_;
			ValaCCodeFunctionCall* unref_call;
			char* _tmp9_;
			ValaCCodeIdentifier* _tmp10_;
			char* _tmp11_;
			ValaCCodeMemberAccess* _tmp12_;
			ValaCCodeExpressionStatement* _tmp13_;
			parent_block_id = vala_ccode_base_module_get_block_id (self, parent_block);
			vala_ccode_struct_add_field (data, _tmp4_ = g_strdup_printf ("Block%dData *", parent_block_id), _tmp5_ = g_strdup_printf ("_data%d_", parent_block_id), NULL);
			_g_free0 (_tmp5_);
			_g_free0 (_tmp4_);
			unref_call = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new (_tmp6_ = g_strdup_printf ("block%d_data_unref", parent_block_id)))), _vala_ccode_node_unref0 (_tmp7_), _g_free0 (_tmp6_), _tmp8_);
			vala_ccode_function_call_add_argument (unref_call, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new (_tmp9_ = g_strdup_printf ("_data%d_", block_id))), _tmp11_ = g_strdup_printf ("_data%d_", parent_block_id))));
			_vala_ccode_node_unref0 (_tmp12_);
			_g_free0 (_tmp11_);
			_vala_ccode_node_unref0 (_tmp10_);
			_g_free0 (_tmp9_);
			vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp13_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) unref_call)));
			_vala_ccode_node_unref0 (_tmp13_);
			_vala_ccode_node_unref0 (unref_call);
		} else {
			gboolean _tmp14_ = FALSE;
			gboolean _tmp15_ = FALSE;
			if (self->in_constructor) {
				_tmp15_ = TRUE;
			} else {
				gboolean _tmp16_ = FALSE;
				if (vala_ccode_base_module_get_current_method (self) != NULL) {
					_tmp16_ = vala_method_get_binding (vala_ccode_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp16_ = FALSE;
				}
				_tmp15_ = _tmp16_;
			}
			if (_tmp15_) {
				_tmp14_ = TRUE;
			} else {
				gboolean _tmp17_ = FALSE;
				if (vala_ccode_base_module_get_current_property_accessor (self) != NULL) {
					_tmp17_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_ccode_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp17_ = FALSE;
				}
				_tmp14_ = _tmp17_;
			}
			if (_tmp14_) {
				char* _tmp18_;
				char* _tmp19_;
				ValaMemberAccess* ma;
				char* _tmp20_;
				ValaCCodeIdentifier* _tmp21_;
				ValaCCodeMemberAccess* _tmp22_;
				ValaObjectType* _tmp23_;
				ValaCCodeExpression* _tmp24_;
				ValaCCodeExpressionStatement* _tmp25_;
				vala_ccode_struct_add_field (data, _tmp19_ = g_strdup_printf ("%s *", _tmp18_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) vala_ccode_base_module_get_current_class (self), FALSE)), "self", NULL);
				_g_free0 (_tmp19_);
				_g_free0 (_tmp18_);
				ma = vala_member_access_new_simple ("this", NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) vala_ccode_base_module_get_current_class (self));
				vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp25_ = vala_ccode_expression_statement_new (_tmp24_ = vala_ccode_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new (_tmp20_ = g_strdup_printf ("_data%d_", block_id))), "self")), (ValaDataType*) (_tmp23_ = vala_object_type_new ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class (self))), (ValaExpression*) ma, FALSE))));
				_vala_ccode_node_unref0 (_tmp25_);
				_vala_ccode_node_unref0 (_tmp24_);
				_vala_code_node_unref0 (_tmp23_);
				_vala_ccode_node_unref0 (_tmp22_);
				_vala_ccode_node_unref0 (_tmp21_);
				_g_free0 (_tmp20_);
				_vala_code_node_unref0 (ma);
			}
		}
		{
			ValaIterator* _local_it;
			_local_it = vala_iterable_iterator ((ValaIterable*) local_vars);
			while (TRUE) {
				ValaLocalVariable* local;
				if (!vala_iterator_next (_local_it)) {
					break;
				}
				local = (ValaLocalVariable*) vala_iterator_get (_local_it);
				if (vala_local_variable_get_captured (local)) {
					char* _tmp26_;
					char* _tmp27_;
					char* _tmp28_;
					char* _tmp29_;
					vala_ccode_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) local), self->source_declarations);
					vala_ccode_struct_add_field (data, _tmp26_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local)), _tmp29_ = g_strconcat (_tmp27_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), _tmp28_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local)), NULL), NULL);
					_g_free0 (_tmp29_);
					_g_free0 (_tmp28_);
					_g_free0 (_tmp27_);
					_g_free0 (_tmp26_);
					if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
						ValaArrayType* array_type;
						char* _tmp33_;
						char* _tmp34_;
						array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
						{
							gint dim;
							dim = 1;
							{
								gboolean _tmp30_;
								_tmp30_ = TRUE;
								while (TRUE) {
									char* _tmp31_;
									char* _tmp32_;
									if (!_tmp30_) {
										dim++;
									}
									_tmp30_ = FALSE;
									if (!(dim <= vala_array_type_get_rank (array_type))) {
										break;
									}
									vala_ccode_struct_add_field (data, "gint", _tmp32_ = vala_ccode_base_module_get_array_length_cname (self, _tmp31_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), dim), NULL);
									_g_free0 (_tmp32_);
									_g_free0 (_tmp31_);
								}
							}
						}
						vala_ccode_struct_add_field (data, "gint", _tmp34_ = vala_ccode_base_module_get_array_size_cname (self, _tmp33_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL);
						_g_free0 (_tmp34_);
						_g_free0 (_tmp33_);
						_vala_code_node_unref0 (array_type);
					} else {
						if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
							char* _tmp35_;
							char* _tmp36_;
							vala_ccode_struct_add_field (data, "gpointer", _tmp36_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp35_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL);
							_g_free0 (_tmp36_);
							_g_free0 (_tmp35_);
							if (vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) local))) {
								char* _tmp37_;
								char* _tmp38_;
								vala_ccode_struct_add_field (data, "GDestroyNotify", _tmp38_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp37_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL);
								_g_free0 (_tmp38_);
								_g_free0 (_tmp37_);
							}
						}
					}
				}
				_vala_code_node_unref0 (local);
			}
			_vala_collection_object_unref0 (_local_it);
		}
		{
			gint i;
			i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
			{
				gboolean _tmp39_;
				_tmp39_ = TRUE;
				while (TRUE) {
					ValaLocalVariable* local;
					if (!_tmp39_) {
						i--;
					}
					_tmp39_ = FALSE;
					if (!(i >= 0)) {
						break;
					}
					local = (ValaLocalVariable*) vala_list_get (local_vars, i);
					if (vala_local_variable_get_captured (local)) {
						if (vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local))) {
							gboolean old_coroutine;
							ValaMemberAccess* ma;
							ValaDataType* _tmp40_;
							char* _tmp41_;
							ValaCCodeIdentifier* _tmp42_;
							char* _tmp43_;
							ValaCCodeMemberAccess* _tmp44_;
							ValaCCodeExpression* _tmp45_;
							ValaCCodeExpressionStatement* _tmp46_;
							old_coroutine = FALSE;
							if (vala_ccode_base_module_get_current_method (self) != NULL) {
								old_coroutine = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
								vala_method_set_coroutine (vala_ccode_base_module_get_current_method (self), FALSE);
							}
							ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
							vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
							vala_expression_set_value_type ((ValaExpression*) ma, _tmp40_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
							_vala_code_node_unref0 (_tmp40_);
							vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp46_ = vala_ccode_expression_statement_new (_tmp45_ = vala_ccode_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp44_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp42_ = vala_ccode_identifier_new (_tmp41_ = g_strdup_printf ("_data%d_", block_id))), _tmp43_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)))), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
							_vala_ccode_node_unref0 (_tmp46_);
							_vala_ccode_node_unref0 (_tmp45_);
							_vala_ccode_node_unref0 (_tmp44_);
							_g_free0 (_tmp43_);
							_vala_ccode_node_unref0 (_tmp42_);
							_g_free0 (_tmp41_);
							if (old_coroutine) {
								vala_method_set_coroutine (vala_ccode_base_module_get_current_method (self), TRUE);
							}
							_vala_code_node_unref0 (ma);
						}
					}
					_vala_code_node_unref0 (local);
				}
			}
		}
		data_alloc = (_tmp48_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp47_ = vala_ccode_identifier_new ("g_slice_new0"))), _vala_ccode_node_unref0 (_tmp47_), _tmp48_);
		vala_ccode_function_call_add_argument (data_alloc, (ValaCCodeExpression*) (_tmp49_ = vala_ccode_identifier_new (struct_name)));
		_vala_ccode_node_unref0 (_tmp49_);
		if (vala_ccode_base_module_get_current_method (self) != NULL) {
			_tmp50_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
		} else {
			_tmp50_ = FALSE;
		}
		if (_tmp50_) {
			char* _tmp51_;
			char* _tmp52_;
			char* _tmp53_;
			ValaCCodeExpression* _tmp54_;
			ValaCCodeAssignment* _tmp55_;
			ValaCCodeExpressionStatement* _tmp56_;
			vala_ccode_struct_add_field (self->closure_struct, _tmp51_ = g_strconcat (struct_name, "*", NULL), _tmp52_ = g_strdup_printf ("_data%d_", block_id), NULL);
			_g_free0 (_tmp52_);
			_g_free0 (_tmp51_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp56_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp55_ = vala_ccode_assignment_new (_tmp54_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp53_ = g_strdup_printf ("_data%d_", block_id)), (ValaCCodeExpression*) data_alloc, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp56_);
			_vala_ccode_node_unref0 (_tmp55_);
			_vala_ccode_node_unref0 (_tmp54_);
			_g_free0 (_tmp53_);
		} else {
			char* _tmp57_;
			ValaCCodeDeclaration* _tmp58_;
			ValaCCodeDeclaration* data_decl;
			char* _tmp59_;
			ValaCCodeVariableDeclarator* _tmp60_;
			data_decl = (_tmp58_ = vala_ccode_declaration_new (_tmp57_ = g_strconcat (struct_name, "*", NULL)), _g_free0 (_tmp57_), _tmp58_);
			vala_ccode_declaration_add_declarator (data_decl, (ValaCCodeDeclarator*) (_tmp60_ = vala_ccode_variable_declarator_new (_tmp59_ = g_strdup_printf ("_data%d_", block_id), (ValaCCodeExpression*) data_alloc, NULL)));
			_vala_ccode_node_unref0 (_tmp60_);
			_g_free0 (_tmp59_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) data_decl);
			_vala_ccode_node_unref0 (data_decl);
		}
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp66_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp65_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp63_ = vala_ccode_member_access_new_pointer (_tmp62_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp61_ = g_strdup_printf ("_data%d_", block_id)), "_ref_count_")), (ValaCCodeExpression*) (_tmp64_ = vala_ccode_identifier_new ("1")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
		_vala_ccode_node_unref0 (_tmp66_);
		_vala_ccode_node_unref0 (_tmp65_);
		_vala_ccode_node_unref0 (_tmp64_);
		_vala_ccode_node_unref0 (_tmp63_);
		_vala_ccode_node_unref0 (_tmp62_);
		_g_free0 (_tmp61_);
		if (parent_block != NULL) {
			gint parent_block_id;
			char* _tmp67_;
			ValaCCodeIdentifier* _tmp68_;
			ValaCCodeFunctionCall* _tmp69_;
			ValaCCodeFunctionCall* ref_call;
			char* _tmp70_;
			ValaCCodeExpression* _tmp71_;
			char* _tmp72_;
			ValaCCodeExpression* _tmp73_;
			char* _tmp74_;
			ValaCCodeMemberAccess* _tmp75_;
			ValaCCodeAssignment* _tmp76_;
			ValaCCodeExpressionStatement* _tmp77_;
			parent_block_id = vala_ccode_base_module_get_block_id (self, parent_block);
			ref_call = (_tmp69_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp68_ = vala_ccode_identifier_new (_tmp67_ = g_strdup_printf ("block%d_data_ref", parent_block_id)))), _vala_ccode_node_unref0 (_tmp68_), _g_free0 (_tmp67_), _tmp69_);
			vala_ccode_function_call_add_argument (ref_call, _tmp71_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp70_ = g_strdup_printf ("_data%d_", parent_block_id)));
			_vala_ccode_node_unref0 (_tmp71_);
			_g_free0 (_tmp70_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp77_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp76_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp75_ = vala_ccode_member_access_new_pointer (_tmp73_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp72_ = g_strdup_printf ("_data%d_", block_id)), _tmp74_ = g_strdup_printf ("_data%d_", parent_block_id))), (ValaCCodeExpression*) ref_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp77_);
			_vala_ccode_node_unref0 (_tmp76_);
			_vala_ccode_node_unref0 (_tmp75_);
			_g_free0 (_tmp74_);
			_vala_ccode_node_unref0 (_tmp73_);
			_g_free0 (_tmp72_);
			_vala_ccode_node_unref0 (ref_call);
		} else {
			gboolean _tmp78_ = FALSE;
			gboolean _tmp79_ = FALSE;
			if (self->in_constructor) {
				_tmp79_ = TRUE;
			} else {
				gboolean _tmp80_ = FALSE;
				gboolean _tmp81_ = FALSE;
				if (vala_ccode_base_module_get_current_method (self) != NULL) {
					_tmp81_ = vala_method_get_binding (vala_ccode_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp81_ = FALSE;
				}
				if (_tmp81_) {
					gboolean _tmp82_ = FALSE;
					if (!VALA_IS_CREATION_METHOD (vala_ccode_base_module_get_current_method (self))) {
						_tmp82_ = TRUE;
					} else {
						_tmp82_ = vala_method_get_body (vala_ccode_base_module_get_current_method (self)) != b;
					}
					_tmp80_ = _tmp82_;
				} else {
					_tmp80_ = FALSE;
				}
				_tmp79_ = _tmp80_;
			}
			if (_tmp79_) {
				_tmp78_ = TRUE;
			} else {
				gboolean _tmp83_ = FALSE;
				if (vala_ccode_base_module_get_current_property_accessor (self) != NULL) {
					_tmp83_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_ccode_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp83_ = FALSE;
				}
				_tmp78_ = _tmp83_;
			}
			if (_tmp78_) {
				ValaObjectType* _tmp84_;
				ValaCCodeExpression* _tmp85_;
				ValaCCodeFunctionCall* _tmp86_;
				ValaCCodeFunctionCall* ref_call;
				ValaCCodeExpression* _tmp87_;
				char* _tmp88_;
				ValaCCodeExpression* _tmp89_;
				ValaCCodeMemberAccess* _tmp90_;
				ValaCCodeAssignment* _tmp91_;
				ValaCCodeExpressionStatement* _tmp92_;
				ref_call = (_tmp86_ = vala_ccode_function_call_new (_tmp85_ = vala_ccode_base_module_get_dup_func_expression (self, (ValaDataType*) (_tmp84_ = vala_object_type_new ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class (self))), vala_code_node_get_source_reference ((ValaCodeNode*) b), FALSE)), _vala_ccode_node_unref0 (_tmp85_), _vala_code_node_unref0 (_tmp84_), _tmp86_);
				vala_ccode_function_call_add_argument (ref_call, _tmp87_ = vala_ccode_base_module_get_result_cexpression (self, "self"));
				_vala_ccode_node_unref0 (_tmp87_);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp92_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp91_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp90_ = vala_ccode_member_access_new_pointer (_tmp89_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp88_ = g_strdup_printf ("_data%d_", block_id)), "self")), (ValaCCodeExpression*) ref_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp92_);
				_vala_ccode_node_unref0 (_tmp91_);
				_vala_ccode_node_unref0 (_tmp90_);
				_vala_ccode_node_unref0 (_tmp89_);
				_g_free0 (_tmp88_);
				_vala_ccode_node_unref0 (ref_call);
			}
		}
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
			ValaMethod* m;
			ValaCCodeFragment* cfrag;
			m = _vala_code_node_ref0 (VALA_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
			{
				ValaList* _tmp93_;
				ValaIterator* _tmp94_;
				ValaIterator* _param_it;
				_param_it = (_tmp94_ = vala_iterable_iterator ((ValaIterable*) (_tmp93_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp93_), _tmp94_);
				while (TRUE) {
					ValaFormalParameter* param;
					if (!vala_iterator_next (_param_it)) {
						break;
					}
					param = (ValaFormalParameter*) vala_iterator_get (_param_it);
					if (vala_formal_parameter_get_captured (param)) {
						vala_ccode_base_module_capture_parameter (self, param, data, cblock, block_id, free_block);
					}
					_vala_code_node_unref0 (param);
				}
				_vala_collection_object_unref0 (_param_it);
			}
			if (vala_method_get_coroutine (m)) {
				char* _tmp95_;
				ValaCCodeExpression* _tmp96_;
				ValaCCodeMemberAccess* _tmp97_;
				ValaCCodeIdentifier* _tmp98_;
				ValaCCodeAssignment* _tmp99_;
				ValaCCodeExpressionStatement* _tmp100_;
				vala_ccode_struct_add_field (data, "gpointer", "_async_data_", NULL);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp100_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp99_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp97_ = vala_ccode_member_access_new_pointer (_tmp96_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp95_ = g_strdup_printf ("_data%d_", block_id)), "_async_data_")), (ValaCCodeExpression*) (_tmp98_ = vala_ccode_identifier_new ("data")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp100_);
				_vala_ccode_node_unref0 (_tmp99_);
				_vala_ccode_node_unref0 (_tmp98_);
				_vala_ccode_node_unref0 (_tmp97_);
				_vala_ccode_node_unref0 (_tmp96_);
				_g_free0 (_tmp95_);
			}
			cfrag = vala_ccode_fragment_new ();
			vala_ccode_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
			vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
			_vala_ccode_node_unref0 (cfrag);
			_vala_code_node_unref0 (m);
		} else {
			if (VALA_IS_PROPERTY_ACCESSOR (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
				ValaPropertyAccessor* acc;
				gboolean _tmp101_ = FALSE;
				ValaCCodeFragment* cfrag;
				acc = _vala_code_node_ref0 (VALA_PROPERTY_ACCESSOR (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
				if (!vala_property_accessor_get_readable (acc)) {
					_tmp101_ = vala_formal_parameter_get_captured (vala_property_accessor_get_value_parameter (acc));
				} else {
					_tmp101_ = FALSE;
				}
				if (_tmp101_) {
					vala_ccode_base_module_capture_parameter (self, vala_property_accessor_get_value_parameter (acc), data, cblock, block_id, free_block);
				}
				cfrag = vala_ccode_fragment_new ();
				vala_ccode_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
				vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
				_vala_ccode_node_unref0 (cfrag);
				_vala_code_node_unref0 (acc);
			}
		}
		_typedef_ = (_tmp104_ = vala_ccode_type_definition_new (_tmp102_ = g_strconcat ("struct _", struct_name, NULL), (ValaCCodeDeclarator*) (_tmp103_ = vala_ccode_variable_declarator_new (struct_name, NULL, NULL))), _vala_ccode_node_unref0 (_tmp103_), _g_free0 (_tmp102_), _tmp104_);
		vala_ccode_declaration_space_add_type_declaration (self->source_declarations, (ValaCCodeNode*) _typedef_);
		vala_ccode_declaration_space_add_type_definition (self->source_declarations, (ValaCCodeNode*) data);
		data_free = (_tmp106_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp105_ = vala_ccode_identifier_new ("g_slice_free"))), _vala_ccode_node_unref0 (_tmp105_), _tmp106_);
		vala_ccode_function_call_add_argument (data_free, (ValaCCodeExpression*) (_tmp107_ = vala_ccode_identifier_new (struct_name)));
		_vala_ccode_node_unref0 (_tmp107_);
		vala_ccode_function_call_add_argument (data_free, (ValaCCodeExpression*) (_tmp109_ = vala_ccode_identifier_new (_tmp108_ = g_strdup_printf ("_data%d_", block_id))));
		_vala_ccode_node_unref0 (_tmp109_);
		_g_free0 (_tmp108_);
		vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp110_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_free)));
		_vala_ccode_node_unref0 (_tmp110_);
		ref_fun = (_tmp113_ = vala_ccode_function_new (_tmp111_ = g_strdup_printf ("block%d_data_ref", block_id), _tmp112_ = g_strconcat (struct_name, "*", NULL)), _g_free0 (_tmp112_), _g_free0 (_tmp111_), _tmp113_);
		vala_ccode_function_add_parameter (ref_fun, _tmp116_ = vala_ccode_formal_parameter_new (_tmp114_ = g_strdup_printf ("_data%d_", block_id), _tmp115_ = g_strconcat (struct_name, "*", NULL)));
		_vala_ccode_node_unref0 (_tmp116_);
		_g_free0 (_tmp115_);
		_g_free0 (_tmp114_);
		vala_ccode_function_set_modifiers (ref_fun, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp117_ = vala_ccode_function_copy (ref_fun)));
		_vala_ccode_node_unref0 (_tmp117_);
		vala_ccode_function_set_block (ref_fun, _tmp118_ = vala_ccode_block_new ());
		_vala_ccode_node_unref0 (_tmp118_);
		ccall = (_tmp120_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp119_ = vala_ccode_identifier_new ("g_atomic_int_inc"))), _vala_ccode_node_unref0 (_tmp119_), _tmp120_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp124_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp123_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp122_ = vala_ccode_identifier_new (_tmp121_ = g_strdup_printf ("_data%d_", block_id))), "_ref_count_")))));
		_vala_ccode_node_unref0 (_tmp124_);
		_vala_ccode_node_unref0 (_tmp123_);
		_vala_ccode_node_unref0 (_tmp122_);
		_g_free0 (_tmp121_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (ref_fun), (ValaCCodeNode*) (_tmp125_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccall)));
		_vala_ccode_node_unref0 (_tmp125_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (ref_fun), (ValaCCodeNode*) (_tmp128_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp127_ = vala_ccode_identifier_new (_tmp126_ = g_strdup_printf ("_data%d_", block_id))))));
		_vala_ccode_node_unref0 (_tmp128_);
		_vala_ccode_node_unref0 (_tmp127_);
		_g_free0 (_tmp126_);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) ref_fun);
		unref_fun = (_tmp130_ = vala_ccode_function_new (_tmp129_ = g_strdup_printf ("block%d_data_unref", block_id), "void"), _g_free0 (_tmp129_), _tmp130_);
		vala_ccode_function_add_parameter (unref_fun, _tmp133_ = vala_ccode_formal_parameter_new (_tmp131_ = g_strdup_printf ("_data%d_", block_id), _tmp132_ = g_strconcat (struct_name, "*", NULL)));
		_vala_ccode_node_unref0 (_tmp133_);
		_g_free0 (_tmp132_);
		_g_free0 (_tmp131_);
		vala_ccode_function_set_modifiers (unref_fun, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp134_ = vala_ccode_function_copy (unref_fun)));
		_vala_ccode_node_unref0 (_tmp134_);
		vala_ccode_function_set_block (unref_fun, _tmp135_ = vala_ccode_block_new ());
		_vala_ccode_node_unref0 (_tmp135_);
		ccall = (_tmp137_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp136_ = vala_ccode_identifier_new ("g_atomic_int_dec_and_test"))), _vala_ccode_node_unref0 (ccall), _tmp137_);
		_vala_ccode_node_unref0 (_tmp136_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp141_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp140_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp139_ = vala_ccode_identifier_new (_tmp138_ = g_strdup_printf ("_data%d_", block_id))), "_ref_count_")))));
		_vala_ccode_node_unref0 (_tmp141_);
		_vala_ccode_node_unref0 (_tmp140_);
		_vala_ccode_node_unref0 (_tmp139_);
		_g_free0 (_tmp138_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (unref_fun), (ValaCCodeNode*) (_tmp142_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) ccall, (ValaCCodeStatement*) free_block, NULL)));
		_vala_ccode_node_unref0 (_tmp142_);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) unref_fun);
		_vala_ccode_node_unref0 (unref_fun);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (ref_fun);
		_vala_ccode_node_unref0 (data_free);
		_vala_ccode_node_unref0 (_typedef_);
		_vala_ccode_node_unref0 (data_alloc);
		_vala_ccode_node_unref0 (data);
		_vala_ccode_node_unref0 (free_block);
		_g_free0 (struct_name);
		_vala_code_node_unref0 (parent_block);
	}
	{
		ValaList* _tmp143_;
		ValaIterator* _tmp144_;
		ValaIterator* _stmt_it;
		_stmt_it = (_tmp144_ = vala_iterable_iterator ((ValaIterable*) (_tmp143_ = vala_block_get_statements (b))), _vala_collection_object_unref0 (_tmp143_), _tmp144_);
		while (TRUE) {
			ValaCodeNode* stmt;
			gboolean _tmp145_ = FALSE;
			if (!vala_iterator_next (_stmt_it)) {
				break;
			}
			stmt = (ValaCodeNode*) ((ValaStatement*) vala_iterator_get (_stmt_it));
			if (vala_code_node_get_error (stmt)) {
				_tmp145_ = TRUE;
			} else {
				_tmp145_ = vala_code_node_get_unreachable (stmt);
			}
			if (_tmp145_) {
				_vala_code_node_unref0 (stmt);
				continue;
			}
			if (VALA_IS_CCODE_FRAGMENT (vala_code_node_get_ccodenode (stmt))) {
				{
					ValaList* _tmp146_;
					ValaIterator* _tmp147_;
					ValaIterator* _cstmt_it;
					_cstmt_it = (_tmp147_ = vala_iterable_iterator ((ValaIterable*) (_tmp146_ = vala_ccode_fragment_get_children (VALA_CCODE_FRAGMENT (vala_code_node_get_ccodenode (stmt))))), _vala_collection_object_unref0 (_tmp146_), _tmp147_);
					while (TRUE) {
						ValaCCodeNode* cstmt;
						if (!vala_iterator_next (_cstmt_it)) {
							break;
						}
						cstmt = (ValaCCodeNode*) vala_iterator_get (_cstmt_it);
						vala_ccode_block_add_statement (cblock, cstmt);
						_vala_ccode_node_unref0 (cstmt);
					}
					_vala_collection_object_unref0 (_cstmt_it);
				}
			} else {
				vala_ccode_block_add_statement (cblock, vala_code_node_get_ccodenode (stmt));
			}
			_vala_code_node_unref0 (stmt);
		}
		_vala_collection_object_unref0 (_stmt_it);
	}
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp148_;
			_tmp148_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp149_ = FALSE;
				gboolean _tmp150_ = FALSE;
				gboolean _tmp151_ = FALSE;
				if (!_tmp148_) {
					i--;
				}
				_tmp148_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (!vala_code_node_get_unreachable ((ValaCodeNode*) local)) {
					_tmp151_ = !vala_local_variable_get_floating (local);
				} else {
					_tmp151_ = FALSE;
				}
				if (_tmp151_) {
					_tmp150_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp150_ = FALSE;
				}
				if (_tmp150_) {
					_tmp149_ = vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp149_ = FALSE;
				}
				if (_tmp149_) {
					ValaMemberAccess* ma;
					ValaDataType* _tmp152_;
					ValaCCodeExpression* _tmp153_;
					ValaCCodeExpression* _tmp154_;
					ValaCCodeExpressionStatement* _tmp155_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_expression_set_value_type ((ValaExpression*) ma, _tmp152_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
					_vala_code_node_unref0 (_tmp152_);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp155_ = vala_ccode_expression_statement_new (_tmp154_ = vala_ccode_base_module_get_unref_expression (self, _tmp153_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp155_);
					_vala_ccode_node_unref0 (_tmp154_);
					_vala_ccode_node_unref0 (_tmp153_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (VALA_IS_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
		ValaMethod* m;
		m = _vala_code_node_ref0 (VALA_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
		{
			ValaList* _tmp156_;
			ValaIterator* _tmp157_;
			ValaIterator* _param_it;
			_param_it = (_tmp157_ = vala_iterable_iterator ((ValaIterable*) (_tmp156_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp156_), _tmp157_);
			while (TRUE) {
				ValaFormalParameter* param;
				gboolean _tmp158_ = FALSE;
				gboolean _tmp159_ = FALSE;
				gboolean _tmp160_ = FALSE;
				if (!vala_iterator_next (_param_it)) {
					break;
				}
				param = (ValaFormalParameter*) vala_iterator_get (_param_it);
				if (!vala_formal_parameter_get_captured (param)) {
					_tmp160_ = !vala_formal_parameter_get_ellipsis (param);
				} else {
					_tmp160_ = FALSE;
				}
				if (_tmp160_) {
					_tmp159_ = vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) param));
				} else {
					_tmp159_ = FALSE;
				}
				if (_tmp159_) {
					_tmp158_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
				} else {
					_tmp158_ = FALSE;
				}
				if (_tmp158_) {
					ValaMemberAccess* ma;
					ValaDataType* _tmp161_;
					ValaCCodeExpression* _tmp162_;
					ValaCCodeExpression* _tmp163_;
					ValaCCodeExpressionStatement* _tmp164_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
					vala_expression_set_value_type ((ValaExpression*) ma, _tmp161_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param)));
					_vala_code_node_unref0 (_tmp161_);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp164_ = vala_ccode_expression_statement_new (_tmp163_ = vala_ccode_base_module_get_unref_expression (self, _tmp162_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param)), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp164_);
					_vala_ccode_node_unref0 (_tmp163_);
					_vala_ccode_node_unref0 (_tmp162_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (param);
			}
			_vala_collection_object_unref0 (_param_it);
		}
		_vala_code_node_unref0 (m);
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		char* _tmp165_;
		ValaCCodeIdentifier* _tmp166_;
		ValaCCodeFunctionCall* _tmp167_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp168_;
		ValaCCodeExpression* _tmp169_;
		ValaCCodeExpressionStatement* _tmp170_;
		block_id = vala_ccode_base_module_get_block_id (self, b);
		data_unref = (_tmp167_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp166_ = vala_ccode_identifier_new (_tmp165_ = g_strdup_printf ("block%d_data_unref", block_id)))), _vala_ccode_node_unref0 (_tmp166_), _g_free0 (_tmp165_), _tmp167_);
		vala_ccode_function_call_add_argument (data_unref, _tmp169_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp168_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp169_);
		_g_free0 (_tmp168_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp170_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp170_);
		_vala_ccode_node_unref0 (data_unref);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) b, (ValaCCodeNode*) cblock);
	vala_ccode_base_module_emit_context_pop_symbol (self->emit_context);
	_vala_ccode_node_unref0 (cblock);
	_vala_collection_object_unref0 (local_vars);
}


static void vala_ccode_base_module_real_visit_empty_statement (ValaCodeVisitor* base, ValaEmptyStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaCCodeEmptyStatement* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_empty_statement_new ()));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_ccode_base_module_real_visit_declaration_statement (ValaCodeVisitor* base, ValaDeclarationStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaLocalVariable* local;
	gboolean _tmp1_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_accept ((ValaCodeNode*) vala_declaration_statement_get_declaration (stmt), (ValaCodeVisitor*) self);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_declaration_statement_get_declaration (stmt)));
	local = _vala_code_node_ref0 ((_tmp0_ = vala_declaration_statement_get_declaration (stmt), VALA_IS_LOCAL_VARIABLE (_tmp0_) ? ((ValaLocalVariable*) _tmp0_) : NULL));
	if (local != NULL) {
		_tmp1_ = vala_variable_get_initializer ((ValaVariable*) local) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		vala_ccode_base_module_create_temp_decl (self, (ValaStatement*) stmt, (ValaList*) vala_variable_get_initializer ((ValaVariable*) local)->temp_vars);
	}
	vala_ccode_base_module_create_temp_decl (self, (ValaStatement*) stmt, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
	vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
	_vala_code_node_unref0 (local);
}


ValaCCodeExpression* vala_ccode_base_module_get_variable_cexpression (ValaCCodeBaseModule* self, const char* name) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		_tmp0_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeIdentifier* _tmp1_;
		char* _tmp2_;
		ValaCCodeExpression* _tmp3_;
		result = (_tmp3_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_identifier_new ("data")), _tmp2_ = vala_ccode_base_module_get_variable_cname (self, name)), _g_free0 (_tmp2_), _vala_ccode_node_unref0 (_tmp1_), _tmp3_);
		return result;
	} else {
		char* _tmp4_;
		ValaCCodeExpression* _tmp5_;
		result = (_tmp5_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp4_ = vala_ccode_base_module_get_variable_cname (self, name)), _g_free0 (_tmp4_), _tmp5_);
		return result;
	}
}


char* vala_ccode_base_module_get_variable_cname (ValaCCodeBaseModule* self, const char* name) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	if (g_utf8_get_char (g_utf8_offset_to_pointer (name, 0)) == '.') {
		if (_vala_strcmp0 (name, ".result") == 0) {
			result = g_strdup ("result");
			return result;
		}
		if (!vala_map_contains (vala_ccode_base_module_get_variable_name_map (self), name)) {
			char* _tmp0_;
			gint _tmp1_;
			vala_map_set (vala_ccode_base_module_get_variable_name_map (self), name, _tmp0_ = g_strdup_printf ("_tmp%d_", vala_ccode_base_module_get_next_temp_var_id (self)));
			_g_free0 (_tmp0_);
			_tmp1_ = vala_ccode_base_module_get_next_temp_var_id (self);
			vala_ccode_base_module_set_next_temp_var_id (self, _tmp1_ + 1);
			_tmp1_;
		}
		result = (char*) vala_map_get (vala_ccode_base_module_get_variable_name_map (self), name);
		return result;
	} else {
		if (vala_collection_contains ((ValaCollection*) self->priv->reserved_identifiers, name)) {
			result = g_strdup_printf ("_%s_", name);
			return result;
		} else {
			result = g_strdup (name);
			return result;
		}
	}
}


ValaCCodeExpression* vala_ccode_base_module_get_result_cexpression (ValaCCodeBaseModule* self, const char* cname) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (cname != NULL, NULL);
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		_tmp0_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeIdentifier* _tmp1_;
		ValaCCodeExpression* _tmp2_;
		result = (_tmp2_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_identifier_new ("data")), cname), _vala_ccode_node_unref0 (_tmp1_), _tmp2_);
		return result;
	} else {
		result = (ValaCCodeExpression*) vala_ccode_identifier_new (cname);
		return result;
	}
}


static gboolean vala_ccode_base_module_has_simple_struct_initializer (ValaCCodeBaseModule* self, ValaLocalVariable* local) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	ValaExpression* _tmp1_;
	ValaObjectCreationExpression* initializer;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (local != NULL, FALSE);
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) local)), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	initializer = _vala_code_node_ref0 ((_tmp1_ = vala_variable_get_initializer ((ValaVariable*) local), VALA_IS_OBJECT_CREATION_EXPRESSION (_tmp1_) ? ((ValaObjectCreationExpression*) _tmp1_) : NULL));
	if (st != NULL) {
		gboolean _tmp6_ = FALSE;
		if (!vala_struct_is_simple_type (st)) {
			_tmp6_ = TRUE;
		} else {
			char* _tmp7_;
			_tmp6_ = _vala_strcmp0 (_tmp7_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "va_list") == 0;
			_g_free0 (_tmp7_);
		}
		_tmp5_ = _tmp6_;
	} else {
		_tmp5_ = FALSE;
	}
	if (_tmp5_) {
		_tmp4_ = !vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) local));
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		_tmp3_ = initializer != NULL;
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		ValaList* _tmp8_;
		_tmp2_ = vala_collection_get_size ((ValaCollection*) (_tmp8_ = vala_object_creation_expression_get_object_initializer (initializer))) == 0;
		_vala_collection_object_unref0 (_tmp8_);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		result = TRUE;
		_vala_code_node_unref0 (initializer);
		_vala_code_node_unref0 (st);
		return result;
	} else {
		result = FALSE;
		_vala_code_node_unref0 (initializer);
		_vala_code_node_unref0 (st);
		return result;
	}
	_vala_code_node_unref0 (initializer);
	_vala_code_node_unref0 (st);
}


static void vala_ccode_base_module_real_visit_local_variable (ValaCodeVisitor* base, ValaLocalVariable* local) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* rhs;
	gboolean _tmp20_ = FALSE;
	ValaCCodeFragment* cfrag;
	gboolean _tmp88_ = FALSE;
	gboolean _tmp100_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (local != NULL);
	vala_ccode_base_module_check_type (self, vala_variable_get_variable_type ((ValaVariable*) local));
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local), (ValaCodeGenerator*) self);
		vala_code_visitor_visit_end_full_expression ((ValaCodeVisitor*) self, vala_variable_get_initializer ((ValaVariable*) local));
	}
	vala_ccode_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) local), self->source_declarations);
	if (!vala_local_variable_get_captured (local)) {
		if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
			ValaArrayType* array_type;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
			if (!vala_array_type_get_fixed_length (array_type)) {
				{
					gint dim;
					dim = 1;
					{
						gboolean _tmp0_;
						_tmp0_ = TRUE;
						while (TRUE) {
							ValaDataType* _tmp1_;
							char* _tmp2_;
							char* _tmp3_;
							ValaLocalVariable* _tmp4_;
							ValaLocalVariable* len_var;
							if (!_tmp0_) {
								dim++;
							}
							_tmp0_ = FALSE;
							if (!(dim <= vala_array_type_get_rank (array_type))) {
								break;
							}
							len_var = (_tmp4_ = vala_local_variable_new (_tmp1_ = vala_data_type_copy (self->int_type), _tmp3_ = vala_ccode_base_module_get_array_length_cname (self, _tmp2_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), dim), NULL, NULL), _g_free0 (_tmp3_), _g_free0 (_tmp2_), _vala_code_node_unref0 (_tmp1_), _tmp4_);
							vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), len_var);
							_vala_code_node_unref0 (len_var);
						}
					}
				}
				if (vala_array_type_get_rank (array_type) == 1) {
					ValaDataType* _tmp5_;
					char* _tmp6_;
					char* _tmp7_;
					ValaLocalVariable* _tmp8_;
					ValaLocalVariable* size_var;
					size_var = (_tmp8_ = vala_local_variable_new (_tmp5_ = vala_data_type_copy (self->int_type), _tmp7_ = vala_ccode_base_module_get_array_size_cname (self, _tmp6_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL, NULL), _g_free0 (_tmp7_), _g_free0 (_tmp6_), _vala_code_node_unref0 (_tmp5_), _tmp8_);
					vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), size_var);
					_vala_code_node_unref0 (size_var);
				}
			}
			_vala_code_node_unref0 (array_type);
		} else {
			if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
				ValaDelegateType* deleg_type;
				ValaDelegate* d;
				deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
				d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
				if (vala_delegate_get_has_target (d)) {
					ValaVoidType* _tmp9_;
					ValaPointerType* _tmp10_;
					char* _tmp11_;
					char* _tmp12_;
					ValaLocalVariable* _tmp13_;
					ValaLocalVariable* target_var;
					target_var = (_tmp13_ = vala_local_variable_new ((ValaDataType*) (_tmp10_ = vala_pointer_type_new ((ValaDataType*) (_tmp9_ = vala_void_type_new (NULL)), NULL)), _tmp12_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp11_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL, NULL), _g_free0 (_tmp12_), _g_free0 (_tmp11_), _vala_code_node_unref0 (_tmp10_), _vala_code_node_unref0 (_tmp9_), _tmp13_);
					vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), target_var);
					if (vala_data_type_get_value_owned ((ValaDataType*) deleg_type)) {
						ValaSymbol* _tmp14_;
						ValaDelegate* _tmp15_;
						ValaDelegateType* _tmp16_;
						char* _tmp17_;
						char* _tmp18_;
						ValaLocalVariable* _tmp19_;
						ValaLocalVariable* target_destroy_notify_var;
						target_destroy_notify_var = (_tmp19_ = vala_local_variable_new ((ValaDataType*) (_tmp16_ = vala_delegate_type_new (_tmp15_ = VALA_DELEGATE (vala_scope_lookup (vala_symbol_get_scope (_tmp14_ = vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) vala_code_context_get_root (self->priv->_context)), "GLib")), "DestroyNotify")))), _tmp18_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, _tmp17_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), NULL, NULL), _g_free0 (_tmp18_), _g_free0 (_tmp17_), _vala_code_node_unref0 (_tmp16_), _vala_code_node_unref0 (_tmp15_), _vala_code_node_unref0 (_tmp14_), _tmp19_);
						vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), target_destroy_notify_var);
						_vala_code_node_unref0 (target_destroy_notify_var);
					}
					_vala_code_node_unref0 (target_var);
				}
				_vala_code_node_unref0 (d);
				_vala_code_node_unref0 (deleg_type);
			}
		}
	}
	rhs = NULL;
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		_tmp20_ = vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local)) != NULL;
	} else {
		_tmp20_ = FALSE;
	}
	if (_tmp20_) {
		ValaMemberAccess* ma;
		ValaDataType* _tmp21_;
		ValaCCodeExpression* _tmp22_;
		ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
		vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
		vala_expression_set_value_type ((ValaExpression*) ma, _tmp21_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
		_vala_code_node_unref0 (_tmp21_);
		rhs = (_tmp22_ = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local)))), _vala_ccode_node_unref0 (rhs), _tmp22_);
		if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
			ValaArrayType* array_type;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
			if (vala_array_type_get_fixed_length (array_type)) {
				ValaCCodeExpression* _tmp23_;
				rhs = (_tmp23_ = NULL, _vala_ccode_node_unref0 (rhs), _tmp23_);
			} else {
				ValaCCodeCommaExpression* ccomma;
				ValaLocalVariable* temp_var;
				ValaCCodeExpression* _tmp24_;
				ValaCCodeAssignment* _tmp25_;
				gboolean _tmp28_ = FALSE;
				ValaCCodeExpression* _tmp30_;
				ValaCCodeExpression* _tmp31_;
				ccomma = vala_ccode_comma_expression_new ();
				temp_var = vala_ccode_base_module_get_temp_variable (self, vala_variable_get_variable_type ((ValaVariable*) local), TRUE, (ValaCodeNode*) local, FALSE);
				vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_var);
				vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp25_ = vala_ccode_assignment_new (_tmp24_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp25_);
				_vala_ccode_node_unref0 (_tmp24_);
				{
					gint dim;
					dim = 1;
					{
						gboolean _tmp26_;
						_tmp26_ = TRUE;
						while (TRUE) {
							ValaCCodeExpression* lhs_array_len;
							ValaCCodeExpression* rhs_array_len;
							ValaCCodeAssignment* _tmp27_;
							if (!_tmp26_) {
								dim++;
							}
							_tmp26_ = FALSE;
							if (!(dim <= vala_array_type_get_rank (array_type))) {
								break;
							}
							lhs_array_len = vala_ccode_base_module_get_array_length_cexpression (self, (ValaExpression*) ma, dim);
							rhs_array_len = vala_ccode_base_module_get_array_length_cexpression (self, vala_variable_get_initializer ((ValaVariable*) local), dim);
							vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_assignment_new (lhs_array_len, rhs_array_len, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
							_vala_ccode_node_unref0 (_tmp27_);
							_vala_ccode_node_unref0 (rhs_array_len);
							_vala_ccode_node_unref0 (lhs_array_len);
						}
					}
				}
				if (vala_array_type_get_rank (array_type) == 1) {
					_tmp28_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp28_ = FALSE;
				}
				if (_tmp28_) {
					ValaCCodeExpression* lhs_array_size;
					ValaCCodeExpression* rhs_array_len;
					ValaCCodeAssignment* _tmp29_;
					lhs_array_size = vala_ccode_base_module_get_array_size_cexpression (self, (ValaExpression*) ma);
					rhs_array_len = vala_ccode_base_module_get_array_length_cexpression (self, (ValaExpression*) ma, 1);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp29_ = vala_ccode_assignment_new (lhs_array_size, rhs_array_len, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp29_);
					_vala_ccode_node_unref0 (rhs_array_len);
					_vala_ccode_node_unref0 (lhs_array_size);
				}
				vala_ccode_comma_expression_append_expression (ccomma, _tmp30_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)));
				_vala_ccode_node_unref0 (_tmp30_);
				rhs = (_tmp31_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (rhs), _tmp31_);
				_vala_code_node_unref0 (temp_var);
				_vala_ccode_node_unref0 (ccomma);
			}
			_vala_code_node_unref0 (array_type);
		} else {
			if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
				ValaDelegateType* deleg_type;
				ValaDelegate* d;
				deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
				d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
				if (vala_delegate_get_has_target (d)) {
					ValaCCodeCommaExpression* ccomma;
					ValaLocalVariable* temp_var;
					ValaCCodeExpression* _tmp32_;
					ValaCCodeAssignment* _tmp33_;
					ValaCCodeExpression* lhs_delegate_target_destroy_notify;
					ValaCCodeExpression* _tmp34_ = NULL;
					ValaCCodeExpression* _tmp35_;
					ValaCCodeExpression* _tmp36_;
					ValaCCodeExpression* lhs_delegate_target;
					ValaCCodeExpression* rhs_delegate_target_destroy_notify;
					ValaCCodeExpression* _tmp41_ = NULL;
					ValaCCodeExpression* _tmp42_;
					ValaCCodeExpression* _tmp43_;
					ValaCCodeExpression* rhs_delegate_target;
					ValaCCodeAssignment* _tmp44_;
					ValaCCodeExpression* _tmp50_;
					ValaCCodeExpression* _tmp51_;
					ccomma = vala_ccode_comma_expression_new ();
					temp_var = vala_ccode_base_module_get_temp_variable (self, vala_variable_get_variable_type ((ValaVariable*) local), TRUE, (ValaCodeNode*) local, FALSE);
					vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_var);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp33_ = vala_ccode_assignment_new (_tmp32_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp33_);
					_vala_ccode_node_unref0 (_tmp32_);
					lhs_delegate_target_destroy_notify = NULL;
					lhs_delegate_target = (_tmp35_ = vala_ccode_base_module_get_delegate_target_cexpression (self, (ValaExpression*) ma, &_tmp34_), lhs_delegate_target_destroy_notify = (_tmp36_ = _tmp34_, _vala_ccode_node_unref0 (lhs_delegate_target_destroy_notify), _tmp36_), _tmp35_);
					if (vala_local_variable_get_captured (local)) {
						ValaBlock* block;
						char* _tmp37_;
						ValaCCodeExpression* _tmp38_;
						char* _tmp39_;
						ValaCCodeExpression* _tmp40_;
						block = _vala_code_node_ref0 (VALA_BLOCK (vala_symbol_get_parent_symbol ((ValaSymbol*) local)));
						lhs_delegate_target = (_tmp40_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (_tmp38_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp37_ = g_strdup_printf ("_data%d_", vala_ccode_base_module_get_block_id (self, block))), _tmp39_ = vala_ccode_base_module_get_delegate_target_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), _vala_ccode_node_unref0 (lhs_delegate_target), _tmp40_);
						_g_free0 (_tmp39_);
						_vala_ccode_node_unref0 (_tmp38_);
						_g_free0 (_tmp37_);
						_vala_code_node_unref0 (block);
					}
					rhs_delegate_target_destroy_notify = NULL;
					rhs_delegate_target = (_tmp42_ = vala_ccode_base_module_get_delegate_target_cexpression (self, vala_variable_get_initializer ((ValaVariable*) local), &_tmp41_), rhs_delegate_target_destroy_notify = (_tmp43_ = _tmp41_, _vala_ccode_node_unref0 (rhs_delegate_target_destroy_notify), _tmp43_), _tmp42_);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp44_ = vala_ccode_assignment_new (lhs_delegate_target, rhs_delegate_target, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp44_);
					if (vala_data_type_get_value_owned ((ValaDataType*) deleg_type)) {
						ValaCCodeAssignment* _tmp49_;
						if (vala_local_variable_get_captured (local)) {
							ValaBlock* block;
							char* _tmp45_;
							ValaCCodeExpression* _tmp46_;
							char* _tmp47_;
							ValaCCodeExpression* _tmp48_;
							block = _vala_code_node_ref0 (VALA_BLOCK (vala_symbol_get_parent_symbol ((ValaSymbol*) local)));
							lhs_delegate_target = (_tmp48_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (_tmp46_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp45_ = g_strdup_printf ("_data%d_", vala_ccode_base_module_get_block_id (self, block))), _tmp47_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), _vala_ccode_node_unref0 (lhs_delegate_target), _tmp48_);
							_g_free0 (_tmp47_);
							_vala_ccode_node_unref0 (_tmp46_);
							_g_free0 (_tmp45_);
							_vala_code_node_unref0 (block);
						}
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp49_ = vala_ccode_assignment_new (lhs_delegate_target_destroy_notify, rhs_delegate_target_destroy_notify, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
						_vala_ccode_node_unref0 (_tmp49_);
					}
					vala_ccode_comma_expression_append_expression (ccomma, _tmp50_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)));
					_vala_ccode_node_unref0 (_tmp50_);
					rhs = (_tmp51_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (rhs), _tmp51_);
					_vala_ccode_node_unref0 (rhs_delegate_target);
					_vala_ccode_node_unref0 (rhs_delegate_target_destroy_notify);
					_vala_ccode_node_unref0 (lhs_delegate_target);
					_vala_ccode_node_unref0 (lhs_delegate_target_destroy_notify);
					_vala_code_node_unref0 (temp_var);
					_vala_ccode_node_unref0 (ccomma);
				}
				_vala_code_node_unref0 (d);
				_vala_code_node_unref0 (deleg_type);
			}
		}
		_vala_code_node_unref0 (ma);
	} else {
		if (vala_data_type_is_reference_type_or_type_parameter (vala_variable_get_variable_type ((ValaVariable*) local))) {
			ValaCCodeExpression* _tmp52_;
			rhs = (_tmp52_ = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL"), _vala_ccode_node_unref0 (rhs), _tmp52_);
			if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
				ValaArrayType* array_type;
				array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
				if (vala_array_type_get_fixed_length (array_type)) {
					ValaCCodeExpression* _tmp53_;
					rhs = (_tmp53_ = NULL, _vala_ccode_node_unref0 (rhs), _tmp53_);
				} else {
					ValaCCodeCommaExpression* ccomma;
					ValaCCodeExpression* _tmp60_;
					ccomma = vala_ccode_comma_expression_new ();
					{
						gint dim;
						dim = 1;
						{
							gboolean _tmp54_;
							_tmp54_ = TRUE;
							while (TRUE) {
								char* _tmp55_;
								char* _tmp56_;
								ValaCCodeExpression* _tmp57_;
								ValaCCodeConstant* _tmp58_;
								ValaCCodeAssignment* _tmp59_;
								if (!_tmp54_) {
									dim++;
								}
								_tmp54_ = FALSE;
								if (!(dim <= vala_array_type_get_rank (array_type))) {
									break;
								}
								vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp59_ = vala_ccode_assignment_new (_tmp57_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp56_ = vala_ccode_base_module_get_array_length_cname (self, _tmp55_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), dim)), (ValaCCodeExpression*) (_tmp58_ = vala_ccode_constant_new ("0")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
								_vala_ccode_node_unref0 (_tmp59_);
								_vala_ccode_node_unref0 (_tmp58_);
								_vala_ccode_node_unref0 (_tmp57_);
								_g_free0 (_tmp56_);
								_g_free0 (_tmp55_);
							}
						}
					}
					vala_ccode_comma_expression_append_expression (ccomma, rhs);
					rhs = (_tmp60_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (rhs), _tmp60_);
					_vala_ccode_node_unref0 (ccomma);
				}
				_vala_code_node_unref0 (array_type);
			}
		}
	}
	cfrag = vala_ccode_fragment_new ();
	if (self->pre_statement_fragment != NULL) {
		ValaCCodeFragment* _tmp61_;
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) self->pre_statement_fragment);
		self->pre_statement_fragment = (_tmp61_ = NULL, _vala_ccode_node_unref0 (self->pre_statement_fragment), _tmp61_);
	}
	if (vala_local_variable_get_captured (local)) {
		if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
			if (vala_ccode_base_module_has_simple_struct_initializer (self, local)) {
				ValaCCodeExpressionStatement* _tmp62_;
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp62_ = vala_ccode_expression_statement_new (rhs)));
				_vala_ccode_node_unref0 (_tmp62_);
			} else {
				char* _tmp63_;
				ValaCCodeExpression* _tmp64_;
				char* _tmp65_;
				ValaCCodeMemberAccess* _tmp66_;
				ValaCCodeAssignment* _tmp67_;
				ValaCCodeExpressionStatement* _tmp68_;
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp68_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp67_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp66_ = vala_ccode_member_access_new_pointer (_tmp64_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp63_ = g_strdup_printf ("_data%d_", vala_ccode_base_module_get_block_id (self, VALA_BLOCK (vala_symbol_get_parent_symbol ((ValaSymbol*) local))))), _tmp65_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)))), rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp68_);
				_vala_ccode_node_unref0 (_tmp67_);
				_vala_ccode_node_unref0 (_tmp66_);
				_g_free0 (_tmp65_);
				_vala_ccode_node_unref0 (_tmp64_);
				_g_free0 (_tmp63_);
			}
		}
	} else {
		gboolean _tmp69_ = FALSE;
		if (vala_ccode_base_module_get_current_method (self) != NULL) {
			_tmp69_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
		} else {
			_tmp69_ = FALSE;
		}
		if (_tmp69_) {
			char* _tmp70_;
			char* _tmp71_;
			char* _tmp72_;
			char* _tmp73_;
			vala_ccode_struct_add_field (self->closure_struct, _tmp70_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local)), _tmp73_ = g_strconcat (_tmp71_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), _tmp72_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local)), NULL), NULL);
			_g_free0 (_tmp73_);
			_g_free0 (_tmp72_);
			_g_free0 (_tmp71_);
			_g_free0 (_tmp70_);
			if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
				if (vala_ccode_base_module_has_simple_struct_initializer (self, local)) {
					ValaCCodeExpressionStatement* _tmp74_;
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp74_ = vala_ccode_expression_statement_new (rhs)));
					_vala_ccode_node_unref0 (_tmp74_);
				} else {
					ValaCCodeIdentifier* _tmp75_;
					char* _tmp76_;
					ValaCCodeMemberAccess* _tmp77_;
					ValaCCodeAssignment* _tmp78_;
					ValaCCodeExpressionStatement* _tmp79_;
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp79_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp78_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp77_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp75_ = vala_ccode_identifier_new ("data")), _tmp76_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)))), rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
					_vala_ccode_node_unref0 (_tmp79_);
					_vala_ccode_node_unref0 (_tmp78_);
					_vala_ccode_node_unref0 (_tmp77_);
					_g_free0 (_tmp76_);
					_vala_ccode_node_unref0 (_tmp75_);
				}
			}
		} else {
			ValaCCodeStatement* post_stmt;
			char* _tmp82_;
			char* _tmp83_;
			ValaCCodeVariableDeclarator* _tmp84_;
			ValaCCodeVariableDeclarator* cvar;
			char* _tmp85_;
			ValaCCodeDeclaration* _tmp86_;
			ValaCCodeDeclaration* _cdecl_;
			post_stmt = NULL;
			if (vala_ccode_base_module_has_simple_struct_initializer (self, local)) {
				ValaCCodeStatement* _tmp80_;
				ValaCCodeExpression* _tmp81_;
				post_stmt = (_tmp80_ = (ValaCCodeStatement*) vala_ccode_expression_statement_new (rhs), _vala_ccode_node_unref0 (post_stmt), _tmp80_);
				rhs = (_tmp81_ = NULL, _vala_ccode_node_unref0 (rhs), _tmp81_);
			}
			cvar = (_tmp84_ = vala_ccode_variable_declarator_new (_tmp82_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), rhs, _tmp83_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp83_), _g_free0 (_tmp82_), _tmp84_);
			if (rhs != NULL) {
				vala_ccode_node_set_line ((ValaCCodeNode*) cvar, vala_ccode_node_get_line ((ValaCCodeNode*) rhs));
			}
			_cdecl_ = (_tmp86_ = vala_ccode_declaration_new (_tmp85_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp85_), _tmp86_);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) cvar);
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) _cdecl_);
			if (vala_ccode_variable_declarator_get_initializer (cvar) == NULL) {
				ValaCCodeExpression* _tmp87_;
				vala_ccode_variable_declarator_set_initializer (cvar, _tmp87_ = vala_ccode_base_module_default_value_for_type (self, vala_variable_get_variable_type ((ValaVariable*) local), TRUE));
				_vala_ccode_node_unref0 (_tmp87_);
				vala_ccode_variable_declarator_set_init0 (cvar, TRUE);
			}
			if (post_stmt != NULL) {
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) post_stmt);
			}
			_vala_ccode_node_unref0 (_cdecl_);
			_vala_ccode_node_unref0 (cvar);
			_vala_ccode_node_unref0 (post_stmt);
		}
	}
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		_tmp88_ = VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local));
	} else {
		_tmp88_ = FALSE;
	}
	if (_tmp88_) {
		ValaArrayType* array_type;
		array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) local)));
		if (vala_array_type_get_fixed_length (array_type)) {
			ValaCCodeIdentifier* _tmp89_;
			ValaCCodeFunctionCall* _tmp90_;
			ValaCCodeFunctionCall* sizeof_call;
			char* _tmp91_;
			ValaCCodeIdentifier* _tmp92_;
			char* _tmp93_;
			ValaCCodeConstant* _tmp94_;
			ValaCCodeBinaryExpression* _tmp95_;
			ValaCCodeBinaryExpression* size;
			ValaCCodeIdentifier* _tmp96_;
			ValaCCodeFunctionCall* _tmp97_;
			ValaCCodeFunctionCall* ccopy;
			ValaCCodeExpression* _tmp98_;
			ValaCCodeExpressionStatement* _tmp99_;
			vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
			sizeof_call = (_tmp90_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp89_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp89_), _tmp90_);
			vala_ccode_function_call_add_argument (sizeof_call, (ValaCCodeExpression*) (_tmp92_ = vala_ccode_identifier_new (_tmp91_ = vala_data_type_get_cname (vala_array_type_get_element_type (array_type)))));
			_vala_ccode_node_unref0 (_tmp92_);
			_g_free0 (_tmp91_);
			size = (_tmp95_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_MUL, (ValaCCodeExpression*) (_tmp94_ = vala_ccode_constant_new (_tmp93_ = g_strdup_printf ("%d", vala_array_type_get_length (array_type)))), (ValaCCodeExpression*) sizeof_call), _vala_ccode_node_unref0 (_tmp94_), _g_free0 (_tmp93_), _tmp95_);
			ccopy = (_tmp97_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp96_ = vala_ccode_identifier_new ("memcpy"))), _vala_ccode_node_unref0 (_tmp96_), _tmp97_);
			vala_ccode_function_call_add_argument (ccopy, _tmp98_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)));
			_vala_ccode_node_unref0 (_tmp98_);
			vala_ccode_function_call_add_argument (ccopy, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local))));
			vala_ccode_function_call_add_argument (ccopy, (ValaCCodeExpression*) size);
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp99_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccopy)));
			_vala_ccode_node_unref0 (_tmp99_);
			_vala_ccode_node_unref0 (ccopy);
			_vala_ccode_node_unref0 (size);
			_vala_ccode_node_unref0 (sizeof_call);
		}
		_vala_code_node_unref0 (array_type);
	}
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		_tmp100_ = vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local));
	} else {
		_tmp100_ = FALSE;
	}
	if (_tmp100_) {
		vala_ccode_base_module_add_simple_check (self, (ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local), cfrag, FALSE);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) local, (ValaCCodeNode*) cfrag);
	vala_symbol_set_active ((ValaSymbol*) local, TRUE);
	_vala_ccode_node_unref0 (cfrag);
	_vala_ccode_node_unref0 (rhs);
}


static void vala_ccode_base_module_real_visit_initializer_list (ValaCodeVisitor* base, ValaInitializerList* list) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (list != NULL);
	if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_expression_get_target_type ((ValaExpression*) list)))) {
		ValaStruct* st;
		gboolean _tmp0_ = FALSE;
		gboolean _tmp1_ = FALSE;
		st = _vala_code_node_ref0 (VALA_STRUCT (vala_data_type_get_data_type (vala_expression_get_target_type ((ValaExpression*) list))));
		if (VALA_IS_CONSTANT (vala_code_node_get_parent_node ((ValaCodeNode*) list))) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = VALA_IS_FIELD (vala_code_node_get_parent_node ((ValaCodeNode*) list));
		}
		if (_tmp1_) {
			_tmp0_ = TRUE;
		} else {
			_tmp0_ = VALA_IS_INITIALIZER_LIST (vala_code_node_get_parent_node ((ValaCodeNode*) list));
		}
		if (_tmp0_) {
			ValaCCodeInitializerList* clist;
			ValaList* _tmp2_;
			ValaIterator* _tmp3_;
			ValaIterator* field_it;
			clist = vala_ccode_initializer_list_new ();
			field_it = (_tmp3_ = vala_iterable_iterator ((ValaIterable*) (_tmp2_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp2_), _tmp3_);
			{
				ValaList* _tmp4_;
				ValaIterator* _tmp5_;
				ValaIterator* _expr_it;
				_expr_it = (_tmp5_ = vala_iterable_iterator ((ValaIterable*) (_tmp4_ = vala_initializer_list_get_initializers (list))), _vala_collection_object_unref0 (_tmp4_), _tmp5_);
				while (TRUE) {
					ValaExpression* expr;
					ValaField* field;
					ValaCCodeExpression* cexpr;
					char* ctype;
					if (!vala_iterator_next (_expr_it)) {
						break;
					}
					expr = (ValaExpression*) vala_iterator_get (_expr_it);
					field = NULL;
					while (TRUE) {
						ValaField* _tmp6_;
						if (!(field == NULL)) {
							break;
						}
						vala_iterator_next (field_it);
						field = (_tmp6_ = (ValaField*) vala_iterator_get (field_it), _vala_code_node_unref0 (field), _tmp6_);
						if (vala_field_get_binding (field) != MEMBER_BINDING_INSTANCE) {
							ValaField* _tmp7_;
							field = (_tmp7_ = NULL, _vala_code_node_unref0 (field), _tmp7_);
						}
					}
					cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
					ctype = vala_field_get_ctype (field);
					if (ctype != NULL) {
						ValaCCodeExpression* _tmp8_;
						cexpr = (_tmp8_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, ctype), _vala_ccode_node_unref0 (cexpr), _tmp8_);
					}
					vala_ccode_initializer_list_append (clist, cexpr);
					_g_free0 (ctype);
					_vala_ccode_node_unref0 (cexpr);
					_vala_code_node_unref0 (field);
					_vala_code_node_unref0 (expr);
				}
				_vala_collection_object_unref0 (_expr_it);
			}
			vala_code_node_set_ccodenode ((ValaCodeNode*) list, (ValaCCodeNode*) clist);
			_vala_collection_object_unref0 (field_it);
			_vala_ccode_node_unref0 (clist);
		} else {
			ValaLocalVariable* temp_decl;
			char* _tmp9_;
			ValaCCodeExpression* _tmp10_;
			ValaCCodeExpression* instance;
			ValaCCodeCommaExpression* ccomma;
			ValaList* _tmp11_;
			ValaIterator* _tmp12_;
			ValaIterator* field_it;
			temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_target_type ((ValaExpression*) list), FALSE, (ValaCodeNode*) list, TRUE);
			vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
			instance = (_tmp10_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp9_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) temp_decl))), _g_free0 (_tmp9_), _tmp10_);
			ccomma = vala_ccode_comma_expression_new ();
			field_it = (_tmp12_ = vala_iterable_iterator ((ValaIterable*) (_tmp11_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp11_), _tmp12_);
			{
				ValaList* _tmp13_;
				ValaIterator* _tmp14_;
				ValaIterator* _expr_it;
				_expr_it = (_tmp14_ = vala_iterable_iterator ((ValaIterable*) (_tmp13_ = vala_initializer_list_get_initializers (list))), _vala_collection_object_unref0 (_tmp13_), _tmp14_);
				while (TRUE) {
					ValaExpression* expr;
					ValaField* field;
					ValaCCodeExpression* cexpr;
					char* ctype;
					char* _tmp18_;
					ValaCCodeMemberAccess* _tmp19_;
					ValaCCodeMemberAccess* lhs;
					ValaCCodeAssignment* _tmp20_;
					if (!vala_iterator_next (_expr_it)) {
						break;
					}
					expr = (ValaExpression*) vala_iterator_get (_expr_it);
					field = NULL;
					while (TRUE) {
						ValaField* _tmp15_;
						if (!(field == NULL)) {
							break;
						}
						vala_iterator_next (field_it);
						field = (_tmp15_ = (ValaField*) vala_iterator_get (field_it), _vala_code_node_unref0 (field), _tmp15_);
						if (vala_field_get_binding (field) != MEMBER_BINDING_INSTANCE) {
							ValaField* _tmp16_;
							field = (_tmp16_ = NULL, _vala_code_node_unref0 (field), _tmp16_);
						}
					}
					cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
					ctype = vala_field_get_ctype (field);
					if (ctype != NULL) {
						ValaCCodeExpression* _tmp17_;
						cexpr = (_tmp17_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, ctype), _vala_ccode_node_unref0 (cexpr), _tmp17_);
					}
					lhs = (_tmp19_ = vala_ccode_member_access_new (instance, _tmp18_ = vala_field_get_cname (field), FALSE), _g_free0 (_tmp18_), _tmp19_);
					;
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_assignment_new ((ValaCCodeExpression*) lhs, cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp20_);
					_vala_ccode_node_unref0 (lhs);
					_g_free0 (ctype);
					_vala_ccode_node_unref0 (cexpr);
					_vala_code_node_unref0 (field);
					_vala_code_node_unref0 (expr);
				}
				_vala_collection_object_unref0 (_expr_it);
			}
			vala_ccode_comma_expression_append_expression (ccomma, instance);
			vala_code_node_set_ccodenode ((ValaCodeNode*) list, (ValaCCodeNode*) ccomma);
			_vala_collection_object_unref0 (field_it);
			_vala_ccode_node_unref0 (ccomma);
			_vala_ccode_node_unref0 (instance);
			_vala_code_node_unref0 (temp_decl);
		}
		_vala_code_node_unref0 (st);
	} else {
		ValaCCodeInitializerList* clist;
		clist = vala_ccode_initializer_list_new ();
		{
			ValaList* _tmp21_;
			ValaIterator* _tmp22_;
			ValaIterator* _expr_it;
			_expr_it = (_tmp22_ = vala_iterable_iterator ((ValaIterable*) (_tmp21_ = vala_initializer_list_get_initializers (list))), _vala_collection_object_unref0 (_tmp21_), _tmp22_);
			while (TRUE) {
				ValaExpression* expr;
				if (!vala_iterator_next (_expr_it)) {
					break;
				}
				expr = (ValaExpression*) vala_iterator_get (_expr_it);
				vala_ccode_initializer_list_append (clist, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
				_vala_code_node_unref0 (expr);
			}
			_vala_collection_object_unref0 (_expr_it);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) list, (ValaCCodeNode*) clist);
		_vala_ccode_node_unref0 (clist);
	}
}


ValaLocalVariable* vala_ccode_base_module_get_temp_variable (ValaCCodeBaseModule* self, ValaDataType* type, gboolean value_owned, ValaCodeNode* node_reference, gboolean init) {
	ValaLocalVariable* result = NULL;
	ValaDataType* var_type;
	char* _tmp0_;
	ValaLocalVariable* _tmp1_;
	ValaLocalVariable* local;
	gint _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	var_type = vala_data_type_copy (type);
	vala_data_type_set_value_owned (var_type, value_owned);
	local = (_tmp1_ = vala_local_variable_new (var_type, _tmp0_ = g_strdup_printf ("_tmp%d_", vala_ccode_base_module_get_next_temp_var_id (self)), NULL, NULL), _g_free0 (_tmp0_), _tmp1_);
	vala_local_variable_set_no_init (local, !init);
	if (node_reference != NULL) {
		vala_code_node_set_source_reference ((ValaCodeNode*) local, vala_code_node_get_source_reference (node_reference));
	}
	_tmp2_ = vala_ccode_base_module_get_next_temp_var_id (self);
	vala_ccode_base_module_set_next_temp_var_id (self, _tmp2_ + 1);
	_tmp2_;
	result = local;
	_vala_code_node_unref0 (var_type);
	return result;
}


static gboolean vala_ccode_base_module_is_in_generic_type (ValaCCodeBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (vala_ccode_base_module_get_current_symbol (self) != NULL) {
		_tmp1_ = VALA_IS_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (type)));
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		gboolean _tmp2_ = FALSE;
		if (vala_ccode_base_module_get_current_method (self) == NULL) {
			_tmp2_ = TRUE;
		} else {
			_tmp2_ = vala_method_get_binding (vala_ccode_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
		}
		_tmp0_ = _tmp2_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


static ValaCCodeExpression* vala_ccode_base_module_get_type_id_expression (ValaCCodeBaseModule* self, ValaDataType* type, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (VALA_IS_GENERIC_TYPE (type)) {
		char* _tmp0_;
		char* _tmp1_;
		char* var_name;
		gboolean _tmp2_ = FALSE;
		gboolean _tmp3_ = FALSE;
		var_name = (_tmp1_ = g_strdup_printf ("%s_type", _tmp0_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_type_parameter (type)), -1)), _g_free0 (_tmp0_), _tmp1_);
		if (vala_ccode_base_module_is_in_generic_type (self, type)) {
			_tmp3_ = !is_chainup;
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			_tmp2_ = !vala_ccode_base_module_get_in_creation_method (self);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			ValaCCodeExpression* _tmp4_;
			ValaCCodeMemberAccess* _tmp5_;
			ValaCCodeExpression* _tmp6_;
			result = (_tmp6_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_member_access_new_pointer (_tmp4_ = vala_ccode_base_module_get_result_cexpression (self, "self"), "priv")), var_name), _vala_ccode_node_unref0 (_tmp5_), _vala_ccode_node_unref0 (_tmp4_), _tmp6_);
			_g_free0 (var_name);
			return result;
		} else {
			result = (ValaCCodeExpression*) vala_ccode_identifier_new (var_name);
			_g_free0 (var_name);
			return result;
		}
		_g_free0 (var_name);
	} else {
		char* type_id;
		type_id = vala_data_type_get_type_id (type);
		if (type_id == NULL) {
			char* _tmp7_;
			type_id = (_tmp7_ = g_strdup ("G_TYPE_INVALID"), _g_free0 (type_id), _tmp7_);
		} else {
			vala_ccode_base_module_generate_type_declaration (self, type, self->source_declarations);
		}
		result = (ValaCCodeExpression*) vala_ccode_identifier_new (type_id);
		_g_free0 (type_id);
		return result;
	}
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_dup_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (VALA_IS_ERROR_TYPE (type)) {
		result = (ValaCCodeExpression*) vala_ccode_identifier_new ("g_error_copy");
		return result;
	} else {
		if (vala_data_type_get_data_type (type) != NULL) {
			char* dup_function;
			ValaTypeSymbol* _tmp0_;
			ValaClass* cl;
			dup_function = NULL;
			cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
			if (vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type))) {
				char* _tmp1_;
				gboolean _tmp2_ = FALSE;
				dup_function = (_tmp1_ = vala_typesymbol_get_ref_function (vala_data_type_get_data_type (type)), _g_free0 (dup_function), _tmp1_);
				if (VALA_IS_INTERFACE (vala_data_type_get_data_type (type))) {
					_tmp2_ = dup_function == NULL;
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					char* _tmp3_;
					char* _tmp4_;
					vala_report_error (source_reference, _tmp4_ = g_strdup_printf ("missing class prerequisite for interface `%s', add GLib.Object to inte" \
"rface declaration if unsure", _tmp3_ = vala_symbol_get_full_name ((ValaSymbol*) vala_data_type_get_data_type (type))));
					_g_free0 (_tmp4_);
					_g_free0 (_tmp3_);
					result = NULL;
					_vala_code_node_unref0 (cl);
					_g_free0 (dup_function);
					return result;
				}
			} else {
				gboolean _tmp5_ = FALSE;
				if (cl != NULL) {
					_tmp5_ = vala_class_get_is_immutable (cl);
				} else {
					_tmp5_ = FALSE;
				}
				if (_tmp5_) {
					char* _tmp6_;
					dup_function = (_tmp6_ = vala_typesymbol_get_dup_function (vala_data_type_get_data_type (type)), _g_free0 (dup_function), _tmp6_);
					if (dup_function == NULL) {
						char* _tmp7_;
						dup_function = (_tmp7_ = g_strdup (""), _g_free0 (dup_function), _tmp7_);
					}
				} else {
					gboolean _tmp8_ = FALSE;
					if (cl != NULL) {
						_tmp8_ = vala_class_get_is_gboxed (cl);
					} else {
						_tmp8_ = FALSE;
					}
					if (_tmp8_) {
						char* _tmp9_;
						dup_function = (_tmp9_ = vala_ccode_base_module_generate_dup_func_wrapper (self, type), _g_free0 (dup_function), _tmp9_);
						if (dup_function == NULL) {
							char* _tmp10_;
							dup_function = (_tmp10_ = g_strdup (""), _g_free0 (dup_function), _tmp10_);
						}
					} else {
						if (VALA_IS_VALUE_TYPE (type)) {
							char* _tmp11_;
							gboolean _tmp12_ = FALSE;
							dup_function = (_tmp11_ = vala_typesymbol_get_dup_function (vala_data_type_get_data_type (type)), _g_free0 (dup_function), _tmp11_);
							if (dup_function == NULL) {
								_tmp12_ = vala_data_type_get_nullable (type);
							} else {
								_tmp12_ = FALSE;
							}
							if (_tmp12_) {
								char* _tmp13_;
								dup_function = (_tmp13_ = vala_ccode_base_module_generate_struct_dup_wrapper (self, VALA_VALUE_TYPE (type)), _g_free0 (dup_function), _tmp13_);
							} else {
								if (dup_function == NULL) {
									char* _tmp14_;
									dup_function = (_tmp14_ = g_strdup (""), _g_free0 (dup_function), _tmp14_);
								}
							}
						} else {
							char* _tmp15_;
							vala_report_error (source_reference, _tmp15_ = g_strdup_printf ("duplicating %s instance, use unowned variable or explicitly invoke cop" \
"y method", vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_data_type (type))));
							_g_free0 (_tmp15_);
							result = NULL;
							_vala_code_node_unref0 (cl);
							_g_free0 (dup_function);
							return result;
						}
					}
				}
			}
			result = (ValaCCodeExpression*) vala_ccode_identifier_new (dup_function);
			_vala_code_node_unref0 (cl);
			_g_free0 (dup_function);
			return result;
		} else {
			if (vala_data_type_get_type_parameter (type) != NULL) {
				char* _tmp16_;
				char* _tmp17_;
				char* func_name;
				gboolean _tmp18_ = FALSE;
				gboolean _tmp19_ = FALSE;
				func_name = (_tmp17_ = g_strdup_printf ("%s_dup_func", _tmp16_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_type_parameter (type)), -1)), _g_free0 (_tmp16_), _tmp17_);
				if (vala_ccode_base_module_is_in_generic_type (self, type)) {
					_tmp19_ = !is_chainup;
				} else {
					_tmp19_ = FALSE;
				}
				if (_tmp19_) {
					_tmp18_ = !vala_ccode_base_module_get_in_creation_method (self);
				} else {
					_tmp18_ = FALSE;
				}
				if (_tmp18_) {
					ValaCCodeExpression* _tmp20_;
					ValaCCodeMemberAccess* _tmp21_;
					ValaCCodeExpression* _tmp22_;
					result = (_tmp22_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_member_access_new_pointer (_tmp20_ = vala_ccode_base_module_get_result_cexpression (self, "self"), "priv")), func_name), _vala_ccode_node_unref0 (_tmp21_), _vala_ccode_node_unref0 (_tmp20_), _tmp22_);
					_g_free0 (func_name);
					return result;
				} else {
					result = (ValaCCodeExpression*) vala_ccode_identifier_new (func_name);
					_g_free0 (func_name);
					return result;
				}
				_g_free0 (func_name);
			} else {
				if (VALA_IS_POINTER_TYPE (type)) {
					ValaPointerType* pointer_type;
					pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (type));
					result = vala_ccode_base_module_get_dup_func_expression (self, vala_pointer_type_get_base_type (pointer_type), source_reference, FALSE);
					_vala_code_node_unref0 (pointer_type);
					return result;
				} else {
					result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
					return result;
				}
			}
		}
	}
}


ValaCCodeExpression* vala_ccode_base_module_get_dup_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dup_func_expression (self, type, source_reference, is_chainup);
}


static void vala_ccode_base_module_make_comparable_cexpression (ValaCCodeBaseModule* self, ValaDataType** left_type, ValaCCodeExpression** cleft, ValaDataType** right_type, ValaCCodeExpression** cright) {
	ValaTypeSymbol* _tmp0_;
	ValaStruct* left_type_as_struct;
	ValaTypeSymbol* _tmp1_;
	ValaStruct* right_type_as_struct;
	ValaCCodeExpression* valuecast;
	ValaCCodeExpression* _tmp4_;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp9_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (left_type != NULL);
	g_return_if_fail (cleft != NULL);
	g_return_if_fail (right_type != NULL);
	g_return_if_fail (cright != NULL);
	left_type_as_struct = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (*left_type), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	right_type_as_struct = _vala_code_node_ref0 ((_tmp1_ = vala_data_type_get_data_type (*right_type), VALA_IS_STRUCT (_tmp1_) ? ((ValaStruct*) _tmp1_) : NULL));
	valuecast = vala_ccode_base_module_try_cast_value_to_type (self, *cleft, *left_type, *right_type, NULL);
	if (valuecast != NULL) {
		ValaCCodeExpression* _tmp2_;
		ValaDataType* _tmp3_;
		*cleft = (_tmp2_ = _vala_ccode_node_ref0 (valuecast), _vala_ccode_node_unref0 (*cleft), _tmp2_);
		*left_type = (_tmp3_ = _vala_code_node_ref0 (*right_type), _vala_code_node_unref0 (*left_type), _tmp3_);
		vala_ccode_base_module_make_comparable_cexpression (self, left_type, cleft, right_type, cright);
		_vala_ccode_node_unref0 (valuecast);
		_vala_code_node_unref0 (right_type_as_struct);
		_vala_code_node_unref0 (left_type_as_struct);
		return;
	}
	valuecast = (_tmp4_ = vala_ccode_base_module_try_cast_value_to_type (self, *cright, *right_type, *left_type, NULL), _vala_ccode_node_unref0 (valuecast), _tmp4_);
	if (valuecast != NULL) {
		ValaCCodeExpression* _tmp5_;
		ValaDataType* _tmp6_;
		*cright = (_tmp5_ = _vala_ccode_node_ref0 (valuecast), _vala_ccode_node_unref0 (*cright), _tmp5_);
		*right_type = (_tmp6_ = _vala_code_node_ref0 (*left_type), _vala_code_node_unref0 (*right_type), _tmp6_);
		vala_ccode_base_module_make_comparable_cexpression (self, left_type, cleft, right_type, cright);
		_vala_ccode_node_unref0 (valuecast);
		_vala_code_node_unref0 (right_type_as_struct);
		_vala_code_node_unref0 (left_type_as_struct);
		return;
	}
	if (VALA_IS_CLASS (vala_data_type_get_data_type (*left_type))) {
		_tmp9_ = !vala_class_get_is_compact (VALA_CLASS (vala_data_type_get_data_type (*left_type)));
	} else {
		_tmp9_ = FALSE;
	}
	if (_tmp9_) {
		_tmp8_ = VALA_IS_CLASS (vala_data_type_get_data_type (*right_type));
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		_tmp7_ = !vala_class_get_is_compact (VALA_CLASS (vala_data_type_get_data_type (*right_type)));
	} else {
		_tmp7_ = FALSE;
	}
	if (_tmp7_) {
		ValaClass* left_cl;
		ValaClass* right_cl;
		left_cl = _vala_code_node_ref0 (VALA_CLASS (vala_data_type_get_data_type (*left_type)));
		right_cl = _vala_code_node_ref0 (VALA_CLASS (vala_data_type_get_data_type (*right_type)));
		if (left_cl != right_cl) {
			if (vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) left_cl, (ValaTypeSymbol*) right_cl)) {
				ValaCCodeExpression* _tmp10_;
				*cleft = (_tmp10_ = (ValaCCodeExpression*) vala_ccode_base_module_generate_instance_cast (self, *cleft, (ValaTypeSymbol*) right_cl), _vala_ccode_node_unref0 (*cleft), _tmp10_);
			} else {
				if (vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) right_cl, (ValaTypeSymbol*) left_cl)) {
					ValaCCodeExpression* _tmp11_;
					*cright = (_tmp11_ = (ValaCCodeExpression*) vala_ccode_base_module_generate_instance_cast (self, *cright, (ValaTypeSymbol*) left_cl), _vala_ccode_node_unref0 (*cright), _tmp11_);
				}
			}
		}
		_vala_code_node_unref0 (right_cl);
		_vala_code_node_unref0 (left_cl);
	} else {
		gboolean _tmp12_ = FALSE;
		if (left_type_as_struct != NULL) {
			_tmp12_ = right_type_as_struct != NULL;
		} else {
			_tmp12_ = FALSE;
		}
		if (_tmp12_) {
			if (VALA_IS_STRUCT_VALUE_TYPE (*left_type)) {
				if (!vala_data_type_get_nullable (*left_type)) {
					ValaCCodeExpression* _tmp13_;
					*cleft = (_tmp13_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, *cleft), _vala_ccode_node_unref0 (*cleft), _tmp13_);
				}
				if (!vala_data_type_get_nullable (*right_type)) {
					ValaCCodeExpression* _tmp14_;
					*cright = (_tmp14_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, *cright), _vala_ccode_node_unref0 (*cright), _tmp14_);
				}
			} else {
				gboolean _tmp15_ = FALSE;
				if (vala_data_type_get_nullable (*left_type)) {
					_tmp15_ = vala_data_type_get_nullable (*right_type);
				} else {
					_tmp15_ = FALSE;
				}
				if (_tmp15_) {
				} else {
					if (vala_data_type_get_nullable (*left_type)) {
						ValaCCodeExpression* _tmp16_;
						*cleft = (_tmp16_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, *cleft), _vala_ccode_node_unref0 (*cleft), _tmp16_);
					} else {
						if (vala_data_type_get_nullable (*right_type)) {
							ValaCCodeExpression* _tmp17_;
							*cright = (_tmp17_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, *cright), _vala_ccode_node_unref0 (*cright), _tmp17_);
						}
					}
				}
			}
		}
	}
	_vala_ccode_node_unref0 (valuecast);
	_vala_code_node_unref0 (right_type_as_struct);
	_vala_code_node_unref0 (left_type_as_struct);
}


static char* vala_ccode_base_module_generate_struct_equal_function (ValaCCodeBaseModule* self, ValaStruct* st) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* equal_func;
	ValaCCodeFunction* function;
	char* _tmp2_;
	char* _tmp3_;
	char* _tmp4_;
	ValaCCodeFormalParameter* _tmp5_;
	char* _tmp6_;
	char* _tmp7_;
	char* _tmp8_;
	ValaCCodeFormalParameter* _tmp9_;
	ValaCCodeBlock* cblock;
	ValaList* _tmp41_;
	gboolean _tmp42_;
	ValaCCodeFunction* _tmp53_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (st != NULL, NULL);
	equal_func = (_tmp1_ = g_strdup_printf ("_%sequal", _tmp0_ = vala_symbol_get_lower_case_cprefix ((ValaSymbol*) st)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, equal_func)) {
		result = equal_func;
		return result;
	}
	function = vala_ccode_function_new (equal_func, "gboolean");
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp5_ = vala_ccode_formal_parameter_new ("s1", _tmp4_ = g_strconcat (_tmp3_ = g_strconcat ("const ", _tmp2_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), NULL), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp5_);
	_g_free0 (_tmp4_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	vala_ccode_function_add_parameter (function, _tmp9_ = vala_ccode_formal_parameter_new ("s2", _tmp8_ = g_strconcat (_tmp7_ = g_strconcat ("const ", _tmp6_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), NULL), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp9_);
	_g_free0 (_tmp8_);
	_g_free0 (_tmp7_);
	_g_free0 (_tmp6_);
	cblock = vala_ccode_block_new ();
	{
		ValaCCodeBlock* block;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeReturnStatement* _tmp11_;
		ValaCCodeIdentifier* _tmp12_;
		ValaCCodeIdentifier* _tmp13_;
		ValaCCodeBinaryExpression* _tmp14_;
		ValaCCodeBinaryExpression* cexp;
		ValaCCodeIfStatement* cif;
		block = vala_ccode_block_new ();
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp11_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("TRUE")))));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (_tmp10_);
		cexp = (_tmp14_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new ("s1")), (ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new ("s2"))), _vala_ccode_node_unref0 (_tmp13_), _vala_ccode_node_unref0 (_tmp12_), _tmp14_);
		cif = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		_vala_ccode_node_unref0 (cif);
		_vala_ccode_node_unref0 (cexp);
		_vala_ccode_node_unref0 (block);
	}
	{
		ValaCCodeBlock* block;
		ValaCCodeConstant* _tmp15_;
		ValaCCodeReturnStatement* _tmp16_;
		ValaCCodeIdentifier* _tmp17_;
		ValaCCodeConstant* _tmp18_;
		ValaCCodeBinaryExpression* _tmp19_;
		ValaCCodeBinaryExpression* cexp;
		ValaCCodeIfStatement* cif;
		ValaCCodeIdentifier* _tmp20_;
		ValaCCodeConstant* _tmp21_;
		ValaCCodeBinaryExpression* _tmp22_;
		ValaCCodeIfStatement* _tmp23_;
		block = vala_ccode_block_new ();
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp16_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp15_ = vala_ccode_constant_new ("FALSE")))));
		_vala_ccode_node_unref0 (_tmp16_);
		_vala_ccode_node_unref0 (_tmp15_);
		cexp = (_tmp19_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_identifier_new ("s1")), (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp18_), _vala_ccode_node_unref0 (_tmp17_), _tmp19_);
		cif = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		cexp = (_tmp22_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_identifier_new ("s2")), (ValaCCodeExpression*) (_tmp21_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (cexp), _tmp22_);
		_vala_ccode_node_unref0 (_tmp21_);
		_vala_ccode_node_unref0 (_tmp20_);
		cif = (_tmp23_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL), _vala_ccode_node_unref0 (cif), _tmp23_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		_vala_ccode_node_unref0 (cif);
		_vala_ccode_node_unref0 (cexp);
		_vala_ccode_node_unref0 (block);
	}
	{
		ValaList* _tmp24_;
		ValaIterator* _tmp25_;
		ValaIterator* _f_it;
		_f_it = (_tmp25_ = vala_iterable_iterator ((ValaIterable*) (_tmp24_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp24_), _tmp25_);
		while (TRUE) {
			ValaField* f;
			ValaCCodeExpression* cexp;
			ValaCCodeIdentifier* _tmp26_;
			ValaCCodeExpression* _tmp27_;
			ValaCCodeExpression* s1;
			ValaCCodeIdentifier* _tmp28_;
			ValaCCodeExpression* _tmp29_;
			ValaCCodeExpression* s2;
			ValaDataType* variable_type;
			gboolean _tmp30_ = FALSE;
			ValaCCodeBlock* block;
			ValaCCodeConstant* _tmp39_;
			ValaCCodeReturnStatement* _tmp40_;
			ValaCCodeIfStatement* cif;
			if (!vala_iterator_next (_f_it)) {
				break;
			}
			f = (ValaField*) vala_iterator_get (_f_it);
			if (vala_field_get_binding (f) != MEMBER_BINDING_INSTANCE) {
				_vala_code_node_unref0 (f);
				continue;
			}
			cexp = NULL;
			s1 = (_tmp27_ = VALA_CCODE_EXPRESSION (vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp26_ = vala_ccode_identifier_new ("s1")), vala_symbol_get_name ((ValaSymbol*) f))), _vala_ccode_node_unref0 (_tmp26_), _tmp27_);
			s2 = (_tmp29_ = VALA_CCODE_EXPRESSION (vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp28_ = vala_ccode_identifier_new ("s2")), vala_symbol_get_name ((ValaSymbol*) f))), _vala_ccode_node_unref0 (_tmp28_), _tmp29_);
			variable_type = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) f));
			vala_ccode_base_module_make_comparable_cexpression (self, &variable_type, &s1, &variable_type, &s2);
			if (!VALA_IS_NULL_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
				_tmp30_ = vala_data_type_compatible (vala_variable_get_variable_type ((ValaVariable*) f), self->string_type);
			} else {
				_tmp30_ = FALSE;
			}
			if (_tmp30_) {
				ValaCCodeIdentifier* _tmp31_;
				ValaCCodeFunctionCall* _tmp32_;
				ValaCCodeFunctionCall* ccall;
				ValaCCodeExpression* _tmp33_;
				self->requires_strcmp0 = TRUE;
				ccall = (_tmp32_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp31_ = vala_ccode_identifier_new ("_vala_strcmp0"))), _vala_ccode_node_unref0 (_tmp31_), _tmp32_);
				vala_ccode_function_call_add_argument (ccall, s1);
				vala_ccode_function_call_add_argument (ccall, s2);
				cexp = (_tmp33_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cexp), _tmp33_);
				_vala_ccode_node_unref0 (ccall);
			} else {
				if (VALA_IS_STRUCT_VALUE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
					ValaTypeSymbol* _tmp34_;
					char* equalfunc;
					ValaCCodeIdentifier* _tmp35_;
					ValaCCodeFunctionCall* _tmp36_;
					ValaCCodeFunctionCall* ccall;
					ValaCCodeExpression* _tmp37_;
					equalfunc = vala_ccode_base_module_generate_struct_equal_function (self, (_tmp34_ = vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) f)), VALA_IS_STRUCT (_tmp34_) ? ((ValaStruct*) _tmp34_) : NULL));
					ccall = (_tmp36_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp35_ = vala_ccode_identifier_new (equalfunc))), _vala_ccode_node_unref0 (_tmp35_), _tmp36_);
					vala_ccode_function_call_add_argument (ccall, s1);
					vala_ccode_function_call_add_argument (ccall, s2);
					cexp = (_tmp37_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_LOGICAL_NEGATION, (ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cexp), _tmp37_);
					_vala_ccode_node_unref0 (ccall);
					_g_free0 (equalfunc);
				} else {
					ValaCCodeExpression* _tmp38_;
					cexp = (_tmp38_ = (ValaCCodeExpression*) vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, s1, s2), _vala_ccode_node_unref0 (cexp), _tmp38_);
				}
			}
			block = vala_ccode_block_new ();
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp40_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp39_ = vala_ccode_constant_new ("FALSE")))));
			_vala_ccode_node_unref0 (_tmp40_);
			_vala_ccode_node_unref0 (_tmp39_);
			cif = vala_ccode_if_statement_new (cexp, (ValaCCodeStatement*) block, NULL);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
			_vala_ccode_node_unref0 (cif);
			_vala_ccode_node_unref0 (block);
			_vala_code_node_unref0 (variable_type);
			_vala_ccode_node_unref0 (s2);
			_vala_ccode_node_unref0 (s1);
			_vala_ccode_node_unref0 (cexp);
			_vala_code_node_unref0 (f);
		}
		_vala_collection_object_unref0 (_f_it);
	}
	if ((_tmp42_ = vala_collection_get_size ((ValaCollection*) (_tmp41_ = vala_struct_get_fields (st))) == 0, _vala_collection_object_unref0 (_tmp41_), _tmp42_)) {
		if (vala_struct_is_simple_type (st)) {
			ValaCCodeIdentifier* _tmp43_;
			ValaCCodeUnaryExpression* _tmp44_;
			ValaCCodeIdentifier* _tmp45_;
			ValaCCodeUnaryExpression* _tmp46_;
			ValaCCodeBinaryExpression* _tmp47_;
			ValaCCodeBinaryExpression* cexp;
			ValaCCodeReturnStatement* _tmp48_;
			cexp = (_tmp47_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp44_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp43_ = vala_ccode_identifier_new ("s1")))), (ValaCCodeExpression*) (_tmp46_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp45_ = vala_ccode_identifier_new ("s2"))))), _vala_ccode_node_unref0 (_tmp46_), _vala_ccode_node_unref0 (_tmp45_), _vala_ccode_node_unref0 (_tmp44_), _vala_ccode_node_unref0 (_tmp43_), _tmp47_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp48_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) cexp)));
			_vala_ccode_node_unref0 (_tmp48_);
			_vala_ccode_node_unref0 (cexp);
		} else {
			ValaCCodeConstant* _tmp49_;
			ValaCCodeReturnStatement* _tmp50_;
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp50_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp49_ = vala_ccode_constant_new ("FALSE")))));
			_vala_ccode_node_unref0 (_tmp50_);
			_vala_ccode_node_unref0 (_tmp49_);
		}
	} else {
		ValaCCodeConstant* _tmp51_;
		ValaCCodeReturnStatement* _tmp52_;
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp52_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp51_ = vala_ccode_constant_new ("TRUE")))));
		_vala_ccode_node_unref0 (_tmp52_);
		_vala_ccode_node_unref0 (_tmp51_);
	}
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp53_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp53_);
	vala_ccode_function_set_block (function, cblock);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = equal_func;
	_vala_ccode_node_unref0 (cblock);
	_vala_ccode_node_unref0 (function);
	return result;
}


static char* vala_ccode_base_module_generate_numeric_equal_function (ValaCCodeBaseModule* self, ValaStruct* st) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* equal_func;
	ValaCCodeFunction* function;
	char* _tmp2_;
	char* _tmp3_;
	char* _tmp4_;
	ValaCCodeFormalParameter* _tmp5_;
	char* _tmp6_;
	char* _tmp7_;
	char* _tmp8_;
	ValaCCodeFormalParameter* _tmp9_;
	ValaCCodeBlock* cblock;
	ValaCCodeFunction* _tmp30_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (st != NULL, NULL);
	equal_func = (_tmp1_ = g_strdup_printf ("_%sequal", _tmp0_ = vala_symbol_get_lower_case_cprefix ((ValaSymbol*) st)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, equal_func)) {
		result = equal_func;
		return result;
	}
	function = vala_ccode_function_new (equal_func, "gboolean");
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp5_ = vala_ccode_formal_parameter_new ("s1", _tmp4_ = g_strconcat (_tmp3_ = g_strconcat ("const ", _tmp2_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), NULL), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp5_);
	_g_free0 (_tmp4_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	vala_ccode_function_add_parameter (function, _tmp9_ = vala_ccode_formal_parameter_new ("s2", _tmp8_ = g_strconcat (_tmp7_ = g_strconcat ("const ", _tmp6_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), NULL), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp9_);
	_g_free0 (_tmp8_);
	_g_free0 (_tmp7_);
	_g_free0 (_tmp6_);
	cblock = vala_ccode_block_new ();
	{
		ValaCCodeBlock* block;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeReturnStatement* _tmp11_;
		ValaCCodeIdentifier* _tmp12_;
		ValaCCodeIdentifier* _tmp13_;
		ValaCCodeBinaryExpression* _tmp14_;
		ValaCCodeBinaryExpression* cexp;
		ValaCCodeIfStatement* cif;
		block = vala_ccode_block_new ();
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp11_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("TRUE")))));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (_tmp10_);
		cexp = (_tmp14_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new ("s1")), (ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new ("s2"))), _vala_ccode_node_unref0 (_tmp13_), _vala_ccode_node_unref0 (_tmp12_), _tmp14_);
		cif = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		_vala_ccode_node_unref0 (cif);
		_vala_ccode_node_unref0 (cexp);
		_vala_ccode_node_unref0 (block);
	}
	{
		ValaCCodeBlock* block;
		ValaCCodeConstant* _tmp15_;
		ValaCCodeReturnStatement* _tmp16_;
		ValaCCodeIdentifier* _tmp17_;
		ValaCCodeConstant* _tmp18_;
		ValaCCodeBinaryExpression* _tmp19_;
		ValaCCodeBinaryExpression* cexp;
		ValaCCodeIfStatement* cif;
		ValaCCodeIdentifier* _tmp20_;
		ValaCCodeConstant* _tmp21_;
		ValaCCodeBinaryExpression* _tmp22_;
		ValaCCodeIfStatement* _tmp23_;
		block = vala_ccode_block_new ();
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp16_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp15_ = vala_ccode_constant_new ("FALSE")))));
		_vala_ccode_node_unref0 (_tmp16_);
		_vala_ccode_node_unref0 (_tmp15_);
		cexp = (_tmp19_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_identifier_new ("s1")), (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp18_), _vala_ccode_node_unref0 (_tmp17_), _tmp19_);
		cif = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		cexp = (_tmp22_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_identifier_new ("s2")), (ValaCCodeExpression*) (_tmp21_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (cexp), _tmp22_);
		_vala_ccode_node_unref0 (_tmp21_);
		_vala_ccode_node_unref0 (_tmp20_);
		cif = (_tmp23_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) cexp, (ValaCCodeStatement*) block, NULL), _vala_ccode_node_unref0 (cif), _tmp23_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cif);
		_vala_ccode_node_unref0 (cif);
		_vala_ccode_node_unref0 (cexp);
		_vala_ccode_node_unref0 (block);
	}
	{
		ValaCCodeIdentifier* _tmp24_;
		ValaCCodeUnaryExpression* _tmp25_;
		ValaCCodeIdentifier* _tmp26_;
		ValaCCodeUnaryExpression* _tmp27_;
		ValaCCodeBinaryExpression* _tmp28_;
		ValaCCodeBinaryExpression* cexp;
		ValaCCodeReturnStatement* _tmp29_;
		cexp = (_tmp28_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp25_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp24_ = vala_ccode_identifier_new ("s1")))), (ValaCCodeExpression*) (_tmp27_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp26_ = vala_ccode_identifier_new ("s2"))))), _vala_ccode_node_unref0 (_tmp27_), _vala_ccode_node_unref0 (_tmp26_), _vala_ccode_node_unref0 (_tmp25_), _vala_ccode_node_unref0 (_tmp24_), _tmp28_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp29_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) cexp)));
		_vala_ccode_node_unref0 (_tmp29_);
		_vala_ccode_node_unref0 (cexp);
	}
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp30_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp30_);
	vala_ccode_function_set_block (function, cblock);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = equal_func;
	_vala_ccode_node_unref0 (cblock);
	_vala_ccode_node_unref0 (function);
	return result;
}


static char* vala_ccode_base_module_generate_struct_dup_wrapper (ValaCCodeBaseModule* self, ValaValueType* value_type) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* dup_func;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* function;
	char* _tmp4_;
	ValaCCodeFormalParameter* _tmp5_;
	ValaCCodeBlock* block;
	ValaCCodeFunction* _tmp41_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (value_type != NULL, NULL);
	dup_func = (_tmp1_ = g_strdup_printf ("_%sdup", _tmp0_ = vala_symbol_get_lower_case_cprefix ((ValaSymbol*) vala_value_type_get_type_symbol (value_type))), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, dup_func)) {
		result = dup_func;
		return result;
	}
	function = (_tmp3_ = vala_ccode_function_new (dup_func, _tmp2_ = vala_data_type_get_cname ((ValaDataType*) value_type)), _g_free0 (_tmp2_), _tmp3_);
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp5_ = vala_ccode_formal_parameter_new ("self", _tmp4_ = vala_data_type_get_cname ((ValaDataType*) value_type)));
	_vala_ccode_node_unref0 (_tmp5_);
	_g_free0 (_tmp4_);
	block = vala_ccode_block_new ();
	if (vala_value_type_get_type_symbol (value_type) == VALA_TYPESYMBOL (self->gvalue_type)) {
		ValaCCodeIdentifier* _tmp6_;
		ValaCCodeFunctionCall* _tmp7_;
		ValaCCodeFunctionCall* dup_call;
		ValaCCodeIdentifier* _tmp8_;
		ValaCCodeIdentifier* _tmp9_;
		ValaCCodeReturnStatement* _tmp10_;
		dup_call = (_tmp7_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("g_boxed_copy"))), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
		vala_ccode_function_call_add_argument (dup_call, (ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("G_TYPE_VALUE")));
		_vala_ccode_node_unref0 (_tmp8_);
		vala_ccode_function_call_add_argument (dup_call, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new ("self")));
		_vala_ccode_node_unref0 (_tmp9_);
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp10_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) dup_call)));
		_vala_ccode_node_unref0 (_tmp10_);
		_vala_ccode_node_unref0 (dup_call);
	} else {
		char* _tmp11_;
		ValaCCodeDeclaration* _tmp12_;
		ValaCCodeDeclaration* _cdecl_;
		ValaCCodeVariableDeclarator* _tmp13_;
		ValaCCodeIdentifier* _tmp14_;
		ValaCCodeFunctionCall* _tmp15_;
		ValaCCodeFunctionCall* creation_call;
		char* _tmp16_;
		ValaCCodeConstant* _tmp17_;
		ValaCCodeConstant* _tmp18_;
		ValaCCodeIdentifier* _tmp19_;
		ValaCCodeAssignment* _tmp20_;
		ValaCCodeExpressionStatement* _tmp21_;
		ValaTypeSymbol* _tmp22_;
		ValaStruct* st;
		gboolean _tmp23_ = FALSE;
		ValaCCodeIdentifier* _tmp39_;
		ValaCCodeReturnStatement* _tmp40_;
		_cdecl_ = (_tmp12_ = vala_ccode_declaration_new (_tmp11_ = vala_data_type_get_cname ((ValaDataType*) value_type)), _g_free0 (_tmp11_), _tmp12_);
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp13_ = vala_ccode_variable_declarator_new ("dup", NULL, NULL)));
		_vala_ccode_node_unref0 (_tmp13_);
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) _cdecl_);
		creation_call = (_tmp15_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("g_new0"))), _vala_ccode_node_unref0 (_tmp14_), _tmp15_);
		vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_constant_new (_tmp16_ = vala_typesymbol_get_cname (vala_data_type_get_data_type ((ValaDataType*) value_type), FALSE))));
		_vala_ccode_node_unref0 (_tmp17_);
		_g_free0 (_tmp16_);
		vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("1")));
		_vala_ccode_node_unref0 (_tmp18_);
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp21_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp20_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new ("dup")), (ValaCCodeExpression*) creation_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
		_vala_ccode_node_unref0 (_tmp21_);
		_vala_ccode_node_unref0 (_tmp20_);
		_vala_ccode_node_unref0 (_tmp19_);
		st = _vala_code_node_ref0 ((_tmp22_ = vala_data_type_get_data_type ((ValaDataType*) value_type), VALA_IS_STRUCT (_tmp22_) ? ((ValaStruct*) _tmp22_) : NULL));
		if (st != NULL) {
			_tmp23_ = vala_struct_is_disposable (st);
		} else {
			_tmp23_ = FALSE;
		}
		if (_tmp23_) {
			char* _tmp24_;
			ValaCCodeIdentifier* _tmp25_;
			ValaCCodeFunctionCall* _tmp26_;
			ValaCCodeFunctionCall* copy_call;
			ValaCCodeIdentifier* _tmp27_;
			ValaCCodeIdentifier* _tmp28_;
			ValaCCodeExpressionStatement* _tmp29_;
			if (!vala_struct_get_has_copy_function (st)) {
				vala_ccode_base_module_generate_struct_copy_function (self, st);
			}
			copy_call = (_tmp26_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new (_tmp24_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st)))), _vala_ccode_node_unref0 (_tmp25_), _g_free0 (_tmp24_), _tmp26_);
			vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_identifier_new ("self")));
			_vala_ccode_node_unref0 (_tmp27_);
			vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp28_ = vala_ccode_identifier_new ("dup")));
			_vala_ccode_node_unref0 (_tmp28_);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp29_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) copy_call)));
			_vala_ccode_node_unref0 (_tmp29_);
			_vala_ccode_node_unref0 (copy_call);
		} else {
			ValaCCodeIdentifier* _tmp30_;
			ValaCCodeFunctionCall* _tmp31_;
			ValaCCodeFunctionCall* sizeof_call;
			char* _tmp32_;
			ValaCCodeConstant* _tmp33_;
			ValaCCodeIdentifier* _tmp34_;
			ValaCCodeFunctionCall* _tmp35_;
			ValaCCodeFunctionCall* copy_call;
			ValaCCodeIdentifier* _tmp36_;
			ValaCCodeIdentifier* _tmp37_;
			ValaCCodeExpressionStatement* _tmp38_;
			vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
			sizeof_call = (_tmp31_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp30_), _tmp31_);
			vala_ccode_function_call_add_argument (sizeof_call, (ValaCCodeExpression*) (_tmp33_ = vala_ccode_constant_new (_tmp32_ = vala_typesymbol_get_cname (vala_data_type_get_data_type ((ValaDataType*) value_type), FALSE))));
			_vala_ccode_node_unref0 (_tmp33_);
			_g_free0 (_tmp32_);
			copy_call = (_tmp35_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp34_ = vala_ccode_identifier_new ("memcpy"))), _vala_ccode_node_unref0 (_tmp34_), _tmp35_);
			vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp36_ = vala_ccode_identifier_new ("dup")));
			_vala_ccode_node_unref0 (_tmp36_);
			vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp37_ = vala_ccode_identifier_new ("self")));
			_vala_ccode_node_unref0 (_tmp37_);
			vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) sizeof_call);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp38_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) copy_call)));
			_vala_ccode_node_unref0 (_tmp38_);
			_vala_ccode_node_unref0 (copy_call);
			_vala_ccode_node_unref0 (sizeof_call);
		}
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp40_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp39_ = vala_ccode_identifier_new ("dup")))));
		_vala_ccode_node_unref0 (_tmp40_);
		_vala_ccode_node_unref0 (_tmp39_);
		_vala_code_node_unref0 (st);
		_vala_ccode_node_unref0 (creation_call);
		_vala_ccode_node_unref0 (_cdecl_);
	}
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp41_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp41_);
	vala_ccode_function_set_block (function, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = dup_func;
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (function);
	return result;
}


char* vala_ccode_base_module_generate_dup_func_wrapper (ValaCCodeBaseModule* self, ValaDataType* type) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* destroy_func;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* function;
	char* _tmp4_;
	ValaCCodeFormalParameter* _tmp5_;
	ValaCCodeBlock* block;
	ValaTypeSymbol* _tmp6_;
	ValaClass* cl;
	ValaCCodeIdentifier* _tmp7_;
	ValaCCodeFunctionCall* _tmp8_;
	ValaCCodeFunctionCall* free_call;
	char* _tmp9_;
	ValaCCodeIdentifier* _tmp10_;
	ValaCCodeIdentifier* _tmp11_;
	ValaCCodeReturnStatement* _tmp12_;
	ValaCCodeFunction* _tmp13_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	destroy_func = (_tmp1_ = g_strdup_printf ("_vala_%s_copy", _tmp0_ = vala_typesymbol_get_cname (vala_data_type_get_data_type (type), FALSE)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, destroy_func)) {
		result = destroy_func;
		return result;
	}
	function = (_tmp3_ = vala_ccode_function_new (destroy_func, _tmp2_ = vala_data_type_get_cname (type)), _g_free0 (_tmp2_), _tmp3_);
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp5_ = vala_ccode_formal_parameter_new ("self", _tmp4_ = vala_data_type_get_cname (type)));
	_vala_ccode_node_unref0 (_tmp5_);
	_g_free0 (_tmp4_);
	block = vala_ccode_block_new ();
	cl = _vala_code_node_ref0 ((_tmp6_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp6_) ? ((ValaClass*) _tmp6_) : NULL));
	g_assert ((cl != NULL) && vala_class_get_is_gboxed (cl));
	free_call = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("g_boxed_copy"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
	vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new (_tmp9_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) cl))));
	_vala_ccode_node_unref0 (_tmp10_);
	_g_free0 (_tmp9_);
	vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("self")));
	_vala_ccode_node_unref0 (_tmp11_);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp12_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) free_call)));
	_vala_ccode_node_unref0 (_tmp12_);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp13_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp13_);
	vala_ccode_function_set_block (function, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = destroy_func;
	_vala_ccode_node_unref0 (free_call);
	_vala_code_node_unref0 (cl);
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (function);
	return result;
}


char* vala_ccode_base_module_generate_free_func_wrapper (ValaCCodeBaseModule* self, ValaDataType* type) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* destroy_func;
	ValaCCodeFunction* function;
	char* _tmp2_;
	ValaCCodeFormalParameter* _tmp3_;
	ValaCCodeBlock* block;
	ValaTypeSymbol* _tmp4_;
	ValaClass* cl;
	gboolean _tmp5_ = FALSE;
	ValaCCodeFunction* _tmp29_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	destroy_func = (_tmp1_ = g_strdup_printf ("_vala_%s_free", _tmp0_ = vala_typesymbol_get_cname (vala_data_type_get_data_type (type), FALSE)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, destroy_func)) {
		result = destroy_func;
		return result;
	}
	function = vala_ccode_function_new (destroy_func, "void");
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp3_ = vala_ccode_formal_parameter_new ("self", _tmp2_ = vala_data_type_get_cname (type)));
	_vala_ccode_node_unref0 (_tmp3_);
	_g_free0 (_tmp2_);
	block = vala_ccode_block_new ();
	cl = _vala_code_node_ref0 ((_tmp4_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp4_) ? ((ValaClass*) _tmp4_) : NULL));
	if (cl != NULL) {
		_tmp5_ = vala_class_get_is_gboxed (cl);
	} else {
		_tmp5_ = FALSE;
	}
	if (_tmp5_) {
		ValaCCodeIdentifier* _tmp6_;
		ValaCCodeFunctionCall* _tmp7_;
		ValaCCodeFunctionCall* free_call;
		char* _tmp8_;
		ValaCCodeIdentifier* _tmp9_;
		ValaCCodeIdentifier* _tmp10_;
		ValaCCodeExpressionStatement* _tmp11_;
		free_call = (_tmp7_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("g_boxed_free"))), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
		vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new (_tmp8_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) cl))));
		_vala_ccode_node_unref0 (_tmp9_);
		_g_free0 (_tmp8_);
		vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new ("self")));
		_vala_ccode_node_unref0 (_tmp10_);
		vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp11_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) free_call)));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (free_call);
	} else {
		if (cl != NULL) {
			char* _tmp12_;
			ValaCCodeIdentifier* _tmp13_;
			ValaCCodeFunctionCall* _tmp14_;
			ValaCCodeFunctionCall* free_call;
			ValaCCodeIdentifier* _tmp15_;
			ValaCCodeUnaryExpression* _tmp16_;
			ValaCCodeExpressionStatement* _tmp17_;
			g_assert (vala_class_get_free_function_address_of (cl));
			free_call = (_tmp14_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new (_tmp12_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type))))), _vala_ccode_node_unref0 (_tmp13_), _g_free0 (_tmp12_), _tmp14_);
			vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_identifier_new ("self")))));
			_vala_ccode_node_unref0 (_tmp16_);
			_vala_ccode_node_unref0 (_tmp15_);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp17_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) free_call)));
			_vala_ccode_node_unref0 (_tmp17_);
			_vala_ccode_node_unref0 (free_call);
		} else {
			ValaTypeSymbol* _tmp18_;
			ValaStruct* st;
			gboolean _tmp19_ = FALSE;
			ValaCCodeIdentifier* _tmp25_;
			ValaCCodeFunctionCall* _tmp26_;
			ValaCCodeFunctionCall* free_call;
			ValaCCodeIdentifier* _tmp27_;
			ValaCCodeExpressionStatement* _tmp28_;
			st = _vala_code_node_ref0 ((_tmp18_ = vala_data_type_get_data_type (type), VALA_IS_STRUCT (_tmp18_) ? ((ValaStruct*) _tmp18_) : NULL));
			if (st != NULL) {
				_tmp19_ = vala_struct_is_disposable (st);
			} else {
				_tmp19_ = FALSE;
			}
			if (_tmp19_) {
				char* _tmp20_;
				ValaCCodeIdentifier* _tmp21_;
				ValaCCodeFunctionCall* _tmp22_;
				ValaCCodeFunctionCall* destroy_call;
				ValaCCodeIdentifier* _tmp23_;
				ValaCCodeExpressionStatement* _tmp24_;
				if (!vala_struct_get_has_destroy_function (st)) {
					vala_ccode_base_module_generate_struct_destroy_function (self, st);
				}
				destroy_call = (_tmp22_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new (_tmp20_ = vala_typesymbol_get_destroy_function ((ValaTypeSymbol*) st)))), _vala_ccode_node_unref0 (_tmp21_), _g_free0 (_tmp20_), _tmp22_);
				vala_ccode_function_call_add_argument (destroy_call, (ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp23_);
				vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp24_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) destroy_call)));
				_vala_ccode_node_unref0 (_tmp24_);
				_vala_ccode_node_unref0 (destroy_call);
			}
			free_call = (_tmp26_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new ("g_free"))), _vala_ccode_node_unref0 (_tmp25_), _tmp26_);
			vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_identifier_new ("self")));
			_vala_ccode_node_unref0 (_tmp27_);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp28_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) free_call)));
			_vala_ccode_node_unref0 (_tmp28_);
			_vala_ccode_node_unref0 (free_call);
			_vala_code_node_unref0 (st);
		}
	}
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp29_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp29_);
	vala_ccode_function_set_block (function, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = destroy_func;
	_vala_code_node_unref0 (cl);
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (function);
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_destroy_func_expression (ValaCCodeBaseModule* self, ValaDataType* type, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		gboolean _tmp1_ = FALSE;
		gboolean _tmp2_ = FALSE;
		if (vala_data_type_get_data_type (type) == VALA_TYPESYMBOL (self->glist_type)) {
			_tmp2_ = TRUE;
		} else {
			_tmp2_ = vala_data_type_get_data_type (type) == VALA_TYPESYMBOL (self->gslist_type);
		}
		if (_tmp2_) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = vala_data_type_get_data_type (type) == VALA_TYPESYMBOL (self->gnode_type);
		}
		_tmp0_ = _tmp1_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		gboolean elements_require_free;
		ValaCCodeExpression* element_destroy_func_expression;
		gboolean _tmp6_ = FALSE;
		elements_require_free = FALSE;
		element_destroy_func_expression = NULL;
		{
			ValaList* _tmp3_;
			ValaIterator* _tmp4_;
			ValaIterator* _type_arg_it;
			_type_arg_it = (_tmp4_ = vala_iterable_iterator ((ValaIterable*) (_tmp3_ = vala_data_type_get_type_arguments (type))), _vala_collection_object_unref0 (_tmp3_), _tmp4_);
			while (TRUE) {
				ValaDataType* type_arg;
				if (!vala_iterator_next (_type_arg_it)) {
					break;
				}
				type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
				elements_require_free = vala_ccode_base_module_requires_destroy (self, type_arg);
				if (elements_require_free) {
					ValaCCodeExpression* _tmp5_;
					element_destroy_func_expression = (_tmp5_ = vala_ccode_base_module_get_destroy_func_expression (self, type_arg, FALSE), _vala_ccode_node_unref0 (element_destroy_func_expression), _tmp5_);
				}
				_vala_code_node_unref0 (type_arg);
			}
			_vala_collection_object_unref0 (_type_arg_it);
		}
		if (elements_require_free) {
			_tmp6_ = VALA_IS_CCODE_IDENTIFIER (element_destroy_func_expression);
		} else {
			_tmp6_ = FALSE;
		}
		if (_tmp6_) {
			char* _tmp7_;
			ValaCCodeExpression* _tmp8_;
			result = (_tmp8_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp7_ = vala_ccode_base_module_generate_collection_free_wrapper (self, type, VALA_CCODE_IDENTIFIER (element_destroy_func_expression))), _g_free0 (_tmp7_), _tmp8_);
			_vala_ccode_node_unref0 (element_destroy_func_expression);
			return result;
		} else {
			char* _tmp9_;
			ValaCCodeExpression* _tmp10_;
			result = (_tmp10_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp9_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type))), _g_free0 (_tmp9_), _tmp10_);
			_vala_ccode_node_unref0 (element_destroy_func_expression);
			return result;
		}
		_vala_ccode_node_unref0 (element_destroy_func_expression);
	} else {
		if (VALA_IS_ERROR_TYPE (type)) {
			result = (ValaCCodeExpression*) vala_ccode_identifier_new ("g_error_free");
			return result;
		} else {
			if (vala_data_type_get_data_type (type) != NULL) {
				char* unref_function;
				unref_function = NULL;
				if (VALA_IS_REFERENCE_TYPE (type)) {
					if (vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type))) {
						char* _tmp11_;
						gboolean _tmp12_ = FALSE;
						unref_function = (_tmp11_ = vala_typesymbol_get_unref_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp11_);
						if (VALA_IS_INTERFACE (vala_data_type_get_data_type (type))) {
							_tmp12_ = unref_function == NULL;
						} else {
							_tmp12_ = FALSE;
						}
						if (_tmp12_) {
							char* _tmp13_;
							char* _tmp14_;
							vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) type), _tmp14_ = g_strdup_printf ("missing class prerequisite for interface `%s', add GLib.Object to inte" \
"rface declaration if unsure", _tmp13_ = vala_symbol_get_full_name ((ValaSymbol*) vala_data_type_get_data_type (type))));
							_g_free0 (_tmp14_);
							_g_free0 (_tmp13_);
							result = NULL;
							_g_free0 (unref_function);
							return result;
						}
					} else {
						ValaTypeSymbol* _tmp15_;
						ValaClass* cl;
						gboolean _tmp16_ = FALSE;
						cl = _vala_code_node_ref0 ((_tmp15_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp15_) ? ((ValaClass*) _tmp15_) : NULL));
						if (cl != NULL) {
							gboolean _tmp17_ = FALSE;
							if (vala_class_get_free_function_address_of (cl)) {
								_tmp17_ = TRUE;
							} else {
								_tmp17_ = vala_class_get_is_gboxed (cl);
							}
							_tmp16_ = _tmp17_;
						} else {
							_tmp16_ = FALSE;
						}
						if (_tmp16_) {
							char* _tmp18_;
							unref_function = (_tmp18_ = vala_ccode_base_module_generate_free_func_wrapper (self, type), _g_free0 (unref_function), _tmp18_);
						} else {
							char* _tmp19_;
							unref_function = (_tmp19_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp19_);
						}
						_vala_code_node_unref0 (cl);
					}
				} else {
					if (vala_data_type_get_nullable (type)) {
						char* _tmp20_;
						unref_function = (_tmp20_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp20_);
						if (unref_function == NULL) {
							gboolean _tmp21_ = FALSE;
							if (VALA_IS_STRUCT (vala_data_type_get_data_type (type))) {
								_tmp21_ = vala_struct_is_disposable (VALA_STRUCT (vala_data_type_get_data_type (type)));
							} else {
								_tmp21_ = FALSE;
							}
							if (_tmp21_) {
								char* _tmp22_;
								unref_function = (_tmp22_ = vala_ccode_base_module_generate_free_func_wrapper (self, type), _g_free0 (unref_function), _tmp22_);
							} else {
								char* _tmp23_;
								unref_function = (_tmp23_ = g_strdup ("g_free"), _g_free0 (unref_function), _tmp23_);
							}
						}
					} else {
						ValaStruct* st;
						char* _tmp24_;
						st = _vala_code_node_ref0 (VALA_STRUCT (vala_data_type_get_data_type (type)));
						if (!vala_struct_get_has_destroy_function (st)) {
							vala_ccode_base_module_generate_struct_destroy_function (self, st);
						}
						unref_function = (_tmp24_ = vala_typesymbol_get_destroy_function ((ValaTypeSymbol*) st), _g_free0 (unref_function), _tmp24_);
						_vala_code_node_unref0 (st);
					}
				}
				if (unref_function == NULL) {
					result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
					_g_free0 (unref_function);
					return result;
				}
				result = (ValaCCodeExpression*) vala_ccode_identifier_new (unref_function);
				_g_free0 (unref_function);
				return result;
			} else {
				gboolean _tmp25_ = FALSE;
				if (vala_data_type_get_type_parameter (type) != NULL) {
					_tmp25_ = VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol (self));
				} else {
					_tmp25_ = FALSE;
				}
				if (_tmp25_) {
					char* _tmp26_;
					char* _tmp27_;
					char* func_name;
					gboolean _tmp28_ = FALSE;
					gboolean _tmp29_ = FALSE;
					func_name = (_tmp27_ = g_strdup_printf ("%s_destroy_func", _tmp26_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_type_parameter (type)), -1)), _g_free0 (_tmp26_), _tmp27_);
					if (vala_ccode_base_module_is_in_generic_type (self, type)) {
						_tmp29_ = !is_chainup;
					} else {
						_tmp29_ = FALSE;
					}
					if (_tmp29_) {
						_tmp28_ = !vala_ccode_base_module_get_in_creation_method (self);
					} else {
						_tmp28_ = FALSE;
					}
					if (_tmp28_) {
						ValaCCodeExpression* _tmp30_;
						ValaCCodeMemberAccess* _tmp31_;
						ValaCCodeExpression* _tmp32_;
						result = (_tmp32_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp31_ = vala_ccode_member_access_new_pointer (_tmp30_ = vala_ccode_base_module_get_result_cexpression (self, "self"), "priv")), func_name), _vala_ccode_node_unref0 (_tmp31_), _vala_ccode_node_unref0 (_tmp30_), _tmp32_);
						_g_free0 (func_name);
						return result;
					} else {
						result = (ValaCCodeExpression*) vala_ccode_identifier_new (func_name);
						_g_free0 (func_name);
						return result;
					}
					_g_free0 (func_name);
				} else {
					if (VALA_IS_ARRAY_TYPE (type)) {
						if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_POSIX) {
							result = (ValaCCodeExpression*) vala_ccode_identifier_new ("free");
							return result;
						} else {
							result = (ValaCCodeExpression*) vala_ccode_identifier_new ("g_free");
							return result;
						}
					} else {
						if (VALA_IS_POINTER_TYPE (type)) {
							if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_POSIX) {
								result = (ValaCCodeExpression*) vala_ccode_identifier_new ("free");
								return result;
							} else {
								result = (ValaCCodeExpression*) vala_ccode_identifier_new ("g_free");
								return result;
							}
						} else {
							result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
							return result;
						}
					}
				}
			}
		}
	}
}


static char* vala_ccode_base_module_generate_collection_free_wrapper (ValaCCodeBaseModule* self, ValaDataType* collection_type, ValaCCodeIdentifier* element_destroy_func_expression) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* destroy_func;
	ValaCCodeFunction* function;
	char* _tmp2_;
	ValaCCodeFormalParameter* _tmp3_;
	ValaCCodeBlock* block;
	ValaCCodeFunctionCall* element_free_call;
	ValaCCodeExpressionStatement* _tmp28_;
	char* _tmp29_;
	ValaCCodeIdentifier* _tmp30_;
	ValaCCodeFunctionCall* _tmp31_;
	ValaCCodeFunctionCall* cfreecall;
	ValaCCodeIdentifier* _tmp32_;
	ValaCCodeExpressionStatement* _tmp33_;
	ValaCCodeFunction* _tmp34_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (collection_type != NULL, NULL);
	g_return_val_if_fail (element_destroy_func_expression != NULL, NULL);
	destroy_func = (_tmp1_ = g_strdup_printf ("_%s_%s", _tmp0_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (collection_type)), vala_ccode_identifier_get_name (element_destroy_func_expression)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, destroy_func)) {
		result = destroy_func;
		return result;
	}
	function = vala_ccode_function_new (destroy_func, "void");
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp3_ = vala_ccode_formal_parameter_new ("self", _tmp2_ = vala_data_type_get_cname (collection_type)));
	_vala_ccode_node_unref0 (_tmp3_);
	_g_free0 (_tmp2_);
	block = vala_ccode_block_new ();
	element_free_call = NULL;
	if (vala_data_type_get_data_type (collection_type) == VALA_TYPESYMBOL (self->gnode_type)) {
		char* destroy_node_func;
		ValaCCodeFunction* wrapper;
		char* _tmp4_;
		ValaCCodeFormalParameter* _tmp5_;
		ValaCCodeFormalParameter* _tmp6_;
		ValaCCodeBlock* wrapper_block;
		ValaCCodeFunctionCall* free_call;
		ValaCCodeIdentifier* _tmp7_;
		ValaCCodeMemberAccess* _tmp8_;
		ValaCCodeExpressionStatement* _tmp9_;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeReturnStatement* _tmp11_;
		ValaCCodeFunction* _tmp12_;
		ValaCCodeIdentifier* _tmp13_;
		ValaCCodeFunctionCall* _tmp14_;
		ValaCCodeIdentifier* _tmp15_;
		ValaCCodeConstant* _tmp16_;
		ValaCCodeConstant* _tmp17_;
		ValaCCodeConstant* _tmp18_;
		ValaCCodeIdentifier* _tmp19_;
		ValaCCodeConstant* _tmp20_;
		destroy_node_func = g_strdup_printf ("%s_node", destroy_func);
		wrapper = vala_ccode_function_new (destroy_node_func, "gboolean");
		vala_ccode_function_set_modifiers (wrapper, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_function_add_parameter (wrapper, _tmp5_ = vala_ccode_formal_parameter_new ("node", _tmp4_ = vala_data_type_get_cname (collection_type)));
		_vala_ccode_node_unref0 (_tmp5_);
		_g_free0 (_tmp4_);
		vala_ccode_function_add_parameter (wrapper, _tmp6_ = vala_ccode_formal_parameter_new ("unused", "gpointer"));
		_vala_ccode_node_unref0 (_tmp6_);
		wrapper_block = vala_ccode_block_new ();
		free_call = vala_ccode_function_call_new ((ValaCCodeExpression*) element_destroy_func_expression);
		vala_ccode_function_call_add_argument (free_call, (ValaCCodeExpression*) (_tmp8_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("node")), "data")));
		_vala_ccode_node_unref0 (_tmp8_);
		_vala_ccode_node_unref0 (_tmp7_);
		vala_ccode_block_add_statement (wrapper_block, (ValaCCodeNode*) (_tmp9_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) free_call)));
		_vala_ccode_node_unref0 (_tmp9_);
		vala_ccode_block_add_statement (wrapper_block, (ValaCCodeNode*) (_tmp11_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("FALSE")))));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (_tmp10_);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp12_ = vala_ccode_function_copy (function)));
		_vala_ccode_node_unref0 (_tmp12_);
		vala_ccode_function_set_block (wrapper, wrapper_block);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) wrapper);
		element_free_call = (_tmp14_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new ("g_node_traverse"))), _vala_ccode_node_unref0 (element_free_call), _tmp14_);
		_vala_ccode_node_unref0 (_tmp13_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_identifier_new ("self")));
		_vala_ccode_node_unref0 (_tmp15_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_constant_new ("G_POST_ORDER")));
		_vala_ccode_node_unref0 (_tmp16_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_constant_new ("G_TRAVERSE_ALL")));
		_vala_ccode_node_unref0 (_tmp17_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("-1")));
		_vala_ccode_node_unref0 (_tmp18_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new (destroy_node_func)));
		_vala_ccode_node_unref0 (_tmp19_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp20_);
		_vala_ccode_node_unref0 (free_call);
		_vala_ccode_node_unref0 (wrapper_block);
		_vala_ccode_node_unref0 (wrapper);
		_g_free0 (destroy_node_func);
	} else {
		ValaCCodeIdentifier* _tmp25_;
		ValaCCodeCastExpression* _tmp26_;
		ValaCCodeConstant* _tmp27_;
		if (vala_data_type_get_data_type (collection_type) == VALA_TYPESYMBOL (self->glist_type)) {
			ValaCCodeIdentifier* _tmp21_;
			ValaCCodeFunctionCall* _tmp22_;
			element_free_call = (_tmp22_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new ("g_list_foreach"))), _vala_ccode_node_unref0 (element_free_call), _tmp22_);
			_vala_ccode_node_unref0 (_tmp21_);
		} else {
			ValaCCodeIdentifier* _tmp23_;
			ValaCCodeFunctionCall* _tmp24_;
			element_free_call = (_tmp24_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new ("g_slist_foreach"))), _vala_ccode_node_unref0 (element_free_call), _tmp24_);
			_vala_ccode_node_unref0 (_tmp23_);
		}
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new ("self")));
		_vala_ccode_node_unref0 (_tmp25_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp26_ = vala_ccode_cast_expression_new ((ValaCCodeExpression*) element_destroy_func_expression, "GFunc")));
		_vala_ccode_node_unref0 (_tmp26_);
		vala_ccode_function_call_add_argument (element_free_call, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp27_);
	}
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp28_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) element_free_call)));
	_vala_ccode_node_unref0 (_tmp28_);
	cfreecall = (_tmp31_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new (_tmp29_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (collection_type))))), _vala_ccode_node_unref0 (_tmp30_), _g_free0 (_tmp29_), _tmp31_);
	vala_ccode_function_call_add_argument (cfreecall, (ValaCCodeExpression*) (_tmp32_ = vala_ccode_identifier_new ("self")));
	_vala_ccode_node_unref0 (_tmp32_);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp33_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cfreecall)));
	_vala_ccode_node_unref0 (_tmp33_);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp34_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp34_);
	vala_ccode_function_set_block (function, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = destroy_func;
	_vala_ccode_node_unref0 (cfreecall);
	_vala_ccode_node_unref0 (element_free_call);
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (function);
	return result;
}


static char* vala_ccode_base_module_real_append_struct_array_free (ValaCCodeBaseModule* self, ValaStruct* st) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (st != NULL, NULL);
	result = NULL;
	return result;
}


char* vala_ccode_base_module_append_struct_array_free (ValaCCodeBaseModule* self, ValaStruct* st) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->append_struct_array_free (self, st);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_unref_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* _tmp14_;
	ValaCCodeFunctionCall* _tmp15_;
	ValaCCodeFunctionCall* ccall;
	gboolean _tmp16_ = FALSE;
	gboolean _tmp27_ = FALSE;
	gboolean _tmp28_ = FALSE;
	ValaCCodeConstant* _tmp35_;
	ValaCCodeBinaryExpression* _tmp36_;
	ValaCCodeBinaryExpression* cisnull;
	ValaCCodeCommaExpression* ccomma;
	ValaCCodeConstant* _tmp61_;
	ValaCCodeAssignment* cassign;
	gboolean _tmp62_ = FALSE;
	gboolean _tmp63_ = FALSE;
	gboolean uses_gfree;
	gboolean _tmp65_ = FALSE;
	ValaCCodeConstant* _tmp66_;
	ValaCCodeExpression* _tmp67_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (cvar != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (VALA_IS_DELEGATE_TYPE (type)) {
		ValaCCodeExpression* delegate_target_destroy_notify;
		ValaCCodeExpression* _tmp0_ = NULL;
		ValaCCodeExpression* _tmp1_;
		ValaCCodeExpression* _tmp2_;
		ValaCCodeExpression* delegate_target;
		ValaCCodeFunctionCall* ccall;
		ValaCCodeCommaExpression* destroy_call;
		ValaCCodeConstant* _tmp3_;
		ValaCCodeConstant* _tmp4_;
		ValaCCodeBinaryExpression* _tmp5_;
		ValaCCodeBinaryExpression* cisnull;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeConstant* _tmp6_;
		ValaCCodeConditionalExpression* _tmp7_;
		ValaCCodeConstant* _tmp8_;
		ValaCCodeAssignment* _tmp9_;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeAssignment* _tmp11_;
		ValaCCodeConstant* _tmp12_;
		ValaCCodeAssignment* _tmp13_;
		delegate_target_destroy_notify = NULL;
		delegate_target = (_tmp1_ = vala_ccode_base_module_get_delegate_target_cexpression (self, expr, &_tmp0_), delegate_target_destroy_notify = (_tmp2_ = _tmp0_, _vala_ccode_node_unref0 (delegate_target_destroy_notify), _tmp2_), _tmp1_);
		ccall = vala_ccode_function_call_new (delegate_target_destroy_notify);
		vala_ccode_function_call_add_argument (ccall, delegate_target);
		destroy_call = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (destroy_call, (ValaCCodeExpression*) ccall);
		vala_ccode_comma_expression_append_expression (destroy_call, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp3_);
		cisnull = (_tmp5_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, delegate_target_destroy_notify, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp4_), _tmp5_);
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_constant_new ("NULL")), (ValaCCodeExpression*) destroy_call)));
		_vala_ccode_node_unref0 (_tmp7_);
		_vala_ccode_node_unref0 (_tmp6_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_assignment_new (cvar, (ValaCCodeExpression*) (_tmp8_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp9_);
		_vala_ccode_node_unref0 (_tmp8_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_assignment_new (delegate_target, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (_tmp10_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_assignment_new (delegate_target_destroy_notify, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp13_);
		_vala_ccode_node_unref0 (_tmp12_);
		result = (ValaCCodeExpression*) ccomma;
		_vala_ccode_node_unref0 (cisnull);
		_vala_ccode_node_unref0 (destroy_call);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (delegate_target);
		_vala_ccode_node_unref0 (delegate_target_destroy_notify);
		return result;
	}
	ccall = (_tmp15_ = vala_ccode_function_call_new (_tmp14_ = vala_ccode_base_module_get_destroy_func_expression (self, type, FALSE)), _vala_ccode_node_unref0 (_tmp14_), _tmp15_);
	if (VALA_IS_VALUE_TYPE (type)) {
		_tmp16_ = !vala_data_type_get_nullable (type);
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		ValaTypeSymbol* _tmp17_;
		ValaStruct* st;
		gboolean _tmp18_ = FALSE;
		gboolean _tmp20_ = FALSE;
		st = _vala_code_node_ref0 ((_tmp17_ = vala_data_type_get_data_type (type), VALA_IS_STRUCT (_tmp17_) ? ((ValaStruct*) _tmp17_) : NULL));
		if (st != NULL) {
			_tmp18_ = vala_struct_is_simple_type (st);
		} else {
			_tmp18_ = FALSE;
		}
		if (_tmp18_) {
			vala_ccode_function_call_add_argument (ccall, cvar);
		} else {
			ValaCCodeUnaryExpression* _tmp19_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cvar)));
			_vala_ccode_node_unref0 (_tmp19_);
		}
		if (self->gvalue_type != NULL) {
			_tmp20_ = vala_data_type_get_data_type (type) == VALA_TYPESYMBOL (self->gvalue_type);
		} else {
			_tmp20_ = FALSE;
		}
		if (_tmp20_) {
			ValaCCodeIdentifier* _tmp21_;
			ValaCCodeFunctionCall* _tmp22_;
			ValaCCodeFunctionCall* cisvalid;
			ValaCCodeUnaryExpression* _tmp23_;
			ValaCCodeCommaExpression* ccomma;
			ValaCCodeConstant* _tmp24_;
			ValaCCodeConstant* _tmp25_;
			ValaCCodeExpression* _tmp26_;
			cisvalid = (_tmp22_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new ("G_IS_VALUE"))), _vala_ccode_node_unref0 (_tmp21_), _tmp22_);
			vala_ccode_function_call_add_argument (cisvalid, (ValaCCodeExpression*) (_tmp23_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cvar)));
			_vala_ccode_node_unref0 (_tmp23_);
			ccomma = vala_ccode_comma_expression_new ();
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp24_ = vala_ccode_constant_new ("NULL")));
			_vala_ccode_node_unref0 (_tmp24_);
			result = (_tmp26_ = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisvalid, (ValaCCodeExpression*) ccomma, (ValaCCodeExpression*) (_tmp25_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp25_), _tmp26_);
			_vala_ccode_node_unref0 (ccomma);
			_vala_ccode_node_unref0 (cisvalid);
			_vala_code_node_unref0 (st);
			_vala_ccode_node_unref0 (ccall);
			return result;
			_vala_ccode_node_unref0 (ccomma);
			_vala_ccode_node_unref0 (cisvalid);
		} else {
			result = (ValaCCodeExpression*) ccall;
			_vala_code_node_unref0 (st);
			return result;
		}
		_vala_code_node_unref0 (st);
	}
	if (VALA_IS_CCODE_IDENTIFIER (vala_ccode_function_call_get_call (ccall))) {
		_tmp28_ = !VALA_IS_ARRAY_TYPE (type);
	} else {
		_tmp28_ = FALSE;
	}
	if (_tmp28_) {
		_tmp27_ = !is_macro_definition;
	} else {
		_tmp27_ = FALSE;
	}
	if (_tmp27_) {
		ValaCCodeIdentifier* freeid;
		char* free0_func;
		ValaCCodeIdentifier* _tmp33_;
		ValaCCodeFunctionCall* _tmp34_;
		freeid = _vala_ccode_node_ref0 (VALA_CCODE_IDENTIFIER (vala_ccode_function_call_get_call (ccall)));
		free0_func = g_strdup_printf ("_%s0", vala_ccode_identifier_get_name (freeid));
		if (vala_ccode_base_module_add_wrapper (self, free0_func)) {
			ValaCCodeIdentifier* _tmp29_;
			ValaCCodeExpression* _tmp30_;
			ValaCCodeExpression* macro;
			char* _tmp31_;
			ValaCCodeMacroReplacement* _tmp32_;
			macro = (_tmp30_ = vala_ccode_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp29_ = vala_ccode_identifier_new ("var")), type, expr, TRUE), _vala_ccode_node_unref0 (_tmp29_), _tmp30_);
			vala_ccode_declaration_space_add_type_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp32_ = vala_ccode_macro_replacement_new_with_expression (_tmp31_ = g_strdup_printf ("%s(var)", free0_func), macro)));
			_vala_ccode_node_unref0 (_tmp32_);
			_g_free0 (_tmp31_);
			_vala_ccode_node_unref0 (macro);
		}
		ccall = (_tmp34_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp33_ = vala_ccode_identifier_new (free0_func))), _vala_ccode_node_unref0 (ccall), _tmp34_);
		_vala_ccode_node_unref0 (_tmp33_);
		vala_ccode_function_call_add_argument (ccall, cvar);
		result = (ValaCCodeExpression*) ccall;
		_g_free0 (free0_func);
		_vala_ccode_node_unref0 (freeid);
		return result;
	}
	cisnull = (_tmp36_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, cvar, (ValaCCodeExpression*) (_tmp35_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp35_), _tmp36_);
	if (vala_data_type_get_type_parameter (type) != NULL) {
		gboolean _tmp37_ = FALSE;
		ValaCCodeExpression* _tmp38_;
		ValaCCodeConstant* _tmp39_;
		ValaCCodeBinaryExpression* _tmp40_;
		ValaCCodeBinaryExpression* cunrefisnull;
		ValaCCodeBinaryExpression* _tmp41_;
		if (!VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol (self))) {
			_tmp37_ = TRUE;
		} else {
			_tmp37_ = vala_class_get_is_compact (vala_ccode_base_module_get_current_class (self));
		}
		if (_tmp37_) {
			result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
			_vala_ccode_node_unref0 (cisnull);
			_vala_ccode_node_unref0 (ccall);
			return result;
		}
		cunrefisnull = (_tmp40_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, _tmp38_ = vala_ccode_base_module_get_destroy_func_expression (self, type, FALSE), (ValaCCodeExpression*) (_tmp39_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp39_), _vala_ccode_node_unref0 (_tmp38_), _tmp40_);
		cisnull = (_tmp41_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) cunrefisnull), _vala_ccode_node_unref0 (cisnull), _tmp41_);
		_vala_ccode_node_unref0 (cunrefisnull);
	}
	vala_ccode_function_call_add_argument (ccall, cvar);
	ccomma = vala_ccode_comma_expression_new ();
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		gboolean _tmp42_ = FALSE;
		gboolean _tmp43_ = FALSE;
		if (vala_data_type_get_data_type (type) != NULL) {
			_tmp43_ = !vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type));
		} else {
			_tmp43_ = FALSE;
		}
		if (_tmp43_) {
			gboolean _tmp44_ = FALSE;
			gboolean _tmp45_ = FALSE;
			gboolean _tmp46_ = FALSE;
			if (vala_data_type_get_data_type (type) == self->gstringbuilder_type) {
				_tmp46_ = TRUE;
			} else {
				_tmp46_ = vala_data_type_get_data_type (type) == self->garray_type;
			}
			if (_tmp46_) {
				_tmp45_ = TRUE;
			} else {
				_tmp45_ = vala_data_type_get_data_type (type) == self->gbytearray_type;
			}
			if (_tmp45_) {
				_tmp44_ = TRUE;
			} else {
				_tmp44_ = vala_data_type_get_data_type (type) == self->gptrarray_type;
			}
			_tmp42_ = _tmp44_;
		} else {
			_tmp42_ = FALSE;
		}
		if (_tmp42_) {
			ValaCCodeConstant* _tmp47_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp47_ = vala_ccode_constant_new ("TRUE")));
			_vala_ccode_node_unref0 (_tmp47_);
		} else {
			if (vala_data_type_get_data_type (type) == self->gthreadpool_type) {
				ValaCCodeConstant* _tmp48_;
				ValaCCodeConstant* _tmp49_;
				vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp48_ = vala_ccode_constant_new ("FALSE")));
				_vala_ccode_node_unref0 (_tmp48_);
				vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp49_ = vala_ccode_constant_new ("TRUE")));
				_vala_ccode_node_unref0 (_tmp49_);
			} else {
				if (VALA_IS_ARRAY_TYPE (type)) {
					ValaArrayType* array_type;
					array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (type));
					if (vala_ccode_base_module_requires_destroy (self, vala_array_type_get_element_type (array_type))) {
						ValaCCodeExpression* csizeexpr;
						gboolean first;
						ValaTypeSymbol* _tmp54_;
						ValaStruct* st;
						gboolean _tmp55_ = FALSE;
						csizeexpr = NULL;
						first = TRUE;
						{
							gint dim;
							dim = 1;
							{
								gboolean _tmp50_;
								_tmp50_ = TRUE;
								while (TRUE) {
									if (!_tmp50_) {
										dim++;
									}
									_tmp50_ = FALSE;
									if (!(dim <= vala_array_type_get_rank (array_type))) {
										break;
									}
									if (first) {
										ValaCCodeExpression* _tmp51_;
										csizeexpr = (_tmp51_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim), _vala_ccode_node_unref0 (csizeexpr), _tmp51_);
										first = FALSE;
									} else {
										ValaCCodeExpression* _tmp52_;
										ValaCCodeExpression* _tmp53_;
										csizeexpr = (_tmp53_ = (ValaCCodeExpression*) vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_MUL, csizeexpr, _tmp52_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim)), _vala_ccode_node_unref0 (csizeexpr), _tmp53_);
										_vala_ccode_node_unref0 (_tmp52_);
									}
								}
							}
						}
						st = _vala_code_node_ref0 ((_tmp54_ = vala_data_type_get_data_type (vala_array_type_get_element_type (array_type)), VALA_IS_STRUCT (_tmp54_) ? ((ValaStruct*) _tmp54_) : NULL));
						if (st != NULL) {
							_tmp55_ = !vala_data_type_get_nullable (vala_array_type_get_element_type (array_type));
						} else {
							_tmp55_ = FALSE;
						}
						if (_tmp55_) {
							char* _tmp56_;
							ValaCCodeIdentifier* _tmp57_;
							vala_ccode_function_call_set_call (ccall, (ValaCCodeExpression*) (_tmp57_ = vala_ccode_identifier_new (_tmp56_ = vala_ccode_base_module_append_struct_array_free (self, st))));
							_vala_ccode_node_unref0 (_tmp57_);
							_g_free0 (_tmp56_);
							vala_ccode_function_call_add_argument (ccall, csizeexpr);
						} else {
							ValaCCodeIdentifier* _tmp58_;
							ValaCCodeExpression* _tmp59_;
							ValaCCodeCastExpression* _tmp60_;
							self->requires_array_free = TRUE;
							vala_ccode_function_call_set_call (ccall, (ValaCCodeExpression*) (_tmp58_ = vala_ccode_identifier_new ("_vala_array_free")));
							_vala_ccode_node_unref0 (_tmp58_);
							vala_ccode_function_call_add_argument (ccall, csizeexpr);
							vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp60_ = vala_ccode_cast_expression_new (_tmp59_ = vala_ccode_base_module_get_destroy_func_expression (self, vala_array_type_get_element_type (array_type), FALSE), "GDestroyNotify")));
							_vala_ccode_node_unref0 (_tmp60_);
							_vala_ccode_node_unref0 (_tmp59_);
						}
						_vala_code_node_unref0 (st);
						_vala_ccode_node_unref0 (csizeexpr);
					}
					_vala_code_node_unref0 (array_type);
				}
			}
		}
	}
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp61_ = vala_ccode_constant_new ("NULL")));
	_vala_ccode_node_unref0 (_tmp61_);
	cassign = vala_ccode_assignment_new (cvar, (ValaCCodeExpression*) ccomma, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE);
	if (vala_data_type_get_data_type (type) != NULL) {
		_tmp63_ = !vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type));
	} else {
		_tmp63_ = FALSE;
	}
	if (_tmp63_) {
		char* _tmp64_;
		_tmp62_ = _vala_strcmp0 (_tmp64_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type)), "g_free") == 0;
		_g_free0 (_tmp64_);
	} else {
		_tmp62_ = FALSE;
	}
	uses_gfree = _tmp62_;
	if (uses_gfree) {
		_tmp65_ = TRUE;
	} else {
		_tmp65_ = VALA_IS_ARRAY_TYPE (type);
	}
	uses_gfree = _tmp65_;
	if (uses_gfree) {
		result = (ValaCCodeExpression*) cassign;
		_vala_ccode_node_unref0 (ccomma);
		_vala_ccode_node_unref0 (cisnull);
		_vala_ccode_node_unref0 (ccall);
		return result;
	}
	result = (_tmp67_ = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) (_tmp66_ = vala_ccode_constant_new ("NULL")), (ValaCCodeExpression*) cassign), _vala_ccode_node_unref0 (_tmp66_), _tmp67_);
	_vala_ccode_node_unref0 (cassign);
	_vala_ccode_node_unref0 (ccomma);
	_vala_ccode_node_unref0 (cisnull);
	_vala_ccode_node_unref0 (ccall);
	return result;
	_vala_ccode_node_unref0 (cassign);
	_vala_ccode_node_unref0 (ccomma);
	_vala_ccode_node_unref0 (cisnull);
	_vala_ccode_node_unref0 (ccall);
}


ValaCCodeExpression* vala_ccode_base_module_get_unref_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_unref_expression (self, cvar, type, expr, is_macro_definition);
}


static void vala_ccode_base_module_real_visit_end_full_expression (ValaCodeVisitor* base, ValaExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeCommaExpression* expr_list;
	ValaLocalVariable* full_expr_var;
	ValaCodeNode* _tmp1_;
	ValaLocalVariable* local_decl;
	gboolean _tmp2_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_collection_get_size ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self)) > 0) {
		if (expr->temp_vars == NULL) {
			ValaArrayList* _tmp0_;
			expr->temp_vars = (_tmp0_ = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal), _vala_collection_object_unref0 (expr->temp_vars), _tmp0_);
		} else {
			vala_collection_clear ((ValaCollection*) expr->temp_vars);
		}
		{
			ValaIterator* _local_it;
			_local_it = vala_iterable_iterator ((ValaIterable*) vala_ccode_base_module_get_temp_vars (self));
			while (TRUE) {
				ValaLocalVariable* local;
				if (!vala_iterator_next (_local_it)) {
					break;
				}
				local = (ValaLocalVariable*) vala_iterator_get (_local_it);
				vala_expression_add_temp_var (expr, local);
				_vala_code_node_unref0 (local);
			}
			_vala_collection_object_unref0 (_local_it);
		}
		vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
	}
	if (vala_collection_get_size ((ValaCollection*) VALA_LIST (vala_ccode_base_module_get_temp_ref_vars (self))) == 0) {
		return;
	}
	expr_list = vala_ccode_comma_expression_new ();
	full_expr_var = NULL;
	local_decl = _vala_code_node_ref0 ((_tmp1_ = vala_code_node_get_parent_node ((ValaCodeNode*) expr), VALA_IS_LOCAL_VARIABLE (_tmp1_) ? ((ValaLocalVariable*) _tmp1_) : NULL));
	if (local_decl != NULL) {
		_tmp2_ = vala_ccode_base_module_has_simple_struct_initializer (self, local_decl);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		vala_ccode_comma_expression_append_expression (expr_list, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
	} else {
		ValaDataType* expr_type;
		ValaLocalVariable* _tmp4_;
		ValaCCodeExpression* _tmp5_;
		ValaCCodeAssignment* _tmp6_;
		expr_type = _vala_code_node_ref0 (vala_expression_get_value_type (expr));
		if (vala_expression_get_target_type (expr) != NULL) {
			ValaDataType* _tmp3_;
			expr_type = (_tmp3_ = _vala_code_node_ref0 (vala_expression_get_target_type (expr)), _vala_code_node_unref0 (expr_type), _tmp3_);
		}
		full_expr_var = (_tmp4_ = vala_ccode_base_module_get_temp_variable (self, expr_type, TRUE, (ValaCodeNode*) expr, FALSE), _vala_code_node_unref0 (full_expr_var), _tmp4_);
		vala_expression_add_temp_var (expr, full_expr_var);
		vala_ccode_comma_expression_append_expression (expr_list, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_assignment_new (_tmp5_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) full_expr_var)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp6_);
		_vala_ccode_node_unref0 (_tmp5_);
		_vala_code_node_unref0 (expr_type);
	}
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) vala_ccode_base_module_get_temp_ref_vars (self));
		while (TRUE) {
			ValaLocalVariable* local;
			ValaMemberAccess* ma;
			ValaDataType* _tmp7_;
			ValaCCodeExpression* _tmp8_;
			ValaCCodeExpression* _tmp9_;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
			vala_expression_set_value_type ((ValaExpression*) ma, _tmp7_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
			_vala_code_node_unref0 (_tmp7_);
			vala_ccode_comma_expression_append_expression (expr_list, _tmp9_ = vala_ccode_base_module_get_unref_expression (self, _tmp8_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE));
			_vala_ccode_node_unref0 (_tmp9_);
			_vala_ccode_node_unref0 (_tmp8_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	if (full_expr_var != NULL) {
		ValaCCodeExpression* _tmp10_;
		vala_ccode_comma_expression_append_expression (expr_list, _tmp10_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) full_expr_var)));
		_vala_ccode_node_unref0 (_tmp10_);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) expr_list);
	vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_ref_vars (self));
	_vala_code_node_unref0 (local_decl);
	_vala_code_node_unref0 (full_expr_var);
	_vala_ccode_node_unref0 (expr_list);
}


void vala_ccode_base_module_append_temp_decl (ValaCCodeBaseModule* self, ValaCCodeFragment* cfrag, ValaList* temp_vars) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (cfrag != NULL);
	if (temp_vars == NULL) {
		return;
	}
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) temp_vars);
		while (TRUE) {
			ValaLocalVariable* local;
			char* _tmp0_;
			ValaCCodeDeclaration* _tmp1_;
			ValaCCodeDeclaration* _cdecl_;
			char* _tmp2_;
			ValaCCodeVariableDeclarator* _tmp3_;
			ValaCCodeVariableDeclarator* vardecl;
			ValaTypeSymbol* _tmp4_;
			ValaStruct* st;
			ValaDataType* _tmp5_;
			ValaArrayType* array_type;
			gboolean _tmp14_ = FALSE;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			_cdecl_ = (_tmp1_ = vala_ccode_declaration_new (_tmp0_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp0_), _tmp1_);
			vardecl = (_tmp3_ = vala_ccode_variable_declarator_new (vala_symbol_get_name ((ValaSymbol*) local), NULL, _tmp2_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp2_), _tmp3_);
			vala_code_node_set_ccodenode ((ValaCodeNode*) local, (ValaCCodeNode*) vardecl);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) vardecl);
			st = _vala_code_node_ref0 ((_tmp4_ = vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) local)), VALA_IS_STRUCT (_tmp4_) ? ((ValaStruct*) _tmp4_) : NULL));
			array_type = _vala_code_node_ref0 ((_tmp5_ = vala_variable_get_variable_type ((ValaVariable*) local), VALA_IS_ARRAY_TYPE (_tmp5_) ? ((ValaArrayType*) _tmp5_) : NULL));
			if (g_str_has_prefix (vala_symbol_get_name ((ValaSymbol*) local), "*")) {
			} else {
				if (vala_local_variable_get_no_init (local)) {
				} else {
					gboolean _tmp6_ = FALSE;
					gboolean _tmp7_ = FALSE;
					if (!vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) local))) {
						gboolean _tmp8_ = FALSE;
						if (st != NULL) {
							_tmp8_ = !vala_struct_is_simple_type (st);
						} else {
							_tmp8_ = FALSE;
						}
						_tmp7_ = _tmp8_;
					} else {
						_tmp7_ = FALSE;
					}
					if (_tmp7_) {
						_tmp6_ = TRUE;
					} else {
						gboolean _tmp9_ = FALSE;
						if (array_type != NULL) {
							_tmp9_ = vala_array_type_get_fixed_length (array_type);
						} else {
							_tmp9_ = FALSE;
						}
						_tmp6_ = _tmp9_;
					}
					if (_tmp6_) {
						ValaCCodeInitializerList* clist;
						ValaCCodeConstant* _tmp10_;
						clist = vala_ccode_initializer_list_new ();
						vala_ccode_initializer_list_append (clist, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("0")));
						_vala_ccode_node_unref0 (_tmp10_);
						vala_ccode_variable_declarator_set_initializer (vardecl, (ValaCCodeExpression*) clist);
						vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
						_vala_ccode_node_unref0 (clist);
					} else {
						gboolean _tmp11_ = FALSE;
						gboolean _tmp12_ = FALSE;
						if (vala_data_type_is_reference_type_or_type_parameter (vala_variable_get_variable_type ((ValaVariable*) local))) {
							_tmp12_ = TRUE;
						} else {
							_tmp12_ = vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) local));
						}
						if (_tmp12_) {
							_tmp11_ = TRUE;
						} else {
							_tmp11_ = VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) local));
						}
						if (_tmp11_) {
							ValaCCodeConstant* _tmp13_;
							vala_ccode_variable_declarator_set_initializer (vardecl, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_constant_new ("NULL")));
							_vala_ccode_node_unref0 (_tmp13_);
							vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
						}
					}
				}
			}
			if (vala_ccode_base_module_get_current_method (self) != NULL) {
				_tmp14_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
			} else {
				_tmp14_ = FALSE;
			}
			if (_tmp14_) {
				char* _tmp15_;
				vala_ccode_struct_add_field (self->closure_struct, _tmp15_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local)), vala_symbol_get_name ((ValaSymbol*) local), NULL);
				_g_free0 (_tmp15_);
				if (VALA_IS_CCODE_INITIALIZER_LIST (vala_ccode_variable_declarator_get_initializer (vardecl))) {
					ValaCCodeIdentifier* _tmp16_;
					ValaCCodeFunctionCall* _tmp17_;
					ValaCCodeFunctionCall* memset_call;
					ValaCCodeExpression* _tmp18_;
					ValaCCodeUnaryExpression* _tmp19_;
					ValaCCodeConstant* _tmp20_;
					char* _tmp21_;
					char* _tmp22_;
					ValaCCodeIdentifier* _tmp23_;
					ValaCCodeExpressionStatement* _tmp24_;
					vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
					memset_call = (_tmp17_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp16_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp16_), _tmp17_);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp18_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)))));
					_vala_ccode_node_unref0 (_tmp19_);
					_vala_ccode_node_unref0 (_tmp18_);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_constant_new ("0")));
					_vala_ccode_node_unref0 (_tmp20_);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new (_tmp22_ = g_strdup_printf ("sizeof (%s)", _tmp21_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local))))));
					_vala_ccode_node_unref0 (_tmp23_);
					_g_free0 (_tmp22_);
					_g_free0 (_tmp21_);
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp24_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) memset_call)));
					_vala_ccode_node_unref0 (_tmp24_);
					_vala_ccode_node_unref0 (memset_call);
				} else {
					if (vala_ccode_variable_declarator_get_initializer (vardecl) != NULL) {
						ValaCCodeExpression* _tmp25_;
						ValaCCodeAssignment* _tmp26_;
						ValaCCodeExpressionStatement* _tmp27_;
						vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp27_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp26_ = vala_ccode_assignment_new (_tmp25_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_ccode_variable_declarator_get_initializer (vardecl), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
						_vala_ccode_node_unref0 (_tmp27_);
						_vala_ccode_node_unref0 (_tmp26_);
						_vala_ccode_node_unref0 (_tmp25_);
					}
				}
			} else {
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) _cdecl_);
			}
			_vala_code_node_unref0 (array_type);
			_vala_code_node_unref0 (st);
			_vala_ccode_node_unref0 (vardecl);
			_vala_ccode_node_unref0 (_cdecl_);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
}


static void vala_ccode_base_module_real_visit_expression_statement (ValaCodeVisitor* base, ValaExpressionStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpressionStatement* _tmp0_;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	ValaCCodeFragment* cfrag;
	gboolean _tmp9_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	if (vala_code_node_get_error ((ValaCodeNode*) vala_expression_statement_get_expression (stmt))) {
		vala_code_node_set_error ((ValaCodeNode*) stmt, TRUE);
		return;
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_expression_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_expression_statement_get_expression (stmt))))));
	_vala_ccode_node_unref0 (_tmp0_);
	if (vala_collection_get_size ((ValaCollection*) VALA_LIST (vala_ccode_base_module_get_temp_vars (self))) == 0) {
		_tmp2_ = self->pre_statement_fragment == NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		gboolean _tmp3_ = FALSE;
		if (!vala_code_node_get_tree_can_fail ((ValaCodeNode*) stmt)) {
			_tmp3_ = TRUE;
		} else {
			_tmp3_ = !vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_expression_statement_get_expression (stmt));
		}
		_tmp1_ = _tmp3_;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		return;
	}
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
	if (self->pre_statement_fragment != NULL) {
		ValaCCodeFragment* _tmp4_;
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) self->pre_statement_fragment);
		self->pre_statement_fragment = (_tmp4_ = NULL, _vala_ccode_node_unref0 (self->pre_statement_fragment), _tmp4_);
	}
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) stmt));
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) vala_ccode_base_module_get_temp_ref_vars (self));
		while (TRUE) {
			ValaLocalVariable* local;
			ValaMemberAccess* ma;
			ValaDataType* _tmp5_;
			ValaCCodeExpression* _tmp6_;
			ValaCCodeExpression* _tmp7_;
			ValaCCodeExpressionStatement* _tmp8_;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
			vala_expression_set_value_type ((ValaExpression*) ma, _tmp5_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
			_vala_code_node_unref0 (_tmp5_);
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp8_ = vala_ccode_expression_statement_new (_tmp7_ = vala_ccode_base_module_get_unref_expression (self, _tmp6_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
			_vala_ccode_node_unref0 (_tmp8_);
			_vala_ccode_node_unref0 (_tmp7_);
			_vala_ccode_node_unref0 (_tmp6_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	if (vala_code_node_get_tree_can_fail ((ValaCodeNode*) stmt)) {
		_tmp9_ = vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_expression_statement_get_expression (stmt));
	} else {
		_tmp9_ = FALSE;
	}
	if (_tmp9_) {
		vala_ccode_base_module_add_simple_check (self, (ValaCodeNode*) vala_expression_statement_get_expression (stmt), cfrag, FALSE);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
	vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_ref_vars (self));
	_vala_ccode_node_unref0 (cfrag);
}


void vala_ccode_base_module_create_temp_decl (ValaCCodeBaseModule* self, ValaStatement* stmt, ValaList* temp_vars) {
	gboolean _tmp0_ = FALSE;
	ValaCCodeFragment* cfrag;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stmt != NULL);
	if (temp_vars == NULL) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = vala_collection_get_size ((ValaCollection*) temp_vars) == 0;
	}
	if (_tmp0_) {
		return;
	}
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_base_module_append_temp_decl (self, cfrag, temp_vars);
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) stmt));
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (cfrag);
}


static void vala_ccode_base_module_real_append_local_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop) {
	ValaBlock* b;
	ValaList* local_vars;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	g_return_if_fail (cfrag != NULL);
	b = _vala_code_node_ref0 (VALA_BLOCK (sym));
	local_vars = vala_block_get_local_variables (b);
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp0_;
			_tmp0_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp1_ = FALSE;
				gboolean _tmp2_ = FALSE;
				gboolean _tmp3_ = FALSE;
				gboolean _tmp4_ = FALSE;
				if (!_tmp0_) {
					i--;
				}
				_tmp0_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (!vala_code_node_get_unreachable ((ValaCodeNode*) local)) {
					_tmp4_ = vala_symbol_get_active ((ValaSymbol*) local);
				} else {
					_tmp4_ = FALSE;
				}
				if (_tmp4_) {
					_tmp3_ = !vala_local_variable_get_floating (local);
				} else {
					_tmp3_ = FALSE;
				}
				if (_tmp3_) {
					_tmp2_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					_tmp1_ = vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					ValaMemberAccess* ma;
					ValaDataType* _tmp5_;
					ValaCCodeExpression* _tmp6_;
					ValaCCodeExpression* _tmp7_;
					ValaCCodeExpressionStatement* _tmp8_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_expression_set_value_type ((ValaExpression*) ma, _tmp5_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
					_vala_code_node_unref0 (_tmp5_);
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp8_ = vala_ccode_expression_statement_new (_tmp7_ = vala_ccode_base_module_get_unref_expression (self, _tmp6_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp8_);
					_vala_ccode_node_unref0 (_tmp7_);
					_vala_ccode_node_unref0 (_tmp6_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		char* _tmp9_;
		ValaCCodeIdentifier* _tmp10_;
		ValaCCodeFunctionCall* _tmp11_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp12_;
		ValaCCodeExpression* _tmp13_;
		ValaCCodeExpressionStatement* _tmp14_;
		block_id = vala_ccode_base_module_get_block_id (self, b);
		data_unref = (_tmp11_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new (_tmp9_ = g_strdup_printf ("block%d_data_unref", block_id)))), _vala_ccode_node_unref0 (_tmp10_), _g_free0 (_tmp9_), _tmp11_);
		vala_ccode_function_call_add_argument (data_unref, _tmp13_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp12_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp13_);
		_g_free0 (_tmp12_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp14_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp14_);
		_vala_ccode_node_unref0 (data_unref);
	}
	if (stop_at_loop) {
		gboolean _tmp15_ = FALSE;
		gboolean _tmp16_ = FALSE;
		if (VALA_IS_LOOP (vala_code_node_get_parent_node ((ValaCodeNode*) b))) {
			_tmp16_ = TRUE;
		} else {
			_tmp16_ = VALA_IS_FOREACH_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) b));
		}
		if (_tmp16_) {
			_tmp15_ = TRUE;
		} else {
			_tmp15_ = VALA_IS_SWITCH_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) b));
		}
		if (_tmp15_) {
			_vala_collection_object_unref0 (local_vars);
			_vala_code_node_unref0 (b);
			return;
		}
	}
	if (VALA_IS_BLOCK (vala_symbol_get_parent_symbol (sym))) {
		vala_ccode_base_module_append_local_free (self, vala_symbol_get_parent_symbol (sym), cfrag, stop_at_loop);
	} else {
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol (sym))) {
			vala_ccode_base_module_append_param_free (self, VALA_METHOD (vala_symbol_get_parent_symbol (sym)), cfrag);
		}
	}
	_vala_collection_object_unref0 (local_vars);
	_vala_code_node_unref0 (b);
}


void vala_ccode_base_module_append_local_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->append_local_free (self, sym, cfrag, stop_at_loop);
}


void vala_ccode_base_module_append_error_free (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, ValaTryStatement* current_try) {
	ValaBlock* b;
	ValaList* local_vars;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	g_return_if_fail (cfrag != NULL);
	g_return_if_fail (current_try != NULL);
	b = _vala_code_node_ref0 (VALA_BLOCK (sym));
	local_vars = vala_block_get_local_variables (b);
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp0_;
			_tmp0_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp1_ = FALSE;
				gboolean _tmp2_ = FALSE;
				gboolean _tmp3_ = FALSE;
				gboolean _tmp4_ = FALSE;
				if (!_tmp0_) {
					i--;
				}
				_tmp0_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (!vala_code_node_get_unreachable ((ValaCodeNode*) local)) {
					_tmp4_ = vala_symbol_get_active ((ValaSymbol*) local);
				} else {
					_tmp4_ = FALSE;
				}
				if (_tmp4_) {
					_tmp3_ = !vala_local_variable_get_floating (local);
				} else {
					_tmp3_ = FALSE;
				}
				if (_tmp3_) {
					_tmp2_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					_tmp1_ = vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp5_;
					ValaCCodeExpression* _tmp6_;
					ValaCCodeExpressionStatement* _tmp7_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp7_ = vala_ccode_expression_statement_new (_tmp6_ = vala_ccode_base_module_get_unref_expression (self, _tmp5_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp7_);
					_vala_ccode_node_unref0 (_tmp6_);
					_vala_ccode_node_unref0 (_tmp5_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		char* _tmp8_;
		ValaCCodeIdentifier* _tmp9_;
		ValaCCodeFunctionCall* _tmp10_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp11_;
		ValaCCodeExpression* _tmp12_;
		ValaCCodeExpressionStatement* _tmp13_;
		block_id = vala_ccode_base_module_get_block_id (self, b);
		data_unref = (_tmp10_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new (_tmp8_ = g_strdup_printf ("block%d_data_unref", block_id)))), _vala_ccode_node_unref0 (_tmp9_), _g_free0 (_tmp8_), _tmp10_);
		vala_ccode_function_call_add_argument (data_unref, _tmp12_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp11_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp12_);
		_g_free0 (_tmp11_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp13_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp13_);
		_vala_ccode_node_unref0 (data_unref);
	}
	if (sym == VALA_SYMBOL (vala_try_statement_get_body (current_try))) {
		_vala_collection_object_unref0 (local_vars);
		_vala_code_node_unref0 (b);
		return;
	}
	if (VALA_IS_BLOCK (vala_symbol_get_parent_symbol (sym))) {
		vala_ccode_base_module_append_error_free (self, vala_symbol_get_parent_symbol (sym), cfrag, current_try);
	} else {
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol (sym))) {
			vala_ccode_base_module_append_param_free (self, VALA_METHOD (vala_symbol_get_parent_symbol (sym)), cfrag);
		}
	}
	_vala_collection_object_unref0 (local_vars);
	_vala_code_node_unref0 (b);
}


static void vala_ccode_base_module_append_param_free (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeFragment* cfrag) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (cfrag != NULL);
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _param_it;
		_param_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaFormalParameter* param;
			gboolean _tmp2_ = FALSE;
			gboolean _tmp3_ = FALSE;
			if (!vala_iterator_next (_param_it)) {
				break;
			}
			param = (ValaFormalParameter*) vala_iterator_get (_param_it);
			if (!vala_formal_parameter_get_ellipsis (param)) {
				_tmp3_ = vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) param));
			} else {
				_tmp3_ = FALSE;
			}
			if (_tmp3_) {
				_tmp2_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
			} else {
				_tmp2_ = FALSE;
			}
			if (_tmp2_) {
				ValaMemberAccess* ma;
				ValaDataType* _tmp4_;
				ValaCCodeExpression* _tmp5_;
				ValaCCodeExpression* _tmp6_;
				ValaCCodeExpressionStatement* _tmp7_;
				ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
				vala_expression_set_value_type ((ValaExpression*) ma, _tmp4_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param)));
				_vala_code_node_unref0 (_tmp4_);
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp7_ = vala_ccode_expression_statement_new (_tmp6_ = vala_ccode_base_module_get_unref_expression (self, _tmp5_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param)), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma, FALSE))));
				_vala_ccode_node_unref0 (_tmp7_);
				_vala_ccode_node_unref0 (_tmp6_);
				_vala_ccode_node_unref0 (_tmp5_);
				_vala_code_node_unref0 (ma);
			}
			_vala_code_node_unref0 (param);
		}
		_vala_collection_object_unref0 (_param_it);
	}
}


void vala_ccode_base_module_create_local_free (ValaCCodeBaseModule* self, ValaCodeNode* stmt, gboolean stop_at_loop) {
	ValaCCodeFragment* cfrag;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stmt != NULL);
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_base_module_append_local_free (self, vala_ccode_base_module_get_current_symbol (self), cfrag, stop_at_loop);
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode (stmt));
	vala_code_node_set_ccodenode (stmt, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (cfrag);
}


gboolean vala_ccode_base_module_variable_accessible_in_finally (ValaCCodeBaseModule* self, ValaLocalVariable* local) {
	gboolean result = FALSE;
	ValaSymbol* sym;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (local != NULL, FALSE);
	if (vala_ccode_base_module_get_current_try (self) == NULL) {
		result = FALSE;
		return result;
	}
	sym = _vala_code_node_ref0 (vala_ccode_base_module_get_current_symbol (self));
	while (TRUE) {
		gboolean _tmp0_ = FALSE;
		gboolean _tmp1_ = FALSE;
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		ValaSymbol* _tmp6_;
		if (VALA_IS_METHOD (sym)) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = VALA_IS_PROPERTY_ACCESSOR (sym);
		}
		if (!_tmp1_) {
			ValaSymbol* _tmp2_;
			_tmp0_ = (_tmp2_ = vala_scope_lookup (vala_symbol_get_scope (sym), vala_symbol_get_name ((ValaSymbol*) local))) == NULL;
			_vala_code_node_unref0 (_tmp2_);
		} else {
			_tmp0_ = FALSE;
		}
		if (!_tmp0_) {
			break;
		}
		if (VALA_IS_TRY_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) sym))) {
			_tmp4_ = vala_try_statement_get_finally_body (VALA_TRY_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) sym))) != NULL;
		} else {
			_tmp4_ = FALSE;
		}
		if (_tmp4_) {
			_tmp3_ = TRUE;
		} else {
			gboolean _tmp5_ = FALSE;
			if (VALA_IS_CATCH_CLAUSE (vala_code_node_get_parent_node ((ValaCodeNode*) sym))) {
				_tmp5_ = vala_try_statement_get_finally_body (VALA_TRY_STATEMENT (vala_code_node_get_parent_node (vala_code_node_get_parent_node ((ValaCodeNode*) sym)))) != NULL;
			} else {
				_tmp5_ = FALSE;
			}
			_tmp3_ = _tmp5_;
		}
		if (_tmp3_) {
			result = TRUE;
			_vala_code_node_unref0 (sym);
			return result;
		}
		sym = (_tmp6_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp6_);
	}
	result = FALSE;
	_vala_code_node_unref0 (sym);
	return result;
}


static void vala_ccode_base_module_real_visit_return_statement (ValaCodeVisitor* base, ValaReturnStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaSymbol* return_expression_symbol;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp8_ = FALSE;
	ValaCCodeFragment* cfrag;
	ValaCCodeReturnStatement* creturn;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	return_expression_symbol = NULL;
	if (vala_return_statement_get_return_expression (stmt) != NULL) {
		ValaSymbol* _tmp0_;
		ValaLocalVariable* local;
		gboolean _tmp1_ = FALSE;
		gboolean _tmp2_ = FALSE;
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		local = _vala_code_node_ref0 ((_tmp0_ = vala_expression_get_symbol_reference (vala_return_statement_get_return_expression (stmt)), VALA_IS_LOCAL_VARIABLE (_tmp0_) ? ((ValaLocalVariable*) _tmp0_) : NULL));
		if (vala_data_type_get_value_owned (vala_ccode_base_module_get_current_return_type (self))) {
			_tmp4_ = local != NULL;
		} else {
			_tmp4_ = FALSE;
		}
		if (_tmp4_) {
			_tmp3_ = vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) local));
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			_tmp2_ = !vala_local_variable_get_captured (local);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			_tmp1_ = !vala_ccode_base_module_variable_accessible_in_finally (self, local);
		} else {
			_tmp1_ = FALSE;
		}
		if (_tmp1_) {
			ValaSymbol* _tmp5_;
			return_expression_symbol = (_tmp5_ = _vala_code_node_ref0 ((ValaSymbol*) local), _vala_code_node_unref0 (return_expression_symbol), _tmp5_);
		}
		_vala_code_node_unref0 (local);
	}
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		_tmp8_ = !vala_method_get_no_array_length (vala_ccode_base_module_get_current_method (self));
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		_tmp7_ = TRUE;
	} else {
		_tmp7_ = vala_ccode_base_module_get_current_property_accessor (self) != NULL;
	}
	if (_tmp7_) {
		_tmp6_ = VALA_IS_ARRAY_TYPE (vala_ccode_base_module_get_current_return_type (self));
	} else {
		_tmp6_ = FALSE;
	}
	if (_tmp6_) {
		ValaLocalVariable* return_expr_decl;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeExpression* _tmp9_;
		ValaCCodeAssignment* _tmp10_;
		ValaArrayType* array_type;
		ValaCCodeExpression* _tmp17_;
		return_expr_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_value_type (vala_return_statement_get_return_expression (stmt)), TRUE, (ValaCodeNode*) stmt, FALSE);
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_assignment_new (_tmp9_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) return_expr_decl)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_return_statement_get_return_expression (stmt))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp10_);
		_vala_ccode_node_unref0 (_tmp9_);
		array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_ccode_base_module_get_current_return_type (self)));
		{
			gint dim;
			dim = 1;
			{
				gboolean _tmp11_;
				_tmp11_ = TRUE;
				while (TRUE) {
					char* _tmp12_;
					ValaCCodeExpression* _tmp13_;
					ValaCCodeExpression* len_l;
					gboolean _tmp14_ = FALSE;
					ValaCCodeExpression* len_r;
					ValaCCodeAssignment* _tmp16_;
					if (!_tmp11_) {
						dim++;
					}
					_tmp11_ = FALSE;
					if (!(dim <= vala_array_type_get_rank (array_type))) {
						break;
					}
					len_l = (_tmp13_ = vala_ccode_base_module_get_result_cexpression (self, _tmp12_ = vala_ccode_base_module_get_array_length_cname (self, "result", dim)), _g_free0 (_tmp12_), _tmp13_);
					if (vala_ccode_base_module_get_current_method (self) == NULL) {
						_tmp14_ = TRUE;
					} else {
						_tmp14_ = !vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
					}
					if (_tmp14_) {
						ValaCCodeExpression* _tmp15_;
						len_l = (_tmp15_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, len_l), _vala_ccode_node_unref0 (len_l), _tmp15_);
					}
					len_r = vala_ccode_base_module_get_array_length_cexpression (self, vala_return_statement_get_return_expression (stmt), dim);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_assignment_new (len_l, len_r, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp16_);
					_vala_ccode_node_unref0 (len_r);
					_vala_ccode_node_unref0 (len_l);
				}
			}
		}
		vala_ccode_comma_expression_append_expression (ccomma, _tmp17_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) return_expr_decl)));
		_vala_ccode_node_unref0 (_tmp17_);
		vala_code_node_set_ccodenode ((ValaCodeNode*) vala_return_statement_get_return_expression (stmt), (ValaCCodeNode*) ccomma);
		vala_expression_add_temp_var (vala_return_statement_get_return_expression (stmt), return_expr_decl);
		_vala_code_node_unref0 (array_type);
		_vala_ccode_node_unref0 (ccomma);
		_vala_code_node_unref0 (return_expr_decl);
	} else {
		gboolean _tmp18_ = FALSE;
		gboolean _tmp19_ = FALSE;
		if (vala_ccode_base_module_get_current_method (self) != NULL) {
			_tmp19_ = TRUE;
		} else {
			_tmp19_ = vala_ccode_base_module_get_current_property_accessor (self) != NULL;
		}
		if (_tmp19_) {
			_tmp18_ = VALA_IS_DELEGATE_TYPE (vala_ccode_base_module_get_current_return_type (self));
		} else {
			_tmp18_ = FALSE;
		}
		if (_tmp18_) {
			ValaDelegateType* delegate_type;
			delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_ccode_base_module_get_current_return_type (self)));
			if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
				ValaLocalVariable* return_expr_decl;
				ValaCCodeCommaExpression* ccomma;
				ValaCCodeExpression* _tmp20_;
				ValaCCodeAssignment* _tmp21_;
				char* _tmp22_;
				ValaCCodeExpression* _tmp23_;
				ValaCCodeExpression* target_l;
				gboolean _tmp24_ = FALSE;
				ValaCCodeExpression* target_r_destroy_notify;
				ValaCCodeExpression* _tmp26_ = NULL;
				ValaCCodeExpression* _tmp27_;
				ValaCCodeExpression* _tmp28_;
				ValaCCodeExpression* target_r;
				ValaCCodeAssignment* _tmp29_;
				ValaCCodeExpression* _tmp35_;
				return_expr_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_value_type (vala_return_statement_get_return_expression (stmt)), TRUE, (ValaCodeNode*) stmt, FALSE);
				ccomma = vala_ccode_comma_expression_new ();
				vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_assignment_new (_tmp20_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) return_expr_decl)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_return_statement_get_return_expression (stmt))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp21_);
				_vala_ccode_node_unref0 (_tmp20_);
				target_l = (_tmp23_ = vala_ccode_base_module_get_result_cexpression (self, _tmp22_ = vala_ccode_base_module_get_delegate_target_cname (self, "result")), _g_free0 (_tmp22_), _tmp23_);
				if (vala_ccode_base_module_get_current_method (self) == NULL) {
					_tmp24_ = TRUE;
				} else {
					_tmp24_ = !vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
				}
				if (_tmp24_) {
					ValaCCodeExpression* _tmp25_;
					target_l = (_tmp25_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, target_l), _vala_ccode_node_unref0 (target_l), _tmp25_);
				}
				target_r_destroy_notify = NULL;
				target_r = (_tmp27_ = vala_ccode_base_module_get_delegate_target_cexpression (self, vala_return_statement_get_return_expression (stmt), &_tmp26_), target_r_destroy_notify = (_tmp28_ = _tmp26_, _vala_ccode_node_unref0 (target_r_destroy_notify), _tmp28_), _tmp27_);
				vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp29_ = vala_ccode_assignment_new (target_l, target_r, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp29_);
				if (vala_data_type_get_value_owned ((ValaDataType*) delegate_type)) {
					char* _tmp30_;
					ValaCCodeExpression* _tmp31_;
					ValaCCodeExpression* target_l_destroy_notify;
					gboolean _tmp32_ = FALSE;
					ValaCCodeAssignment* _tmp34_;
					target_l_destroy_notify = (_tmp31_ = vala_ccode_base_module_get_result_cexpression (self, _tmp30_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, "result")), _g_free0 (_tmp30_), _tmp31_);
					if (vala_ccode_base_module_get_current_method (self) == NULL) {
						_tmp32_ = TRUE;
					} else {
						_tmp32_ = !vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
					}
					if (_tmp32_) {
						ValaCCodeExpression* _tmp33_;
						target_l_destroy_notify = (_tmp33_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, target_l_destroy_notify), _vala_ccode_node_unref0 (target_l_destroy_notify), _tmp33_);
					}
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp34_ = vala_ccode_assignment_new (target_l_destroy_notify, target_r_destroy_notify, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp34_);
					_vala_ccode_node_unref0 (target_l_destroy_notify);
				}
				vala_ccode_comma_expression_append_expression (ccomma, _tmp35_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) return_expr_decl)));
				_vala_ccode_node_unref0 (_tmp35_);
				vala_code_node_set_ccodenode ((ValaCodeNode*) vala_return_statement_get_return_expression (stmt), (ValaCCodeNode*) ccomma);
				vala_expression_add_temp_var (vala_return_statement_get_return_expression (stmt), return_expr_decl);
				_vala_ccode_node_unref0 (target_r);
				_vala_ccode_node_unref0 (target_r_destroy_notify);
				_vala_ccode_node_unref0 (target_l);
				_vala_ccode_node_unref0 (ccomma);
				_vala_code_node_unref0 (return_expr_decl);
			}
			_vala_code_node_unref0 (delegate_type);
		}
	}
	cfrag = vala_ccode_fragment_new ();
	if (vala_return_statement_get_return_expression (stmt) != NULL) {
		ValaCCodeExpression* result_lhs;
		gboolean _tmp36_ = FALSE;
		ValaCCodeAssignment* _tmp39_;
		ValaCCodeExpressionStatement* _tmp40_;
		result_lhs = vala_ccode_base_module_get_result_cexpression (self, "result");
		if (vala_data_type_is_real_non_null_struct_type (vala_ccode_base_module_get_current_return_type (self))) {
			gboolean _tmp37_ = FALSE;
			if (vala_ccode_base_module_get_current_method (self) == NULL) {
				_tmp37_ = TRUE;
			} else {
				_tmp37_ = !vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
			}
			_tmp36_ = _tmp37_;
		} else {
			_tmp36_ = FALSE;
		}
		if (_tmp36_) {
			ValaCCodeExpression* _tmp38_;
			result_lhs = (_tmp38_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, result_lhs), _vala_ccode_node_unref0 (result_lhs), _tmp38_);
		}
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp40_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp39_ = vala_ccode_assignment_new (result_lhs, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_return_statement_get_return_expression (stmt))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
		_vala_ccode_node_unref0 (_tmp40_);
		_vala_ccode_node_unref0 (_tmp39_);
		_vala_ccode_node_unref0 (result_lhs);
	}
	vala_ccode_base_module_append_local_free (self, vala_ccode_base_module_get_current_symbol (self), cfrag, FALSE);
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		{
			ValaList* _tmp41_;
			ValaIterator* _tmp42_;
			ValaIterator* _postcondition_it;
			_postcondition_it = (_tmp42_ = vala_iterable_iterator ((ValaIterable*) (_tmp41_ = vala_method_get_postconditions (vala_ccode_base_module_get_current_method (self)))), _vala_collection_object_unref0 (_tmp41_), _tmp42_);
			while (TRUE) {
				ValaExpression* postcondition;
				ValaCCodeStatement* _tmp43_;
				if (!vala_iterator_next (_postcondition_it)) {
					break;
				}
				postcondition = (ValaExpression*) vala_iterator_get (_postcondition_it);
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp43_ = vala_ccode_base_module_create_postcondition_statement (self, postcondition)));
				_vala_ccode_node_unref0 (_tmp43_);
				_vala_code_node_unref0 (postcondition);
			}
			_vala_collection_object_unref0 (_postcondition_it);
		}
	}
	creturn = NULL;
	if (VALA_IS_CREATION_METHOD (vala_ccode_base_module_get_current_method (self))) {
		ValaCCodeIdentifier* _tmp44_;
		ValaCCodeReturnStatement* _tmp45_;
		creturn = (_tmp45_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp44_ = vala_ccode_identifier_new ("self"))), _vala_ccode_node_unref0 (creturn), _tmp45_);
		_vala_ccode_node_unref0 (_tmp44_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) creturn);
	} else {
		gboolean _tmp46_ = FALSE;
		if (vala_ccode_base_module_get_current_method (self) != NULL) {
			_tmp46_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
		} else {
			_tmp46_ = FALSE;
		}
		if (_tmp46_) {
		} else {
			gboolean _tmp47_ = FALSE;
			if (VALA_IS_VOID_TYPE (vala_ccode_base_module_get_current_return_type (self))) {
				_tmp47_ = TRUE;
			} else {
				_tmp47_ = vala_data_type_is_real_non_null_struct_type (vala_ccode_base_module_get_current_return_type (self));
			}
			if (_tmp47_) {
				ValaCCodeReturnStatement* _tmp48_;
				creturn = (_tmp48_ = vala_ccode_return_statement_new (NULL), _vala_ccode_node_unref0 (creturn), _tmp48_);
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) creturn);
			} else {
				ValaCCodeIdentifier* _tmp49_;
				ValaCCodeReturnStatement* _tmp50_;
				creturn = (_tmp50_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp49_ = vala_ccode_identifier_new ("result"))), _vala_ccode_node_unref0 (creturn), _tmp50_);
				_vala_ccode_node_unref0 (_tmp49_);
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) creturn);
			}
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	if (creturn != NULL) {
		vala_ccode_node_set_line ((ValaCCodeNode*) creturn, vala_ccode_node_get_line (vala_code_node_get_ccodenode ((ValaCodeNode*) stmt)));
	}
	if (vala_return_statement_get_return_expression (stmt) != NULL) {
		vala_ccode_base_module_create_temp_decl (self, (ValaStatement*) stmt, (ValaList*) vala_return_statement_get_return_expression (stmt)->temp_vars);
	}
	if (return_expression_symbol != NULL) {
		vala_symbol_set_active (return_expression_symbol, TRUE);
	}
	_vala_ccode_node_unref0 (creturn);
	_vala_ccode_node_unref0 (cfrag);
	_vala_code_node_unref0 (return_expression_symbol);
}


char* vala_ccode_base_module_get_symbol_lock_name (ValaCCodeBaseModule* self, const char* symname) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (symname != NULL, NULL);
	result = g_strdup_printf ("__lock_%s", symname);
	return result;
}


static ValaCCodeExpression* vala_ccode_base_module_get_lock_expression (ValaCCodeBaseModule* self, ValaStatement* stmt, ValaExpression* resource) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* l;
	ValaExpression* inner_node;
	ValaSymbol* member;
	ValaTypeSymbol* parent;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (stmt != NULL, NULL);
	g_return_val_if_fail (resource != NULL, NULL);
	l = NULL;
	inner_node = _vala_code_node_ref0 (vala_member_access_get_inner (VALA_MEMBER_ACCESS (resource)));
	member = _vala_code_node_ref0 (vala_expression_get_symbol_reference (resource));
	parent = _vala_code_node_ref0 (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol (vala_expression_get_symbol_reference (resource))));
	if (vala_symbol_is_instance_member (member)) {
		ValaCCodeMemberAccess* _tmp3_;
		char* _tmp4_;
		ValaCCodeExpression* _tmp5_;
		if (inner_node == NULL) {
			ValaCCodeExpression* _tmp0_;
			l = (_tmp0_ = (ValaCCodeExpression*) vala_ccode_identifier_new ("self"), _vala_ccode_node_unref0 (l), _tmp0_);
		} else {
			if (vala_symbol_get_parent_symbol (vala_expression_get_symbol_reference (resource)) != VALA_SYMBOL (vala_ccode_base_module_get_current_type_symbol (self))) {
				ValaCCodeExpression* _tmp1_;
				l = (_tmp1_ = (ValaCCodeExpression*) vala_ccode_base_module_generate_instance_cast (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) inner_node)), parent), _vala_ccode_node_unref0 (l), _tmp1_);
			} else {
				ValaCCodeExpression* _tmp2_;
				l = (_tmp2_ = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) inner_node))), _vala_ccode_node_unref0 (l), _tmp2_);
			}
		}
		l = (_tmp5_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_member_access_new_pointer (l, "priv")), _tmp4_ = vala_ccode_base_module_get_symbol_lock_name (self, vala_symbol_get_name (vala_expression_get_symbol_reference (resource)))), _vala_ccode_node_unref0 (l), _tmp5_);
		_g_free0 (_tmp4_);
		_vala_ccode_node_unref0 (_tmp3_);
	} else {
		if (vala_symbol_is_class_member (member)) {
			ValaCCodeExpression* klass;
			gboolean _tmp6_ = FALSE;
			gboolean _tmp7_ = FALSE;
			gboolean _tmp8_ = FALSE;
			char* _tmp16_;
			char* _tmp17_;
			ValaCCodeIdentifier* _tmp18_;
			ValaCCodeFunctionCall* _tmp19_;
			ValaCCodeFunctionCall* get_class_private_call;
			char* _tmp20_;
			ValaCCodeExpression* _tmp21_;
			klass = NULL;
			if (vala_ccode_base_module_get_current_method (self) != NULL) {
				_tmp8_ = vala_method_get_binding (vala_ccode_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
			} else {
				_tmp8_ = FALSE;
			}
			if (_tmp8_) {
				_tmp7_ = TRUE;
			} else {
				gboolean _tmp9_ = FALSE;
				if (vala_ccode_base_module_get_current_property_accessor (self) != NULL) {
					_tmp9_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_ccode_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp9_ = FALSE;
				}
				_tmp7_ = _tmp9_;
			}
			if (_tmp7_) {
				_tmp6_ = TRUE;
			} else {
				gboolean _tmp10_ = FALSE;
				if (self->in_constructor) {
					_tmp10_ = !self->in_static_or_class_context;
				} else {
					_tmp10_ = FALSE;
				}
				_tmp6_ = _tmp10_;
			}
			if (_tmp6_) {
				ValaCCodeIdentifier* _tmp11_;
				ValaCCodeFunctionCall* _tmp12_;
				ValaCCodeFunctionCall* k;
				ValaCCodeIdentifier* _tmp13_;
				ValaCCodeExpression* _tmp14_;
				k = (_tmp12_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("G_OBJECT_GET_CLASS"))), _vala_ccode_node_unref0 (_tmp11_), _tmp12_);
				vala_ccode_function_call_add_argument (k, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp13_);
				klass = (_tmp14_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) k), _vala_ccode_node_unref0 (klass), _tmp14_);
				_vala_ccode_node_unref0 (k);
			} else {
				ValaCCodeExpression* _tmp15_;
				klass = (_tmp15_ = (ValaCCodeExpression*) vala_ccode_identifier_new ("klass"), _vala_ccode_node_unref0 (klass), _tmp15_);
			}
			get_class_private_call = (_tmp19_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp18_ = vala_ccode_identifier_new (_tmp17_ = g_strdup_printf ("%s_GET_CLASS_PRIVATE", _tmp16_ = vala_typesymbol_get_upper_case_cname (parent, NULL))))), _vala_ccode_node_unref0 (_tmp18_), _g_free0 (_tmp17_), _g_free0 (_tmp16_), _tmp19_);
			vala_ccode_function_call_add_argument (get_class_private_call, klass);
			l = (_tmp21_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) get_class_private_call, _tmp20_ = vala_ccode_base_module_get_symbol_lock_name (self, vala_symbol_get_name (vala_expression_get_symbol_reference (resource)))), _vala_ccode_node_unref0 (l), _tmp21_);
			_g_free0 (_tmp20_);
			_vala_ccode_node_unref0 (get_class_private_call);
			_vala_ccode_node_unref0 (klass);
		} else {
			char* _tmp22_;
			char* _tmp23_;
			char* lock_name;
			char* _tmp24_;
			ValaCCodeExpression* _tmp25_;
			lock_name = (_tmp23_ = g_strdup_printf ("%s_%s", _tmp22_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) parent, NULL), vala_symbol_get_name (vala_expression_get_symbol_reference (resource))), _g_free0 (_tmp22_), _tmp23_);
			l = (_tmp25_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp24_ = vala_ccode_base_module_get_symbol_lock_name (self, lock_name)), _vala_ccode_node_unref0 (l), _tmp25_);
			_g_free0 (_tmp24_);
			_g_free0 (lock_name);
		}
	}
	result = l;
	_vala_code_node_unref0 (parent);
	_vala_code_node_unref0 (member);
	_vala_code_node_unref0 (inner_node);
	return result;
}


static void vala_ccode_base_module_real_visit_lock_statement (ValaCodeVisitor* base, ValaLockStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* l;
	ValaMethod* _tmp0_;
	char* _tmp1_;
	ValaCCodeIdentifier* _tmp2_;
	ValaCCodeFunctionCall* _tmp3_;
	ValaCCodeFunctionCall* fc;
	ValaCCodeUnaryExpression* _tmp4_;
	ValaCCodeFragment* cn;
	ValaCCodeExpressionStatement* _tmp5_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	l = vala_ccode_base_module_get_lock_expression (self, (ValaStatement*) stmt, vala_lock_statement_get_resource (stmt));
	fc = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_method_get_cname (_tmp0_ = VALA_METHOD (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) self->mutex_type), "lock")))))), _vala_ccode_node_unref0 (_tmp2_), _g_free0 (_tmp1_), _vala_code_node_unref0 (_tmp0_), _tmp3_);
	vala_ccode_function_call_add_argument (fc, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, l)));
	_vala_ccode_node_unref0 (_tmp4_);
	cn = vala_ccode_fragment_new ();
	vala_ccode_fragment_append (cn, (ValaCCodeNode*) (_tmp5_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) fc)));
	_vala_ccode_node_unref0 (_tmp5_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cn);
	_vala_ccode_node_unref0 (cn);
	_vala_ccode_node_unref0 (fc);
	_vala_ccode_node_unref0 (l);
}


static void vala_ccode_base_module_real_visit_unlock_statement (ValaCodeVisitor* base, ValaUnlockStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* l;
	ValaMethod* _tmp0_;
	char* _tmp1_;
	ValaCCodeIdentifier* _tmp2_;
	ValaCCodeFunctionCall* _tmp3_;
	ValaCCodeFunctionCall* fc;
	ValaCCodeUnaryExpression* _tmp4_;
	ValaCCodeFragment* cn;
	ValaCCodeExpressionStatement* _tmp5_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	l = vala_ccode_base_module_get_lock_expression (self, (ValaStatement*) stmt, vala_unlock_statement_get_resource (stmt));
	fc = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_method_get_cname (_tmp0_ = VALA_METHOD (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) self->mutex_type), "unlock")))))), _vala_ccode_node_unref0 (_tmp2_), _g_free0 (_tmp1_), _vala_code_node_unref0 (_tmp0_), _tmp3_);
	vala_ccode_function_call_add_argument (fc, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, l)));
	_vala_ccode_node_unref0 (_tmp4_);
	cn = vala_ccode_fragment_new ();
	vala_ccode_fragment_append (cn, (ValaCCodeNode*) (_tmp5_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) fc)));
	_vala_ccode_node_unref0 (_tmp5_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cn);
	_vala_ccode_node_unref0 (cn);
	_vala_ccode_node_unref0 (fc);
	_vala_ccode_node_unref0 (l);
}


static void vala_ccode_base_module_real_visit_delete_statement (ValaCodeVisitor* base, ValaDeleteStatement* stmt) {
	ValaCCodeBaseModule * self;
	ValaPointerType* pointer_type;
	ValaDataType* type;
	gboolean _tmp0_ = FALSE;
	ValaCCodeExpression* _tmp2_;
	ValaCCodeFunctionCall* _tmp3_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeExpressionStatement* _tmp4_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (vala_expression_get_value_type (vala_delete_statement_get_expression (stmt))));
	type = _vala_code_node_ref0 ((ValaDataType*) pointer_type);
	if (vala_data_type_get_data_type (vala_pointer_type_get_base_type (pointer_type)) != NULL) {
		_tmp0_ = vala_typesymbol_is_reference_type (vala_data_type_get_data_type (vala_pointer_type_get_base_type (pointer_type)));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaDataType* _tmp1_;
		type = (_tmp1_ = _vala_code_node_ref0 (vala_pointer_type_get_base_type (pointer_type)), _vala_code_node_unref0 (type), _tmp1_);
	}
	ccall = (_tmp3_ = vala_ccode_function_call_new (_tmp2_ = vala_ccode_base_module_get_destroy_func_expression (self, type, FALSE)), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	vala_ccode_function_call_add_argument (ccall, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_delete_statement_get_expression (stmt))));
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp4_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccall)));
	_vala_ccode_node_unref0 (_tmp4_);
	_vala_ccode_node_unref0 (ccall);
	_vala_code_node_unref0 (type);
	_vala_code_node_unref0 (pointer_type);
}


static void vala_ccode_base_module_real_visit_expression (ValaCodeVisitor* base, ValaExpression* expr) {
	ValaCCodeBaseModule * self;
	gboolean _tmp0_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_code_node_get_ccodenode ((ValaCodeNode*) expr) != NULL) {
		_tmp0_ = !vala_expression_get_lvalue (expr);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		gboolean _tmp1_ = FALSE;
		ValaCCodeExpression* _tmp7_;
		gboolean _tmp8_ = FALSE;
		if (VALA_IS_GENERIC_TYPE (vala_expression_get_formal_value_type (expr))) {
			_tmp1_ = !VALA_IS_GENERIC_TYPE (vala_expression_get_value_type (expr));
		} else {
			_tmp1_ = FALSE;
		}
		if (_tmp1_) {
			ValaSymbol* _tmp2_;
			ValaStruct* st;
			gboolean _tmp3_ = FALSE;
			st = _vala_code_node_ref0 ((_tmp2_ = vala_symbol_get_parent_symbol (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (vala_expression_get_formal_value_type (expr)))), VALA_IS_STRUCT (_tmp2_) ? ((ValaStruct*) _tmp2_) : NULL));
			if (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (vala_expression_get_formal_value_type (expr))) != VALA_SYMBOL (self->garray_type)) {
				gboolean _tmp4_ = FALSE;
				if (st == NULL) {
					_tmp4_ = TRUE;
				} else {
					char* _tmp5_;
					_tmp4_ = _vala_strcmp0 (_tmp5_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "va_list") != 0;
					_g_free0 (_tmp5_);
				}
				_tmp3_ = _tmp4_;
			} else {
				_tmp3_ = FALSE;
			}
			if (_tmp3_) {
				ValaCCodeExpression* _tmp6_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp6_ = vala_ccode_base_module_convert_from_generic_pointer (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), vala_expression_get_value_type (expr))));
				_vala_ccode_node_unref0 (_tmp6_);
			}
			_vala_code_node_unref0 (st);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp7_ = vala_ccode_base_module_transform_expression (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), vala_expression_get_value_type (expr), vala_expression_get_target_type (expr), expr)));
		_vala_ccode_node_unref0 (_tmp7_);
		if (VALA_IS_GENERIC_TYPE (vala_expression_get_formal_target_type (expr))) {
			_tmp8_ = !VALA_IS_GENERIC_TYPE (vala_expression_get_target_type (expr));
		} else {
			_tmp8_ = FALSE;
		}
		if (_tmp8_) {
			if (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (vala_expression_get_formal_target_type (expr))) != VALA_SYMBOL (self->garray_type)) {
				ValaCCodeExpression* _tmp9_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp9_ = vala_ccode_base_module_convert_to_generic_pointer (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), vala_expression_get_target_type (expr))));
				_vala_ccode_node_unref0 (_tmp9_);
			}
		}
	}
}


static void vala_ccode_base_module_real_visit_boolean_literal (ValaCodeVisitor* base, ValaBooleanLiteral* expr) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		const char* _tmp0_;
		ValaCCodeConstant* _tmp1_;
		_tmp0_ = NULL;
		if (vala_boolean_literal_get_value (expr)) {
			_tmp0_ = "TRUE";
		} else {
			_tmp0_ = "FALSE";
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new (_tmp0_)));
		_vala_ccode_node_unref0 (_tmp1_);
	} else {
		const char* _tmp2_;
		ValaCCodeConstant* _tmp3_;
		vala_ccode_declaration_space_add_include (self->source_declarations, "stdbool.h", FALSE);
		_tmp2_ = NULL;
		if (vala_boolean_literal_get_value (expr)) {
			_tmp2_ = "true";
		} else {
			_tmp2_ = "false";
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp3_ = vala_ccode_constant_new (_tmp2_)));
		_vala_ccode_node_unref0 (_tmp3_);
	}
}


static void vala_ccode_base_module_real_visit_character_literal (ValaCodeVisitor* base, ValaCharacterLiteral* expr) {
	ValaCCodeBaseModule * self;
	gboolean _tmp0_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_character_literal_get_char (expr) >= 0x20) {
		_tmp0_ = vala_character_literal_get_char (expr) < 0x80;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeConstant* _tmp1_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new (vala_character_literal_get_value (expr))));
		_vala_ccode_node_unref0 (_tmp1_);
	} else {
		char* _tmp2_;
		ValaCCodeConstant* _tmp3_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp3_ = vala_ccode_constant_new (_tmp2_ = g_strdup_printf ("%uU", (guint) vala_character_literal_get_char (expr)))));
		_vala_ccode_node_unref0 (_tmp3_);
		_g_free0 (_tmp2_);
	}
}


static void vala_ccode_base_module_real_visit_integer_literal (ValaCodeVisitor* base, ValaIntegerLiteral* expr) {
	ValaCCodeBaseModule * self;
	char* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new (_tmp0_ = g_strconcat (vala_integer_literal_get_value (expr), vala_integer_literal_get_type_suffix (expr), NULL))));
	_vala_ccode_node_unref0 (_tmp1_);
	_g_free0 (_tmp0_);
}


static char* string_substring (const char* self, glong offset, glong len) {
	char* result = NULL;
	glong string_length;
	const char* start;
	g_return_val_if_fail (self != NULL, NULL);
	string_length = string_get_length (self);
	if (offset < 0) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= 0, NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < 0) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	start = g_utf8_offset_to_pointer (self, offset);
	result = g_strndup (start, ((gchar*) g_utf8_offset_to_pointer (start, len)) - ((gchar*) start));
	return result;
}


static gboolean string_contains (const char* self, const char* needle) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	result = strstr (self, needle) != NULL;
	return result;
}


static void vala_ccode_base_module_real_visit_real_literal (ValaCodeVisitor* base, ValaRealLiteral* expr) {
	ValaCCodeBaseModule * self;
	char* c_literal;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	ValaCCodeConstant* _tmp8_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	c_literal = g_strdup (vala_real_literal_get_value (expr));
	if (g_str_has_suffix (c_literal, "d")) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = g_str_has_suffix (c_literal, "D");
	}
	if (_tmp0_) {
		char* _tmp1_;
		c_literal = (_tmp1_ = string_substring (c_literal, (glong) 0, string_get_length (c_literal) - 1), _g_free0 (c_literal), _tmp1_);
	}
	if (string_contains (c_literal, ".")) {
		_tmp3_ = TRUE;
	} else {
		_tmp3_ = string_contains (c_literal, "e");
	}
	if (_tmp3_) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = string_contains (c_literal, "E");
	}
	if (!_tmp2_) {
		gboolean _tmp4_ = FALSE;
		if (string_contains (c_literal, "f")) {
			_tmp4_ = TRUE;
		} else {
			_tmp4_ = string_contains (c_literal, "F");
		}
		if (_tmp4_) {
			char* _tmp5_;
			char* _tmp6_;
			c_literal = (_tmp6_ = g_strconcat (_tmp5_ = string_substring (c_literal, (glong) 0, string_get_length (c_literal) - 1), ".f", NULL), _g_free0 (c_literal), _tmp6_);
			_g_free0 (_tmp5_);
		} else {
			char* _tmp7_;
			c_literal = (_tmp7_ = g_strconcat (c_literal, ".", NULL), _g_free0 (c_literal), _tmp7_);
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp8_ = vala_ccode_constant_new (c_literal)));
	_vala_ccode_node_unref0 (_tmp8_);
	_g_free0 (c_literal);
}


static char* string_replace (const char* self, const char* old, const char* replacement) {
	char* result = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	{
		char* _tmp0_;
		GRegex* _tmp1_;
		GRegex* regex;
		char* _tmp2_;
		regex = (_tmp1_ = g_regex_new (_tmp0_ = g_regex_escape_string (old, -1), 0, 0, &_inner_error_), _g_free0 (_tmp0_), _tmp1_);
		if (_inner_error_ != NULL) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp2_ = g_regex_replace_literal (regex, self, (gssize) (-1), 0, replacement, 0, &_inner_error_);
		if (_inner_error_ != NULL) {
			_g_regex_unref0 (regex);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			_g_regex_unref0 (regex);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		result = _tmp2_;
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally0;
	__catch0_g_regex_error:
	{
		GError * e;
		e = _inner_error_;
		_inner_error_ = NULL;
		{
			g_assert_not_reached ();
			_g_error_free0 (e);
		}
	}
	__finally0:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


static void vala_ccode_base_module_real_visit_string_literal (ValaCodeVisitor* base, ValaStringLiteral* expr) {
	ValaCCodeBaseModule * self;
	char* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new_string (_tmp0_ = string_replace (vala_string_literal_get_value (expr), "\n", "\\n"))));
	_vala_ccode_node_unref0 (_tmp1_);
	_g_free0 (_tmp0_);
}


static void vala_ccode_base_module_real_visit_regex_literal (ValaCodeVisitor* base, ValaRegexLiteral* expr) {
	ValaCCodeBaseModule * self;
	gint parts_length1;
	gint _parts_size_;
	char** _tmp1_;
	char** _tmp0_;
	char** parts;
	char* re;
	char* flags;
	ValaLocalVariable* regex_var;
	ValaCCodeDeclaration* _cdecl_;
	char* _tmp6_;
	char* _tmp7_;
	char* _tmp8_;
	char* cname;
	char* _tmp32_;
	ValaCCodeVariableDeclarator* _tmp33_;
	char* _tmp34_;
	ValaCCodeConstant* _tmp35_;
	ValaCCodeConstant* regex_const;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	parts = (_tmp1_ = _tmp0_ = g_strsplit (vala_regex_literal_get_value (expr), "/", 3), parts_length1 = _vala_array_length (_tmp0_), _parts_size_ = parts_length1, _tmp1_);
	re = g_strescape (parts[2], "");
	flags = g_strdup ("0");
	if (string_contains (parts[1], "i")) {
		char* _tmp2_;
		flags = (_tmp2_ = g_strconcat (flags, " | G_REGEX_CASELESS", NULL), _g_free0 (flags), _tmp2_);
	}
	if (string_contains (parts[1], "m")) {
		char* _tmp3_;
		flags = (_tmp3_ = g_strconcat (flags, " | G_REGEX_MULTILINE", NULL), _g_free0 (flags), _tmp3_);
	}
	if (string_contains (parts[1], "s")) {
		char* _tmp4_;
		flags = (_tmp4_ = g_strconcat (flags, " | G_REGEX_DOTALL", NULL), _g_free0 (flags), _tmp4_);
	}
	if (string_contains (parts[1], "x")) {
		char* _tmp5_;
		flags = (_tmp5_ = g_strconcat (flags, " | G_REGEX_EXTENDED", NULL), _g_free0 (flags), _tmp5_);
	}
	regex_var = vala_ccode_base_module_get_temp_variable (self, self->regex_type, TRUE, (ValaCodeNode*) expr, FALSE);
	vala_expression_add_temp_var ((ValaExpression*) expr, regex_var);
	_cdecl_ = vala_ccode_declaration_new ("GRegex*");
	cname = (_tmp8_ = g_strconcat (_tmp6_ = g_strconcat (vala_symbol_get_name ((ValaSymbol*) regex_var), "regex_", NULL), _tmp7_ = g_strdup_printf ("%i", self->next_regex_id), NULL), _g_free0 (_tmp7_), _g_free0 (_tmp6_), _tmp8_);
	if (self->next_regex_id == 0) {
		ValaCCodeFunction* fun;
		ValaCCodeFormalParameter* _tmp9_;
		ValaCCodeFormalParameter* _tmp10_;
		ValaCCodeFormalParameter* _tmp11_;
		ValaCCodeBlock* _tmp12_;
		ValaCCodeIdentifier* _tmp13_;
		ValaCCodeFunctionCall* _tmp14_;
		ValaCCodeFunctionCall* once_enter_call;
		ValaCCodeConstant* _tmp15_;
		ValaCCodeBlock* if_block;
		ValaCCodeIdentifier* _tmp16_;
		ValaCCodeFunctionCall* _tmp17_;
		ValaCCodeFunctionCall* regex_new_call;
		ValaCCodeConstant* _tmp18_;
		ValaCCodeConstant* _tmp19_;
		ValaCCodeConstant* _tmp20_;
		ValaCCodeConstant* _tmp21_;
		ValaCCodeIdentifier* _tmp22_;
		ValaCCodeAssignment* _tmp23_;
		ValaCCodeExpressionStatement* _tmp24_;
		ValaCCodeIdentifier* _tmp25_;
		ValaCCodeFunctionCall* _tmp26_;
		ValaCCodeFunctionCall* once_leave_call;
		ValaCCodeConstant* _tmp27_;
		ValaCCodeConstant* _tmp28_;
		ValaCCodeExpressionStatement* _tmp29_;
		ValaCCodeIfStatement* if_stat;
		ValaCCodeIdentifier* _tmp30_;
		ValaCCodeReturnStatement* _tmp31_;
		fun = vala_ccode_function_new ("_thread_safe_regex_init", "GRegex*");
		vala_ccode_function_set_modifiers (fun, VALA_CCODE_MODIFIERS_STATIC | VALA_CCODE_MODIFIERS_INLINE);
		vala_ccode_function_add_parameter (fun, _tmp9_ = vala_ccode_formal_parameter_new ("re", "GRegex**"));
		_vala_ccode_node_unref0 (_tmp9_);
		vala_ccode_function_add_parameter (fun, _tmp10_ = vala_ccode_formal_parameter_new ("pattern", "const gchar *"));
		_vala_ccode_node_unref0 (_tmp10_);
		vala_ccode_function_add_parameter (fun, _tmp11_ = vala_ccode_formal_parameter_new ("match_options", "GRegexMatchFlags"));
		_vala_ccode_node_unref0 (_tmp11_);
		vala_ccode_function_set_block (fun, _tmp12_ = vala_ccode_block_new ());
		_vala_ccode_node_unref0 (_tmp12_);
		once_enter_call = (_tmp14_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new ("g_once_init_enter"))), _vala_ccode_node_unref0 (_tmp13_), _tmp14_);
		vala_ccode_function_call_add_argument (once_enter_call, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_constant_new ("(volatile gsize*) re")));
		_vala_ccode_node_unref0 (_tmp15_);
		if_block = vala_ccode_block_new ();
		regex_new_call = (_tmp17_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp16_ = vala_ccode_identifier_new ("g_regex_new"))), _vala_ccode_node_unref0 (_tmp16_), _tmp17_);
		vala_ccode_function_call_add_argument (regex_new_call, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("pattern")));
		_vala_ccode_node_unref0 (_tmp18_);
		vala_ccode_function_call_add_argument (regex_new_call, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_constant_new ("match_options")));
		_vala_ccode_node_unref0 (_tmp19_);
		vala_ccode_function_call_add_argument (regex_new_call, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp20_);
		vala_ccode_function_call_add_argument (regex_new_call, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp21_);
		vala_ccode_block_add_statement (if_block, (ValaCCodeNode*) (_tmp24_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp22_ = vala_ccode_identifier_new ("GRegex* val")), (ValaCCodeExpression*) regex_new_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
		_vala_ccode_node_unref0 (_tmp24_);
		_vala_ccode_node_unref0 (_tmp23_);
		_vala_ccode_node_unref0 (_tmp22_);
		once_leave_call = (_tmp26_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new ("g_once_init_leave"))), _vala_ccode_node_unref0 (_tmp25_), _tmp26_);
		vala_ccode_function_call_add_argument (once_leave_call, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_constant_new ("(volatile gsize*) re")));
		_vala_ccode_node_unref0 (_tmp27_);
		vala_ccode_function_call_add_argument (once_leave_call, (ValaCCodeExpression*) (_tmp28_ = vala_ccode_constant_new ("(gsize) val")));
		_vala_ccode_node_unref0 (_tmp28_);
		vala_ccode_block_add_statement (if_block, (ValaCCodeNode*) (_tmp29_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) once_leave_call)));
		_vala_ccode_node_unref0 (_tmp29_);
		if_stat = vala_ccode_if_statement_new ((ValaCCodeExpression*) once_enter_call, (ValaCCodeStatement*) if_block, NULL);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (fun), (ValaCCodeNode*) if_stat);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (fun), (ValaCCodeNode*) (_tmp31_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new ("*re")))));
		_vala_ccode_node_unref0 (_tmp31_);
		_vala_ccode_node_unref0 (_tmp30_);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) fun);
		_vala_ccode_node_unref0 (if_stat);
		_vala_ccode_node_unref0 (once_leave_call);
		_vala_ccode_node_unref0 (regex_new_call);
		_vala_ccode_node_unref0 (if_block);
		_vala_ccode_node_unref0 (once_enter_call);
		_vala_ccode_node_unref0 (fun);
	}
	self->next_regex_id++;
	vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp33_ = vala_ccode_variable_declarator_new (_tmp32_ = g_strconcat (cname, " = NULL", NULL), NULL, NULL)));
	_vala_ccode_node_unref0 (_tmp33_);
	_g_free0 (_tmp32_);
	vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
	regex_const = (_tmp35_ = vala_ccode_constant_new (_tmp34_ = g_strdup_printf ("_thread_safe_regex_init (&%s, \"%s\", %s)", cname, re, flags)), _g_free0 (_tmp34_), _tmp35_);
	vala_ccode_declaration_space_add_constant_declaration (self->source_declarations, (ValaCCodeNode*) _cdecl_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) regex_const);
	_vala_ccode_node_unref0 (regex_const);
	_g_free0 (cname);
	_vala_ccode_node_unref0 (_cdecl_);
	_vala_code_node_unref0 (regex_var);
	_g_free0 (flags);
	_g_free0 (re);
	parts = (_vala_array_free (parts, parts_length1, (GDestroyNotify) g_free), NULL);
}


static void vala_ccode_base_module_real_visit_null_literal (ValaCodeVisitor* base, ValaNullLiteral* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeConstant* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_code_context_get_profile (self->priv->_context) != VALA_PROFILE_GOBJECT) {
		vala_ccode_declaration_space_add_include (self->source_declarations, "stddef.h", FALSE);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_constant_new ("NULL")));
	_vala_ccode_node_unref0 (_tmp0_);
}


static char* vala_ccode_base_module_real_get_delegate_target_cname (ValaCCodeBaseModule* self, const char* delegate_cname) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (delegate_cname != NULL, NULL);
	g_assert_not_reached ();
	return result;
}


char* vala_ccode_base_module_get_delegate_target_cname (ValaCCodeBaseModule* self, const char* delegate_cname) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_delegate_target_cname (self, delegate_cname);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_delegate_target_cexpression (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (delegate_expr != NULL, NULL);
	if (delegate_target_destroy_notify != NULL) {
		*delegate_target_destroy_notify = NULL;
	}
	g_assert_not_reached ();
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_delegate_target_cexpression (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_delegate_target_cexpression (self, delegate_expr, delegate_target_destroy_notify);
}


static char* vala_ccode_base_module_real_get_delegate_target_destroy_notify_cname (ValaCCodeBaseModule* self, const char* delegate_cname) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (delegate_cname != NULL, NULL);
	g_assert_not_reached ();
	return result;
}


char* vala_ccode_base_module_get_delegate_target_destroy_notify_cname (ValaCCodeBaseModule* self, const char* delegate_cname) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_delegate_target_destroy_notify_cname (self, delegate_cname);
}


static void vala_ccode_base_module_real_visit_base_access (ValaCodeVisitor* base, ValaBaseAccess* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* this_access;
	gboolean _tmp0_ = FALSE;
	ValaCCodeFunctionCall* _tmp4_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	this_access = NULL;
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		_tmp0_ = vala_method_get_coroutine (vala_ccode_base_module_get_current_method (self));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeIdentifier* _tmp1_;
		ValaCCodeExpression* _tmp2_;
		this_access = (_tmp2_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_identifier_new ("data")), "self"), _vala_ccode_node_unref0 (this_access), _tmp2_);
		_vala_ccode_node_unref0 (_tmp1_);
	} else {
		ValaCCodeExpression* _tmp3_;
		this_access = (_tmp3_ = (ValaCCodeExpression*) vala_ccode_identifier_new ("self"), _vala_ccode_node_unref0 (this_access), _tmp3_);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp4_ = vala_ccode_base_module_generate_instance_cast (self, this_access, vala_data_type_get_data_type (vala_expression_get_value_type ((ValaExpression*) expr)))));
	_vala_ccode_node_unref0 (_tmp4_);
	_vala_ccode_node_unref0 (this_access);
}


static void vala_ccode_base_module_real_visit_postfix_expression (ValaCodeVisitor* base, ValaPostfixExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaMemberAccess* ma;
	ValaCCodeUnaryOperator _tmp7_ = 0;
	ValaCCodeUnaryOperator op;
	ValaCCodeUnaryExpression* _tmp8_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	ma = vala_ccode_base_module_find_property_access (self, vala_postfix_expression_get_inner (expr));
	if (ma != NULL) {
		ValaProperty* prop;
		ValaCCodeCommaExpression* ccomma;
		ValaLocalVariable* temp_decl;
		ValaCCodeExpression* _tmp0_;
		ValaCCodeAssignment* _tmp1_;
		ValaCCodeBinaryOperator _tmp2_ = 0;
		ValaCCodeBinaryOperator op;
		ValaCCodeExpression* _tmp3_;
		ValaCCodeConstant* _tmp4_;
		ValaCCodeBinaryExpression* _tmp5_;
		ValaCCodeBinaryExpression* cexpr;
		ValaCCodeExpression* ccall;
		ValaCCodeExpression* _tmp6_;
		prop = _vala_code_node_ref0 (VALA_PROPERTY (vala_expression_get_symbol_reference ((ValaExpression*) ma)));
		ccomma = vala_ccode_comma_expression_new ();
		temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_property_get_property_type (prop), TRUE, (ValaCodeNode*) expr, FALSE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp1_ = vala_ccode_assignment_new (_tmp0_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_postfix_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp1_);
		_vala_ccode_node_unref0 (_tmp0_);
		if (vala_postfix_expression_get_increment (expr)) {
			_tmp2_ = VALA_CCODE_BINARY_OPERATOR_PLUS;
		} else {
			_tmp2_ = VALA_CCODE_BINARY_OPERATOR_MINUS;
		}
		op = _tmp2_;
		cexpr = (_tmp5_ = vala_ccode_binary_expression_new (op, _tmp3_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)), (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("1"))), _vala_ccode_node_unref0 (_tmp4_), _vala_ccode_node_unref0 (_tmp3_), _tmp5_);
		ccall = vala_ccode_base_module_get_property_set_call (self, prop, ma, (ValaCCodeExpression*) cexpr, NULL);
		vala_ccode_comma_expression_append_expression (ccomma, ccall);
		vala_ccode_comma_expression_append_expression (ccomma, _tmp6_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)));
		_vala_ccode_node_unref0 (_tmp6_);
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (cexpr);
		_vala_code_node_unref0 (temp_decl);
		_vala_ccode_node_unref0 (ccomma);
		_vala_code_node_unref0 (prop);
		_vala_code_node_unref0 (ma);
		return;
	}
	if (vala_postfix_expression_get_increment (expr)) {
		_tmp7_ = VALA_CCODE_UNARY_OPERATOR_POSTFIX_INCREMENT;
	} else {
		_tmp7_ = VALA_CCODE_UNARY_OPERATOR_POSTFIX_DECREMENT;
	}
	op = _tmp7_;
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp8_ = vala_ccode_unary_expression_new (op, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_postfix_expression_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp8_);
	_vala_code_node_unref0 (ma);
}


static ValaMemberAccess* vala_ccode_base_module_find_property_access (ValaCCodeBaseModule* self, ValaExpression* expr) {
	ValaMemberAccess* result = NULL;
	ValaMemberAccess* ma;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expr != NULL, NULL);
	if (!VALA_IS_MEMBER_ACCESS (expr)) {
		result = NULL;
		return result;
	}
	ma = _vala_code_node_ref0 (VALA_MEMBER_ACCESS (expr));
	if (VALA_IS_PROPERTY (vala_expression_get_symbol_reference ((ValaExpression*) ma))) {
		result = ma;
		return result;
	}
	result = NULL;
	_vala_code_node_unref0 (ma);
	return result;
}


static gboolean vala_ccode_base_module_is_limited_generic_type (ValaCCodeBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaSymbol* _tmp0_;
	ValaClass* cl;
	ValaSymbol* _tmp1_;
	ValaStruct* st;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (type)), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	st = _vala_code_node_ref0 ((_tmp1_ = vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (type)), VALA_IS_STRUCT (_tmp1_) ? ((ValaStruct*) _tmp1_) : NULL));
	if (cl != NULL) {
		_tmp3_ = vala_class_get_is_compact (cl);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = st != NULL;
	}
	if (_tmp2_) {
		result = TRUE;
		_vala_code_node_unref0 (st);
		_vala_code_node_unref0 (cl);
		return result;
	}
	result = FALSE;
	_vala_code_node_unref0 (st);
	_vala_code_node_unref0 (cl);
	return result;
}


gboolean vala_ccode_base_module_requires_copy (ValaCCodeBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (!vala_data_type_is_disposable (type)) {
		result = FALSE;
		return result;
	}
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp2_ = vala_typesymbol_is_reference_counting ((ValaTypeSymbol*) cl);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		char* _tmp3_;
		_tmp1_ = _vala_strcmp0 (_tmp3_ = vala_typesymbol_get_ref_function ((ValaTypeSymbol*) cl), "") == 0;
		_g_free0 (_tmp3_);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		return result;
	}
	if (vala_data_type_get_type_parameter (type) != NULL) {
		if (vala_ccode_base_module_is_limited_generic_type (self, type)) {
			result = FALSE;
			_vala_code_node_unref0 (cl);
			return result;
		}
	}
	result = TRUE;
	_vala_code_node_unref0 (cl);
	return result;
}


gboolean vala_ccode_base_module_requires_destroy (ValaCCodeBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	gboolean _tmp1_ = FALSE;
	ValaTypeSymbol* _tmp2_;
	ValaClass* cl;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (!vala_data_type_is_disposable (type)) {
		result = FALSE;
		return result;
	}
	array_type = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (array_type != NULL) {
		_tmp1_ = vala_array_type_get_fixed_length (array_type);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = vala_ccode_base_module_requires_destroy (self, vala_array_type_get_element_type (array_type));
		_vala_code_node_unref0 (array_type);
		return result;
	}
	cl = _vala_code_node_ref0 ((_tmp2_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp2_) ? ((ValaClass*) _tmp2_) : NULL));
	if (cl != NULL) {
		_tmp4_ = vala_typesymbol_is_reference_counting ((ValaTypeSymbol*) cl);
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		char* _tmp5_;
		_tmp3_ = _vala_strcmp0 (_tmp5_ = vala_typesymbol_get_unref_function ((ValaTypeSymbol*) cl), "") == 0;
		_g_free0 (_tmp5_);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		_vala_code_node_unref0 (array_type);
		return result;
	}
	if (vala_data_type_get_type_parameter (type) != NULL) {
		if (vala_ccode_base_module_is_limited_generic_type (self, type)) {
			result = FALSE;
			_vala_code_node_unref0 (cl);
			_vala_code_node_unref0 (array_type);
			return result;
		}
	}
	result = TRUE;
	_vala_code_node_unref0 (cl);
	_vala_code_node_unref0 (array_type);
	return result;
}


static gboolean vala_ccode_base_module_is_ref_function_void (ValaCCodeBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp1_ = vala_class_get_ref_function_void (cl);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = TRUE;
		_vala_code_node_unref0 (cl);
		return result;
	} else {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		return result;
	}
	_vala_code_node_unref0 (cl);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_ref_cexpression (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	ValaCCodeExpression* dupexpr;
	gboolean _tmp18_ = FALSE;
	gboolean _tmp19_ = FALSE;
	gboolean _tmp20_ = FALSE;
	ValaCCodeFunctionCall* ccall;
	gboolean _tmp32_ = FALSE;
	gboolean _tmp33_ = FALSE;
	gboolean _tmp34_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expression_type != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	if (VALA_IS_DELEGATE_TYPE (expression_type)) {
		result = _vala_ccode_node_ref0 (cexpr);
		return result;
	}
	if (VALA_IS_VALUE_TYPE (expression_type)) {
		_tmp0_ = !vala_data_type_get_nullable (expression_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaLocalVariable* decl;
		ValaCCodeExpression* ctemp;
		ValaValueType* vt;
		ValaStruct* st;
		char* _tmp1_;
		ValaCCodeIdentifier* _tmp2_;
		ValaCCodeFunctionCall* _tmp3_;
		ValaCCodeFunctionCall* copy_call;
		ValaCCodeUnaryExpression* _tmp4_;
		ValaCCodeUnaryExpression* _tmp5_;
		ValaCCodeCommaExpression* ccomma;
		char* _tmp6_;
		gboolean _tmp7_;
		gboolean _tmp14_ = FALSE;
		decl = vala_ccode_base_module_get_temp_variable (self, expression_type, FALSE, node, TRUE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), decl);
		ctemp = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl));
		vt = _vala_code_node_ref0 (VALA_VALUE_TYPE (expression_type));
		st = _vala_code_node_ref0 (VALA_STRUCT (vala_value_type_get_type_symbol (vt)));
		copy_call = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st)))), _vala_ccode_node_unref0 (_tmp2_), _g_free0 (_tmp1_), _tmp3_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr)));
		_vala_ccode_node_unref0 (_tmp4_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ctemp)));
		_vala_ccode_node_unref0 (_tmp5_);
		if (!vala_struct_get_has_copy_function (st)) {
			vala_ccode_base_module_generate_struct_copy_function (self, st);
		}
		ccomma = vala_ccode_comma_expression_new ();
		if ((_tmp7_ = _vala_strcmp0 (_tmp6_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st), "g_value_copy") == 0, _g_free0 (_tmp6_), _tmp7_)) {
			ValaCCodeIdentifier* _tmp8_;
			ValaCCodeFunctionCall* _tmp9_;
			ValaCCodeFunctionCall* value_type_call;
			ValaCCodeUnaryExpression* _tmp10_;
			ValaCCodeIdentifier* _tmp11_;
			ValaCCodeFunctionCall* _tmp12_;
			ValaCCodeFunctionCall* init_call;
			ValaCCodeUnaryExpression* _tmp13_;
			value_type_call = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("G_VALUE_TYPE"))), _vala_ccode_node_unref0 (_tmp8_), _tmp9_);
			vala_ccode_function_call_add_argument (value_type_call, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr)));
			_vala_ccode_node_unref0 (_tmp10_);
			init_call = (_tmp12_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("g_value_init"))), _vala_ccode_node_unref0 (_tmp11_), _tmp12_);
			vala_ccode_function_call_add_argument (init_call, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ctemp)));
			_vala_ccode_node_unref0 (_tmp13_);
			vala_ccode_function_call_add_argument (init_call, (ValaCCodeExpression*) value_type_call);
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) init_call);
			_vala_ccode_node_unref0 (init_call);
			_vala_ccode_node_unref0 (value_type_call);
		}
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) copy_call);
		vala_ccode_comma_expression_append_expression (ccomma, ctemp);
		if (self->gvalue_type != NULL) {
			_tmp14_ = vala_data_type_get_data_type (expression_type) == VALA_TYPESYMBOL (self->gvalue_type);
		} else {
			_tmp14_ = FALSE;
		}
		if (_tmp14_) {
			ValaCCodeIdentifier* _tmp15_;
			ValaCCodeFunctionCall* _tmp16_;
			ValaCCodeFunctionCall* cisvalid;
			ValaCCodeUnaryExpression* _tmp17_;
			cisvalid = (_tmp16_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp15_ = vala_ccode_identifier_new ("G_IS_VALUE"))), _vala_ccode_node_unref0 (_tmp15_), _tmp16_);
			vala_ccode_function_call_add_argument (cisvalid, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr)));
			_vala_ccode_node_unref0 (_tmp17_);
			result = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisvalid, (ValaCCodeExpression*) ccomma, cexpr);
			_vala_ccode_node_unref0 (cisvalid);
			_vala_ccode_node_unref0 (ccomma);
			_vala_ccode_node_unref0 (copy_call);
			_vala_code_node_unref0 (st);
			_vala_code_node_unref0 (vt);
			_vala_ccode_node_unref0 (ctemp);
			_vala_code_node_unref0 (decl);
			return result;
		} else {
			result = (ValaCCodeExpression*) ccomma;
			_vala_ccode_node_unref0 (copy_call);
			_vala_code_node_unref0 (st);
			_vala_code_node_unref0 (vt);
			_vala_ccode_node_unref0 (ctemp);
			_vala_code_node_unref0 (decl);
			return result;
		}
		_vala_ccode_node_unref0 (ccomma);
		_vala_ccode_node_unref0 (copy_call);
		_vala_code_node_unref0 (st);
		_vala_code_node_unref0 (vt);
		_vala_ccode_node_unref0 (ctemp);
		_vala_code_node_unref0 (decl);
	}
	dupexpr = vala_ccode_base_module_get_dup_func_expression (self, expression_type, vala_code_node_get_source_reference (node), FALSE);
	if (dupexpr == NULL) {
		vala_code_node_set_error (node, TRUE);
		result = NULL;
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	}
	if (VALA_IS_CCODE_IDENTIFIER (dupexpr)) {
		_tmp20_ = !VALA_IS_ARRAY_TYPE (expression_type);
	} else {
		_tmp20_ = FALSE;
	}
	if (_tmp20_) {
		_tmp19_ = !VALA_IS_GENERIC_TYPE (expression_type);
	} else {
		_tmp19_ = FALSE;
	}
	if (_tmp19_) {
		_tmp18_ = !vala_ccode_base_module_is_ref_function_void (self, expression_type);
	} else {
		_tmp18_ = FALSE;
	}
	if (_tmp18_) {
		ValaCCodeIdentifier* dupid;
		char* dup0_func;
		ValaCCodeIdentifier* _tmp30_;
		ValaCCodeFunctionCall* _tmp31_;
		ValaCCodeFunctionCall* ccall;
		dupid = _vala_ccode_node_ref0 (VALA_CCODE_IDENTIFIER (dupexpr));
		dup0_func = g_strdup_printf ("_%s0", vala_ccode_identifier_get_name (dupid));
		if (_vala_strcmp0 (vala_ccode_identifier_get_name (dupid), "g_strdup") == 0) {
			char* _tmp21_;
			dup0_func = (_tmp21_ = g_strdup (vala_ccode_identifier_get_name (dupid)), _g_free0 (dup0_func), _tmp21_);
		} else {
			if (vala_ccode_base_module_add_wrapper (self, dup0_func)) {
				char* pointer_cname;
				ValaCCodeFunction* dup0_fun;
				ValaCCodeFormalParameter* _tmp23_;
				ValaCCodeBlock* _tmp24_;
				ValaCCodeFunctionCall* dup_call;
				ValaCCodeIdentifier* _tmp25_;
				ValaCCodeIdentifier* _tmp26_;
				ValaCCodeConstant* _tmp27_;
				ValaCCodeConditionalExpression* _tmp28_;
				ValaCCodeReturnStatement* _tmp29_;
				pointer_cname = g_strdup ("gpointer");
				if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_POSIX) {
					char* _tmp22_;
					pointer_cname = (_tmp22_ = g_strdup ("void*"), _g_free0 (pointer_cname), _tmp22_);
				}
				dup0_fun = vala_ccode_function_new (dup0_func, pointer_cname);
				vala_ccode_function_add_parameter (dup0_fun, _tmp23_ = vala_ccode_formal_parameter_new ("self", pointer_cname));
				_vala_ccode_node_unref0 (_tmp23_);
				vala_ccode_function_set_modifiers (dup0_fun, VALA_CCODE_MODIFIERS_STATIC);
				vala_ccode_function_set_block (dup0_fun, _tmp24_ = vala_ccode_block_new ());
				_vala_ccode_node_unref0 (_tmp24_);
				dup_call = vala_ccode_function_call_new (dupexpr);
				vala_ccode_function_call_add_argument (dup_call, (ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp25_);
				vala_ccode_block_add_statement (vala_ccode_function_get_block (dup0_fun), (ValaCCodeNode*) (_tmp29_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp28_ = vala_ccode_conditional_expression_new ((ValaCCodeExpression*) (_tmp26_ = vala_ccode_identifier_new ("self")), (ValaCCodeExpression*) dup_call, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_constant_new ("NULL")))))));
				_vala_ccode_node_unref0 (_tmp29_);
				_vala_ccode_node_unref0 (_tmp28_);
				_vala_ccode_node_unref0 (_tmp27_);
				_vala_ccode_node_unref0 (_tmp26_);
				vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) dup0_fun);
				_vala_ccode_node_unref0 (dup_call);
				_vala_ccode_node_unref0 (dup0_fun);
				_g_free0 (pointer_cname);
			}
		}
		ccall = (_tmp31_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new (dup0_func))), _vala_ccode_node_unref0 (_tmp30_), _tmp31_);
		vala_ccode_function_call_add_argument (ccall, cexpr);
		result = (ValaCCodeExpression*) ccall;
		_g_free0 (dup0_func);
		_vala_ccode_node_unref0 (dupid);
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	}
	ccall = vala_ccode_function_call_new (dupexpr);
	if (!VALA_IS_ARRAY_TYPE (expression_type)) {
		_tmp34_ = expr != NULL;
	} else {
		_tmp34_ = FALSE;
	}
	if (_tmp34_) {
		_tmp33_ = vala_expression_is_non_null (expr);
	} else {
		_tmp33_ = FALSE;
	}
	if (_tmp33_) {
		_tmp32_ = !vala_ccode_base_module_is_ref_function_void (self, expression_type);
	} else {
		_tmp32_ = FALSE;
	}
	if (_tmp32_) {
		vala_ccode_function_call_add_argument (ccall, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
		result = (ValaCCodeExpression*) ccall;
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	} else {
		ValaLocalVariable* decl;
		ValaCCodeExpression* ctemp;
		ValaCCodeConstant* _tmp35_;
		ValaCCodeBinaryExpression* _tmp36_;
		ValaCCodeBinaryExpression* cisnull;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeAssignment* _tmp47_;
		ValaCCodeExpression* cifnull;
		ValaCCodeConditionalExpression* _tmp50_;
		decl = vala_ccode_base_module_get_temp_variable (self, expression_type, FALSE, node, FALSE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), decl);
		ctemp = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl));
		cisnull = (_tmp36_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, ctemp, (ValaCCodeExpression*) (_tmp35_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp35_), _tmp36_);
		if (vala_data_type_get_type_parameter (expression_type) != NULL) {
			ValaCCodeExpression* _tmp37_;
			ValaCCodeConstant* _tmp38_;
			ValaCCodeBinaryExpression* _tmp39_;
			ValaCCodeBinaryExpression* cdupisnull;
			ValaCCodeBinaryExpression* _tmp40_;
			cdupisnull = (_tmp39_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, _tmp37_ = vala_ccode_base_module_get_dup_func_expression (self, expression_type, vala_code_node_get_source_reference (node), FALSE), (ValaCCodeExpression*) (_tmp38_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp38_), _vala_ccode_node_unref0 (_tmp37_), _tmp39_);
			cisnull = (_tmp40_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) cdupisnull), _vala_ccode_node_unref0 (cisnull), _tmp40_);
			_vala_ccode_node_unref0 (cdupisnull);
		}
		if (vala_data_type_get_type_parameter (expression_type) != NULL) {
			ValaCCodeCastExpression* _tmp41_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp41_ = vala_ccode_cast_expression_new (ctemp, "gpointer")));
			_vala_ccode_node_unref0 (_tmp41_);
		} else {
			vala_ccode_function_call_add_argument (ccall, ctemp);
		}
		if (VALA_IS_ARRAY_TYPE (expression_type)) {
			ValaArrayType* array_type;
			gboolean first;
			ValaCCodeExpression* csizeexpr;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (expression_type));
			first = TRUE;
			csizeexpr = NULL;
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp42_;
					_tmp42_ = TRUE;
					while (TRUE) {
						if (!_tmp42_) {
							dim++;
						}
						_tmp42_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						if (first) {
							ValaCCodeExpression* _tmp43_;
							csizeexpr = (_tmp43_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim), _vala_ccode_node_unref0 (csizeexpr), _tmp43_);
							first = FALSE;
						} else {
							ValaCCodeExpression* _tmp44_;
							ValaCCodeExpression* _tmp45_;
							csizeexpr = (_tmp45_ = (ValaCCodeExpression*) vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_MUL, csizeexpr, _tmp44_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim)), _vala_ccode_node_unref0 (csizeexpr), _tmp45_);
							_vala_ccode_node_unref0 (_tmp44_);
						}
					}
				}
			}
			vala_ccode_function_call_add_argument (ccall, csizeexpr);
			if (VALA_IS_GENERIC_TYPE (vala_array_type_get_element_type (array_type))) {
				ValaCCodeExpression* elem_dupexpr;
				elem_dupexpr = vala_ccode_base_module_get_dup_func_expression (self, vala_array_type_get_element_type (array_type), vala_code_node_get_source_reference (node), FALSE);
				if (elem_dupexpr == NULL) {
					ValaCCodeExpression* _tmp46_;
					elem_dupexpr = (_tmp46_ = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL"), _vala_ccode_node_unref0 (elem_dupexpr), _tmp46_);
				}
				vala_ccode_function_call_add_argument (ccall, elem_dupexpr);
				_vala_ccode_node_unref0 (elem_dupexpr);
			}
			_vala_ccode_node_unref0 (csizeexpr);
			_vala_code_node_unref0 (array_type);
		}
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp47_ = vala_ccode_assignment_new (ctemp, cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp47_);
		cifnull = NULL;
		if (vala_data_type_get_data_type (expression_type) != NULL) {
			ValaCCodeExpression* _tmp48_;
			cifnull = (_tmp48_ = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL"), _vala_ccode_node_unref0 (cifnull), _tmp48_);
		} else {
			ValaCCodeExpression* _tmp49_;
			cifnull = (_tmp49_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (ctemp, "gpointer"), _vala_ccode_node_unref0 (cifnull), _tmp49_);
		}
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp50_ = vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, cifnull, (ValaCCodeExpression*) ccall)));
		_vala_ccode_node_unref0 (_tmp50_);
		if (vala_ccode_base_module_is_ref_function_void (self, expression_type)) {
			vala_ccode_comma_expression_append_expression (ccomma, ctemp);
		}
		result = (ValaCCodeExpression*) ccomma;
		_vala_ccode_node_unref0 (cifnull);
		_vala_ccode_node_unref0 (cisnull);
		_vala_ccode_node_unref0 (ctemp);
		_vala_code_node_unref0 (decl);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	}
	_vala_ccode_node_unref0 (ccall);
	_vala_ccode_node_unref0 (dupexpr);
}


ValaCCodeExpression* vala_ccode_base_module_get_ref_cexpression (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_ref_cexpression (self, expression_type, cexpr, expr, node);
}


static gboolean vala_ccode_base_module_is_reference_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type_arg != NULL, FALSE);
	if (VALA_IS_ERROR_TYPE (type_arg)) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp1_ = FALSE;
		if (vala_data_type_get_data_type (type_arg) != NULL) {
			_tmp1_ = vala_typesymbol_is_reference_type (vala_data_type_get_data_type (type_arg));
		} else {
			_tmp1_ = FALSE;
		}
		_tmp0_ = _tmp1_;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


static gboolean vala_ccode_base_module_is_nullable_value_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type_arg != NULL, FALSE);
	if (VALA_IS_VALUE_TYPE (type_arg)) {
		_tmp0_ = vala_data_type_get_nullable (type_arg);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


static gboolean vala_ccode_base_module_is_signed_integer_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type_arg != NULL, FALSE);
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type_arg), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	if (vala_data_type_get_nullable (type_arg)) {
		result = FALSE;
		_vala_code_node_unref0 (st);
		return result;
	} else {
		if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->bool_type)) {
			result = TRUE;
			_vala_code_node_unref0 (st);
			return result;
		} else {
			if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->char_type)) {
				result = TRUE;
				_vala_code_node_unref0 (st);
				return result;
			} else {
				gboolean _tmp1_ = FALSE;
				if (self->unichar_type != NULL) {
					_tmp1_ = VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->unichar_type);
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					result = TRUE;
					_vala_code_node_unref0 (st);
					return result;
				} else {
					if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->short_type)) {
						result = TRUE;
						_vala_code_node_unref0 (st);
						return result;
					} else {
						if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->int_type)) {
							result = TRUE;
							_vala_code_node_unref0 (st);
							return result;
						} else {
							if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->long_type)) {
								result = TRUE;
								_vala_code_node_unref0 (st);
								return result;
							} else {
								if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->int8_type)) {
									result = TRUE;
									_vala_code_node_unref0 (st);
									return result;
								} else {
									if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->int16_type)) {
										result = TRUE;
										_vala_code_node_unref0 (st);
										return result;
									} else {
										if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->int32_type)) {
											result = TRUE;
											_vala_code_node_unref0 (st);
											return result;
										} else {
											if (VALA_TYPESYMBOL (st) == self->gtype_type) {
												result = TRUE;
												_vala_code_node_unref0 (st);
												return result;
											} else {
												if (VALA_IS_ENUM_VALUE_TYPE (type_arg)) {
													result = TRUE;
													_vala_code_node_unref0 (st);
													return result;
												} else {
													result = FALSE;
													_vala_code_node_unref0 (st);
													return result;
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	_vala_code_node_unref0 (st);
}


static gboolean vala_ccode_base_module_is_unsigned_integer_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type_arg != NULL, FALSE);
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type_arg), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	if (vala_data_type_get_nullable (type_arg)) {
		result = FALSE;
		_vala_code_node_unref0 (st);
		return result;
	} else {
		if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->uchar_type)) {
			result = TRUE;
			_vala_code_node_unref0 (st);
			return result;
		} else {
			if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->ushort_type)) {
				result = TRUE;
				_vala_code_node_unref0 (st);
				return result;
			} else {
				if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->uint_type)) {
					result = TRUE;
					_vala_code_node_unref0 (st);
					return result;
				} else {
					if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->ulong_type)) {
						result = TRUE;
						_vala_code_node_unref0 (st);
						return result;
					} else {
						if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->uint8_type)) {
							result = TRUE;
							_vala_code_node_unref0 (st);
							return result;
						} else {
							if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->uint16_type)) {
								result = TRUE;
								_vala_code_node_unref0 (st);
								return result;
							} else {
								if (VALA_TYPESYMBOL (st) == vala_data_type_get_data_type (self->uint32_type)) {
									result = TRUE;
									_vala_code_node_unref0 (st);
									return result;
								} else {
									result = FALSE;
									_vala_code_node_unref0 (st);
									return result;
								}
							}
						}
					}
				}
			}
		}
	}
	_vala_code_node_unref0 (st);
}


void vala_ccode_base_module_check_type (ValaCCodeBaseModule* self, ValaDataType* type) {
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	array_type = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (array_type != NULL) {
		vala_ccode_base_module_check_type (self, vala_array_type_get_element_type (array_type));
		if (VALA_IS_DELEGATE_TYPE (vala_array_type_get_element_type (array_type))) {
			ValaDelegateType* delegate_type;
			delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_array_type_get_element_type (array_type)));
			if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
				vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) type), "Delegates with target are not supported as array element type");
			}
			_vala_code_node_unref0 (delegate_type);
		}
	}
	{
		ValaList* _tmp1_;
		ValaIterator* _tmp2_;
		ValaIterator* _type_arg_it;
		_type_arg_it = (_tmp2_ = vala_iterable_iterator ((ValaIterable*) (_tmp1_ = vala_data_type_get_type_arguments (type))), _vala_collection_object_unref0 (_tmp1_), _tmp2_);
		while (TRUE) {
			ValaDataType* type_arg;
			if (!vala_iterator_next (_type_arg_it)) {
				break;
			}
			type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
			vala_ccode_base_module_check_type (self, type_arg);
			vala_ccode_base_module_check_type_argument (self, type_arg);
			_vala_code_node_unref0 (type_arg);
		}
		_vala_collection_object_unref0 (_type_arg_it);
	}
	_vala_code_node_unref0 (array_type);
}


static void vala_ccode_base_module_check_type_argument (ValaCCodeBaseModule* self, ValaDataType* type_arg) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (type_arg != NULL);
	if (VALA_IS_GENERIC_TYPE (type_arg)) {
		_tmp4_ = TRUE;
	} else {
		_tmp4_ = VALA_IS_POINTER_TYPE (type_arg);
	}
	if (_tmp4_) {
		_tmp3_ = TRUE;
	} else {
		_tmp3_ = vala_ccode_base_module_is_reference_type_argument (self, type_arg);
	}
	if (_tmp3_) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = vala_ccode_base_module_is_nullable_value_type_argument (self, type_arg);
	}
	if (_tmp2_) {
		_tmp1_ = TRUE;
	} else {
		_tmp1_ = vala_ccode_base_module_is_signed_integer_type_argument (self, type_arg);
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = vala_ccode_base_module_is_unsigned_integer_type_argument (self, type_arg);
	}
	if (_tmp0_) {
	} else {
		if (VALA_IS_DELEGATE_TYPE (type_arg)) {
			ValaDelegateType* delegate_type;
			delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (type_arg));
			if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
				vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) type_arg), "Delegates with target are not supported as generic type arguments");
			}
			_vala_code_node_unref0 (delegate_type);
		} else {
			char* _tmp5_;
			char* _tmp6_;
			vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) type_arg), _tmp6_ = g_strdup_printf ("`%s' is not a supported generic type argument, use `?' to box value ty" \
"pes", _tmp5_ = vala_code_node_to_string ((ValaCodeNode*) type_arg)));
			_g_free0 (_tmp6_);
			_g_free0 (_tmp5_);
		}
	}
}


static void vala_ccode_base_module_real_generate_class_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (cl != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) cl, _tmp0_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
}


void vala_ccode_base_module_generate_class_declaration (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_class_declaration (self, cl, decl_space);
}


static void vala_ccode_base_module_real_generate_interface_declaration (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (iface != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_interface_declaration (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_interface_declaration (self, iface, decl_space);
}


static void vala_ccode_base_module_real_generate_method_declaration (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_method_declaration (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_method_declaration (self, m, decl_space);
}


static void vala_ccode_base_module_real_generate_error_domain_declaration (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (edomain != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_ccode_base_module_generate_error_domain_declaration (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_error_domain_declaration (self, edomain, decl_space);
}


void vala_ccode_base_module_add_generic_type_arguments (ValaCCodeBaseModule* self, ValaMap* arg_map, ValaList* type_args, ValaCodeNode* expr, gboolean is_chainup) {
	gint type_param_index;
	g_return_if_fail (self != NULL);
	g_return_if_fail (arg_map != NULL);
	g_return_if_fail (type_args != NULL);
	g_return_if_fail (expr != NULL);
	type_param_index = 0;
	{
		ValaIterator* _type_arg_it;
		_type_arg_it = vala_iterable_iterator ((ValaIterable*) type_args);
		while (TRUE) {
			ValaDataType* type_arg;
			ValaCCodeExpression* _tmp0_;
			if (!vala_iterator_next (_type_arg_it)) {
				break;
			}
			type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
			vala_map_set (arg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, (0.1 * type_param_index) + 0.01, FALSE)), _tmp0_ = vala_ccode_base_module_get_type_id_expression (self, type_arg, is_chainup));
			_vala_ccode_node_unref0 (_tmp0_);
			if (vala_ccode_base_module_requires_copy (self, type_arg)) {
				ValaCCodeExpression* dup_func;
				ValaCCodeCastExpression* _tmp1_;
				ValaCCodeExpression* _tmp2_;
				dup_func = vala_ccode_base_module_get_dup_func_expression (self, type_arg, vala_code_node_get_source_reference ((ValaCodeNode*) type_arg), is_chainup);
				if (dup_func == NULL) {
					vala_code_node_set_error (expr, TRUE);
					_vala_ccode_node_unref0 (dup_func);
					_vala_code_node_unref0 (type_arg);
					_vala_collection_object_unref0 (_type_arg_it);
					return;
				}
				vala_map_set (arg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, (0.1 * type_param_index) + 0.02, FALSE)), (ValaCCodeExpression*) (_tmp1_ = vala_ccode_cast_expression_new (dup_func, "GBoxedCopyFunc")));
				_vala_ccode_node_unref0 (_tmp1_);
				vala_map_set (arg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, (0.1 * type_param_index) + 0.03, FALSE)), _tmp2_ = vala_ccode_base_module_get_destroy_func_expression (self, type_arg, is_chainup));
				_vala_ccode_node_unref0 (_tmp2_);
				_vala_ccode_node_unref0 (dup_func);
			} else {
				ValaCCodeConstant* _tmp3_;
				ValaCCodeConstant* _tmp4_;
				vala_map_set (arg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, (0.1 * type_param_index) + 0.02, FALSE)), (ValaCCodeExpression*) (_tmp3_ = vala_ccode_constant_new ("NULL")));
				_vala_ccode_node_unref0 (_tmp3_);
				vala_map_set (arg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, (0.1 * type_param_index) + 0.03, FALSE)), (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("NULL")));
				_vala_ccode_node_unref0 (_tmp4_);
			}
			type_param_index++;
			_vala_code_node_unref0 (type_arg);
		}
		_vala_collection_object_unref0 (_type_arg_it);
	}
}


static void vala_ccode_base_module_real_visit_object_creation_expression (ValaCodeVisitor* base, ValaObjectCreationExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* instance;
	ValaCCodeExpression* creation_expr;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	ValaCodeNode* _tmp99_;
	ValaLocalVariable* local;
	gboolean _tmp100_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	instance = NULL;
	creation_expr = NULL;
	vala_ccode_base_module_check_type (self, vala_object_creation_expression_get_type_reference (expr));
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	if (st != NULL) {
		gboolean _tmp3_ = FALSE;
		if (!vala_struct_is_simple_type (st)) {
			_tmp3_ = TRUE;
		} else {
			char* _tmp4_;
			_tmp3_ = _vala_strcmp0 (_tmp4_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "va_list") == 0;
			_g_free0 (_tmp4_);
		}
		_tmp2_ = _tmp3_;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		_tmp1_ = TRUE;
	} else {
		ValaList* _tmp5_;
		_tmp1_ = vala_collection_get_size ((ValaCollection*) (_tmp5_ = vala_object_creation_expression_get_object_initializer (expr))) > 0;
		_vala_collection_object_unref0 (_tmp5_);
	}
	if (_tmp1_) {
		ValaCodeNode* _tmp6_;
		ValaLocalVariable* local;
		gboolean _tmp7_ = FALSE;
		local = _vala_code_node_ref0 ((_tmp6_ = vala_code_node_get_parent_node ((ValaCodeNode*) expr), VALA_IS_LOCAL_VARIABLE (_tmp6_) ? ((ValaLocalVariable*) _tmp6_) : NULL));
		if (local != NULL) {
			_tmp7_ = vala_ccode_base_module_has_simple_struct_initializer (self, local);
		} else {
			_tmp7_ = FALSE;
		}
		if (_tmp7_) {
			if (vala_local_variable_get_captured (local)) {
				ValaBlock* block;
				char* _tmp8_;
				ValaCCodeExpression* _tmp9_;
				char* _tmp10_;
				ValaCCodeExpression* _tmp11_;
				block = _vala_code_node_ref0 (VALA_BLOCK (vala_symbol_get_parent_symbol ((ValaSymbol*) local)));
				instance = (_tmp11_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (_tmp9_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp8_ = g_strdup_printf ("_data%d_", vala_ccode_base_module_get_block_id (self, block))), _tmp10_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), _vala_ccode_node_unref0 (instance), _tmp11_);
				_g_free0 (_tmp10_);
				_vala_ccode_node_unref0 (_tmp9_);
				_g_free0 (_tmp8_);
				_vala_code_node_unref0 (block);
			} else {
				char* _tmp12_;
				ValaCCodeExpression* _tmp13_;
				instance = (_tmp13_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp12_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local))), _vala_ccode_node_unref0 (instance), _tmp13_);
				_g_free0 (_tmp12_);
			}
		} else {
			ValaLocalVariable* temp_decl;
			char* _tmp14_;
			ValaCCodeExpression* _tmp15_;
			temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_object_creation_expression_get_type_reference (expr), FALSE, (ValaCodeNode*) expr, TRUE);
			vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
			instance = (_tmp15_ = vala_ccode_base_module_get_variable_cexpression (self, _tmp14_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) temp_decl))), _vala_ccode_node_unref0 (instance), _tmp15_);
			_g_free0 (_tmp14_);
			_vala_code_node_unref0 (temp_decl);
		}
		_vala_code_node_unref0 (local);
	}
	if (vala_expression_get_symbol_reference ((ValaExpression*) expr) == NULL) {
		if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
			ValaCCodeIdentifier* _tmp16_;
			ValaCCodeFunctionCall* _tmp17_;
			ValaCCodeFunctionCall* creation_call;
			ValaCCodeUnaryExpression* _tmp18_;
			ValaCCodeConstant* _tmp19_;
			char* _tmp20_;
			char* _tmp21_;
			ValaCCodeIdentifier* _tmp22_;
			ValaCCodeExpression* _tmp23_;
			vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
			creation_call = (_tmp17_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp16_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp16_), _tmp17_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
			_vala_ccode_node_unref0 (_tmp18_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_constant_new ("0")));
			_vala_ccode_node_unref0 (_tmp19_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_identifier_new (_tmp21_ = g_strdup_printf ("sizeof (%s)", _tmp20_ = vala_data_type_get_cname (vala_object_creation_expression_get_type_reference (expr))))));
			_vala_ccode_node_unref0 (_tmp22_);
			_g_free0 (_tmp21_);
			_g_free0 (_tmp20_);
			creation_expr = (_tmp23_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) creation_call), _vala_ccode_node_unref0 (creation_expr), _tmp23_);
			_vala_ccode_node_unref0 (creation_call);
		}
	} else {
		gboolean _tmp24_ = FALSE;
		if (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)) == VALA_TYPESYMBOL (self->glist_type)) {
			_tmp24_ = TRUE;
		} else {
			_tmp24_ = vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)) == VALA_TYPESYMBOL (self->gslist_type);
		}
		if (_tmp24_) {
			ValaCCodeConstant* _tmp25_;
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp25_ = vala_ccode_constant_new ("NULL")));
			_vala_ccode_node_unref0 (_tmp25_);
		} else {
			if (VALA_IS_METHOD (vala_expression_get_symbol_reference ((ValaExpression*) expr))) {
				ValaMethod* m;
				ValaList* params;
				ValaCCodeFunctionCall* creation_call;
				ValaTypeSymbol* _tmp26_;
				ValaClass* cl;
				gboolean _tmp35_ = FALSE;
				gboolean _tmp36_ = FALSE;
				ValaHashMap* carg_map;
				gboolean _tmp47_ = FALSE;
				gboolean ellipsis;
				gint i;
				gint arg_pos = 0;
				ValaIterator* params_it;
				gint last_pos;
				gint min_pos = 0;
				gboolean _tmp73_ = FALSE;
				gboolean _tmp74_ = FALSE;
				ValaCCodeExpression* _tmp81_;
				char* _tmp82_;
				gboolean _tmp83_;
				m = _vala_code_node_ref0 (VALA_METHOD (vala_expression_get_symbol_reference ((ValaExpression*) expr)));
				params = vala_method_get_parameters (m);
				creation_call = NULL;
				vala_ccode_base_module_generate_method_declaration (self, m, self->source_declarations);
				cl = _vala_code_node_ref0 ((_tmp26_ = vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)), VALA_IS_CLASS (_tmp26_) ? ((ValaClass*) _tmp26_) : NULL));
				if (!vala_method_get_has_new_function (m)) {
					char* _tmp27_;
					ValaCCodeIdentifier* _tmp28_;
					ValaCCodeFunctionCall* _tmp29_;
					char* _tmp30_;
					ValaCCodeIdentifier* _tmp31_;
					creation_call = (_tmp29_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp28_ = vala_ccode_identifier_new (_tmp27_ = vala_method_get_real_cname (m)))), _vala_ccode_node_unref0 (creation_call), _tmp29_);
					_vala_ccode_node_unref0 (_tmp28_);
					_g_free0 (_tmp27_);
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp31_ = vala_ccode_identifier_new (_tmp30_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) cl))));
					_vala_ccode_node_unref0 (_tmp31_);
					_g_free0 (_tmp30_);
				} else {
					char* _tmp32_;
					ValaCCodeIdentifier* _tmp33_;
					ValaCCodeFunctionCall* _tmp34_;
					creation_call = (_tmp34_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp33_ = vala_ccode_identifier_new (_tmp32_ = vala_method_get_cname (m)))), _vala_ccode_node_unref0 (creation_call), _tmp34_);
					_vala_ccode_node_unref0 (_tmp33_);
					_g_free0 (_tmp32_);
				}
				if (st != NULL) {
					_tmp36_ = !vala_struct_is_simple_type (st);
				} else {
					_tmp36_ = FALSE;
				}
				if (_tmp36_) {
					_tmp35_ = !(vala_method_get_cinstance_parameter_position (m) < 0);
				} else {
					_tmp35_ = FALSE;
				}
				if (_tmp35_) {
					ValaCCodeUnaryExpression* _tmp37_;
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp37_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
					_vala_ccode_node_unref0 (_tmp37_);
				} else {
					gboolean _tmp38_ = FALSE;
					if (st != NULL) {
						char* _tmp39_;
						_tmp38_ = _vala_strcmp0 (_tmp39_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "va_list") == 0;
						_g_free0 (_tmp39_);
					} else {
						_tmp38_ = FALSE;
					}
					if (_tmp38_) {
						char* _tmp40_;
						gboolean _tmp41_;
						vala_ccode_function_call_add_argument (creation_call, instance);
						if ((_tmp41_ = _vala_strcmp0 (_tmp40_ = vala_method_get_cname (m), "va_start") == 0, _g_free0 (_tmp40_), _tmp41_)) {
							ValaFormalParameter* last_param;
							char* _tmp45_;
							ValaCCodeIdentifier* _tmp46_;
							last_param = NULL;
							{
								ValaList* _tmp42_;
								ValaIterator* _tmp43_;
								ValaIterator* _param_it;
								_param_it = (_tmp43_ = vala_iterable_iterator ((ValaIterable*) (_tmp42_ = vala_method_get_parameters (vala_ccode_base_module_get_current_method (self)))), _vala_collection_object_unref0 (_tmp42_), _tmp43_);
								while (TRUE) {
									ValaFormalParameter* param;
									ValaFormalParameter* _tmp44_;
									if (!vala_iterator_next (_param_it)) {
										break;
									}
									param = (ValaFormalParameter*) vala_iterator_get (_param_it);
									if (vala_formal_parameter_get_ellipsis (param)) {
										_vala_code_node_unref0 (param);
										break;
									}
									last_param = (_tmp44_ = _vala_code_node_ref0 (param), _vala_code_node_unref0 (last_param), _tmp44_);
									_vala_code_node_unref0 (param);
								}
								_vala_collection_object_unref0 (_param_it);
							}
							vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp46_ = vala_ccode_identifier_new (_tmp45_ = vala_ccode_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) last_param)))));
							_vala_ccode_node_unref0 (_tmp46_);
							_g_free0 (_tmp45_);
							_vala_code_node_unref0 (last_param);
						}
					}
				}
				vala_ccode_base_module_generate_type_declaration (self, vala_object_creation_expression_get_type_reference (expr), self->source_declarations);
				carg_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_EXPRESSION, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
				if (cl != NULL) {
					_tmp47_ = !vala_class_get_is_compact (cl);
				} else {
					_tmp47_ = FALSE;
				}
				if (_tmp47_) {
					ValaList* _tmp48_;
					vala_ccode_base_module_add_generic_type_arguments (self, (ValaMap*) carg_map, _tmp48_ = vala_data_type_get_type_arguments (vala_object_creation_expression_get_type_reference (expr)), (ValaCodeNode*) expr, FALSE);
					_vala_collection_object_unref0 (_tmp48_);
				} else {
					gboolean _tmp49_ = FALSE;
					if (cl != NULL) {
						_tmp49_ = vala_method_get_simple_generics (m);
					} else {
						_tmp49_ = FALSE;
					}
					if (_tmp49_) {
						gint type_param_index;
						type_param_index = 0;
						{
							ValaList* _tmp50_;
							ValaIterator* _tmp51_;
							ValaIterator* _type_arg_it;
							_type_arg_it = (_tmp51_ = vala_iterable_iterator ((ValaIterable*) (_tmp50_ = vala_data_type_get_type_arguments (vala_object_creation_expression_get_type_reference (expr)))), _vala_collection_object_unref0 (_tmp50_), _tmp51_);
							while (TRUE) {
								ValaDataType* type_arg;
								if (!vala_iterator_next (_type_arg_it)) {
									break;
								}
								type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
								if (vala_ccode_base_module_requires_copy (self, type_arg)) {
									ValaCCodeExpression* _tmp52_;
									vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, ((-1) + (0.1 * type_param_index)) + 0.03, FALSE)), _tmp52_ = vala_ccode_base_module_get_destroy_func_expression (self, type_arg, FALSE));
									_vala_ccode_node_unref0 (_tmp52_);
								} else {
									ValaCCodeConstant* _tmp53_;
									vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, ((-1) + (0.1 * type_param_index)) + 0.03, FALSE)), (ValaCCodeExpression*) (_tmp53_ = vala_ccode_constant_new ("NULL")));
									_vala_ccode_node_unref0 (_tmp53_);
								}
								type_param_index++;
								_vala_code_node_unref0 (type_arg);
							}
							_vala_collection_object_unref0 (_type_arg_it);
						}
					}
				}
				ellipsis = FALSE;
				i = 1;
				params_it = vala_iterable_iterator ((ValaIterable*) params);
				{
					ValaList* _tmp54_;
					ValaIterator* _tmp55_;
					ValaIterator* _arg_it;
					_arg_it = (_tmp55_ = vala_iterable_iterator ((ValaIterable*) (_tmp54_ = vala_object_creation_expression_get_argument_list (expr))), _vala_collection_object_unref0 (_tmp54_), _tmp55_);
					while (TRUE) {
						ValaExpression* arg;
						ValaCCodeExpression* cexpr;
						ValaFormalParameter* param;
						if (!vala_iterator_next (_arg_it)) {
							break;
						}
						arg = (ValaExpression*) vala_iterator_get (_arg_it);
						cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) arg)));
						param = NULL;
						if (vala_iterator_next (params_it)) {
							ValaFormalParameter* _tmp56_;
							param = (_tmp56_ = (ValaFormalParameter*) vala_iterator_get (params_it), _vala_code_node_unref0 (param), _tmp56_);
							ellipsis = vala_formal_parameter_get_ellipsis (param);
							if (!ellipsis) {
								gboolean _tmp57_ = FALSE;
								ValaCCodeExpression* _tmp63_;
								if (!vala_formal_parameter_get_no_array_length (param)) {
									_tmp57_ = VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) param));
								} else {
									_tmp57_ = FALSE;
								}
								if (_tmp57_) {
									ValaArrayType* array_type;
									array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) param)));
									{
										gint dim;
										dim = 1;
										{
											gboolean _tmp58_;
											_tmp58_ = TRUE;
											while (TRUE) {
												ValaCCodeExpression* _tmp59_;
												if (!_tmp58_) {
													dim++;
												}
												_tmp58_ = FALSE;
												if (!(dim <= vala_array_type_get_rank (array_type))) {
													break;
												}
												vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, vala_formal_parameter_get_carray_length_parameter_position (param) + (0.01 * dim), FALSE)), _tmp59_ = vala_ccode_base_module_get_array_length_cexpression (self, arg, dim));
												_vala_ccode_node_unref0 (_tmp59_);
											}
										}
									}
									_vala_code_node_unref0 (array_type);
								} else {
									if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
										ValaDelegateType* deleg_type;
										ValaDelegate* d;
										deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) param)));
										d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
										if (vala_delegate_get_has_target (d)) {
											ValaCCodeExpression* delegate_target_destroy_notify;
											ValaCCodeExpression* _tmp60_ = NULL;
											ValaCCodeExpression* _tmp61_;
											ValaCCodeExpression* _tmp62_;
											ValaCCodeExpression* delegate_target;
											delegate_target_destroy_notify = NULL;
											delegate_target = (_tmp61_ = vala_ccode_base_module_get_delegate_target_cexpression (self, arg, &_tmp60_), delegate_target_destroy_notify = (_tmp62_ = _tmp60_, _vala_ccode_node_unref0 (delegate_target_destroy_notify), _tmp62_), _tmp61_);
											vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, vala_formal_parameter_get_cdelegate_target_parameter_position (param), FALSE)), delegate_target);
											if (vala_data_type_get_value_owned ((ValaDataType*) deleg_type)) {
												vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, vala_formal_parameter_get_cdelegate_target_parameter_position (param) + 0.01, FALSE)), delegate_target_destroy_notify);
											}
											_vala_ccode_node_unref0 (delegate_target);
											_vala_ccode_node_unref0 (delegate_target_destroy_notify);
										}
										_vala_code_node_unref0 (d);
										_vala_code_node_unref0 (deleg_type);
									}
								}
								cexpr = (_tmp63_ = vala_ccode_base_module_handle_struct_argument (self, param, arg, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp63_);
								if (vala_formal_parameter_get_ctype (param) != NULL) {
									ValaCCodeExpression* _tmp64_;
									cexpr = (_tmp64_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, vala_formal_parameter_get_ctype (param)), _vala_ccode_node_unref0 (cexpr), _tmp64_);
								}
							} else {
								ValaCCodeExpression* _tmp65_;
								cexpr = (_tmp65_ = vala_ccode_base_module_handle_struct_argument (self, NULL, arg, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp65_);
							}
							arg_pos = vala_ccode_base_module_get_param_pos (self, vala_formal_parameter_get_cparameter_position (param), ellipsis);
						} else {
							ValaCCodeExpression* _tmp66_;
							cexpr = (_tmp66_ = vala_ccode_base_module_handle_struct_argument (self, NULL, arg, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp66_);
							arg_pos = vala_ccode_base_module_get_param_pos (self, (double) i, ellipsis);
						}
						vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (arg_pos), cexpr);
						i++;
						_vala_code_node_unref0 (param);
						_vala_ccode_node_unref0 (cexpr);
						_vala_code_node_unref0 (arg);
					}
					_vala_collection_object_unref0 (_arg_it);
				}
				while (TRUE) {
					ValaFormalParameter* param;
					if (!vala_iterator_next (params_it)) {
						break;
					}
					param = (ValaFormalParameter*) vala_iterator_get (params_it);
					if (vala_formal_parameter_get_ellipsis (param)) {
						ellipsis = TRUE;
						_vala_code_node_unref0 (param);
						break;
					}
					if (vala_variable_get_initializer ((ValaVariable*) param) == NULL) {
						char* _tmp67_;
						vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), _tmp67_ = g_strdup_printf ("no default expression for argument %d", i));
						_g_free0 (_tmp67_);
						_vala_code_node_unref0 (param);
						_vala_collection_object_unref0 (params_it);
						_vala_collection_object_unref0 (carg_map);
						_vala_code_node_unref0 (cl);
						_vala_ccode_node_unref0 (creation_call);
						_vala_collection_object_unref0 (params);
						_vala_code_node_unref0 (m);
						_vala_code_node_unref0 (st);
						_vala_ccode_node_unref0 (creation_expr);
						_vala_ccode_node_unref0 (instance);
						return;
					}
					vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) param), (ValaCodeGenerator*) self);
					vala_map_set ((ValaMap*) carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos (self, vala_formal_parameter_get_cparameter_position (param), FALSE)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) param))));
					i++;
					_vala_code_node_unref0 (param);
				}
				last_pos = -1;
				while (TRUE) {
					ValaCCodeExpression* _tmp72_;
					min_pos = -1;
					{
						ValaSet* _tmp68_;
						ValaIterator* _tmp69_;
						ValaIterator* _pos_it;
						_pos_it = (_tmp69_ = vala_iterable_iterator ((ValaIterable*) (_tmp68_ = vala_map_get_keys ((ValaMap*) carg_map))), _vala_collection_object_unref0 (_tmp68_), _tmp69_);
						while (TRUE) {
							gint pos;
							gboolean _tmp70_ = FALSE;
							if (!vala_iterator_next (_pos_it)) {
								break;
							}
							pos = GPOINTER_TO_INT (vala_iterator_get (_pos_it));
							if (pos > last_pos) {
								gboolean _tmp71_ = FALSE;
								if (min_pos == (-1)) {
									_tmp71_ = TRUE;
								} else {
									_tmp71_ = pos < min_pos;
								}
								_tmp70_ = _tmp71_;
							} else {
								_tmp70_ = FALSE;
							}
							if (_tmp70_) {
								min_pos = pos;
							}
						}
						_vala_collection_object_unref0 (_pos_it);
					}
					if (min_pos == (-1)) {
						break;
					}
					vala_ccode_function_call_add_argument (creation_call, _tmp72_ = (ValaCCodeExpression*) vala_map_get ((ValaMap*) carg_map, GINT_TO_POINTER (min_pos)));
					_vala_ccode_node_unref0 (_tmp72_);
					last_pos = min_pos;
				}
				if (st != NULL) {
					_tmp74_ = !vala_struct_is_simple_type (st);
				} else {
					_tmp74_ = FALSE;
				}
				if (_tmp74_) {
					_tmp73_ = vala_method_get_cinstance_parameter_position (m) < 0;
				} else {
					_tmp73_ = FALSE;
				}
				if (_tmp73_) {
					ValaCCodeUnaryExpression* _tmp75_;
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp75_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
					_vala_ccode_node_unref0 (_tmp75_);
				}
				if (vala_code_node_get_tree_can_fail ((ValaCodeNode*) expr)) {
					ValaCCodeExpression* _tmp76_;
					ValaCCodeUnaryExpression* _tmp77_;
					vala_ccode_base_module_set_current_method_inner_error (self, TRUE);
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp77_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp76_ = vala_ccode_base_module_get_variable_cexpression (self, "_inner_error_"))));
					_vala_ccode_node_unref0 (_tmp77_);
					_vala_ccode_node_unref0 (_tmp76_);
				}
				if (ellipsis) {
					gboolean _tmp78_ = FALSE;
					gboolean _tmp79_ = FALSE;
					if (!vala_method_get_printf_format (m)) {
						_tmp79_ = !vala_method_get_scanf_format (m);
					} else {
						_tmp79_ = FALSE;
					}
					if (_tmp79_) {
						_tmp78_ = _vala_strcmp0 (vala_method_get_sentinel (m), "") != 0;
					} else {
						_tmp78_ = FALSE;
					}
					if (_tmp78_) {
						ValaCCodeConstant* _tmp80_;
						vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp80_ = vala_ccode_constant_new (vala_method_get_sentinel (m))));
						_vala_ccode_node_unref0 (_tmp80_);
					}
				}
				creation_expr = (_tmp81_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) creation_call), _vala_ccode_node_unref0 (creation_expr), _tmp81_);
				if ((_tmp83_ = (_tmp82_ = vala_ccode_base_module_get_custom_creturn_type (self, m)) != NULL, _g_free0 (_tmp82_), _tmp83_)) {
					char* _tmp84_;
					ValaCCodeExpression* _tmp85_;
					creation_expr = (_tmp85_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (creation_expr, _tmp84_ = vala_data_type_get_cname (vala_object_creation_expression_get_type_reference (expr))), _vala_ccode_node_unref0 (creation_expr), _tmp85_);
					_g_free0 (_tmp84_);
				}
				_vala_collection_object_unref0 (params_it);
				_vala_collection_object_unref0 (carg_map);
				_vala_code_node_unref0 (cl);
				_vala_ccode_node_unref0 (creation_call);
				_vala_collection_object_unref0 (params);
				_vala_code_node_unref0 (m);
			} else {
				if (VALA_IS_ERROR_CODE (vala_expression_get_symbol_reference ((ValaExpression*) expr))) {
					ValaErrorCode* ecode;
					ValaErrorDomain* edomain;
					ValaCCodeFunctionCall* creation_call;
					ValaList* _tmp86_;
					gboolean _tmp87_;
					char* _tmp92_;
					ValaCCodeIdentifier* _tmp93_;
					char* _tmp94_;
					ValaCCodeIdentifier* _tmp95_;
					ValaCCodeExpression* _tmp98_;
					ecode = _vala_code_node_ref0 (VALA_ERROR_CODE (vala_expression_get_symbol_reference ((ValaExpression*) expr)));
					edomain = _vala_code_node_ref0 (VALA_ERROR_DOMAIN (vala_symbol_get_parent_symbol ((ValaSymbol*) ecode)));
					creation_call = NULL;
					vala_ccode_base_module_generate_error_domain_declaration (self, edomain, self->source_declarations);
					if ((_tmp87_ = vala_collection_get_size ((ValaCollection*) (_tmp86_ = vala_object_creation_expression_get_argument_list (expr))) == 1, _vala_collection_object_unref0 (_tmp86_), _tmp87_)) {
						ValaCCodeIdentifier* _tmp88_;
						ValaCCodeFunctionCall* _tmp89_;
						creation_call = (_tmp89_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp88_ = vala_ccode_identifier_new ("g_error_new_literal"))), _vala_ccode_node_unref0 (creation_call), _tmp89_);
						_vala_ccode_node_unref0 (_tmp88_);
					} else {
						ValaCCodeIdentifier* _tmp90_;
						ValaCCodeFunctionCall* _tmp91_;
						creation_call = (_tmp91_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp90_ = vala_ccode_identifier_new ("g_error_new"))), _vala_ccode_node_unref0 (creation_call), _tmp91_);
						_vala_ccode_node_unref0 (_tmp90_);
					}
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp93_ = vala_ccode_identifier_new (_tmp92_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) edomain, NULL))));
					_vala_ccode_node_unref0 (_tmp93_);
					_g_free0 (_tmp92_);
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp95_ = vala_ccode_identifier_new (_tmp94_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) ecode, FALSE))));
					_vala_ccode_node_unref0 (_tmp95_);
					_g_free0 (_tmp94_);
					{
						ValaList* _tmp96_;
						ValaIterator* _tmp97_;
						ValaIterator* _arg_it;
						_arg_it = (_tmp97_ = vala_iterable_iterator ((ValaIterable*) (_tmp96_ = vala_object_creation_expression_get_argument_list (expr))), _vala_collection_object_unref0 (_tmp96_), _tmp97_);
						while (TRUE) {
							ValaExpression* arg;
							if (!vala_iterator_next (_arg_it)) {
								break;
							}
							arg = (ValaExpression*) vala_iterator_get (_arg_it);
							vala_ccode_function_call_add_argument (creation_call, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) arg)));
							_vala_code_node_unref0 (arg);
						}
						_vala_collection_object_unref0 (_arg_it);
					}
					creation_expr = (_tmp98_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) creation_call), _vala_ccode_node_unref0 (creation_expr), _tmp98_);
					_vala_ccode_node_unref0 (creation_call);
					_vala_code_node_unref0 (edomain);
					_vala_code_node_unref0 (ecode);
				} else {
					g_assert (FALSE);
				}
			}
		}
	}
	local = _vala_code_node_ref0 ((_tmp99_ = vala_code_node_get_parent_node ((ValaCodeNode*) expr), VALA_IS_LOCAL_VARIABLE (_tmp99_) ? ((ValaLocalVariable*) _tmp99_) : NULL));
	if (local != NULL) {
		_tmp100_ = vala_ccode_base_module_has_simple_struct_initializer (self, local);
	} else {
		_tmp100_ = FALSE;
	}
	if (_tmp100_) {
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) creation_expr);
	} else {
		if (instance != NULL) {
			ValaCCodeCommaExpression* ccomma;
			ccomma = vala_ccode_comma_expression_new ();
			if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
				vala_ccode_comma_expression_append_expression (ccomma, creation_expr);
			} else {
				ValaCCodeAssignment* _tmp101_;
				vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp101_ = vala_ccode_assignment_new (instance, creation_expr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
				_vala_ccode_node_unref0 (_tmp101_);
			}
			{
				ValaList* _tmp102_;
				ValaIterator* _tmp103_;
				ValaIterator* _init_it;
				_init_it = (_tmp103_ = vala_iterable_iterator ((ValaIterable*) (_tmp102_ = vala_object_creation_expression_get_object_initializer (expr))), _vala_collection_object_unref0 (_tmp102_), _tmp103_);
				while (TRUE) {
					ValaMemberInitializer* init;
					if (!vala_iterator_next (_init_it)) {
						break;
					}
					init = (ValaMemberInitializer*) vala_iterator_get (_init_it);
					if (VALA_IS_FIELD (vala_member_initializer_get_symbol_reference (init))) {
						ValaField* f;
						ValaDataType* instance_target_type;
						ValaCCodeExpression* typed_inst;
						ValaCCodeExpression* lhs;
						ValaCCodeAssignment* _tmp108_;
						gboolean _tmp109_ = FALSE;
						ValaSymbol* _tmp131_;
						ValaClass* cl;
						f = _vala_code_node_ref0 (VALA_FIELD (vala_member_initializer_get_symbol_reference (init)));
						instance_target_type = vala_ccode_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f)));
						typed_inst = vala_ccode_base_module_transform_expression (self, instance, vala_object_creation_expression_get_type_reference (expr), instance_target_type, NULL);
						lhs = NULL;
						if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
							char* _tmp104_;
							ValaCCodeExpression* _tmp105_;
							lhs = (_tmp105_ = (ValaCCodeExpression*) vala_ccode_member_access_new (typed_inst, _tmp104_ = vala_field_get_cname (f), FALSE), _vala_ccode_node_unref0 (lhs), _tmp105_);
							_g_free0 (_tmp104_);
						} else {
							char* _tmp106_;
							ValaCCodeExpression* _tmp107_;
							lhs = (_tmp107_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (typed_inst, _tmp106_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp107_);
							_g_free0 (_tmp106_);
						}
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp108_ = vala_ccode_assignment_new (lhs, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_member_initializer_get_initializer (init))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
						_vala_ccode_node_unref0 (_tmp108_);
						if (VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
							_tmp109_ = !vala_field_get_no_array_length (f);
						} else {
							_tmp109_ = FALSE;
						}
						if (_tmp109_) {
							ValaArrayType* array_type;
							array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) f)));
							{
								gint dim;
								dim = 1;
								{
									gboolean _tmp110_;
									_tmp110_ = TRUE;
									while (TRUE) {
										ValaCCodeExpression* rhs_array_len;
										ValaCCodeAssignment* _tmp117_;
										if (!_tmp110_) {
											dim++;
										}
										_tmp110_ = FALSE;
										if (!(dim <= vala_array_type_get_rank (array_type))) {
											break;
										}
										if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
											char* _tmp111_;
											char* _tmp112_;
											ValaCCodeExpression* _tmp113_;
											lhs = (_tmp113_ = (ValaCCodeExpression*) vala_ccode_member_access_new (typed_inst, _tmp112_ = vala_ccode_base_module_get_array_length_cname (self, _tmp111_ = vala_field_get_cname (f), dim), FALSE), _vala_ccode_node_unref0 (lhs), _tmp113_);
											_g_free0 (_tmp112_);
											_g_free0 (_tmp111_);
										} else {
											char* _tmp114_;
											char* _tmp115_;
											ValaCCodeExpression* _tmp116_;
											lhs = (_tmp116_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (typed_inst, _tmp115_ = vala_ccode_base_module_get_array_length_cname (self, _tmp114_ = vala_field_get_cname (f), dim)), _vala_ccode_node_unref0 (lhs), _tmp116_);
											_g_free0 (_tmp115_);
											_g_free0 (_tmp114_);
										}
										rhs_array_len = vala_ccode_base_module_get_array_length_cexpression (self, vala_member_initializer_get_initializer (init), dim);
										vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp117_ = vala_ccode_assignment_new (lhs, rhs_array_len, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
										_vala_ccode_node_unref0 (_tmp117_);
										_vala_ccode_node_unref0 (rhs_array_len);
									}
								}
							}
							_vala_code_node_unref0 (array_type);
						} else {
							gboolean _tmp118_ = FALSE;
							gboolean _tmp119_ = FALSE;
							if (VALA_IS_DELEGATE_TYPE (vala_variable_get_variable_type ((ValaVariable*) f))) {
								ValaDataType* _tmp120_;
								_tmp119_ = vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol ((_tmp120_ = vala_variable_get_variable_type ((ValaVariable*) f), VALA_IS_DELEGATE_TYPE (_tmp120_) ? ((ValaDelegateType*) _tmp120_) : NULL)));
							} else {
								_tmp119_ = FALSE;
							}
							if (_tmp119_) {
								_tmp118_ = !vala_field_get_no_delegate_target (f);
							} else {
								_tmp118_ = FALSE;
							}
							if (_tmp118_) {
								ValaCCodeExpression* rhs_delegate_target_destroy_notify;
								ValaCCodeExpression* _tmp127_ = NULL;
								ValaCCodeExpression* _tmp128_;
								ValaCCodeExpression* _tmp129_;
								ValaCCodeExpression* rhs_delegate_target;
								ValaCCodeAssignment* _tmp130_;
								if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
									char* _tmp121_;
									char* _tmp122_;
									ValaCCodeExpression* _tmp123_;
									lhs = (_tmp123_ = (ValaCCodeExpression*) vala_ccode_member_access_new (typed_inst, _tmp122_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp121_ = vala_field_get_cname (f)), FALSE), _vala_ccode_node_unref0 (lhs), _tmp123_);
									_g_free0 (_tmp122_);
									_g_free0 (_tmp121_);
								} else {
									char* _tmp124_;
									char* _tmp125_;
									ValaCCodeExpression* _tmp126_;
									lhs = (_tmp126_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (typed_inst, _tmp125_ = vala_ccode_base_module_get_delegate_target_cname (self, _tmp124_ = vala_field_get_cname (f))), _vala_ccode_node_unref0 (lhs), _tmp126_);
									_g_free0 (_tmp125_);
									_g_free0 (_tmp124_);
								}
								rhs_delegate_target_destroy_notify = NULL;
								rhs_delegate_target = (_tmp128_ = vala_ccode_base_module_get_delegate_target_cexpression (self, vala_member_initializer_get_initializer (init), &_tmp127_), rhs_delegate_target_destroy_notify = (_tmp129_ = _tmp127_, _vala_ccode_node_unref0 (rhs_delegate_target_destroy_notify), _tmp129_), _tmp128_);
								vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp130_ = vala_ccode_assignment_new (lhs, rhs_delegate_target, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
								_vala_ccode_node_unref0 (_tmp130_);
								_vala_ccode_node_unref0 (rhs_delegate_target);
								_vala_ccode_node_unref0 (rhs_delegate_target_destroy_notify);
							}
						}
						cl = _vala_code_node_ref0 ((_tmp131_ = vala_symbol_get_parent_symbol ((ValaSymbol*) f), VALA_IS_CLASS (_tmp131_) ? ((ValaClass*) _tmp131_) : NULL));
						if (cl != NULL) {
							vala_ccode_base_module_generate_class_struct_declaration (self, cl, self->source_declarations);
						}
						_vala_code_node_unref0 (cl);
						_vala_ccode_node_unref0 (lhs);
						_vala_ccode_node_unref0 (typed_inst);
						_vala_code_node_unref0 (instance_target_type);
						_vala_code_node_unref0 (f);
					} else {
						if (VALA_IS_PROPERTY (vala_member_initializer_get_symbol_reference (init))) {
							ValaMemberAccess* inst_ma;
							ValaMemberAccess* ma;
							ValaCCodeExpression* _tmp132_;
							inst_ma = vala_member_access_new_simple ("new", NULL);
							vala_expression_set_value_type ((ValaExpression*) inst_ma, vala_object_creation_expression_get_type_reference (expr));
							vala_code_node_set_ccodenode ((ValaCodeNode*) inst_ma, (ValaCCodeNode*) instance);
							ma = vala_member_access_new ((ValaExpression*) inst_ma, vala_member_initializer_get_name (init), NULL);
							vala_ccode_comma_expression_append_expression (ccomma, _tmp132_ = vala_ccode_base_module_get_property_set_call (self, VALA_PROPERTY (vala_member_initializer_get_symbol_reference (init)), ma, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_member_initializer_get_initializer (init))), NULL));
							_vala_ccode_node_unref0 (_tmp132_);
							_vala_code_node_unref0 (ma);
							_vala_code_node_unref0 (inst_ma);
						}
					}
					_vala_code_node_unref0 (init);
				}
				_vala_collection_object_unref0 (_init_it);
			}
			vala_ccode_comma_expression_append_expression (ccomma, instance);
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
			_vala_ccode_node_unref0 (ccomma);
		} else {
			if (creation_expr != NULL) {
				vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) creation_expr);
			}
		}
	}
	_vala_code_node_unref0 (local);
	_vala_code_node_unref0 (st);
	_vala_ccode_node_unref0 (creation_expr);
	_vala_ccode_node_unref0 (instance);
}


ValaCCodeExpression* vala_ccode_base_module_handle_struct_argument (ValaCCodeBaseModule* self, ValaFormalParameter* param, ValaExpression* arg, ValaCCodeExpression* cexpr) {
	ValaCCodeExpression* result = NULL;
	ValaDataType* type;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (arg != NULL, NULL);
	type = NULL;
	if (param != NULL) {
		ValaDataType* _tmp0_;
		type = (_tmp0_ = _vala_code_node_ref0 (vala_variable_get_variable_type ((ValaVariable*) param)), _vala_code_node_unref0 (type), _tmp0_);
	} else {
		ValaDataType* _tmp1_;
		type = (_tmp1_ = _vala_code_node_ref0 (vala_expression_get_value_type (arg)), _vala_code_node_unref0 (type), _tmp1_);
	}
	if (!VALA_IS_NULL_TYPE (vala_expression_get_value_type (arg))) {
		_tmp2_ = vala_data_type_is_real_struct_type (type);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		if (param == NULL) {
			_tmp4_ = TRUE;
		} else {
			_tmp4_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
		}
		if (_tmp4_) {
			_tmp3_ = !vala_data_type_get_nullable (type);
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			ValaCCodeExpression* _tmp5_;
			ValaCCodeUnaryExpression* unary;
			gboolean _tmp6_ = FALSE;
			unary = _vala_ccode_node_ref0 ((_tmp5_ = cexpr, VALA_IS_CCODE_UNARY_EXPRESSION (_tmp5_) ? ((ValaCCodeUnaryExpression*) _tmp5_) : NULL));
			if (unary != NULL) {
				_tmp6_ = vala_ccode_unary_expression_get_operator (unary) == VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION;
			} else {
				_tmp6_ = FALSE;
			}
			if (_tmp6_) {
				result = _vala_ccode_node_ref0 (vala_ccode_unary_expression_get_inner (unary));
				_vala_ccode_node_unref0 (unary);
				_vala_code_node_unref0 (type);
				return result;
			} else {
				gboolean _tmp7_ = FALSE;
				if (VALA_IS_CCODE_IDENTIFIER (cexpr)) {
					_tmp7_ = TRUE;
				} else {
					_tmp7_ = VALA_IS_CCODE_MEMBER_ACCESS (cexpr);
				}
				if (_tmp7_) {
					result = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr);
					_vala_ccode_node_unref0 (unary);
					_vala_code_node_unref0 (type);
					return result;
				} else {
					ValaCCodeCommaExpression* ccomma;
					ValaLocalVariable* temp_var;
					ValaCCodeExpression* _tmp8_;
					ValaCCodeAssignment* _tmp9_;
					ValaCCodeExpression* _tmp10_;
					ValaCCodeUnaryExpression* _tmp11_;
					ccomma = vala_ccode_comma_expression_new ();
					temp_var = vala_ccode_base_module_get_temp_variable (self, type, TRUE, NULL, FALSE);
					vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_var);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_assignment_new (_tmp8_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp9_);
					_vala_ccode_node_unref0 (_tmp8_);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp10_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)))));
					_vala_ccode_node_unref0 (_tmp11_);
					_vala_ccode_node_unref0 (_tmp10_);
					result = (ValaCCodeExpression*) ccomma;
					_vala_code_node_unref0 (temp_var);
					_vala_ccode_node_unref0 (unary);
					_vala_code_node_unref0 (type);
					return result;
				}
			}
			_vala_ccode_node_unref0 (unary);
		}
	}
	result = _vala_ccode_node_ref0 (cexpr);
	_vala_code_node_unref0 (type);
	return result;
}


static void vala_ccode_base_module_real_visit_sizeof_expression (ValaCodeVisitor* base, ValaSizeofExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* csizeof;
	char* _tmp2_;
	ValaCCodeIdentifier* _tmp3_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_ccode_base_module_generate_type_declaration (self, vala_sizeof_expression_get_type_reference (expr), self->source_declarations);
	csizeof = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	vala_ccode_function_call_add_argument (csizeof, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new (_tmp2_ = vala_data_type_get_cname (vala_sizeof_expression_get_type_reference (expr)))));
	_vala_ccode_node_unref0 (_tmp3_);
	_g_free0 (_tmp2_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) csizeof);
	_vala_ccode_node_unref0 (csizeof);
}


static void vala_ccode_base_module_real_visit_typeof_expression (ValaCodeVisitor* base, ValaTypeofExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_base_module_get_type_id_expression (self, vala_typeof_expression_get_type_reference (expr), FALSE)));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_ccode_base_module_real_visit_unary_expression (ValaCodeVisitor* base, ValaUnaryExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeUnaryOperator op = 0;
	ValaCCodeUnaryExpression* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_PLUS) {
		op = VALA_CCODE_UNARY_OPERATOR_PLUS;
	} else {
		if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_MINUS) {
			op = VALA_CCODE_UNARY_OPERATOR_MINUS;
		} else {
			if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_LOGICAL_NEGATION) {
				op = VALA_CCODE_UNARY_OPERATOR_LOGICAL_NEGATION;
			} else {
				if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_BITWISE_COMPLEMENT) {
					op = VALA_CCODE_UNARY_OPERATOR_BITWISE_COMPLEMENT;
				} else {
					if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_INCREMENT) {
						op = VALA_CCODE_UNARY_OPERATOR_PREFIX_INCREMENT;
					} else {
						if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_DECREMENT) {
							op = VALA_CCODE_UNARY_OPERATOR_PREFIX_DECREMENT;
						} else {
							if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_REF) {
								op = VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF;
							} else {
								if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_OUT) {
									op = VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF;
								} else {
									g_assert_not_reached ();
								}
							}
						}
					}
				}
			}
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_unary_expression_new (op, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_unary_expression_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp0_);
}


ValaCCodeExpression* vala_ccode_base_module_try_cast_value_to_type (ValaCCodeBaseModule* self, ValaCCodeExpression* ccodeexpr, ValaDataType* from, ValaDataType* to, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	ValaCCodeIdentifier* _tmp4_;
	ValaCCodeFunctionCall* _tmp5_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeExpression* gvalue;
	ValaCCodeExpression* rv;
	gboolean _tmp8_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (ccodeexpr != NULL, NULL);
	g_return_val_if_fail (from != NULL, NULL);
	g_return_val_if_fail (to != NULL, NULL);
	if (from == NULL) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = self->gvalue_type == NULL;
	}
	if (_tmp2_) {
		_tmp1_ = TRUE;
	} else {
		_tmp1_ = vala_data_type_get_data_type (from) != VALA_TYPESYMBOL (self->gvalue_type);
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		char* _tmp3_;
		_tmp0_ = (_tmp3_ = vala_data_type_get_type_id (to)) == NULL;
		_g_free0 (_tmp3_);
	}
	if (_tmp0_) {
		result = NULL;
		return result;
	}
	ccall = (_tmp5_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_base_module_get_value_getter_function (self, to))), _vala_ccode_node_unref0 (_tmp4_), _tmp5_);
	gvalue = NULL;
	if (vala_data_type_get_nullable (from)) {
		ValaCCodeExpression* _tmp6_;
		gvalue = (_tmp6_ = _vala_ccode_node_ref0 (ccodeexpr), _vala_ccode_node_unref0 (gvalue), _tmp6_);
	} else {
		ValaCCodeExpression* _tmp7_;
		gvalue = (_tmp7_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ccodeexpr), _vala_ccode_node_unref0 (gvalue), _tmp7_);
	}
	vala_ccode_function_call_add_argument (ccall, gvalue);
	rv = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall);
	if (expr != NULL) {
		_tmp8_ = VALA_IS_ARRAY_TYPE (to);
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		ValaCCodeIdentifier* _tmp9_;
		ValaCCodeFunctionCall* _tmp10_;
		ValaCCodeFunctionCall* len_call;
		len_call = (_tmp10_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new ("g_strv_length"))), _vala_ccode_node_unref0 (_tmp9_), _tmp10_);
		vala_ccode_function_call_add_argument (len_call, rv);
		vala_expression_append_array_size (expr, (ValaCCodeExpression*) len_call);
		_vala_ccode_node_unref0 (len_call);
	} else {
		if (VALA_IS_STRUCT_VALUE_TYPE (to)) {
			ValaLocalVariable* temp_decl;
			ValaCCodeExpression* ctemp;
			ValaPointerType* _tmp11_;
			char* _tmp12_;
			ValaCCodeCastExpression* _tmp13_;
			ValaCCodeExpression* _tmp14_;
			ValaCCodeIdentifier* _tmp15_;
			ValaCCodeFunctionCall* _tmp16_;
			ValaCCodeFunctionCall* holds;
			char* _tmp17_;
			ValaCCodeIdentifier* _tmp18_;
			ValaCCodeBinaryExpression* cond;
			ValaCCodeIdentifier* _tmp19_;
			ValaCCodeFunctionCall* _tmp20_;
			ValaCCodeFunctionCall* warn;
			ValaCCodeConstant* _tmp21_;
			ValaCCodeCommaExpression* fail;
			ValaCCodeExpression* _tmp22_;
			temp_decl = vala_ccode_base_module_get_temp_variable (self, to, TRUE, NULL, TRUE);
			vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
			ctemp = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
			rv = (_tmp14_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_cast_expression_new (rv, _tmp12_ = vala_data_type_get_cname ((ValaDataType*) (_tmp11_ = vala_pointer_type_new (to, NULL)))))), _vala_ccode_node_unref0 (rv), _tmp14_);
			_vala_ccode_node_unref0 (_tmp13_);
			_g_free0 (_tmp12_);
			_vala_code_node_unref0 (_tmp11_);
			holds = (_tmp16_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp15_ = vala_ccode_identifier_new ("G_VALUE_HOLDS"))), _vala_ccode_node_unref0 (_tmp15_), _tmp16_);
			vala_ccode_function_call_add_argument (holds, gvalue);
			vala_ccode_function_call_add_argument (holds, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_identifier_new (_tmp17_ = vala_data_type_get_type_id (to))));
			_vala_ccode_node_unref0 (_tmp18_);
			_g_free0 (_tmp17_);
			cond = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_AND, (ValaCCodeExpression*) holds, (ValaCCodeExpression*) ccall);
			warn = (_tmp20_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new ("g_warning"))), _vala_ccode_node_unref0 (_tmp19_), _tmp20_);
			vala_ccode_function_call_add_argument (warn, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_constant_new ("\"Invalid GValue unboxing (wrong type or NULL)\"")));
			_vala_ccode_node_unref0 (_tmp21_);
			fail = vala_ccode_comma_expression_new ();
			vala_ccode_comma_expression_append_expression (fail, (ValaCCodeExpression*) warn);
			vala_ccode_comma_expression_append_expression (fail, ctemp);
			rv = (_tmp22_ = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cond, rv, (ValaCCodeExpression*) fail), _vala_ccode_node_unref0 (rv), _tmp22_);
			_vala_ccode_node_unref0 (fail);
			_vala_ccode_node_unref0 (warn);
			_vala_ccode_node_unref0 (cond);
			_vala_ccode_node_unref0 (holds);
			_vala_ccode_node_unref0 (ctemp);
			_vala_code_node_unref0 (temp_decl);
		}
	}
	result = rv;
	_vala_ccode_node_unref0 (gvalue);
	_vala_ccode_node_unref0 (ccall);
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_try_cast_variant_to_type (ValaCCodeBaseModule* self, ValaCCodeExpression* ccodeexpr, ValaDataType* from, ValaDataType* to, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	char* variant_func;
	ValaCCodeIdentifier* _tmp2_;
	ValaCCodeFunctionCall* _tmp3_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeFunction* cfunc;
	ValaCCodeFormalParameter* _tmp4_;
	ValaCCodeBlock* block;
	ValaCCodeFragment* fragment;
	ValaCCodeIdentifier* _tmp15_;
	ValaCCodeIdentifier* _tmp16_;
	ValaCCodeExpression* _tmp17_;
	ValaCCodeExpression* _result_;
	ValaCCodeReturnStatement* _tmp18_;
	ValaCCodeFunction* _tmp19_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (ccodeexpr != NULL, NULL);
	g_return_val_if_fail (from != NULL, NULL);
	g_return_val_if_fail (to != NULL, NULL);
	if (from == NULL) {
		_tmp1_ = TRUE;
	} else {
		_tmp1_ = self->gvariant_type == NULL;
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = vala_data_type_get_data_type (from) != VALA_TYPESYMBOL (self->gvariant_type);
	}
	if (_tmp0_) {
		result = NULL;
		return result;
	}
	variant_func = g_strdup_printf ("_variant_get%d", self->priv->next_variant_function_id = self->priv->next_variant_function_id + 1);
	ccall = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (variant_func))), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	vala_ccode_function_call_add_argument (ccall, ccodeexpr);
	cfunc = vala_ccode_function_new (variant_func, "void");
	vala_ccode_function_set_modifiers (cfunc, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (cfunc, _tmp4_ = vala_ccode_formal_parameter_new ("value", "GVariant*"));
	_vala_ccode_node_unref0 (_tmp4_);
	if (!vala_data_type_is_real_non_null_struct_type (to)) {
		char* _tmp5_;
		vala_ccode_function_set_return_type (cfunc, _tmp5_ = vala_data_type_get_cname (to));
		_g_free0 (_tmp5_);
	}
	if (vala_data_type_is_real_non_null_struct_type (to)) {
		char* _tmp6_;
		char* _tmp7_;
		ValaCCodeFormalParameter* _tmp8_;
		vala_ccode_function_add_parameter (cfunc, _tmp8_ = vala_ccode_formal_parameter_new ("result", _tmp7_ = g_strconcat (_tmp6_ = vala_data_type_get_cname (to), "*", NULL)));
		_vala_ccode_node_unref0 (_tmp8_);
		_g_free0 (_tmp7_);
		_g_free0 (_tmp6_);
	} else {
		if (VALA_IS_ARRAY_TYPE (to)) {
			ValaArrayType* array_type;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (to));
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp9_;
					_tmp9_ = TRUE;
					while (TRUE) {
						ValaLocalVariable* temp_decl;
						ValaCCodeExpression* _tmp10_;
						ValaCCodeUnaryExpression* _tmp11_;
						char* _tmp12_;
						ValaCCodeFormalParameter* _tmp13_;
						ValaCCodeExpression* _tmp14_;
						if (!_tmp9_) {
							dim++;
						}
						_tmp9_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						temp_decl = vala_ccode_base_module_get_temp_variable (self, self->int_type, FALSE, (ValaCodeNode*) expr, TRUE);
						vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
						vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp10_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)))));
						_vala_ccode_node_unref0 (_tmp11_);
						_vala_ccode_node_unref0 (_tmp10_);
						vala_ccode_function_add_parameter (cfunc, _tmp13_ = vala_ccode_formal_parameter_new (_tmp12_ = vala_ccode_base_module_get_array_length_cname (self, "result", dim), "int*"));
						_vala_ccode_node_unref0 (_tmp13_);
						_g_free0 (_tmp12_);
						vala_expression_append_array_size (expr, _tmp14_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)));
						_vala_ccode_node_unref0 (_tmp14_);
						_vala_code_node_unref0 (temp_decl);
					}
				}
			}
			_vala_code_node_unref0 (array_type);
		}
	}
	block = vala_ccode_block_new ();
	fragment = vala_ccode_fragment_new ();
	_result_ = (_tmp17_ = vala_ccode_base_module_deserialize_expression (self, fragment, to, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_identifier_new ("value")), (ValaCCodeExpression*) (_tmp16_ = vala_ccode_identifier_new ("*result"))), _vala_ccode_node_unref0 (_tmp16_), _vala_ccode_node_unref0 (_tmp15_), _tmp17_);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) fragment);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp18_ = vala_ccode_return_statement_new (_result_)));
	_vala_ccode_node_unref0 (_tmp18_);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp19_ = vala_ccode_function_copy (cfunc)));
	_vala_ccode_node_unref0 (_tmp19_);
	vala_ccode_function_set_block (cfunc, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) cfunc);
	result = (ValaCCodeExpression*) ccall;
	_vala_ccode_node_unref0 (_result_);
	_vala_ccode_node_unref0 (fragment);
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (cfunc);
	_g_free0 (variant_func);
	return result;
}


static ValaCCodeExpression* vala_ccode_base_module_real_deserialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (fragment != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	g_return_val_if_fail (variant_expr != NULL, NULL);
	result = NULL;
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_deserialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->deserialize_expression (self, fragment, type, variant_expr, expr);
}


static ValaCCodeExpression* vala_ccode_base_module_real_serialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (fragment != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	g_return_val_if_fail (expr != NULL, NULL);
	result = NULL;
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_serialize_expression (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->serialize_expression (self, fragment, type, expr);
}


static void vala_ccode_base_module_real_visit_cast_expression (ValaCodeVisitor* base, ValaCastExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* valuecast;
	ValaCCodeExpression* variantcast;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	ValaTypeSymbol* _tmp1_;
	ValaInterface* iface;
	gboolean _tmp2_ = FALSE;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	valuecast = vala_ccode_base_module_try_cast_value_to_type (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), vala_expression_get_value_type (vala_cast_expression_get_inner (expr)), vala_cast_expression_get_type_reference (expr), (ValaExpression*) expr);
	if (valuecast != NULL) {
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) valuecast);
		_vala_ccode_node_unref0 (valuecast);
		return;
	}
	variantcast = vala_ccode_base_module_try_cast_variant_to_type (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), vala_expression_get_value_type (vala_cast_expression_get_inner (expr)), vala_cast_expression_get_type_reference (expr), (ValaExpression*) expr);
	if (variantcast != NULL) {
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) variantcast);
		_vala_ccode_node_unref0 (variantcast);
		_vala_ccode_node_unref0 (valuecast);
		return;
	}
	vala_ccode_base_module_generate_type_declaration (self, vala_cast_expression_get_type_reference (expr), self->source_declarations);
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr)), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	iface = _vala_code_node_ref0 ((_tmp1_ = vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr)), VALA_IS_INTERFACE (_tmp1_) ? ((ValaInterface*) _tmp1_) : NULL));
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		gboolean _tmp3_ = FALSE;
		if (iface != NULL) {
			_tmp3_ = TRUE;
		} else {
			gboolean _tmp4_ = FALSE;
			if (cl != NULL) {
				_tmp4_ = !vala_class_get_is_compact (cl);
			} else {
				_tmp4_ = FALSE;
			}
			_tmp3_ = _tmp4_;
		}
		_tmp2_ = _tmp3_;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		if (vala_cast_expression_get_is_silent_cast (expr)) {
			ValaCCodeCommaExpression* ccomma;
			ValaLocalVariable* temp_decl;
			ValaCCodeExpression* ctemp;
			ValaCCodeAssignment* cinit;
			ValaCCodeExpression* ccheck;
			char* _tmp5_;
			ValaCCodeCastExpression* _tmp6_;
			ValaCCodeCastExpression* ccast;
			ValaCCodeConstant* cnull;
			ValaCCodeConditionalExpression* _tmp7_;
			ccomma = vala_ccode_comma_expression_new ();
			temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_value_type (vala_cast_expression_get_inner (expr)), TRUE, (ValaCodeNode*) expr, FALSE);
			vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
			ctemp = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
			cinit = vala_ccode_assignment_new (ctemp, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE);
			ccheck = vala_ccode_base_module_create_type_check (self, (ValaCCodeNode*) ctemp, vala_cast_expression_get_type_reference (expr));
			ccast = (_tmp6_ = vala_ccode_cast_expression_new (ctemp, _tmp5_ = vala_data_type_get_cname (vala_cast_expression_get_type_reference (expr))), _g_free0 (_tmp5_), _tmp6_);
			cnull = vala_ccode_constant_new ("NULL");
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) cinit);
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_conditional_expression_new (ccheck, (ValaCCodeExpression*) ccast, (ValaCCodeExpression*) cnull)));
			_vala_ccode_node_unref0 (_tmp7_);
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
			_vala_ccode_node_unref0 (cnull);
			_vala_ccode_node_unref0 (ccast);
			_vala_ccode_node_unref0 (ccheck);
			_vala_ccode_node_unref0 (cinit);
			_vala_ccode_node_unref0 (ctemp);
			_vala_code_node_unref0 (temp_decl);
			_vala_ccode_node_unref0 (ccomma);
		} else {
			ValaCCodeFunctionCall* _tmp8_;
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp8_ = vala_ccode_base_module_generate_instance_cast (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr)))));
			_vala_ccode_node_unref0 (_tmp8_);
		}
	} else {
		ValaDataType* _tmp9_;
		ValaArrayType* array_type;
		gboolean _tmp10_ = FALSE;
		ValaCCodeExpression* innercexpr;
		gboolean _tmp13_ = FALSE;
		gboolean _tmp14_ = FALSE;
		gboolean _tmp15_ = FALSE;
		char* _tmp17_;
		ValaCCodeCastExpression* _tmp18_;
		if (vala_cast_expression_get_is_silent_cast (expr)) {
			vala_code_node_set_error ((ValaCodeNode*) expr, TRUE);
			vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), "Operation not supported for this type");
			_vala_code_node_unref0 (iface);
			_vala_code_node_unref0 (cl);
			_vala_ccode_node_unref0 (variantcast);
			_vala_ccode_node_unref0 (valuecast);
			return;
		}
		array_type = _vala_code_node_ref0 ((_tmp9_ = vala_cast_expression_get_type_reference (expr), VALA_IS_ARRAY_TYPE (_tmp9_) ? ((ValaArrayType*) _tmp9_) : NULL));
		if (array_type != NULL) {
			_tmp10_ = VALA_IS_ARRAY_TYPE (vala_expression_get_value_type (vala_cast_expression_get_inner (expr)));
		} else {
			_tmp10_ = FALSE;
		}
		if (_tmp10_) {
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp11_;
					_tmp11_ = TRUE;
					while (TRUE) {
						ValaCCodeExpression* _tmp12_;
						if (!_tmp11_) {
							dim++;
						}
						_tmp11_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						vala_expression_append_array_size ((ValaExpression*) expr, _tmp12_ = vala_ccode_base_module_get_array_length_cexpression (self, vala_cast_expression_get_inner (expr), dim));
						_vala_ccode_node_unref0 (_tmp12_);
					}
				}
			}
		}
		innercexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))));
		if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr)))) {
			_tmp15_ = !vala_data_type_get_nullable (vala_cast_expression_get_type_reference (expr));
		} else {
			_tmp15_ = FALSE;
		}
		if (_tmp15_) {
			_tmp14_ = VALA_IS_STRUCT (vala_data_type_get_data_type (vala_expression_get_value_type (vala_cast_expression_get_inner (expr))));
		} else {
			_tmp14_ = FALSE;
		}
		if (_tmp14_) {
			_tmp13_ = vala_data_type_get_nullable (vala_expression_get_value_type (vala_cast_expression_get_inner (expr)));
		} else {
			_tmp13_ = FALSE;
		}
		if (_tmp13_) {
			ValaCCodeExpression* _tmp16_;
			innercexpr = (_tmp16_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, innercexpr), _vala_ccode_node_unref0 (innercexpr), _tmp16_);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp18_ = vala_ccode_cast_expression_new (innercexpr, _tmp17_ = vala_data_type_get_cname (vala_cast_expression_get_type_reference (expr)))));
		_vala_ccode_node_unref0 (_tmp18_);
		_g_free0 (_tmp17_);
		_vala_ccode_node_unref0 (innercexpr);
		_vala_code_node_unref0 (array_type);
	}
	_vala_code_node_unref0 (iface);
	_vala_code_node_unref0 (cl);
	_vala_ccode_node_unref0 (variantcast);
	_vala_ccode_node_unref0 (valuecast);
}


static void vala_ccode_base_module_real_visit_named_argument (ValaCodeVisitor* base, ValaNamedArgument* expr) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_named_argument_get_inner (expr)));
}


static void vala_ccode_base_module_real_visit_pointer_indirection (ValaCodeVisitor* base, ValaPointerIndirection* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeUnaryExpression* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_pointer_indirection_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_ccode_base_module_real_visit_addressof_expression (ValaCodeVisitor* base, ValaAddressofExpression* expr) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (VALA_IS_CCODE_COMMA_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_addressof_expression_get_inner (expr)))) {
		ValaCCodeNode* _tmp0_;
		ValaCCodeCommaExpression* ccomma;
		ValaList* inner;
		ValaCCodeExpression* last;
		ValaCCodeUnaryExpression* _tmp1_;
		ccomma = _vala_ccode_node_ref0 ((_tmp0_ = vala_code_node_get_ccodenode ((ValaCodeNode*) vala_addressof_expression_get_inner (expr)), VALA_IS_CCODE_COMMA_EXPRESSION (_tmp0_) ? ((ValaCCodeCommaExpression*) _tmp0_) : NULL));
		inner = vala_ccode_comma_expression_get_inner (ccomma);
		last = (ValaCCodeExpression*) vala_list_get (inner, vala_collection_get_size ((ValaCollection*) inner) - 1);
		vala_ccode_comma_expression_set_expression (ccomma, vala_collection_get_size ((ValaCollection*) inner) - 1, (ValaCCodeExpression*) (_tmp1_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, VALA_CCODE_EXPRESSION (last))));
		_vala_ccode_node_unref0 (_tmp1_);
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
		_vala_ccode_node_unref0 (last);
		_vala_collection_object_unref0 (inner);
		_vala_ccode_node_unref0 (ccomma);
	} else {
		ValaCCodeUnaryExpression* _tmp2_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp2_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_addressof_expression_get_inner (expr))))));
		_vala_ccode_node_unref0 (_tmp2_);
	}
}


static void vala_ccode_base_module_real_visit_reference_transfer_expression (ValaCodeVisitor* base, ValaReferenceTransferExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeCommaExpression* ccomma;
	ValaLocalVariable* temp_decl;
	ValaCCodeExpression* cvar;
	ValaCCodeAssignment* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	ValaCCodeAssignment* _tmp2_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	ccomma = vala_ccode_comma_expression_new ();
	temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_value_type ((ValaExpression*) expr), TRUE, (ValaCodeNode*) expr, FALSE);
	vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
	cvar = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp0_ = vala_ccode_assignment_new (cvar, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_reference_transfer_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp0_);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp2_ = vala_ccode_assignment_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_reference_transfer_expression_get_inner (expr))), (ValaCCodeExpression*) (_tmp1_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp2_);
	_vala_ccode_node_unref0 (_tmp1_);
	vala_ccode_comma_expression_append_expression (ccomma, cvar);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
	_vala_ccode_node_unref0 (cvar);
	_vala_code_node_unref0 (temp_decl);
	_vala_ccode_node_unref0 (ccomma);
}


static void vala_ccode_base_module_real_visit_binary_expression (ValaCodeVisitor* base, ValaBinaryExpression* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* cleft;
	ValaCCodeExpression* cright;
	ValaCCodeExpression* left_chain;
	ValaCCodeBinaryOperator op = 0;
	gboolean _tmp16_ = FALSE;
	gboolean _tmp35_ = FALSE;
	gboolean _tmp36_ = FALSE;
	gboolean _tmp37_ = FALSE;
	ValaCCodeBinaryExpression* _tmp70_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	cleft = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_binary_expression_get_left (expr))));
	cright = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_binary_expression_get_right (expr))));
	left_chain = NULL;
	if (expr->chained) {
		ValaBinaryExpression* lbe;
		ValaLocalVariable* temp_decl;
		ValaCCodeExpression* cvar;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeBinaryExpression* clbe;
		ValaCCodeAssignment* _tmp1_;
		ValaCCodeExpression* _tmp2_;
		ValaCCodeExpression* _tmp3_;
		ValaCCodeExpression* _tmp4_;
		lbe = _vala_code_node_ref0 (VALA_BINARY_EXPRESSION (vala_binary_expression_get_left (expr)));
		temp_decl = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_value_type (vala_binary_expression_get_right (lbe)), TRUE, NULL, FALSE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
		cvar = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
		ccomma = vala_ccode_comma_expression_new ();
		clbe = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) lbe)));
		if (lbe->chained) {
			ValaCCodeBinaryExpression* _tmp0_;
			clbe = (_tmp0_ = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (vala_ccode_binary_expression_get_right (clbe))), _vala_ccode_node_unref0 (clbe), _tmp0_);
		}
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp1_ = vala_ccode_assignment_new (cvar, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_binary_expression_get_right (lbe))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp1_);
		vala_ccode_binary_expression_set_right (clbe, _tmp2_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)));
		_vala_ccode_node_unref0 (_tmp2_);
		vala_ccode_comma_expression_append_expression (ccomma, cleft);
		cleft = (_tmp3_ = _vala_ccode_node_ref0 (cvar), _vala_ccode_node_unref0 (cleft), _tmp3_);
		left_chain = (_tmp4_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (left_chain), _tmp4_);
		_vala_ccode_node_unref0 (clbe);
		_vala_ccode_node_unref0 (ccomma);
		_vala_ccode_node_unref0 (cvar);
		_vala_code_node_unref0 (temp_decl);
		_vala_code_node_unref0 (lbe);
	}
	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_PLUS) {
		op = VALA_CCODE_BINARY_OPERATOR_PLUS;
	} else {
		if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MINUS) {
			op = VALA_CCODE_BINARY_OPERATOR_MINUS;
		} else {
			if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MUL) {
				op = VALA_CCODE_BINARY_OPERATOR_MUL;
			} else {
				if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_DIV) {
					op = VALA_CCODE_BINARY_OPERATOR_DIV;
				} else {
					if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MOD) {
						if (vala_data_type_equals (vala_expression_get_value_type ((ValaExpression*) expr), self->double_type)) {
							ValaCCodeIdentifier* _tmp5_;
							ValaCCodeFunctionCall* _tmp6_;
							ValaCCodeFunctionCall* ccall;
							vala_ccode_declaration_space_add_include (self->source_declarations, "math.h", FALSE);
							ccall = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new ("fmod"))), _vala_ccode_node_unref0 (_tmp5_), _tmp6_);
							vala_ccode_function_call_add_argument (ccall, cleft);
							vala_ccode_function_call_add_argument (ccall, cright);
							vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccall);
							_vala_ccode_node_unref0 (ccall);
							_vala_ccode_node_unref0 (left_chain);
							_vala_ccode_node_unref0 (cright);
							_vala_ccode_node_unref0 (cleft);
							return;
						} else {
							if (vala_data_type_equals (vala_expression_get_value_type ((ValaExpression*) expr), self->float_type)) {
								ValaCCodeIdentifier* _tmp7_;
								ValaCCodeFunctionCall* _tmp8_;
								ValaCCodeFunctionCall* ccall;
								vala_ccode_declaration_space_add_include (self->source_declarations, "math.h", FALSE);
								ccall = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("fmodf"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
								vala_ccode_function_call_add_argument (ccall, cleft);
								vala_ccode_function_call_add_argument (ccall, cright);
								vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccall);
								_vala_ccode_node_unref0 (ccall);
								_vala_ccode_node_unref0 (left_chain);
								_vala_ccode_node_unref0 (cright);
								_vala_ccode_node_unref0 (cleft);
								return;
							} else {
								op = VALA_CCODE_BINARY_OPERATOR_MOD;
							}
						}
					} else {
						if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_SHIFT_LEFT) {
							op = VALA_CCODE_BINARY_OPERATOR_SHIFT_LEFT;
						} else {
							if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_SHIFT_RIGHT) {
								op = VALA_CCODE_BINARY_OPERATOR_SHIFT_RIGHT;
							} else {
								if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN) {
									op = VALA_CCODE_BINARY_OPERATOR_LESS_THAN;
								} else {
									if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN) {
										op = VALA_CCODE_BINARY_OPERATOR_GREATER_THAN;
									} else {
										if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN_OR_EQUAL) {
											op = VALA_CCODE_BINARY_OPERATOR_LESS_THAN_OR_EQUAL;
										} else {
											if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN_OR_EQUAL) {
												op = VALA_CCODE_BINARY_OPERATOR_GREATER_THAN_OR_EQUAL;
											} else {
												if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_EQUALITY) {
													op = VALA_CCODE_BINARY_OPERATOR_EQUALITY;
												} else {
													if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_INEQUALITY) {
														op = VALA_CCODE_BINARY_OPERATOR_INEQUALITY;
													} else {
														if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_AND) {
															op = VALA_CCODE_BINARY_OPERATOR_BITWISE_AND;
														} else {
															if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_OR) {
																op = VALA_CCODE_BINARY_OPERATOR_BITWISE_OR;
															} else {
																if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_XOR) {
																	op = VALA_CCODE_BINARY_OPERATOR_BITWISE_XOR;
																} else {
																	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_AND) {
																		op = VALA_CCODE_BINARY_OPERATOR_AND;
																	} else {
																		if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_OR) {
																			op = VALA_CCODE_BINARY_OPERATOR_OR;
																		} else {
																			if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_IN) {
																				if (VALA_IS_ARRAY_TYPE (vala_expression_get_value_type (vala_binary_expression_get_right (expr)))) {
																					ValaArrayType* array_type;
																					char* _tmp9_;
																					ValaCCodeIdentifier* _tmp10_;
																					ValaCCodeFunctionCall* _tmp11_;
																					ValaCCodeFunctionCall* node;
																					ValaCCodeExpression* _tmp12_;
																					array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_expression_get_value_type (vala_binary_expression_get_right (expr))));
																					node = (_tmp11_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new (_tmp9_ = vala_ccode_base_module_generate_array_contains_wrapper (self, array_type)))), _vala_ccode_node_unref0 (_tmp10_), _g_free0 (_tmp9_), _tmp11_);
																					vala_ccode_function_call_add_argument (node, cright);
																					vala_ccode_function_call_add_argument (node, _tmp12_ = vala_ccode_base_module_get_array_length_cexpression (self, vala_binary_expression_get_right (expr), -1));
																					_vala_ccode_node_unref0 (_tmp12_);
																					if (VALA_IS_STRUCT_VALUE_TYPE (vala_array_type_get_element_type (array_type))) {
																						ValaCCodeUnaryExpression* _tmp13_;
																						vala_ccode_function_call_add_argument (node, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cleft)));
																						_vala_ccode_node_unref0 (_tmp13_);
																					} else {
																						vala_ccode_function_call_add_argument (node, cleft);
																					}
																					vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) node);
																					_vala_ccode_node_unref0 (node);
																					_vala_code_node_unref0 (array_type);
																				} else {
																					ValaCCodeBinaryExpression* _tmp14_;
																					ValaCCodeBinaryExpression* _tmp15_;
																					vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp15_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp14_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_BITWISE_AND, cright, cleft)), cleft)));
																					_vala_ccode_node_unref0 (_tmp15_);
																					_vala_ccode_node_unref0 (_tmp14_);
																				}
																				_vala_ccode_node_unref0 (left_chain);
																				_vala_ccode_node_unref0 (cright);
																				_vala_ccode_node_unref0 (cleft);
																				return;
																			} else {
																				g_assert_not_reached ();
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_EQUALITY) {
		_tmp16_ = TRUE;
	} else {
		_tmp16_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_INEQUALITY;
	}
	if (_tmp16_) {
		ValaDataType* left_type;
		ValaDataType* right_type;
		gboolean _tmp17_ = FALSE;
		left_type = _vala_code_node_ref0 (vala_expression_get_target_type (vala_binary_expression_get_left (expr)));
		right_type = _vala_code_node_ref0 (vala_expression_get_target_type (vala_binary_expression_get_right (expr)));
		vala_ccode_base_module_make_comparable_cexpression (self, &left_type, &cleft, &right_type, &cright);
		if (VALA_IS_STRUCT_VALUE_TYPE (left_type)) {
			_tmp17_ = VALA_IS_STRUCT_VALUE_TYPE (right_type);
		} else {
			_tmp17_ = FALSE;
		}
		if (_tmp17_) {
			ValaStruct* _tmp18_;
			char* equalfunc;
			ValaCCodeIdentifier* _tmp19_;
			ValaCCodeFunctionCall* _tmp20_;
			ValaCCodeFunctionCall* ccall;
			ValaCCodeExpression* _tmp21_;
			ValaCCodeExpression* _tmp22_;
			equalfunc = vala_ccode_base_module_generate_struct_equal_function (self, (_tmp18_ = VALA_STRUCT (vala_data_type_get_data_type (left_type)), VALA_IS_STRUCT (_tmp18_) ? ((ValaStruct*) _tmp18_) : NULL));
			ccall = (_tmp20_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new (equalfunc))), _vala_ccode_node_unref0 (_tmp19_), _tmp20_);
			vala_ccode_function_call_add_argument (ccall, cleft);
			vala_ccode_function_call_add_argument (ccall, cright);
			cleft = (_tmp21_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cleft), _tmp21_);
			cright = (_tmp22_ = (ValaCCodeExpression*) vala_ccode_constant_new ("TRUE"), _vala_ccode_node_unref0 (cright), _tmp22_);
			_vala_ccode_node_unref0 (ccall);
			_g_free0 (equalfunc);
		} else {
			gboolean _tmp23_ = FALSE;
			gboolean _tmp24_ = FALSE;
			gboolean _tmp25_ = FALSE;
			gboolean _tmp26_ = FALSE;
			gboolean _tmp27_ = FALSE;
			if (VALA_IS_INTEGER_TYPE (left_type)) {
				_tmp27_ = TRUE;
			} else {
				_tmp27_ = VALA_IS_FLOATING_TYPE (left_type);
			}
			if (_tmp27_) {
				_tmp26_ = TRUE;
			} else {
				_tmp26_ = VALA_IS_BOOLEAN_TYPE (left_type);
			}
			if (_tmp26_) {
				_tmp25_ = vala_data_type_get_nullable (left_type);
			} else {
				_tmp25_ = FALSE;
			}
			if (_tmp25_) {
				gboolean _tmp28_ = FALSE;
				gboolean _tmp29_ = FALSE;
				if (VALA_IS_INTEGER_TYPE (right_type)) {
					_tmp29_ = TRUE;
				} else {
					_tmp29_ = VALA_IS_FLOATING_TYPE (right_type);
				}
				if (_tmp29_) {
					_tmp28_ = TRUE;
				} else {
					_tmp28_ = VALA_IS_BOOLEAN_TYPE (right_type);
				}
				_tmp24_ = _tmp28_;
			} else {
				_tmp24_ = FALSE;
			}
			if (_tmp24_) {
				_tmp23_ = vala_data_type_get_nullable (right_type);
			} else {
				_tmp23_ = FALSE;
			}
			if (_tmp23_) {
				ValaStruct* _tmp30_;
				char* equalfunc;
				ValaCCodeIdentifier* _tmp31_;
				ValaCCodeFunctionCall* _tmp32_;
				ValaCCodeFunctionCall* ccall;
				ValaCCodeExpression* _tmp33_;
				ValaCCodeExpression* _tmp34_;
				equalfunc = vala_ccode_base_module_generate_numeric_equal_function (self, (_tmp30_ = VALA_STRUCT (vala_data_type_get_data_type (left_type)), VALA_IS_STRUCT (_tmp30_) ? ((ValaStruct*) _tmp30_) : NULL));
				ccall = (_tmp32_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp31_ = vala_ccode_identifier_new (equalfunc))), _vala_ccode_node_unref0 (_tmp31_), _tmp32_);
				vala_ccode_function_call_add_argument (ccall, cleft);
				vala_ccode_function_call_add_argument (ccall, cright);
				cleft = (_tmp33_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cleft), _tmp33_);
				cright = (_tmp34_ = (ValaCCodeExpression*) vala_ccode_constant_new ("TRUE"), _vala_ccode_node_unref0 (cright), _tmp34_);
				_vala_ccode_node_unref0 (ccall);
				_g_free0 (equalfunc);
			}
		}
		_vala_code_node_unref0 (right_type);
		_vala_code_node_unref0 (left_type);
	}
	if (!VALA_IS_NULL_TYPE (vala_expression_get_value_type (vala_binary_expression_get_left (expr)))) {
		_tmp37_ = vala_data_type_compatible (vala_expression_get_value_type (vala_binary_expression_get_left (expr)), self->string_type);
	} else {
		_tmp37_ = FALSE;
	}
	if (_tmp37_) {
		_tmp36_ = !VALA_IS_NULL_TYPE (vala_expression_get_value_type (vala_binary_expression_get_right (expr)));
	} else {
		_tmp36_ = FALSE;
	}
	if (_tmp36_) {
		_tmp35_ = vala_data_type_compatible (vala_expression_get_value_type (vala_binary_expression_get_right (expr)), self->string_type);
	} else {
		_tmp35_ = FALSE;
	}
	if (_tmp35_) {
		if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_PLUS) {
			gboolean _tmp38_ = FALSE;
			if (vala_expression_is_constant (vala_binary_expression_get_left (expr))) {
				_tmp38_ = vala_expression_is_constant (vala_binary_expression_get_right (expr));
			} else {
				_tmp38_ = FALSE;
			}
			if (_tmp38_) {
				char* left;
				char* right;
				char* _tmp43_;
				ValaCCodeConstant* _tmp44_;
				left = NULL;
				right = NULL;
				if (VALA_IS_CCODE_IDENTIFIER (cleft)) {
					char* _tmp39_;
					left = (_tmp39_ = g_strdup (vala_ccode_identifier_get_name (VALA_CCODE_IDENTIFIER (cleft))), _g_free0 (left), _tmp39_);
				} else {
					if (VALA_IS_CCODE_CONSTANT (cleft)) {
						char* _tmp40_;
						left = (_tmp40_ = g_strdup (vala_ccode_constant_get_name (VALA_CCODE_CONSTANT (cleft))), _g_free0 (left), _tmp40_);
					} else {
						g_assert_not_reached ();
					}
				}
				if (VALA_IS_CCODE_IDENTIFIER (cright)) {
					char* _tmp41_;
					right = (_tmp41_ = g_strdup (vala_ccode_identifier_get_name (VALA_CCODE_IDENTIFIER (cright))), _g_free0 (right), _tmp41_);
				} else {
					if (VALA_IS_CCODE_CONSTANT (cright)) {
						char* _tmp42_;
						right = (_tmp42_ = g_strdup (vala_ccode_constant_get_name (VALA_CCODE_CONSTANT (cright))), _g_free0 (right), _tmp42_);
					} else {
						g_assert_not_reached ();
					}
				}
				vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp44_ = vala_ccode_constant_new (_tmp43_ = g_strdup_printf ("%s %s", left, right))));
				_vala_ccode_node_unref0 (_tmp44_);
				_g_free0 (_tmp43_);
				_g_free0 (right);
				_g_free0 (left);
				_vala_ccode_node_unref0 (left_chain);
				_vala_ccode_node_unref0 (cright);
				_vala_ccode_node_unref0 (cleft);
				return;
			} else {
				if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_POSIX) {
					ValaCCodeIdentifier* _tmp45_;
					ValaCCodeFunctionCall* _tmp46_;
					ValaCCodeFunctionCall* strcat;
					ValaCCodeIdentifier* _tmp47_;
					ValaCCodeFunctionCall* _tmp48_;
					ValaCCodeFunctionCall* strcpy;
					ValaCCodeIdentifier* _tmp49_;
					ValaCCodeFunctionCall* _tmp50_;
					ValaCCodeFunctionCall* malloc;
					ValaCCodeIdentifier* _tmp51_;
					ValaCCodeFunctionCall* _tmp52_;
					ValaCCodeFunctionCall* strlen_a;
					ValaCCodeIdentifier* _tmp53_;
					ValaCCodeFunctionCall* _tmp54_;
					ValaCCodeFunctionCall* strlen_b;
					ValaCCodeIdentifier* _tmp55_;
					ValaCCodeBinaryExpression* _tmp56_;
					ValaCCodeBinaryExpression* _tmp57_;
					ValaCCodeBinaryExpression* newlength;
					strcat = (_tmp46_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp45_ = vala_ccode_identifier_new ("strcat"))), _vala_ccode_node_unref0 (_tmp45_), _tmp46_);
					strcpy = (_tmp48_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp47_ = vala_ccode_identifier_new ("strcpy"))), _vala_ccode_node_unref0 (_tmp47_), _tmp48_);
					malloc = (_tmp50_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp49_ = vala_ccode_identifier_new ("malloc"))), _vala_ccode_node_unref0 (_tmp49_), _tmp50_);
					strlen_a = (_tmp52_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp51_ = vala_ccode_identifier_new ("strlen"))), _vala_ccode_node_unref0 (_tmp51_), _tmp52_);
					vala_ccode_function_call_add_argument (strlen_a, cleft);
					strlen_b = (_tmp54_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp53_ = vala_ccode_identifier_new ("strlen"))), _vala_ccode_node_unref0 (_tmp53_), _tmp54_);
					vala_ccode_function_call_add_argument (strlen_b, cright);
					newlength = (_tmp57_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, (ValaCCodeExpression*) (_tmp55_ = vala_ccode_identifier_new ("1")), (ValaCCodeExpression*) (_tmp56_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, (ValaCCodeExpression*) strlen_a, (ValaCCodeExpression*) strlen_b))), _vala_ccode_node_unref0 (_tmp56_), _vala_ccode_node_unref0 (_tmp55_), _tmp57_);
					vala_ccode_function_call_add_argument (malloc, (ValaCCodeExpression*) newlength);
					vala_ccode_function_call_add_argument (strcpy, (ValaCCodeExpression*) malloc);
					vala_ccode_function_call_add_argument (strcpy, cleft);
					vala_ccode_function_call_add_argument (strcat, (ValaCCodeExpression*) strcpy);
					vala_ccode_function_call_add_argument (strcat, cright);
					vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) strcat);
					_vala_ccode_node_unref0 (newlength);
					_vala_ccode_node_unref0 (strlen_b);
					_vala_ccode_node_unref0 (strlen_a);
					_vala_ccode_node_unref0 (malloc);
					_vala_ccode_node_unref0 (strcpy);
					_vala_ccode_node_unref0 (strcat);
				} else {
					ValaCCodeIdentifier* _tmp58_;
					ValaCCodeFunctionCall* _tmp59_;
					ValaCCodeFunctionCall* ccall;
					ValaCCodeConstant* _tmp60_;
					ccall = (_tmp59_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp58_ = vala_ccode_identifier_new ("g_strconcat"))), _vala_ccode_node_unref0 (_tmp58_), _tmp59_);
					vala_ccode_function_call_add_argument (ccall, cleft);
					vala_ccode_function_call_add_argument (ccall, cright);
					vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp60_ = vala_ccode_constant_new ("NULL")));
					_vala_ccode_node_unref0 (_tmp60_);
					vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccall);
					_vala_ccode_node_unref0 (ccall);
				}
				_vala_ccode_node_unref0 (left_chain);
				_vala_ccode_node_unref0 (cright);
				_vala_ccode_node_unref0 (cleft);
				return;
			}
		} else {
			gboolean _tmp61_ = FALSE;
			gboolean _tmp62_ = FALSE;
			gboolean _tmp63_ = FALSE;
			gboolean _tmp64_ = FALSE;
			gboolean _tmp65_ = FALSE;
			if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_EQUALITY) {
				_tmp65_ = TRUE;
			} else {
				_tmp65_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_INEQUALITY;
			}
			if (_tmp65_) {
				_tmp64_ = TRUE;
			} else {
				_tmp64_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN;
			}
			if (_tmp64_) {
				_tmp63_ = TRUE;
			} else {
				_tmp63_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN;
			}
			if (_tmp63_) {
				_tmp62_ = TRUE;
			} else {
				_tmp62_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN_OR_EQUAL;
			}
			if (_tmp62_) {
				_tmp61_ = TRUE;
			} else {
				_tmp61_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN_OR_EQUAL;
			}
			if (_tmp61_) {
				ValaCCodeIdentifier* _tmp66_;
				ValaCCodeFunctionCall* _tmp67_;
				ValaCCodeFunctionCall* ccall;
				ValaCCodeExpression* _tmp68_;
				ValaCCodeExpression* _tmp69_;
				self->requires_strcmp0 = TRUE;
				ccall = (_tmp67_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp66_ = vala_ccode_identifier_new ("_vala_strcmp0"))), _vala_ccode_node_unref0 (_tmp66_), _tmp67_);
				vala_ccode_function_call_add_argument (ccall, cleft);
				vala_ccode_function_call_add_argument (ccall, cright);
				cleft = (_tmp68_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (cleft), _tmp68_);
				cright = (_tmp69_ = (ValaCCodeExpression*) vala_ccode_constant_new ("0"), _vala_ccode_node_unref0 (cright), _tmp69_);
				_vala_ccode_node_unref0 (ccall);
			}
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp70_ = vala_ccode_binary_expression_new (op, cleft, cright)));
	_vala_ccode_node_unref0 (_tmp70_);
	if (left_chain != NULL) {
		ValaCCodeBinaryExpression* _tmp71_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp71_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_AND, left_chain, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)))));
		_vala_ccode_node_unref0 (_tmp71_);
	}
	_vala_ccode_node_unref0 (left_chain);
	_vala_ccode_node_unref0 (cright);
	_vala_ccode_node_unref0 (cleft);
}


char* vala_ccode_base_module_get_type_check_function (ValaCCodeBaseModule* self, ValaTypeSymbol* type) {
	char* result = NULL;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	cl = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp1_ = vala_class_get_type_check_function (cl) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = g_strdup (vala_class_get_type_check_function (cl));
		_vala_code_node_unref0 (cl);
		return result;
	} else {
		gboolean _tmp2_ = FALSE;
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		gboolean _tmp5_ = FALSE;
		if (cl != NULL) {
			_tmp5_ = vala_class_get_is_compact (cl);
		} else {
			_tmp5_ = FALSE;
		}
		if (_tmp5_) {
			_tmp4_ = TRUE;
		} else {
			_tmp4_ = VALA_IS_STRUCT (type);
		}
		if (_tmp4_) {
			_tmp3_ = TRUE;
		} else {
			_tmp3_ = VALA_IS_ENUM (type);
		}
		if (_tmp3_) {
			_tmp2_ = TRUE;
		} else {
			_tmp2_ = VALA_IS_DELEGATE (type);
		}
		if (_tmp2_) {
			result = NULL;
			_vala_code_node_unref0 (cl);
			return result;
		} else {
			result = vala_typesymbol_get_upper_case_cname (type, "IS_");
			_vala_code_node_unref0 (cl);
			return result;
		}
	}
	_vala_code_node_unref0 (cl);
}


static ValaCCodeExpression* vala_ccode_base_module_create_type_check (ValaCCodeBaseModule* self, ValaCCodeNode* ccodenode, ValaDataType* type) {
	ValaCCodeExpression* result = NULL;
	ValaDataType* _tmp0_;
	ValaErrorType* et;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (ccodenode != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	et = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_ERROR_TYPE (_tmp0_) ? ((ValaErrorType*) _tmp0_) : NULL));
	if (et != NULL) {
		_tmp1_ = vala_error_type_get_error_code (et) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		ValaCCodeIdentifier* _tmp2_;
		ValaCCodeFunctionCall* _tmp3_;
		ValaCCodeFunctionCall* matches_call;
		char* _tmp4_;
		ValaCCodeIdentifier* _tmp5_;
		char* _tmp6_;
		ValaCCodeIdentifier* _tmp7_;
		matches_call = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new ("g_error_matches"))), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
		vala_ccode_function_call_add_argument (matches_call, VALA_CCODE_EXPRESSION (ccodenode));
		vala_ccode_function_call_add_argument (matches_call, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new (_tmp4_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) vala_error_type_get_error_domain (et), NULL))));
		_vala_ccode_node_unref0 (_tmp5_);
		_g_free0 (_tmp4_);
		vala_ccode_function_call_add_argument (matches_call, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new (_tmp6_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) vala_error_type_get_error_code (et), FALSE))));
		_vala_ccode_node_unref0 (_tmp7_);
		_g_free0 (_tmp6_);
		result = (ValaCCodeExpression*) matches_call;
		_vala_code_node_unref0 (et);
		return result;
	} else {
		gboolean _tmp8_ = FALSE;
		if (et != NULL) {
			_tmp8_ = vala_error_type_get_error_domain (et) != NULL;
		} else {
			_tmp8_ = FALSE;
		}
		if (_tmp8_) {
			ValaCCodeMemberAccess* instance_domain;
			char* _tmp9_;
			ValaCCodeIdentifier* _tmp10_;
			ValaCCodeIdentifier* type_domain;
			instance_domain = vala_ccode_member_access_new_pointer (VALA_CCODE_EXPRESSION (ccodenode), "domain");
			type_domain = (_tmp10_ = vala_ccode_identifier_new (_tmp9_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) vala_error_type_get_error_domain (et), NULL)), _g_free0 (_tmp9_), _tmp10_);
			result = (ValaCCodeExpression*) vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) instance_domain, (ValaCCodeExpression*) type_domain);
			_vala_ccode_node_unref0 (type_domain);
			_vala_ccode_node_unref0 (instance_domain);
			_vala_code_node_unref0 (et);
			return result;
		} else {
			char* type_check_func;
			ValaCCodeIdentifier* _tmp11_;
			ValaCCodeFunctionCall* _tmp12_;
			ValaCCodeFunctionCall* ccheck;
			type_check_func = vala_ccode_base_module_get_type_check_function (self, vala_data_type_get_data_type (type));
			if (type_check_func == NULL) {
				result = (ValaCCodeExpression*) vala_ccode_invalid_expression_new ();
				_g_free0 (type_check_func);
				_vala_code_node_unref0 (et);
				return result;
			}
			ccheck = (_tmp12_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new (type_check_func))), _vala_ccode_node_unref0 (_tmp11_), _tmp12_);
			vala_ccode_function_call_add_argument (ccheck, VALA_CCODE_EXPRESSION (ccodenode));
			result = (ValaCCodeExpression*) ccheck;
			_g_free0 (type_check_func);
			_vala_code_node_unref0 (et);
			return result;
		}
	}
	_vala_code_node_unref0 (et);
}


static char* vala_ccode_base_module_generate_array_contains_wrapper (ValaCCodeBaseModule* self, ValaArrayType* array_type) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	char* array_contains_func;
	ValaCCodeFunction* function;
	char* _tmp2_;
	ValaCCodeFormalParameter* _tmp3_;
	ValaCCodeFormalParameter* _tmp4_;
	ValaCCodeBlock* block;
	ValaCCodeDeclaration* idx_decl;
	ValaCCodeVariableDeclarator* _tmp10_;
	ValaCCodeIdentifier* _tmp11_;
	ValaCCodeIdentifier* _tmp12_;
	ValaCCodeElementAccess* _tmp13_;
	ValaCCodeElementAccess* celement;
	ValaCCodeIdentifier* cneedle;
	ValaCCodeBinaryExpression* cif_condition;
	ValaCCodeBlock* cif_found;
	ValaCCodeConstant* _tmp25_;
	ValaCCodeReturnStatement* _tmp26_;
	ValaCCodeBlock* cloop_body;
	ValaCCodeIfStatement* _tmp27_;
	ValaCCodeIdentifier* _tmp28_;
	ValaCCodeIdentifier* _tmp29_;
	ValaCCodeBinaryExpression* _tmp30_;
	ValaCCodeBinaryExpression* cloop_condition;
	ValaCCodeForStatement* cloop;
	ValaCCodeIdentifier* _tmp31_;
	ValaCCodeConstant* _tmp32_;
	ValaCCodeAssignment* _tmp33_;
	ValaCCodeIdentifier* _tmp34_;
	ValaCCodeUnaryExpression* _tmp35_;
	ValaCCodeConstant* _tmp36_;
	ValaCCodeReturnStatement* _tmp37_;
	ValaCCodeFunction* _tmp38_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (array_type != NULL, NULL);
	array_contains_func = (_tmp1_ = g_strdup_printf ("_vala_%s_array_contains", _tmp0_ = vala_data_type_get_lower_case_cname (vala_array_type_get_element_type (array_type), NULL)), _g_free0 (_tmp0_), _tmp1_);
	if (!vala_ccode_base_module_add_wrapper (self, array_contains_func)) {
		result = array_contains_func;
		return result;
	}
	function = vala_ccode_function_new (array_contains_func, "gboolean");
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp3_ = vala_ccode_formal_parameter_new ("stack", _tmp2_ = vala_data_type_get_cname ((ValaDataType*) array_type)));
	_vala_ccode_node_unref0 (_tmp3_);
	_g_free0 (_tmp2_);
	vala_ccode_function_add_parameter (function, _tmp4_ = vala_ccode_formal_parameter_new ("stack_length", "int"));
	_vala_ccode_node_unref0 (_tmp4_);
	if (VALA_IS_STRUCT_VALUE_TYPE (vala_array_type_get_element_type (array_type))) {
		char* _tmp5_;
		char* _tmp6_;
		ValaCCodeFormalParameter* _tmp7_;
		vala_ccode_function_add_parameter (function, _tmp7_ = vala_ccode_formal_parameter_new ("needle", _tmp6_ = g_strconcat (_tmp5_ = vala_data_type_get_cname (vala_array_type_get_element_type (array_type)), "*", NULL)));
		_vala_ccode_node_unref0 (_tmp7_);
		_g_free0 (_tmp6_);
		_g_free0 (_tmp5_);
	} else {
		char* _tmp8_;
		ValaCCodeFormalParameter* _tmp9_;
		vala_ccode_function_add_parameter (function, _tmp9_ = vala_ccode_formal_parameter_new ("needle", _tmp8_ = vala_data_type_get_cname (vala_array_type_get_element_type (array_type))));
		_vala_ccode_node_unref0 (_tmp9_);
		_g_free0 (_tmp8_);
	}
	block = vala_ccode_block_new ();
	idx_decl = vala_ccode_declaration_new ("int");
	vala_ccode_declaration_add_declarator (idx_decl, (ValaCCodeDeclarator*) (_tmp10_ = vala_ccode_variable_declarator_new ("i", NULL, NULL)));
	_vala_ccode_node_unref0 (_tmp10_);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) idx_decl);
	celement = (_tmp13_ = vala_ccode_element_access_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("stack")), (ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new ("i"))), _vala_ccode_node_unref0 (_tmp12_), _vala_ccode_node_unref0 (_tmp11_), _tmp13_);
	cneedle = vala_ccode_identifier_new ("needle");
	cif_condition = NULL;
	if (vala_data_type_compatible (vala_array_type_get_element_type (array_type), self->string_type)) {
		ValaCCodeIdentifier* _tmp14_;
		ValaCCodeFunctionCall* _tmp15_;
		ValaCCodeFunctionCall* ccall;
		ValaCCodeConstant* _tmp16_;
		ValaCCodeBinaryExpression* _tmp17_;
		self->requires_strcmp0 = TRUE;
		ccall = (_tmp15_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("_vala_strcmp0"))), _vala_ccode_node_unref0 (_tmp14_), _tmp15_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) celement);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) cneedle);
		cif_condition = (_tmp17_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) ccall, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_constant_new ("0"))), _vala_ccode_node_unref0 (cif_condition), _tmp17_);
		_vala_ccode_node_unref0 (_tmp16_);
		_vala_ccode_node_unref0 (ccall);
	} else {
		if (VALA_IS_STRUCT_VALUE_TYPE (vala_array_type_get_element_type (array_type))) {
			ValaStruct* _tmp18_;
			char* equalfunc;
			ValaCCodeIdentifier* _tmp19_;
			ValaCCodeFunctionCall* _tmp20_;
			ValaCCodeFunctionCall* ccall;
			ValaCCodeUnaryExpression* _tmp21_;
			ValaCCodeConstant* _tmp22_;
			ValaCCodeBinaryExpression* _tmp23_;
			equalfunc = vala_ccode_base_module_generate_struct_equal_function (self, (_tmp18_ = VALA_STRUCT (vala_data_type_get_data_type (vala_array_type_get_element_type (array_type))), VALA_IS_STRUCT (_tmp18_) ? ((ValaStruct*) _tmp18_) : NULL));
			ccall = (_tmp20_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new (equalfunc))), _vala_ccode_node_unref0 (_tmp19_), _tmp20_);
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) celement)));
			_vala_ccode_node_unref0 (_tmp21_);
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) cneedle);
			cif_condition = (_tmp23_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) ccall, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_constant_new ("TRUE"))), _vala_ccode_node_unref0 (cif_condition), _tmp23_);
			_vala_ccode_node_unref0 (_tmp22_);
			_vala_ccode_node_unref0 (ccall);
			_g_free0 (equalfunc);
		} else {
			ValaCCodeBinaryExpression* _tmp24_;
			cif_condition = (_tmp24_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) cneedle, (ValaCCodeExpression*) celement), _vala_ccode_node_unref0 (cif_condition), _tmp24_);
		}
	}
	cif_found = vala_ccode_block_new ();
	vala_ccode_block_add_statement (cif_found, (ValaCCodeNode*) (_tmp26_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp25_ = vala_ccode_constant_new ("TRUE")))));
	_vala_ccode_node_unref0 (_tmp26_);
	_vala_ccode_node_unref0 (_tmp25_);
	cloop_body = vala_ccode_block_new ();
	vala_ccode_block_add_statement (cloop_body, (ValaCCodeNode*) (_tmp27_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) cif_condition, (ValaCCodeStatement*) cif_found, NULL)));
	_vala_ccode_node_unref0 (_tmp27_);
	cloop_condition = (_tmp30_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_LESS_THAN, (ValaCCodeExpression*) (_tmp28_ = vala_ccode_identifier_new ("i")), (ValaCCodeExpression*) (_tmp29_ = vala_ccode_identifier_new ("stack_length"))), _vala_ccode_node_unref0 (_tmp29_), _vala_ccode_node_unref0 (_tmp28_), _tmp30_);
	cloop = vala_ccode_for_statement_new ((ValaCCodeExpression*) cloop_condition, (ValaCCodeStatement*) cloop_body);
	vala_ccode_for_statement_add_initializer (cloop, (ValaCCodeExpression*) (_tmp33_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp31_ = vala_ccode_identifier_new ("i")), (ValaCCodeExpression*) (_tmp32_ = vala_ccode_constant_new ("0")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp33_);
	_vala_ccode_node_unref0 (_tmp32_);
	_vala_ccode_node_unref0 (_tmp31_);
	vala_ccode_for_statement_add_iterator (cloop, (ValaCCodeExpression*) (_tmp35_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POSTFIX_INCREMENT, (ValaCCodeExpression*) (_tmp34_ = vala_ccode_identifier_new ("i")))));
	_vala_ccode_node_unref0 (_tmp35_);
	_vala_ccode_node_unref0 (_tmp34_);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) cloop);
	vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp37_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp36_ = vala_ccode_constant_new ("FALSE")))));
	_vala_ccode_node_unref0 (_tmp37_);
	_vala_ccode_node_unref0 (_tmp36_);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp38_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp38_);
	vala_ccode_function_set_block (function, block);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	result = array_contains_func;
	_vala_ccode_node_unref0 (cloop);
	_vala_ccode_node_unref0 (cloop_condition);
	_vala_ccode_node_unref0 (cloop_body);
	_vala_ccode_node_unref0 (cif_found);
	_vala_ccode_node_unref0 (cif_condition);
	_vala_ccode_node_unref0 (cneedle);
	_vala_ccode_node_unref0 (celement);
	_vala_ccode_node_unref0 (idx_decl);
	_vala_ccode_node_unref0 (block);
	_vala_ccode_node_unref0 (function);
	return result;
}


static void vala_ccode_base_module_real_visit_type_check (ValaCodeVisitor* base, ValaTypeCheck* expr) {
	ValaCCodeBaseModule * self;
	ValaCCodeExpression* _tmp0_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_ccode_base_module_generate_type_declaration (self, vala_typecheck_get_type_reference (expr), self->source_declarations);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_base_module_create_type_check (self, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_typecheck_get_expression (expr)), vala_typecheck_get_type_reference (expr))));
	_vala_ccode_node_unref0 (_tmp0_);
	if (VALA_IS_CCODE_INVALID_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr))) {
		vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), "type check expressions not supported for compact classes, structs, and" \
" enums");
	}
}


static void vala_ccode_base_module_real_visit_lambda_expression (ValaCodeVisitor* base, ValaLambdaExpression* l) {
	ValaCCodeBaseModule * self;
	ValaDelegateType* dt;
	char* _tmp0_;
	ValaCCodeIdentifier* _tmp1_;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (l != NULL);
	dt = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_expression_get_target_type ((ValaExpression*) l)));
	vala_method_set_cinstance_parameter_position (vala_lambda_expression_get_method (l), vala_delegate_get_cinstance_parameter_position (vala_delegate_type_get_delegate_symbol (dt)));
	vala_code_node_accept_children ((ValaCodeNode*) l, (ValaCodeVisitor*) self);
	vala_code_node_set_ccodenode ((ValaCodeNode*) l, (ValaCCodeNode*) (_tmp1_ = vala_ccode_identifier_new (_tmp0_ = vala_method_get_cname (vala_lambda_expression_get_method (l)))));
	_vala_ccode_node_unref0 (_tmp1_);
	_g_free0 (_tmp0_);
	_vala_code_node_unref0 (dt);
}


ValaCCodeExpression* vala_ccode_base_module_convert_from_generic_pointer (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr, ValaDataType* actual_type) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* _result_;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	g_return_val_if_fail (actual_type != NULL, NULL);
	_result_ = _vala_ccode_node_ref0 (cexpr);
	if (vala_ccode_base_module_is_reference_type_argument (self, actual_type)) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = vala_ccode_base_module_is_nullable_value_type_argument (self, actual_type);
	}
	if (_tmp0_) {
		char* _tmp1_;
		ValaCCodeExpression* _tmp2_;
		_result_ = (_tmp2_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, _tmp1_ = vala_data_type_get_cname (actual_type)), _vala_ccode_node_unref0 (_result_), _tmp2_);
		_g_free0 (_tmp1_);
	} else {
		if (vala_ccode_base_module_is_signed_integer_type_argument (self, actual_type)) {
			ValaCCodeIdentifier* _tmp3_;
			ValaCCodeFunctionCall* _tmp4_;
			ValaCCodeFunctionCall* cconv;
			ValaCCodeExpression* _tmp5_;
			cconv = (_tmp4_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("GPOINTER_TO_INT"))), _vala_ccode_node_unref0 (_tmp3_), _tmp4_);
			vala_ccode_function_call_add_argument (cconv, cexpr);
			_result_ = (_tmp5_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) cconv), _vala_ccode_node_unref0 (_result_), _tmp5_);
			_vala_ccode_node_unref0 (cconv);
		} else {
			if (vala_ccode_base_module_is_unsigned_integer_type_argument (self, actual_type)) {
				ValaCCodeIdentifier* _tmp6_;
				ValaCCodeFunctionCall* _tmp7_;
				ValaCCodeFunctionCall* cconv;
				ValaCCodeExpression* _tmp8_;
				cconv = (_tmp7_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("GPOINTER_TO_UINT"))), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
				vala_ccode_function_call_add_argument (cconv, cexpr);
				_result_ = (_tmp8_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) cconv), _vala_ccode_node_unref0 (_result_), _tmp8_);
				_vala_ccode_node_unref0 (cconv);
			}
		}
	}
	result = _result_;
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_convert_to_generic_pointer (ValaCCodeBaseModule* self, ValaCCodeExpression* cexpr, ValaDataType* actual_type) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* _result_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	g_return_val_if_fail (actual_type != NULL, NULL);
	_result_ = _vala_ccode_node_ref0 (cexpr);
	if (vala_ccode_base_module_is_signed_integer_type_argument (self, actual_type)) {
		ValaCCodeIdentifier* _tmp0_;
		ValaCCodeFunctionCall* _tmp1_;
		ValaCCodeFunctionCall* cconv;
		ValaCCodeExpression* _tmp2_;
		cconv = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("GINT_TO_POINTER"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
		vala_ccode_function_call_add_argument (cconv, cexpr);
		_result_ = (_tmp2_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) cconv), _vala_ccode_node_unref0 (_result_), _tmp2_);
		_vala_ccode_node_unref0 (cconv);
	} else {
		if (vala_ccode_base_module_is_unsigned_integer_type_argument (self, actual_type)) {
			ValaCCodeIdentifier* _tmp3_;
			ValaCCodeFunctionCall* _tmp4_;
			ValaCCodeFunctionCall* cconv;
			ValaCCodeExpression* _tmp5_;
			cconv = (_tmp4_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("GUINT_TO_POINTER"))), _vala_ccode_node_unref0 (_tmp3_), _tmp4_);
			vala_ccode_function_call_add_argument (cconv, cexpr);
			_result_ = (_tmp5_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) cconv), _vala_ccode_node_unref0 (_result_), _tmp5_);
			_vala_ccode_node_unref0 (cconv);
		}
	}
	result = _result_;
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_transform_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* cexpr;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp9_ = FALSE;
	gboolean _tmp10_ = FALSE;
	gboolean _tmp11_ = FALSE;
	gboolean boxing;
	gboolean _tmp12_ = FALSE;
	gboolean _tmp13_ = FALSE;
	gboolean _tmp14_ = FALSE;
	gboolean unboxing;
	gboolean _tmp15_ = FALSE;
	gboolean _tmp16_ = FALSE;
	gboolean _tmp17_ = FALSE;
	gboolean _tmp18_ = FALSE;
	gboolean gvalue_boxing;
	gboolean _tmp20_ = FALSE;
	gboolean _tmp21_ = FALSE;
	gboolean _tmp22_ = FALSE;
	gboolean _tmp23_ = FALSE;
	gboolean gvariant_boxing;
	gboolean _tmp24_ = FALSE;
	gboolean _tmp25_ = FALSE;
	gboolean _tmp112_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (source_cexpr != NULL, NULL);
	cexpr = _vala_ccode_node_ref0 (source_cexpr);
	if (expression_type == NULL) {
		result = cexpr;
		return result;
	}
	if (vala_data_type_get_value_owned (expression_type)) {
		_tmp0_ = vala_data_type_get_floating_reference (expression_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaTypeSymbol* _tmp1_;
		ValaObjectTypeSymbol* cl;
		char* _tmp2_;
		char* sink_func;
		cl = _vala_code_node_ref0 ((_tmp1_ = vala_data_type_get_data_type (expression_type), VALA_IS_OBJECT_TYPE_SYMBOL (_tmp1_) ? ((ValaObjectTypeSymbol*) _tmp1_) : NULL));
		_tmp2_ = NULL;
		if (cl != NULL) {
			char* _tmp3_;
			_tmp2_ = (_tmp3_ = vala_typesymbol_get_ref_sink_function ((ValaTypeSymbol*) cl), _g_free0 (_tmp2_), _tmp3_);
		} else {
			char* _tmp4_;
			_tmp2_ = (_tmp4_ = NULL, _g_free0 (_tmp2_), _tmp4_);
		}
		sink_func = g_strdup (_tmp2_);
		if (sink_func != NULL) {
			ValaCCodeIdentifier* _tmp5_;
			ValaCCodeFunctionCall* _tmp6_;
			ValaCCodeFunctionCall* csink;
			ValaCCodeExpression* _tmp7_;
			csink = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new (sink_func))), _vala_ccode_node_unref0 (_tmp5_), _tmp6_);
			vala_ccode_function_call_add_argument (csink, cexpr);
			cexpr = (_tmp7_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) csink), _vala_ccode_node_unref0 (cexpr), _tmp7_);
			_vala_ccode_node_unref0 (csink);
		} else {
			char* _tmp8_;
			vala_report_error (NULL, _tmp8_ = g_strdup_printf ("type `%s' does not support floating references", vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_data_type (expression_type))));
			_g_free0 (_tmp8_);
		}
		_g_free0 (sink_func);
		_g_free0 (_tmp2_);
		_vala_code_node_unref0 (cl);
	}
	if (VALA_IS_VALUE_TYPE (expression_type)) {
		_tmp11_ = !vala_data_type_get_nullable (expression_type);
	} else {
		_tmp11_ = FALSE;
	}
	if (_tmp11_) {
		_tmp10_ = VALA_IS_VALUE_TYPE (target_type);
	} else {
		_tmp10_ = FALSE;
	}
	if (_tmp10_) {
		_tmp9_ = vala_data_type_get_nullable (target_type);
	} else {
		_tmp9_ = FALSE;
	}
	boxing = _tmp9_;
	if (VALA_IS_VALUE_TYPE (expression_type)) {
		_tmp14_ = vala_data_type_get_nullable (expression_type);
	} else {
		_tmp14_ = FALSE;
	}
	if (_tmp14_) {
		_tmp13_ = VALA_IS_VALUE_TYPE (target_type);
	} else {
		_tmp13_ = FALSE;
	}
	if (_tmp13_) {
		_tmp12_ = !vala_data_type_get_nullable (target_type);
	} else {
		_tmp12_ = FALSE;
	}
	unboxing = _tmp12_;
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		_tmp18_ = target_type != NULL;
	} else {
		_tmp18_ = FALSE;
	}
	if (_tmp18_) {
		_tmp17_ = vala_data_type_get_data_type (target_type) == VALA_TYPESYMBOL (self->gvalue_type);
	} else {
		_tmp17_ = FALSE;
	}
	if (_tmp17_) {
		_tmp16_ = !VALA_IS_NULL_TYPE (expression_type);
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		char* _tmp19_;
		_tmp15_ = _vala_strcmp0 (_tmp19_ = vala_data_type_get_type_id (expression_type), "G_TYPE_VALUE") != 0;
		_g_free0 (_tmp19_);
	} else {
		_tmp15_ = FALSE;
	}
	gvalue_boxing = _tmp15_;
	if (vala_code_context_get_profile (self->priv->_context) == VALA_PROFILE_GOBJECT) {
		_tmp23_ = target_type != NULL;
	} else {
		_tmp23_ = FALSE;
	}
	if (_tmp23_) {
		_tmp22_ = vala_data_type_get_data_type (target_type) == VALA_TYPESYMBOL (self->gvariant_type);
	} else {
		_tmp22_ = FALSE;
	}
	if (_tmp22_) {
		_tmp21_ = !VALA_IS_NULL_TYPE (expression_type);
	} else {
		_tmp21_ = FALSE;
	}
	if (_tmp21_) {
		_tmp20_ = vala_data_type_get_data_type (expression_type) != VALA_TYPESYMBOL (self->gvariant_type);
	} else {
		_tmp20_ = FALSE;
	}
	gvariant_boxing = _tmp20_;
	if (vala_data_type_get_value_owned (expression_type)) {
		gboolean _tmp26_ = FALSE;
		gboolean _tmp27_ = FALSE;
		gboolean _tmp28_ = FALSE;
		if (target_type == NULL) {
			_tmp28_ = TRUE;
		} else {
			_tmp28_ = !vala_data_type_get_value_owned (target_type);
		}
		if (_tmp28_) {
			_tmp27_ = TRUE;
		} else {
			_tmp27_ = boxing;
		}
		if (_tmp27_) {
			_tmp26_ = TRUE;
		} else {
			_tmp26_ = unboxing;
		}
		_tmp25_ = _tmp26_;
	} else {
		_tmp25_ = FALSE;
	}
	if (_tmp25_) {
		_tmp24_ = !gvalue_boxing;
	} else {
		_tmp24_ = FALSE;
	}
	if (_tmp24_) {
		ValaDataType* _tmp29_;
		ValaPointerType* pointer_type;
		gboolean _tmp30_ = FALSE;
		pointer_type = _vala_code_node_ref0 ((_tmp29_ = target_type, VALA_IS_POINTER_TYPE (_tmp29_) ? ((ValaPointerType*) _tmp29_) : NULL));
		if (pointer_type != NULL) {
			_tmp30_ = !VALA_IS_VOID_TYPE (vala_pointer_type_get_base_type (pointer_type));
		} else {
			_tmp30_ = FALSE;
		}
		if (_tmp30_) {
		} else {
			if (vala_ccode_base_module_requires_destroy (self, expression_type)) {
				ValaLocalVariable* decl;
				ValaCCodeExpression* _tmp31_;
				ValaCCodeExpression* _tmp32_;
				gboolean _tmp33_ = FALSE;
				decl = vala_ccode_base_module_get_temp_variable (self, expression_type, TRUE, (ValaCodeNode*) expression_type, FALSE);
				vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), decl);
				vala_list_insert ((ValaList*) vala_ccode_base_module_get_temp_ref_vars (self), 0, decl);
				cexpr = (_tmp32_ = (ValaCCodeExpression*) vala_ccode_assignment_new (_tmp31_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (cexpr), _tmp32_);
				_vala_ccode_node_unref0 (_tmp31_);
				if (VALA_IS_ARRAY_TYPE (expression_type)) {
					_tmp33_ = expr != NULL;
				} else {
					_tmp33_ = FALSE;
				}
				if (_tmp33_) {
					ValaArrayType* array_type;
					ValaCCodeCommaExpression* ccomma;
					ValaCCodeExpression* _tmp41_;
					ValaCCodeExpression* _tmp42_;
					array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (expression_type));
					ccomma = vala_ccode_comma_expression_new ();
					vala_ccode_comma_expression_append_expression (ccomma, cexpr);
					{
						gint dim;
						dim = 1;
						{
							gboolean _tmp34_;
							_tmp34_ = TRUE;
							while (TRUE) {
								ValaDataType* _tmp35_;
								char* _tmp36_;
								ValaLocalVariable* _tmp37_;
								ValaLocalVariable* len_decl;
								ValaCCodeExpression* _tmp38_;
								ValaCCodeExpression* _tmp39_;
								ValaCCodeAssignment* _tmp40_;
								if (!_tmp34_) {
									dim++;
								}
								_tmp34_ = FALSE;
								if (!(dim <= vala_array_type_get_rank (array_type))) {
									break;
								}
								len_decl = (_tmp37_ = vala_local_variable_new (_tmp35_ = vala_data_type_copy (self->int_type), _tmp36_ = vala_ccode_base_module_get_array_length_cname (self, vala_symbol_get_name ((ValaSymbol*) decl), dim), NULL, NULL), _g_free0 (_tmp36_), _vala_code_node_unref0 (_tmp35_), _tmp37_);
								vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), len_decl);
								vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp40_ = vala_ccode_assignment_new (_tmp38_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) len_decl)), _tmp39_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
								_vala_ccode_node_unref0 (_tmp40_);
								_vala_ccode_node_unref0 (_tmp39_);
								_vala_ccode_node_unref0 (_tmp38_);
								_vala_code_node_unref0 (len_decl);
							}
						}
					}
					vala_ccode_comma_expression_append_expression (ccomma, _tmp41_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)));
					_vala_ccode_node_unref0 (_tmp41_);
					cexpr = (_tmp42_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (cexpr), _tmp42_);
					_vala_ccode_node_unref0 (ccomma);
					_vala_code_node_unref0 (array_type);
				} else {
					gboolean _tmp43_ = FALSE;
					if (VALA_IS_DELEGATE_TYPE (expression_type)) {
						_tmp43_ = expr != NULL;
					} else {
						_tmp43_ = FALSE;
					}
					if (_tmp43_) {
						ValaCCodeCommaExpression* ccomma;
						ValaVoidType* _tmp44_;
						ValaPointerType* _tmp45_;
						char* _tmp46_;
						ValaLocalVariable* _tmp47_;
						ValaLocalVariable* target_decl;
						ValaSymbol* _tmp48_;
						ValaDelegate* _tmp49_;
						ValaDelegateType* _tmp50_;
						char* _tmp51_;
						ValaLocalVariable* _tmp52_;
						ValaLocalVariable* target_destroy_notify_decl;
						ValaCCodeExpression* target_destroy_notify;
						ValaCCodeExpression* _tmp53_;
						ValaCCodeExpression* _tmp54_ = NULL;
						ValaCCodeExpression* _tmp55_;
						ValaCCodeExpression* _tmp56_;
						ValaCCodeExpression* _tmp57_;
						ValaCCodeAssignment* _tmp58_;
						ValaCCodeExpression* _tmp59_;
						ValaCCodeAssignment* _tmp60_;
						ValaCCodeExpression* _tmp61_;
						ValaCCodeExpression* _tmp62_;
						ccomma = vala_ccode_comma_expression_new ();
						vala_ccode_comma_expression_append_expression (ccomma, cexpr);
						target_decl = (_tmp47_ = vala_local_variable_new ((ValaDataType*) (_tmp45_ = vala_pointer_type_new ((ValaDataType*) (_tmp44_ = vala_void_type_new (NULL)), NULL)), _tmp46_ = vala_ccode_base_module_get_delegate_target_cname (self, vala_symbol_get_name ((ValaSymbol*) decl)), NULL, NULL), _g_free0 (_tmp46_), _vala_code_node_unref0 (_tmp45_), _vala_code_node_unref0 (_tmp44_), _tmp47_);
						vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), target_decl);
						target_destroy_notify_decl = (_tmp52_ = vala_local_variable_new ((ValaDataType*) (_tmp50_ = vala_delegate_type_new (_tmp49_ = VALA_DELEGATE (vala_scope_lookup (vala_symbol_get_scope (_tmp48_ = vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) vala_code_context_get_root (self->priv->_context)), "GLib")), "DestroyNotify")))), _tmp51_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname (self, vala_symbol_get_name ((ValaSymbol*) decl)), NULL, NULL), _g_free0 (_tmp51_), _vala_code_node_unref0 (_tmp50_), _vala_code_node_unref0 (_tmp49_), _vala_code_node_unref0 (_tmp48_), _tmp52_);
						vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), target_destroy_notify_decl);
						target_destroy_notify = NULL;
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp58_ = vala_ccode_assignment_new (_tmp53_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) target_decl)), _tmp57_ = (_tmp55_ = vala_ccode_base_module_get_delegate_target_cexpression (self, expr, &_tmp54_), target_destroy_notify = (_tmp56_ = _tmp54_, _vala_ccode_node_unref0 (target_destroy_notify), _tmp56_), _tmp55_), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
						_vala_ccode_node_unref0 (_tmp58_);
						_vala_ccode_node_unref0 (_tmp57_);
						_vala_ccode_node_unref0 (_tmp53_);
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp60_ = vala_ccode_assignment_new (_tmp59_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) target_destroy_notify_decl)), target_destroy_notify, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
						_vala_ccode_node_unref0 (_tmp60_);
						_vala_ccode_node_unref0 (_tmp59_);
						vala_ccode_comma_expression_append_expression (ccomma, _tmp61_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)));
						_vala_ccode_node_unref0 (_tmp61_);
						cexpr = (_tmp62_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (cexpr), _tmp62_);
						_vala_ccode_node_unref0 (target_destroy_notify);
						_vala_code_node_unref0 (target_destroy_notify_decl);
						_vala_code_node_unref0 (target_decl);
						_vala_ccode_node_unref0 (ccomma);
					}
				}
				_vala_code_node_unref0 (decl);
			}
		}
		_vala_code_node_unref0 (pointer_type);
	}
	if (target_type == NULL) {
		result = cexpr;
		return result;
	}
	if (gvalue_boxing) {
		ValaLocalVariable* decl;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeIdentifier* _tmp69_;
		ValaCCodeFunctionCall* _tmp70_;
		ValaCCodeFunctionCall* ccall;
		char* _tmp74_;
		ValaCCodeIdentifier* _tmp75_;
		ValaCCodeExpression* _tmp84_;
		ValaCCodeExpression* _tmp85_;
		decl = vala_ccode_base_module_get_temp_variable (self, target_type, TRUE, (ValaCodeNode*) target_type, TRUE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), decl);
		if (!vala_data_type_get_value_owned (target_type)) {
			vala_list_insert ((ValaList*) vala_ccode_base_module_get_temp_ref_vars (self), 0, decl);
		}
		ccomma = vala_ccode_comma_expression_new ();
		if (vala_data_type_get_nullable (target_type)) {
			ValaCCodeIdentifier* _tmp63_;
			ValaCCodeFunctionCall* _tmp64_;
			ValaCCodeFunctionCall* newcall;
			ValaCCodeConstant* _tmp65_;
			ValaCCodeConstant* _tmp66_;
			ValaCCodeExpression* _tmp67_;
			ValaCCodeAssignment* _tmp68_;
			ValaCCodeAssignment* newassignment;
			newcall = (_tmp64_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp63_ = vala_ccode_identifier_new ("g_new0"))), _vala_ccode_node_unref0 (_tmp63_), _tmp64_);
			vala_ccode_function_call_add_argument (newcall, (ValaCCodeExpression*) (_tmp65_ = vala_ccode_constant_new ("GValue")));
			_vala_ccode_node_unref0 (_tmp65_);
			vala_ccode_function_call_add_argument (newcall, (ValaCCodeExpression*) (_tmp66_ = vala_ccode_constant_new ("1")));
			_vala_ccode_node_unref0 (_tmp66_);
			newassignment = (_tmp68_ = vala_ccode_assignment_new (_tmp67_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)), (ValaCCodeExpression*) newcall, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (_tmp67_), _tmp68_);
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) newassignment);
			_vala_ccode_node_unref0 (newassignment);
			_vala_ccode_node_unref0 (newcall);
		}
		ccall = (_tmp70_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp69_ = vala_ccode_identifier_new ("g_value_init"))), _vala_ccode_node_unref0 (_tmp69_), _tmp70_);
		if (vala_data_type_get_nullable (target_type)) {
			ValaCCodeExpression* _tmp71_;
			vala_ccode_function_call_add_argument (ccall, _tmp71_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)));
			_vala_ccode_node_unref0 (_tmp71_);
		} else {
			ValaCCodeExpression* _tmp72_;
			ValaCCodeUnaryExpression* _tmp73_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp73_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp72_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)))));
			_vala_ccode_node_unref0 (_tmp73_);
			_vala_ccode_node_unref0 (_tmp72_);
		}
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp75_ = vala_ccode_identifier_new (_tmp74_ = vala_data_type_get_type_id (expression_type))));
		_vala_ccode_node_unref0 (_tmp75_);
		_g_free0 (_tmp74_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
		if (vala_ccode_base_module_requires_destroy (self, expression_type)) {
			ValaCCodeIdentifier* _tmp76_;
			ValaCCodeFunctionCall* _tmp77_;
			ccall = (_tmp77_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp76_ = vala_ccode_base_module_get_value_taker_function (self, expression_type))), _vala_ccode_node_unref0 (ccall), _tmp77_);
			_vala_ccode_node_unref0 (_tmp76_);
		} else {
			ValaCCodeIdentifier* _tmp78_;
			ValaCCodeFunctionCall* _tmp79_;
			ccall = (_tmp79_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp78_ = vala_ccode_base_module_get_value_setter_function (self, expression_type))), _vala_ccode_node_unref0 (ccall), _tmp79_);
			_vala_ccode_node_unref0 (_tmp78_);
		}
		if (vala_data_type_get_nullable (target_type)) {
			ValaCCodeExpression* _tmp80_;
			vala_ccode_function_call_add_argument (ccall, _tmp80_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)));
			_vala_ccode_node_unref0 (_tmp80_);
		} else {
			ValaCCodeExpression* _tmp81_;
			ValaCCodeUnaryExpression* _tmp82_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp82_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp81_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)))));
			_vala_ccode_node_unref0 (_tmp82_);
			_vala_ccode_node_unref0 (_tmp81_);
		}
		if (vala_data_type_is_real_non_null_struct_type (expression_type)) {
			ValaCCodeUnaryExpression* _tmp83_;
			vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp83_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr)));
			_vala_ccode_node_unref0 (_tmp83_);
		} else {
			vala_ccode_function_call_add_argument (ccall, cexpr);
		}
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
		vala_ccode_comma_expression_append_expression (ccomma, _tmp84_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)));
		_vala_ccode_node_unref0 (_tmp84_);
		cexpr = (_tmp85_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (cexpr), _tmp85_);
		result = cexpr;
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (ccomma);
		_vala_code_node_unref0 (decl);
		return result;
	} else {
		if (gvariant_boxing) {
			char* variant_func;
			ValaCCodeIdentifier* _tmp86_;
			ValaCCodeFunctionCall* _tmp87_;
			ValaCCodeFunctionCall* ccall;
			ValaCCodeFunction* cfunc;
			char* _tmp88_;
			ValaCCodeFormalParameter* _tmp89_;
			ValaCCodeBlock* block;
			ValaCCodeFragment* fragment;
			ValaCCodeIdentifier* _tmp94_;
			ValaCCodeExpression* _tmp95_;
			ValaCCodeExpression* _result_;
			ValaCCodeIdentifier* _tmp96_;
			ValaCCodeFunctionCall* _tmp97_;
			ValaCCodeFunctionCall* sink;
			ValaCCodeReturnStatement* _tmp98_;
			ValaCCodeFunction* _tmp99_;
			variant_func = g_strdup_printf ("_variant_new%d", self->priv->next_variant_function_id = self->priv->next_variant_function_id + 1);
			ccall = (_tmp87_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp86_ = vala_ccode_identifier_new (variant_func))), _vala_ccode_node_unref0 (_tmp86_), _tmp87_);
			vala_ccode_function_call_add_argument (ccall, cexpr);
			cfunc = vala_ccode_function_new (variant_func, "GVariant*");
			vala_ccode_function_set_modifiers (cfunc, VALA_CCODE_MODIFIERS_STATIC);
			vala_ccode_function_add_parameter (cfunc, _tmp89_ = vala_ccode_formal_parameter_new ("value", _tmp88_ = vala_data_type_get_cname (expression_type)));
			_vala_ccode_node_unref0 (_tmp89_);
			_g_free0 (_tmp88_);
			if (VALA_IS_ARRAY_TYPE (expression_type)) {
				ValaArrayType* array_type;
				array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (expression_type));
				{
					gint dim;
					dim = 1;
					{
						gboolean _tmp90_;
						_tmp90_ = TRUE;
						while (TRUE) {
							ValaCCodeExpression* _tmp91_;
							char* _tmp92_;
							ValaCCodeFormalParameter* _tmp93_;
							if (!_tmp90_) {
								dim++;
							}
							_tmp90_ = FALSE;
							if (!(dim <= vala_array_type_get_rank (array_type))) {
								break;
							}
							vala_ccode_function_call_add_argument (ccall, _tmp91_ = vala_ccode_base_module_get_array_length_cexpression (self, expr, dim));
							_vala_ccode_node_unref0 (_tmp91_);
							vala_ccode_function_add_parameter (cfunc, _tmp93_ = vala_ccode_formal_parameter_new (_tmp92_ = vala_ccode_base_module_get_array_length_cname (self, "value", dim), "gint"));
							_vala_ccode_node_unref0 (_tmp93_);
							_g_free0 (_tmp92_);
						}
					}
				}
				_vala_code_node_unref0 (array_type);
			}
			block = vala_ccode_block_new ();
			fragment = vala_ccode_fragment_new ();
			_result_ = (_tmp95_ = vala_ccode_base_module_serialize_expression (self, fragment, expression_type, (ValaCCodeExpression*) (_tmp94_ = vala_ccode_identifier_new ("value"))), _vala_ccode_node_unref0 (_tmp94_), _tmp95_);
			sink = (_tmp97_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp96_ = vala_ccode_identifier_new ("g_variant_ref_sink"))), _vala_ccode_node_unref0 (_tmp96_), _tmp97_);
			vala_ccode_function_call_add_argument (sink, _result_);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) fragment);
			vala_ccode_block_add_statement (block, (ValaCCodeNode*) (_tmp98_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) sink)));
			_vala_ccode_node_unref0 (_tmp98_);
			vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp99_ = vala_ccode_function_copy (cfunc)));
			_vala_ccode_node_unref0 (_tmp99_);
			vala_ccode_function_set_block (cfunc, block);
			vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) cfunc);
			result = (ValaCCodeExpression*) ccall;
			_vala_ccode_node_unref0 (sink);
			_vala_ccode_node_unref0 (_result_);
			_vala_ccode_node_unref0 (fragment);
			_vala_ccode_node_unref0 (block);
			_vala_ccode_node_unref0 (cfunc);
			_g_free0 (variant_func);
			_vala_ccode_node_unref0 (cexpr);
			return result;
		} else {
			if (boxing) {
				ValaCCodeExpression* _tmp100_;
				ValaCCodeUnaryExpression* unary;
				gboolean _tmp101_ = FALSE;
				unary = _vala_ccode_node_ref0 ((_tmp100_ = cexpr, VALA_IS_CCODE_UNARY_EXPRESSION (_tmp100_) ? ((ValaCCodeUnaryExpression*) _tmp100_) : NULL));
				if (unary != NULL) {
					_tmp101_ = vala_ccode_unary_expression_get_operator (unary) == VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION;
				} else {
					_tmp101_ = FALSE;
				}
				if (_tmp101_) {
					ValaCCodeExpression* _tmp102_;
					cexpr = (_tmp102_ = _vala_ccode_node_ref0 (vala_ccode_unary_expression_get_inner (unary)), _vala_ccode_node_unref0 (cexpr), _tmp102_);
				} else {
					gboolean _tmp103_ = FALSE;
					if (VALA_IS_CCODE_IDENTIFIER (cexpr)) {
						_tmp103_ = TRUE;
					} else {
						_tmp103_ = VALA_IS_CCODE_MEMBER_ACCESS (cexpr);
					}
					if (_tmp103_) {
						ValaCCodeExpression* _tmp104_;
						cexpr = (_tmp104_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp104_);
					} else {
						ValaLocalVariable* decl;
						ValaCCodeCommaExpression* ccomma;
						ValaCCodeExpression* _tmp105_;
						ValaCCodeAssignment* _tmp106_;
						ValaCCodeExpression* _tmp107_;
						ValaCCodeUnaryExpression* _tmp108_;
						ValaCCodeExpression* _tmp109_;
						decl = vala_ccode_base_module_get_temp_variable (self, expression_type, vala_data_type_get_value_owned (expression_type), (ValaCodeNode*) expression_type, FALSE);
						vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), decl);
						ccomma = vala_ccode_comma_expression_new ();
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp106_ = vala_ccode_assignment_new (_tmp105_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
						_vala_ccode_node_unref0 (_tmp106_);
						_vala_ccode_node_unref0 (_tmp105_);
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp108_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp107_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)))));
						_vala_ccode_node_unref0 (_tmp108_);
						_vala_ccode_node_unref0 (_tmp107_);
						cexpr = (_tmp109_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (cexpr), _tmp109_);
						_vala_ccode_node_unref0 (ccomma);
						_vala_code_node_unref0 (decl);
					}
				}
				_vala_ccode_node_unref0 (unary);
			} else {
				if (unboxing) {
					ValaCCodeExpression* _tmp110_;
					cexpr = (_tmp110_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp110_);
				} else {
					ValaCCodeExpression* _tmp111_;
					cexpr = (_tmp111_ = vala_ccode_base_module_get_implicit_cast_expression (self, cexpr, expression_type, target_type, expr), _vala_ccode_node_unref0 (cexpr), _tmp111_);
				}
			}
		}
	}
	if (vala_data_type_get_value_owned (target_type)) {
		gboolean _tmp113_ = FALSE;
		gboolean _tmp114_ = FALSE;
		if (!vala_data_type_get_value_owned (expression_type)) {
			_tmp114_ = TRUE;
		} else {
			_tmp114_ = boxing;
		}
		if (_tmp114_) {
			_tmp113_ = TRUE;
		} else {
			_tmp113_ = unboxing;
		}
		_tmp112_ = _tmp113_;
	} else {
		_tmp112_ = FALSE;
	}
	if (_tmp112_) {
		gboolean _tmp115_ = FALSE;
		if (vala_ccode_base_module_requires_copy (self, target_type)) {
			_tmp115_ = !VALA_IS_NULL_TYPE (expression_type);
		} else {
			_tmp115_ = FALSE;
		}
		if (_tmp115_) {
			ValaCodeNode* node;
			ValaCCodeExpression* _tmp117_;
			node = _vala_code_node_ref0 ((ValaCodeNode*) expr);
			if (node == NULL) {
				ValaCodeNode* _tmp116_;
				node = (_tmp116_ = _vala_code_node_ref0 ((ValaCodeNode*) expression_type), _vala_code_node_unref0 (node), _tmp116_);
			}
			cexpr = (_tmp117_ = vala_ccode_base_module_get_ref_cexpression (self, target_type, cexpr, expr, node), _vala_ccode_node_unref0 (cexpr), _tmp117_);
			_vala_code_node_unref0 (node);
		}
	}
	result = cexpr;
	return result;
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_implicit_cast_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* cexpr;
	gboolean _tmp0_ = FALSE;
	ValaTypeSymbol* _tmp1_;
	ValaClass* cl;
	ValaTypeSymbol* _tmp2_;
	ValaInterface* iface;
	gboolean _tmp3_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (source_cexpr != NULL, NULL);
	cexpr = _vala_ccode_node_ref0 (source_cexpr);
	if (vala_data_type_get_data_type (expression_type) != NULL) {
		_tmp0_ = vala_data_type_get_data_type (expression_type) == vala_data_type_get_data_type (target_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = cexpr;
		return result;
	}
	if (VALA_IS_NULL_TYPE (expression_type)) {
		result = cexpr;
		return result;
	}
	vala_ccode_base_module_generate_type_declaration (self, target_type, self->source_declarations);
	cl = _vala_code_node_ref0 ((_tmp1_ = vala_data_type_get_data_type (target_type), VALA_IS_CLASS (_tmp1_) ? ((ValaClass*) _tmp1_) : NULL));
	iface = _vala_code_node_ref0 ((_tmp2_ = vala_data_type_get_data_type (target_type), VALA_IS_INTERFACE (_tmp2_) ? ((ValaInterface*) _tmp2_) : NULL));
	if (vala_code_context_get_checking (self->priv->_context)) {
		gboolean _tmp4_ = FALSE;
		if (iface != NULL) {
			_tmp4_ = TRUE;
		} else {
			gboolean _tmp5_ = FALSE;
			if (cl != NULL) {
				_tmp5_ = !vala_class_get_is_compact (cl);
			} else {
				_tmp5_ = FALSE;
			}
			_tmp4_ = _tmp5_;
		}
		_tmp3_ = _tmp4_;
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		result = (ValaCCodeExpression*) vala_ccode_base_module_generate_instance_cast (self, cexpr, vala_data_type_get_data_type (target_type));
		_vala_code_node_unref0 (iface);
		_vala_code_node_unref0 (cl);
		_vala_ccode_node_unref0 (cexpr);
		return result;
	} else {
		gboolean _tmp6_ = FALSE;
		if (vala_data_type_get_data_type (target_type) != NULL) {
			char* _tmp7_;
			char* _tmp8_;
			_tmp6_ = _vala_strcmp0 (_tmp7_ = vala_data_type_get_cname (expression_type), _tmp8_ = vala_data_type_get_cname (target_type)) != 0;
			_g_free0 (_tmp8_);
			_g_free0 (_tmp7_);
		} else {
			_tmp6_ = FALSE;
		}
		if (_tmp6_) {
			ValaTypeSymbol* _tmp9_;
			ValaStruct* st;
			gboolean _tmp10_ = FALSE;
			st = _vala_code_node_ref0 ((_tmp9_ = vala_data_type_get_data_type (target_type), VALA_IS_STRUCT (_tmp9_) ? ((ValaStruct*) _tmp9_) : NULL));
			if (vala_typesymbol_is_reference_type (vala_data_type_get_data_type (target_type))) {
				_tmp10_ = TRUE;
			} else {
				gboolean _tmp11_ = FALSE;
				if (st != NULL) {
					_tmp11_ = vala_struct_is_simple_type (st);
				} else {
					_tmp11_ = FALSE;
				}
				_tmp10_ = _tmp11_;
			}
			if (_tmp10_) {
				char* _tmp12_;
				ValaCCodeExpression* _tmp13_;
				result = (_tmp13_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, _tmp12_ = vala_data_type_get_cname (target_type)), _g_free0 (_tmp12_), _tmp13_);
				_vala_code_node_unref0 (st);
				_vala_code_node_unref0 (iface);
				_vala_code_node_unref0 (cl);
				_vala_ccode_node_unref0 (cexpr);
				return result;
			} else {
				result = cexpr;
				_vala_code_node_unref0 (st);
				_vala_code_node_unref0 (iface);
				_vala_code_node_unref0 (cl);
				return result;
			}
			_vala_code_node_unref0 (st);
		} else {
			result = cexpr;
			_vala_code_node_unref0 (iface);
			_vala_code_node_unref0 (cl);
			return result;
		}
	}
	_vala_code_node_unref0 (iface);
	_vala_code_node_unref0 (cl);
	_vala_ccode_node_unref0 (cexpr);
}


ValaCCodeExpression* vala_ccode_base_module_get_implicit_cast_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_implicit_cast_expression (self, source_cexpr, expression_type, target_type, expr);
}


ValaCCodeExpression* vala_ccode_base_module_get_property_set_call (ValaCCodeBaseModule* self, ValaProperty* prop, ValaMemberAccess* ma, ValaCCodeExpression* cexpr, ValaExpression* rhs) {
	ValaCCodeExpression* result = NULL;
	char* set_func;
	ValaProperty* base_property;
	ValaCCodeIdentifier* _tmp23_;
	ValaCCodeFunctionCall* _tmp24_;
	ValaCCodeFunctionCall* ccall;
	ValaDataType* _tmp36_;
	ValaArrayType* array_type;
	ValaCCodeExpression* rv;
	gboolean _tmp37_ = FALSE;
	gboolean _tmp43_ = FALSE;
	gboolean _tmp44_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (prop != NULL, NULL);
	g_return_val_if_fail (ma != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	if (VALA_IS_BASE_ACCESS (vala_member_access_get_inner (ma))) {
		if (vala_property_get_base_property (prop) != NULL) {
			ValaClass* base_class;
			char* _tmp0_;
			char* _tmp1_;
			ValaCCodeIdentifier* _tmp2_;
			ValaCCodeFunctionCall* _tmp3_;
			ValaCCodeFunctionCall* vcast;
			char* _tmp4_;
			char* _tmp5_;
			ValaCCodeIdentifier* _tmp6_;
			char* _tmp7_;
			ValaCCodeMemberAccess* _tmp8_;
			ValaCCodeFunctionCall* _tmp9_;
			ValaCCodeFunctionCall* ccall;
			ValaCCodeExpression* _tmp10_;
			base_class = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_property_get_base_property (prop))));
			vcast = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = g_strdup_printf ("%s_CLASS", _tmp0_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) base_class, NULL))))), _vala_ccode_node_unref0 (_tmp2_), _g_free0 (_tmp1_), _g_free0 (_tmp0_), _tmp3_);
			vala_ccode_function_call_add_argument (vcast, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new (_tmp5_ = g_strdup_printf ("%s_parent_class", _tmp4_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) vala_ccode_base_module_get_current_class (self), NULL)))));
			_vala_ccode_node_unref0 (_tmp6_);
			_g_free0 (_tmp5_);
			_g_free0 (_tmp4_);
			ccall = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) vcast, _tmp7_ = g_strdup_printf ("set_%s", vala_symbol_get_name ((ValaSymbol*) prop))))), _vala_ccode_node_unref0 (_tmp8_), _g_free0 (_tmp7_), _tmp9_);
			vala_ccode_function_call_add_argument (ccall, _tmp10_ = VALA_CCODE_EXPRESSION (vala_ccode_base_module_get_ccodenode (self, (ValaCodeNode*) vala_member_access_get_inner (ma))));
			_vala_ccode_node_unref0 (_tmp10_);
			vala_ccode_function_call_add_argument (ccall, cexpr);
			result = (ValaCCodeExpression*) ccall;
			_vala_ccode_node_unref0 (vcast);
			_vala_code_node_unref0 (base_class);
			return result;
		} else {
			if (vala_property_get_base_interface_property (prop) != NULL) {
				ValaInterface* base_iface;
				char* _tmp11_;
				char* _tmp12_;
				char* _tmp13_;
				char* parent_iface_var;
				ValaCCodeIdentifier* _tmp14_;
				char* _tmp15_;
				ValaCCodeMemberAccess* _tmp16_;
				ValaCCodeFunctionCall* _tmp17_;
				ValaCCodeFunctionCall* ccall;
				ValaCCodeExpression* _tmp18_;
				base_iface = _vala_code_node_ref0 (VALA_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_property_get_base_interface_property (prop))));
				parent_iface_var = (_tmp13_ = g_strdup_printf ("%s_%s_parent_iface", _tmp11_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) vala_ccode_base_module_get_current_class (self), NULL), _tmp12_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) base_iface, NULL)), _g_free0 (_tmp12_), _g_free0 (_tmp11_), _tmp13_);
				ccall = (_tmp17_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp16_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new (parent_iface_var)), _tmp15_ = g_strdup_printf ("set_%s", vala_symbol_get_name ((ValaSymbol*) prop))))), _vala_ccode_node_unref0 (_tmp16_), _g_free0 (_tmp15_), _vala_ccode_node_unref0 (_tmp14_), _tmp17_);
				vala_ccode_function_call_add_argument (ccall, _tmp18_ = VALA_CCODE_EXPRESSION (vala_ccode_base_module_get_ccodenode (self, (ValaCodeNode*) vala_member_access_get_inner (ma))));
				_vala_ccode_node_unref0 (_tmp18_);
				vala_ccode_function_call_add_argument (ccall, cexpr);
				result = (ValaCCodeExpression*) ccall;
				_g_free0 (parent_iface_var);
				_vala_code_node_unref0 (base_iface);
				return result;
			}
		}
	}
	set_func = g_strdup ("g_object_set");
	base_property = _vala_code_node_ref0 (prop);
	if (!vala_property_get_no_accessor_method (prop)) {
		if (vala_property_get_base_property (prop) != NULL) {
			ValaProperty* _tmp19_;
			base_property = (_tmp19_ = _vala_code_node_ref0 (vala_property_get_base_property (prop)), _vala_code_node_unref0 (base_property), _tmp19_);
		} else {
			if (vala_property_get_base_interface_property (prop) != NULL) {
				ValaProperty* _tmp20_;
				base_property = (_tmp20_ = _vala_code_node_ref0 (vala_property_get_base_interface_property (prop)), _vala_code_node_unref0 (base_property), _tmp20_);
			}
		}
		if (VALA_IS_DYNAMIC_PROPERTY (prop)) {
			char* _tmp21_;
			set_func = (_tmp21_ = vala_ccode_base_module_get_dynamic_property_setter_cname (self, VALA_DYNAMIC_PROPERTY (prop)), _g_free0 (set_func), _tmp21_);
		} else {
			char* _tmp22_;
			vala_ccode_base_module_generate_property_accessor_declaration (self, vala_property_get_set_accessor (base_property), self->source_declarations);
			set_func = (_tmp22_ = vala_property_accessor_get_cname (vala_property_get_set_accessor (base_property)), _g_free0 (set_func), _tmp22_);
		}
	}
	ccall = (_tmp24_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new (set_func))), _vala_ccode_node_unref0 (_tmp23_), _tmp24_);
	if (vala_property_get_binding (prop) == MEMBER_BINDING_INSTANCE) {
		ValaCCodeExpression* instance;
		instance = VALA_CCODE_EXPRESSION (vala_ccode_base_module_get_ccodenode (self, (ValaCodeNode*) vala_member_access_get_inner (ma)));
		if (VALA_IS_STRUCT (vala_symbol_get_parent_symbol ((ValaSymbol*) prop))) {
			ValaCCodeExpression* _tmp25_;
			ValaCCodeUnaryExpression* unary;
			gboolean _tmp26_ = FALSE;
			unary = _vala_ccode_node_ref0 ((_tmp25_ = instance, VALA_IS_CCODE_UNARY_EXPRESSION (_tmp25_) ? ((ValaCCodeUnaryExpression*) _tmp25_) : NULL));
			if (unary != NULL) {
				_tmp26_ = vala_ccode_unary_expression_get_operator (unary) == VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION;
			} else {
				_tmp26_ = FALSE;
			}
			if (_tmp26_) {
				ValaCCodeExpression* _tmp27_;
				instance = (_tmp27_ = _vala_ccode_node_ref0 (vala_ccode_unary_expression_get_inner (unary)), _vala_ccode_node_unref0 (instance), _tmp27_);
			} else {
				gboolean _tmp28_ = FALSE;
				if (VALA_IS_CCODE_IDENTIFIER (instance)) {
					_tmp28_ = TRUE;
				} else {
					_tmp28_ = VALA_IS_CCODE_MEMBER_ACCESS (instance);
				}
				if (_tmp28_) {
					ValaCCodeExpression* _tmp29_;
					instance = (_tmp29_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance), _vala_ccode_node_unref0 (instance), _tmp29_);
				} else {
					ValaCCodeCommaExpression* ccomma;
					ValaLocalVariable* temp_var;
					ValaCCodeExpression* _tmp30_;
					ValaCCodeAssignment* _tmp31_;
					ValaCCodeExpression* _tmp32_;
					ValaCCodeUnaryExpression* _tmp33_;
					ValaCCodeExpression* _tmp34_;
					ccomma = vala_ccode_comma_expression_new ();
					temp_var = vala_ccode_base_module_get_temp_variable (self, vala_expression_get_target_type (vala_member_access_get_inner (ma)), TRUE, NULL, FALSE);
					vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_var);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp31_ = vala_ccode_assignment_new (_tmp30_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), instance, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp31_);
					_vala_ccode_node_unref0 (_tmp30_);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp33_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp32_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)))));
					_vala_ccode_node_unref0 (_tmp33_);
					_vala_ccode_node_unref0 (_tmp32_);
					instance = (_tmp34_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (instance), _tmp34_);
					_vala_code_node_unref0 (temp_var);
					_vala_ccode_node_unref0 (ccomma);
				}
			}
			_vala_ccode_node_unref0 (unary);
		}
		vala_ccode_function_call_add_argument (ccall, instance);
		_vala_ccode_node_unref0 (instance);
	}
	if (vala_property_get_no_accessor_method (prop)) {
		ValaCCodeConstant* _tmp35_;
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp35_ = vala_property_get_canonical_cconstant (prop)));
		_vala_ccode_node_unref0 (_tmp35_);
	}
	array_type = _vala_code_node_ref0 ((_tmp36_ = vala_property_get_property_type (prop), VALA_IS_ARRAY_TYPE (_tmp36_) ? ((ValaArrayType*) _tmp36_) : NULL));
	rv = NULL;
	if (array_type != NULL) {
		_tmp37_ = !vala_property_get_no_array_length (prop);
	} else {
		_tmp37_ = FALSE;
	}
	if (_tmp37_) {
		ValaLocalVariable* temp_var;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeExpression* _tmp38_;
		ValaCCodeAssignment* _tmp39_;
		ValaCCodeExpression* _tmp40_;
		ValaCCodeExpression* _tmp41_;
		temp_var = vala_ccode_base_module_get_temp_variable (self, vala_property_get_property_type (prop), TRUE, NULL, FALSE);
		vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_var);
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp39_ = vala_ccode_assignment_new (_tmp38_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp39_);
		_vala_ccode_node_unref0 (_tmp38_);
		vala_ccode_function_call_add_argument (ccall, _tmp40_ = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)));
		_vala_ccode_node_unref0 (_tmp40_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
		rv = (_tmp41_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccomma), _vala_ccode_node_unref0 (rv), _tmp41_);
		_vala_ccode_node_unref0 (ccomma);
		_vala_code_node_unref0 (temp_var);
	} else {
		ValaCCodeExpression* _tmp42_;
		vala_ccode_function_call_add_argument (ccall, cexpr);
		rv = (_tmp42_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ccall), _vala_ccode_node_unref0 (rv), _tmp42_);
	}
	if (array_type != NULL) {
		_tmp44_ = !vala_property_get_no_array_length (prop);
	} else {
		_tmp44_ = FALSE;
	}
	if (_tmp44_) {
		_tmp43_ = rhs != NULL;
	} else {
		_tmp43_ = FALSE;
	}
	if (_tmp43_) {
		{
			gint dim;
			dim = 1;
			{
				gboolean _tmp45_;
				_tmp45_ = TRUE;
				while (TRUE) {
					ValaCCodeExpression* _tmp46_;
					if (!_tmp45_) {
						dim++;
					}
					_tmp45_ = FALSE;
					if (!(dim <= vala_array_type_get_rank (array_type))) {
						break;
					}
					vala_ccode_function_call_add_argument (ccall, _tmp46_ = vala_ccode_base_module_get_array_length_cexpression (self, rhs, dim));
					_vala_ccode_node_unref0 (_tmp46_);
				}
			}
		}
	} else {
		gboolean _tmp47_ = FALSE;
		if (VALA_IS_DELEGATE_TYPE (vala_property_get_property_type (prop))) {
			_tmp47_ = rhs != NULL;
		} else {
			_tmp47_ = FALSE;
		}
		if (_tmp47_) {
			ValaDelegateType* delegate_type;
			delegate_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_property_get_property_type (prop)));
			if (vala_delegate_get_has_target (vala_delegate_type_get_delegate_symbol (delegate_type))) {
				ValaCCodeExpression* delegate_target_destroy_notify;
				ValaCCodeExpression* _tmp48_ = NULL;
				ValaCCodeExpression* _tmp49_;
				ValaCCodeExpression* _tmp50_;
				ValaCCodeExpression* _tmp51_;
				delegate_target_destroy_notify = NULL;
				vala_ccode_function_call_add_argument (ccall, _tmp51_ = (_tmp49_ = vala_ccode_base_module_get_delegate_target_cexpression (self, rhs, &_tmp48_), delegate_target_destroy_notify = (_tmp50_ = _tmp48_, _vala_ccode_node_unref0 (delegate_target_destroy_notify), _tmp50_), _tmp49_));
				_vala_ccode_node_unref0 (_tmp51_);
				_vala_ccode_node_unref0 (delegate_target_destroy_notify);
			}
			_vala_code_node_unref0 (delegate_type);
		}
	}
	if (vala_property_get_no_accessor_method (prop)) {
		ValaCCodeConstant* _tmp52_;
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp52_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp52_);
	}
	result = rv;
	_vala_code_node_unref0 (array_type);
	_vala_ccode_node_unref0 (ccall);
	_vala_code_node_unref0 (base_property);
	_g_free0 (set_func);
	return result;
}


gboolean vala_ccode_base_module_is_address_of_possible (ValaCCodeBaseModule* self, ValaExpression* e) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	ValaExpression* _tmp2_;
	ValaMemberAccess* ma;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (e != NULL, FALSE);
	if (self->gvalue_type != NULL) {
		_tmp1_ = vala_data_type_get_data_type (vala_expression_get_target_type (e)) == VALA_TYPESYMBOL (self->gvalue_type);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		_tmp0_ = vala_data_type_get_data_type (vala_expression_get_value_type (e)) != VALA_TYPESYMBOL (self->gvalue_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = FALSE;
		return result;
	}
	ma = _vala_code_node_ref0 ((_tmp2_ = e, VALA_IS_MEMBER_ACCESS (_tmp2_) ? ((ValaMemberAccess*) _tmp2_) : NULL));
	if (ma == NULL) {
		result = FALSE;
		_vala_code_node_unref0 (ma);
		return result;
	}
	result = VALA_IS_VARIABLE (vala_expression_get_symbol_reference ((ValaExpression*) ma));
	_vala_code_node_unref0 (ma);
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_address_of_expression (ValaCCodeBaseModule* self, ValaExpression* e, ValaCCodeExpression* ce) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeCommaExpression* ccomma;
	ValaDataType* address_of_type;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	ValaLocalVariable* temp_decl;
	ValaCCodeExpression* ctemp;
	ValaCCodeAssignment* _tmp4_;
	ValaCCodeUnaryExpression* _tmp5_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (e != NULL, NULL);
	g_return_val_if_fail (ce != NULL, NULL);
	if (vala_ccode_base_module_is_address_of_possible (self, e)) {
		result = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ce);
		return result;
	}
	ccomma = vala_ccode_comma_expression_new ();
	address_of_type = NULL;
	if (self->gvalue_type != NULL) {
		_tmp1_ = vala_expression_get_target_type (e) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		_tmp0_ = vala_data_type_get_data_type (vala_expression_get_target_type (e)) == VALA_TYPESYMBOL (self->gvalue_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaDataType* _tmp2_;
		address_of_type = (_tmp2_ = _vala_code_node_ref0 (vala_expression_get_target_type (e)), _vala_code_node_unref0 (address_of_type), _tmp2_);
	} else {
		ValaDataType* _tmp3_;
		address_of_type = (_tmp3_ = _vala_code_node_ref0 (vala_expression_get_value_type (e)), _vala_code_node_unref0 (address_of_type), _tmp3_);
	}
	temp_decl = vala_ccode_base_module_get_temp_variable (self, address_of_type, TRUE, NULL, FALSE);
	ctemp = vala_ccode_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
	vala_collection_add ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self), temp_decl);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_assignment_new (ctemp, ce, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp4_);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ctemp)));
	_vala_ccode_node_unref0 (_tmp5_);
	result = (ValaCCodeExpression*) ccomma;
	_vala_ccode_node_unref0 (ctemp);
	_vala_code_node_unref0 (temp_decl);
	_vala_code_node_unref0 (address_of_type);
	return result;
}


gboolean vala_ccode_base_module_add_wrapper (ValaCCodeBaseModule* self, const char* wrapper_name) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (wrapper_name != NULL, FALSE);
	result = vala_collection_add ((ValaCollection*) self->wrappers, wrapper_name);
	return result;
}


gboolean vala_ccode_base_module_add_generated_external_symbol (ValaCCodeBaseModule* self, ValaSymbol* external_symbol) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (external_symbol != NULL, FALSE);
	result = vala_collection_add ((ValaCollection*) self->priv->generated_external_symbols, external_symbol);
	return result;
}


ValaDataType* vala_ccode_base_module_get_data_type_for_symbol (ValaTypeSymbol* sym) {
	ValaDataType* result = NULL;
	ValaDataType* type;
	g_return_val_if_fail (sym != NULL, NULL);
	type = NULL;
	if (VALA_IS_CLASS (sym)) {
		ValaDataType* _tmp0_;
		type = (_tmp0_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_CLASS (sym)), _vala_code_node_unref0 (type), _tmp0_);
	} else {
		if (VALA_IS_INTERFACE (sym)) {
			ValaDataType* _tmp1_;
			type = (_tmp1_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_INTERFACE (sym)), _vala_code_node_unref0 (type), _tmp1_);
		} else {
			if (VALA_IS_STRUCT (sym)) {
				ValaStruct* st;
				st = _vala_code_node_ref0 (VALA_STRUCT (sym));
				if (vala_struct_is_boolean_type (st)) {
					ValaDataType* _tmp2_;
					type = (_tmp2_ = (ValaDataType*) vala_boolean_type_new (st), _vala_code_node_unref0 (type), _tmp2_);
				} else {
					if (vala_struct_is_integer_type (st)) {
						ValaDataType* _tmp3_;
						type = (_tmp3_ = (ValaDataType*) vala_integer_type_new (st, NULL, NULL), _vala_code_node_unref0 (type), _tmp3_);
					} else {
						if (vala_struct_is_floating_type (st)) {
							ValaDataType* _tmp4_;
							type = (_tmp4_ = (ValaDataType*) vala_floating_type_new (st), _vala_code_node_unref0 (type), _tmp4_);
						} else {
							ValaDataType* _tmp5_;
							type = (_tmp5_ = (ValaDataType*) vala_struct_value_type_new (st), _vala_code_node_unref0 (type), _tmp5_);
						}
					}
				}
				_vala_code_node_unref0 (st);
			} else {
				if (VALA_IS_ENUM (sym)) {
					ValaDataType* _tmp6_;
					type = (_tmp6_ = (ValaDataType*) vala_enum_value_type_new (VALA_ENUM (sym)), _vala_code_node_unref0 (type), _tmp6_);
				} else {
					if (VALA_IS_ERROR_DOMAIN (sym)) {
						ValaDataType* _tmp7_;
						type = (_tmp7_ = (ValaDataType*) vala_error_type_new (VALA_ERROR_DOMAIN (sym), NULL, NULL), _vala_code_node_unref0 (type), _tmp7_);
					} else {
						if (VALA_IS_ERROR_CODE (sym)) {
							ValaDataType* _tmp8_;
							type = (_tmp8_ = (ValaDataType*) vala_error_type_new (VALA_ERROR_DOMAIN (vala_symbol_get_parent_symbol ((ValaSymbol*) sym)), VALA_ERROR_CODE (sym), NULL), _vala_code_node_unref0 (type), _tmp8_);
						} else {
							char* _tmp9_;
							char* _tmp10_;
							vala_report_error (NULL, _tmp10_ = g_strdup_printf ("internal error: `%s' is not a supported type", _tmp9_ = vala_symbol_get_full_name ((ValaSymbol*) sym)));
							_g_free0 (_tmp10_);
							_g_free0 (_tmp9_);
							result = (ValaDataType*) vala_invalid_type_new ();
							_vala_code_node_unref0 (type);
							return result;
						}
					}
				}
			}
		}
	}
	result = type;
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_default_value_for_type (ValaCCodeBaseModule* self, ValaDataType* type, gboolean initializer_expression) {
	ValaCCodeExpression* result = NULL;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	ValaDataType* _tmp1_;
	ValaArrayType* array_type;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	array_type = _vala_code_node_ref0 ((_tmp1_ = type, VALA_IS_ARRAY_TYPE (_tmp1_) ? ((ValaArrayType*) _tmp1_) : NULL));
	if (initializer_expression) {
		_tmp3_ = !vala_data_type_get_nullable (type);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		gboolean _tmp4_ = FALSE;
		gboolean _tmp5_ = FALSE;
		if (st != NULL) {
			_tmp5_ = !vala_struct_is_simple_type (st);
		} else {
			_tmp5_ = FALSE;
		}
		if (_tmp5_) {
			_tmp4_ = TRUE;
		} else {
			gboolean _tmp6_ = FALSE;
			if (array_type != NULL) {
				_tmp6_ = vala_array_type_get_fixed_length (array_type);
			} else {
				_tmp6_ = FALSE;
			}
			_tmp4_ = _tmp6_;
		}
		_tmp2_ = _tmp4_;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		ValaCCodeInitializerList* clist;
		ValaCCodeConstant* _tmp7_;
		clist = vala_ccode_initializer_list_new ();
		vala_ccode_initializer_list_append (clist, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp7_);
		result = (ValaCCodeExpression*) clist;
		_vala_code_node_unref0 (array_type);
		_vala_code_node_unref0 (st);
		return result;
	} else {
		gboolean _tmp8_ = FALSE;
		gboolean _tmp9_ = FALSE;
		gboolean _tmp10_ = FALSE;
		gboolean _tmp11_ = FALSE;
		gboolean _tmp12_ = FALSE;
		if (vala_data_type_get_data_type (type) != NULL) {
			_tmp12_ = vala_typesymbol_is_reference_type (vala_data_type_get_data_type (type));
		} else {
			_tmp12_ = FALSE;
		}
		if (_tmp12_) {
			_tmp11_ = TRUE;
		} else {
			_tmp11_ = vala_data_type_get_nullable (type);
		}
		if (_tmp11_) {
			_tmp10_ = TRUE;
		} else {
			_tmp10_ = VALA_IS_POINTER_TYPE (type);
		}
		if (_tmp10_) {
			_tmp9_ = TRUE;
		} else {
			_tmp9_ = VALA_IS_DELEGATE_TYPE (type);
		}
		if (_tmp9_) {
			_tmp8_ = TRUE;
		} else {
			gboolean _tmp13_ = FALSE;
			if (array_type != NULL) {
				_tmp13_ = !vala_array_type_get_fixed_length (array_type);
			} else {
				_tmp13_ = FALSE;
			}
			_tmp8_ = _tmp13_;
		}
		if (_tmp8_) {
			result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
			_vala_code_node_unref0 (array_type);
			_vala_code_node_unref0 (st);
			return result;
		} else {
			gboolean _tmp14_ = FALSE;
			if (vala_data_type_get_data_type (type) != NULL) {
				char* _tmp15_;
				_tmp14_ = (_tmp15_ = vala_typesymbol_get_default_value (vala_data_type_get_data_type (type))) != NULL;
				_g_free0 (_tmp15_);
			} else {
				_tmp14_ = FALSE;
			}
			if (_tmp14_) {
				char* _tmp16_;
				ValaCCodeExpression* _tmp17_;
				result = (_tmp17_ = (ValaCCodeExpression*) vala_ccode_constant_new (_tmp16_ = vala_typesymbol_get_default_value (vala_data_type_get_data_type (type))), _g_free0 (_tmp16_), _tmp17_);
				_vala_code_node_unref0 (array_type);
				_vala_code_node_unref0 (st);
				return result;
			} else {
				if (vala_data_type_get_type_parameter (type) != NULL) {
					result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
					_vala_code_node_unref0 (array_type);
					_vala_code_node_unref0 (st);
					return result;
				} else {
					if (VALA_IS_ERROR_TYPE (type)) {
						result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
						_vala_code_node_unref0 (array_type);
						_vala_code_node_unref0 (st);
						return result;
					}
				}
			}
		}
	}
	result = NULL;
	_vala_code_node_unref0 (array_type);
	_vala_code_node_unref0 (st);
	return result;
}


static ValaCCodeStatement* vala_ccode_base_module_create_property_type_check_statement (ValaCCodeBaseModule* self, ValaProperty* prop, gboolean check_return_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name) {
	ValaCCodeStatement* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (prop != NULL, NULL);
	g_return_val_if_fail (t != NULL, NULL);
	g_return_val_if_fail (var_name != NULL, NULL);
	if (check_return_type) {
		result = vala_ccode_base_module_create_type_check_statement (self, (ValaCodeNode*) prop, vala_property_get_property_type (prop), t, non_null, var_name);
		return result;
	} else {
		ValaVoidType* _tmp0_;
		ValaCCodeStatement* _tmp1_;
		result = (_tmp1_ = vala_ccode_base_module_create_type_check_statement (self, (ValaCodeNode*) prop, (ValaDataType*) (_tmp0_ = vala_void_type_new (NULL)), t, non_null, var_name), _vala_code_node_unref0 (_tmp0_), _tmp1_);
		return result;
	}
}


ValaCCodeStatement* vala_ccode_base_module_create_type_check_statement (ValaCCodeBaseModule* self, ValaCodeNode* method_node, ValaDataType* ret_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name) {
	ValaCCodeStatement* result = NULL;
	ValaCCodeFunctionCall* ccheck;
	ValaCodeNode* _tmp15_;
	ValaCreationMethod* cm;
	gboolean _tmp16_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (method_node != NULL, NULL);
	g_return_val_if_fail (ret_type != NULL, NULL);
	g_return_val_if_fail (t != NULL, NULL);
	g_return_val_if_fail (var_name != NULL, NULL);
	ccheck = vala_ccode_function_call_new (NULL);
	if (!vala_code_context_get_assert (self->priv->_context)) {
		result = NULL;
		_vala_ccode_node_unref0 (ccheck);
		return result;
	} else {
		gboolean _tmp0_ = FALSE;
		if (vala_code_context_get_checking (self->priv->_context)) {
			gboolean _tmp1_ = FALSE;
			gboolean _tmp2_ = FALSE;
			if (VALA_IS_CLASS (t)) {
				_tmp2_ = !vala_class_get_is_compact (VALA_CLASS (t));
			} else {
				_tmp2_ = FALSE;
			}
			if (_tmp2_) {
				_tmp1_ = TRUE;
			} else {
				_tmp1_ = VALA_IS_INTERFACE (t);
			}
			_tmp0_ = _tmp1_;
		} else {
			_tmp0_ = FALSE;
		}
		if (_tmp0_) {
			char* _tmp3_;
			ValaCCodeIdentifier* _tmp4_;
			ValaCCodeFunctionCall* _tmp5_;
			ValaCCodeFunctionCall* ctype_check;
			ValaCCodeIdentifier* _tmp6_;
			ValaCCodeExpression* cexpr;
			ctype_check = (_tmp5_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new (_tmp3_ = vala_ccode_base_module_get_type_check_function (self, t)))), _vala_ccode_node_unref0 (_tmp4_), _g_free0 (_tmp3_), _tmp5_);
			vala_ccode_function_call_add_argument (ctype_check, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new (var_name)));
			_vala_ccode_node_unref0 (_tmp6_);
			cexpr = _vala_ccode_node_ref0 ((ValaCCodeExpression*) ctype_check);
			if (!non_null) {
				ValaCCodeIdentifier* _tmp7_;
				ValaCCodeConstant* _tmp8_;
				ValaCCodeBinaryExpression* _tmp9_;
				ValaCCodeBinaryExpression* cnull;
				ValaCCodeExpression* _tmp10_;
				cnull = (_tmp9_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new (var_name)), (ValaCCodeExpression*) (_tmp8_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp8_), _vala_ccode_node_unref0 (_tmp7_), _tmp9_);
				cexpr = (_tmp10_ = (ValaCCodeExpression*) vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cnull, (ValaCCodeExpression*) ctype_check), _vala_ccode_node_unref0 (cexpr), _tmp10_);
				_vala_ccode_node_unref0 (cnull);
			}
			vala_ccode_function_call_add_argument (ccheck, cexpr);
			_vala_ccode_node_unref0 (cexpr);
			_vala_ccode_node_unref0 (ctype_check);
		} else {
			if (!non_null) {
				result = NULL;
				_vala_ccode_node_unref0 (ccheck);
				return result;
			} else {
				gboolean _tmp11_ = FALSE;
				if (t == VALA_TYPESYMBOL (self->glist_type)) {
					_tmp11_ = TRUE;
				} else {
					_tmp11_ = t == VALA_TYPESYMBOL (self->gslist_type);
				}
				if (_tmp11_) {
					result = NULL;
					_vala_ccode_node_unref0 (ccheck);
					return result;
				} else {
					ValaCCodeIdentifier* _tmp12_;
					ValaCCodeConstant* _tmp13_;
					ValaCCodeBinaryExpression* _tmp14_;
					ValaCCodeBinaryExpression* cnonnull;
					cnonnull = (_tmp14_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new (var_name)), (ValaCCodeExpression*) (_tmp13_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp13_), _vala_ccode_node_unref0 (_tmp12_), _tmp14_);
					vala_ccode_function_call_add_argument (ccheck, (ValaCCodeExpression*) cnonnull);
					_vala_ccode_node_unref0 (cnonnull);
				}
			}
		}
	}
	cm = _vala_code_node_ref0 ((_tmp15_ = method_node, VALA_IS_CREATION_METHOD (_tmp15_) ? ((ValaCreationMethod*) _tmp15_) : NULL));
	if (cm != NULL) {
		_tmp16_ = VALA_IS_OBJECT_TYPE_SYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) cm));
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		ValaCCodeIdentifier* _tmp17_;
		ValaCCodeConstant* _tmp18_;
		vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_identifier_new ("g_return_val_if_fail")));
		_vala_ccode_node_unref0 (_tmp17_);
		vala_ccode_function_call_add_argument (ccheck, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp18_);
	} else {
		if (VALA_IS_VOID_TYPE (ret_type)) {
			ValaCCodeIdentifier* _tmp19_;
			vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new ("g_return_if_fail")));
			_vala_ccode_node_unref0 (_tmp19_);
		} else {
			ValaCCodeIdentifier* _tmp20_;
			ValaCCodeExpression* cdefault;
			vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_identifier_new ("g_return_val_if_fail")));
			_vala_ccode_node_unref0 (_tmp20_);
			cdefault = vala_ccode_base_module_default_value_for_type (self, ret_type, FALSE);
			if (cdefault != NULL) {
				vala_ccode_function_call_add_argument (ccheck, cdefault);
			} else {
				result = NULL;
				_vala_ccode_node_unref0 (cdefault);
				_vala_code_node_unref0 (cm);
				_vala_ccode_node_unref0 (ccheck);
				return result;
			}
			_vala_ccode_node_unref0 (cdefault);
		}
	}
	result = (ValaCCodeStatement*) vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccheck);
	_vala_code_node_unref0 (cm);
	_vala_ccode_node_unref0 (ccheck);
	return result;
}


gint vala_ccode_base_module_get_param_pos (ValaCCodeBaseModule* self, double param_pos, gboolean ellipsis) {
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	if (!ellipsis) {
		if (param_pos >= 0) {
			result = (gint) (param_pos * 1000);
			return result;
		} else {
			result = (gint) ((100 + param_pos) * 1000);
			return result;
		}
	} else {
		if (param_pos >= 0) {
			result = (gint) ((100 + param_pos) * 1000);
			return result;
		} else {
			result = (gint) ((200 + param_pos) * 1000);
			return result;
		}
	}
}


ValaCCodeNode* vala_ccode_base_module_get_ccodenode (ValaCCodeBaseModule* self, ValaCodeNode* node) {
	ValaCCodeNode* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	if (vala_code_node_get_ccodenode (node) == NULL) {
		vala_code_node_emit (node, (ValaCodeGenerator*) self);
	}
	result = _vala_ccode_node_ref0 (vala_code_node_get_ccodenode (node));
	return result;
}


static void vala_ccode_base_module_real_visit_class (ValaCodeVisitor* base, ValaClass* cl) {
	ValaCCodeBaseModule * self;
	self = (ValaCCodeBaseModule*) base;
	g_return_if_fail (cl != NULL);
}


ValaCCodeStatement* vala_ccode_base_module_create_postcondition_statement (ValaCCodeBaseModule* self, ValaExpression* postcondition) {
	ValaCCodeStatement* result = NULL;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* cassert;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (postcondition != NULL, NULL);
	cassert = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("g_warn_if_fail"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	vala_ccode_function_call_add_argument (cassert, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) postcondition)));
	result = (ValaCCodeStatement*) vala_ccode_expression_statement_new ((ValaCCodeExpression*) cassert);
	_vala_ccode_node_unref0 (cassert);
	return result;
}


static gboolean vala_ccode_base_module_real_is_gobject_property (ValaCCodeBaseModule* self, ValaProperty* prop) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (prop != NULL, FALSE);
	result = FALSE;
	return result;
}


gboolean vala_ccode_base_module_is_gobject_property (ValaCCodeBaseModule* self, ValaProperty* prop) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->is_gobject_property (self, prop);
}


ValaDataType* vala_ccode_base_module_get_this_type (ValaCCodeBaseModule* self) {
	ValaDataType* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	if (vala_ccode_base_module_get_current_method (self) != NULL) {
		_tmp0_ = vala_method_get_binding (vala_ccode_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = _vala_code_node_ref0 (vala_variable_get_variable_type ((ValaVariable*) vala_method_get_this_parameter (vala_ccode_base_module_get_current_method (self))));
		return result;
	} else {
		gboolean _tmp1_ = FALSE;
		if (vala_ccode_base_module_get_current_property_accessor (self) != NULL) {
			_tmp1_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_ccode_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
		} else {
			_tmp1_ = FALSE;
		}
		if (_tmp1_) {
			result = _vala_code_node_ref0 (vala_variable_get_variable_type ((ValaVariable*) vala_property_get_this_parameter (vala_property_accessor_get_prop (vala_ccode_base_module_get_current_property_accessor (self)))));
			return result;
		}
	}
	result = NULL;
	return result;
}


ValaCCodeFunctionCall* vala_ccode_base_module_generate_instance_cast (ValaCCodeBaseModule* self, ValaCCodeExpression* expr, ValaTypeSymbol* type) {
	ValaCCodeFunctionCall* result = NULL;
	char* _tmp0_;
	ValaCCodeIdentifier* _tmp1_;
	ValaCCodeFunctionCall* _tmp2_;
	ValaCCodeFunctionCall* _result_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expr != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	_result_ = (_tmp2_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_identifier_new (_tmp0_ = vala_typesymbol_get_upper_case_cname (type, NULL)))), _vala_ccode_node_unref0 (_tmp1_), _g_free0 (_tmp0_), _tmp2_);
	vala_ccode_function_call_add_argument (_result_, expr);
	result = _result_;
	return result;
}


static void vala_ccode_base_module_generate_struct_destroy_function (ValaCCodeBaseModule* self, ValaStruct* st) {
	char* _tmp0_;
	gboolean _tmp1_;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* function;
	char* _tmp4_;
	char* _tmp5_;
	ValaCCodeFormalParameter* _tmp6_;
	ValaCCodeBlock* cblock;
	ValaCCodeFunction* _tmp16_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (st != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_declaration (self->source_declarations, _tmp0_ = vala_typesymbol_get_destroy_function ((ValaTypeSymbol*) st)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	function = (_tmp3_ = vala_ccode_function_new (_tmp2_ = vala_typesymbol_get_destroy_function ((ValaTypeSymbol*) st), "void"), _g_free0 (_tmp2_), _tmp3_);
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp6_ = vala_ccode_formal_parameter_new ("self", _tmp5_ = g_strconcat (_tmp4_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp6_);
	_g_free0 (_tmp5_);
	_g_free0 (_tmp4_);
	cblock = vala_ccode_block_new ();
	{
		ValaList* _tmp7_;
		ValaIterator* _tmp8_;
		ValaIterator* _f_it;
		_f_it = (_tmp8_ = vala_iterable_iterator ((ValaIterable*) (_tmp7_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp7_), _tmp8_);
		while (TRUE) {
			ValaField* f;
			if (!vala_iterator_next (_f_it)) {
				break;
			}
			f = (ValaField*) vala_iterator_get (_f_it);
			if (vala_field_get_binding (f) == MEMBER_BINDING_INSTANCE) {
				if (vala_ccode_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) f))) {
					ValaCCodeIdentifier* _tmp9_;
					char* _tmp10_;
					ValaCCodeMemberAccess* _tmp11_;
					ValaCCodeMemberAccess* lhs;
					ValaMemberAccess* this_access;
					ValaDataType* _tmp12_;
					ValaCCodeIdentifier* _tmp13_;
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp14_;
					ValaCCodeExpressionStatement* _tmp15_;
					lhs = (_tmp11_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new ("self")), _tmp10_ = vala_field_get_cname (f)), _g_free0 (_tmp10_), _vala_ccode_node_unref0 (_tmp9_), _tmp11_);
					this_access = vala_member_access_new_simple ("this", NULL);
					vala_expression_set_value_type ((ValaExpression*) this_access, _tmp12_ = vala_ccode_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f))));
					_vala_code_node_unref0 (_tmp12_);
					vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp13_ = vala_ccode_identifier_new ("(*self)")));
					_vala_ccode_node_unref0 (_tmp13_);
					ma = vala_member_access_new ((ValaExpression*) this_access, vala_symbol_get_name ((ValaSymbol*) f), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp15_ = vala_ccode_expression_statement_new (_tmp14_ = vala_ccode_base_module_get_unref_expression (self, (ValaCCodeExpression*) lhs, vala_variable_get_variable_type ((ValaVariable*) f), (ValaExpression*) ma, FALSE))));
					_vala_ccode_node_unref0 (_tmp15_);
					_vala_ccode_node_unref0 (_tmp14_);
					_vala_code_node_unref0 (ma);
					_vala_code_node_unref0 (this_access);
					_vala_ccode_node_unref0 (lhs);
				}
			}
			_vala_code_node_unref0 (f);
		}
		_vala_collection_object_unref0 (_f_it);
	}
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp16_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp16_);
	vala_ccode_function_set_block (function, cblock);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	_vala_ccode_node_unref0 (cblock);
	_vala_ccode_node_unref0 (function);
}


static void vala_ccode_base_module_generate_struct_copy_function (ValaCCodeBaseModule* self, ValaStruct* st) {
	char* _tmp0_;
	gboolean _tmp1_;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* function;
	char* _tmp4_;
	char* _tmp5_;
	char* _tmp6_;
	ValaCCodeFormalParameter* _tmp7_;
	char* _tmp8_;
	char* _tmp9_;
	ValaCCodeFormalParameter* _tmp10_;
	ValaCCodeBaseModuleEmitContext* _tmp11_;
	ValaCCodeBlock* cblock;
	ValaCCodeFragment* cfrag;
	ValaCCodeFunction* _tmp45_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (st != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_declaration (self->source_declarations, _tmp0_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	function = (_tmp3_ = vala_ccode_function_new (_tmp2_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st), "void"), _g_free0 (_tmp2_), _tmp3_);
	vala_ccode_function_set_modifiers (function, VALA_CCODE_MODIFIERS_STATIC);
	vala_ccode_function_add_parameter (function, _tmp7_ = vala_ccode_formal_parameter_new ("self", _tmp6_ = g_strconcat (_tmp5_ = g_strconcat ("const ", _tmp4_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), NULL), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp7_);
	_g_free0 (_tmp6_);
	_g_free0 (_tmp5_);
	_g_free0 (_tmp4_);
	vala_ccode_function_add_parameter (function, _tmp10_ = vala_ccode_formal_parameter_new ("dest", _tmp9_ = g_strconcat (_tmp8_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE), "*", NULL)));
	_vala_ccode_node_unref0 (_tmp10_);
	_g_free0 (_tmp9_);
	_g_free0 (_tmp8_);
	vala_ccode_base_module_push_context (self, _tmp11_ = vala_ccode_base_module_emit_context_new (NULL));
	_vala_ccode_base_module_emit_context_unref0 (_tmp11_);
	cblock = vala_ccode_block_new ();
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
	{
		ValaList* _tmp12_;
		ValaIterator* _tmp13_;
		ValaIterator* _f_it;
		_f_it = (_tmp13_ = vala_iterable_iterator ((ValaIterable*) (_tmp12_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp12_), _tmp13_);
		while (TRUE) {
			ValaField* f;
			if (!vala_iterator_next (_f_it)) {
				break;
			}
			f = (ValaField*) vala_iterator_get (_f_it);
			if (vala_field_get_binding (f) == MEMBER_BINDING_INSTANCE) {
				ValaCCodeIdentifier* _tmp14_;
				ValaCCodeExpression* _tmp15_;
				ValaCCodeExpression* copy;
				ValaCCodeIdentifier* _tmp19_;
				ValaCCodeMemberAccess* _tmp20_;
				ValaCCodeMemberAccess* dest;
				ValaDataType* _tmp21_;
				ValaArrayType* array_type;
				gboolean _tmp22_ = FALSE;
				copy = (_tmp15_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("self")), vala_symbol_get_name ((ValaSymbol*) f)), _vala_ccode_node_unref0 (_tmp14_), _tmp15_);
				if (vala_ccode_base_module_requires_copy (self, vala_variable_get_variable_type ((ValaVariable*) f))) {
					ValaMemberAccess* this_access;
					ValaDataType* _tmp16_;
					ValaCCodeIdentifier* _tmp17_;
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp18_;
					this_access = vala_member_access_new_simple ("this", NULL);
					vala_expression_set_value_type ((ValaExpression*) this_access, _tmp16_ = vala_ccode_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f))));
					_vala_code_node_unref0 (_tmp16_);
					vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp17_ = vala_ccode_identifier_new ("(*self)")));
					_vala_ccode_node_unref0 (_tmp17_);
					ma = vala_member_access_new ((ValaExpression*) this_access, vala_symbol_get_name ((ValaSymbol*) f), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
					copy = (_tmp18_ = vala_ccode_base_module_get_ref_cexpression (self, vala_variable_get_variable_type ((ValaVariable*) f), copy, (ValaExpression*) ma, (ValaCodeNode*) f), _vala_ccode_node_unref0 (copy), _tmp18_);
					_vala_code_node_unref0 (ma);
					_vala_code_node_unref0 (this_access);
				}
				dest = (_tmp20_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new ("dest")), vala_symbol_get_name ((ValaSymbol*) f)), _vala_ccode_node_unref0 (_tmp19_), _tmp20_);
				array_type = _vala_code_node_ref0 ((_tmp21_ = vala_variable_get_variable_type ((ValaVariable*) f), VALA_IS_ARRAY_TYPE (_tmp21_) ? ((ValaArrayType*) _tmp21_) : NULL));
				if (array_type != NULL) {
					_tmp22_ = vala_array_type_get_fixed_length (array_type);
				} else {
					_tmp22_ = FALSE;
				}
				if (_tmp22_) {
					ValaCCodeIdentifier* _tmp23_;
					ValaCCodeFunctionCall* _tmp24_;
					ValaCCodeFunctionCall* sizeof_call;
					char* _tmp25_;
					ValaCCodeIdentifier* _tmp26_;
					char* _tmp27_;
					ValaCCodeConstant* _tmp28_;
					ValaCCodeBinaryExpression* _tmp29_;
					ValaCCodeBinaryExpression* size;
					ValaCCodeIdentifier* _tmp30_;
					ValaCCodeFunctionCall* _tmp31_;
					ValaCCodeFunctionCall* array_copy_call;
					ValaCCodeExpressionStatement* _tmp32_;
					vala_ccode_declaration_space_add_include (self->source_declarations, "string.h", FALSE);
					sizeof_call = (_tmp24_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp23_), _tmp24_);
					vala_ccode_function_call_add_argument (sizeof_call, (ValaCCodeExpression*) (_tmp26_ = vala_ccode_identifier_new (_tmp25_ = vala_data_type_get_cname (vala_array_type_get_element_type (array_type)))));
					_vala_ccode_node_unref0 (_tmp26_);
					_g_free0 (_tmp25_);
					size = (_tmp29_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_MUL, (ValaCCodeExpression*) (_tmp28_ = vala_ccode_constant_new (_tmp27_ = g_strdup_printf ("%d", vala_array_type_get_length (array_type)))), (ValaCCodeExpression*) sizeof_call), _vala_ccode_node_unref0 (_tmp28_), _g_free0 (_tmp27_), _tmp29_);
					array_copy_call = (_tmp31_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new ("memcpy"))), _vala_ccode_node_unref0 (_tmp30_), _tmp31_);
					vala_ccode_function_call_add_argument (array_copy_call, (ValaCCodeExpression*) dest);
					vala_ccode_function_call_add_argument (array_copy_call, copy);
					vala_ccode_function_call_add_argument (array_copy_call, (ValaCCodeExpression*) size);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp32_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) array_copy_call)));
					_vala_ccode_node_unref0 (_tmp32_);
					_vala_ccode_node_unref0 (array_copy_call);
					_vala_ccode_node_unref0 (size);
					_vala_ccode_node_unref0 (sizeof_call);
				} else {
					ValaCCodeAssignment* _tmp33_;
					ValaCCodeExpressionStatement* _tmp34_;
					gboolean _tmp35_ = FALSE;
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp34_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp33_ = vala_ccode_assignment_new ((ValaCCodeExpression*) dest, copy, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
					_vala_ccode_node_unref0 (_tmp34_);
					_vala_ccode_node_unref0 (_tmp33_);
					if (array_type != NULL) {
						_tmp35_ = !vala_field_get_no_array_length (f);
					} else {
						_tmp35_ = FALSE;
					}
					if (_tmp35_) {
						{
							gint dim;
							dim = 1;
							{
								gboolean _tmp36_;
								_tmp36_ = TRUE;
								while (TRUE) {
									ValaCCodeIdentifier* _tmp37_;
									char* _tmp38_;
									ValaCCodeMemberAccess* _tmp39_;
									ValaCCodeMemberAccess* len_src;
									ValaCCodeIdentifier* _tmp40_;
									char* _tmp41_;
									ValaCCodeMemberAccess* _tmp42_;
									ValaCCodeMemberAccess* len_dest;
									ValaCCodeAssignment* _tmp43_;
									ValaCCodeExpressionStatement* _tmp44_;
									if (!_tmp36_) {
										dim++;
									}
									_tmp36_ = FALSE;
									if (!(dim <= vala_array_type_get_rank (array_type))) {
										break;
									}
									len_src = (_tmp39_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp37_ = vala_ccode_identifier_new ("self")), _tmp38_ = vala_ccode_base_module_get_array_length_cname (self, vala_symbol_get_name ((ValaSymbol*) f), dim)), _g_free0 (_tmp38_), _vala_ccode_node_unref0 (_tmp37_), _tmp39_);
									len_dest = (_tmp42_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp40_ = vala_ccode_identifier_new ("dest")), _tmp41_ = vala_ccode_base_module_get_array_length_cname (self, vala_symbol_get_name ((ValaSymbol*) f), dim)), _g_free0 (_tmp41_), _vala_ccode_node_unref0 (_tmp40_), _tmp42_);
									vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp44_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp43_ = vala_ccode_assignment_new ((ValaCCodeExpression*) len_dest, (ValaCCodeExpression*) len_src, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
									_vala_ccode_node_unref0 (_tmp44_);
									_vala_ccode_node_unref0 (_tmp43_);
									_vala_ccode_node_unref0 (len_dest);
									_vala_ccode_node_unref0 (len_src);
								}
							}
						}
					}
				}
				_vala_code_node_unref0 (array_type);
				_vala_ccode_node_unref0 (dest);
				_vala_ccode_node_unref0 (copy);
			}
			_vala_code_node_unref0 (f);
		}
		_vala_collection_object_unref0 (_f_it);
	}
	vala_ccode_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_ccode_base_module_get_temp_vars (self));
	vala_collection_clear ((ValaCollection*) vala_ccode_base_module_get_temp_vars (self));
	vala_ccode_base_module_pop_context (self);
	vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp45_ = vala_ccode_function_copy (function)));
	_vala_ccode_node_unref0 (_tmp45_);
	vala_ccode_function_set_block (function, cblock);
	vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) function);
	_vala_ccode_node_unref0 (cfrag);
	_vala_ccode_node_unref0 (cblock);
	_vala_ccode_node_unref0 (function);
}


static char* vala_ccode_base_module_real_get_custom_creturn_type (ValaCCodeBaseModule* self, ValaMethod* m) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (m != NULL, NULL);
	result = NULL;
	return result;
}


char* vala_ccode_base_module_get_custom_creturn_type (ValaCCodeBaseModule* self, ValaMethod* m) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_custom_creturn_type (self, m);
}


static void vala_ccode_base_module_real_generate_dynamic_method_wrapper (ValaCCodeBaseModule* self, ValaDynamicMethod* method) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (method != NULL);
}


void vala_ccode_base_module_generate_dynamic_method_wrapper (ValaCCodeBaseModule* self, ValaDynamicMethod* method) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_dynamic_method_wrapper (self, method);
}


static gboolean vala_ccode_base_module_real_method_has_wrapper (ValaCCodeBaseModule* self, ValaMethod* method) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (method != NULL, FALSE);
	result = FALSE;
	return result;
}


gboolean vala_ccode_base_module_method_has_wrapper (ValaCCodeBaseModule* self, ValaMethod* method) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->method_has_wrapper (self, method);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_construct_property_assignment (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (canonical_cconstant != NULL, NULL);
	g_return_val_if_fail (property_type != NULL, NULL);
	g_return_val_if_fail (value != NULL, NULL);
	result = (ValaCCodeExpression*) vala_ccode_constant_new ("");
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_construct_property_assignment (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_construct_property_assignment (self, canonical_cconstant, property_type, value);
}


static ValaCCodeFunctionCall* vala_ccode_base_module_real_get_param_spec (ValaCCodeBaseModule* self, ValaProperty* prop) {
	ValaCCodeFunctionCall* result = NULL;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (prop != NULL, NULL);
	result = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new (""))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	return result;
}


ValaCCodeFunctionCall* vala_ccode_base_module_get_param_spec (ValaCCodeBaseModule* self, ValaProperty* prop) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_param_spec (self, prop);
}


static ValaCCodeFunctionCall* vala_ccode_base_module_real_get_signal_creation (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type) {
	ValaCCodeFunctionCall* result = NULL;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (sig != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	result = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new (""))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	return result;
}


ValaCCodeFunctionCall* vala_ccode_base_module_get_signal_creation (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_signal_creation (self, sig, type);
}


static ValaCCodeFragment* vala_ccode_base_module_real_register_dbus_info (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable) {
	ValaCCodeFragment* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (bindable != NULL, NULL);
	result = vala_ccode_fragment_new ();
	return result;
}


ValaCCodeFragment* vala_ccode_base_module_register_dbus_info (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->register_dbus_info (self, bindable);
}


static char* vala_ccode_base_module_real_get_dynamic_property_getter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) node), _tmp1_ = g_strdup_printf ("dynamic properties are not supported for %s", _tmp0_ = vala_code_node_to_string ((ValaCodeNode*) vala_dynamic_property_get_dynamic_type (node))));
	_g_free0 (_tmp1_);
	_g_free0 (_tmp0_);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_property_getter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_property_getter_cname (self, node);
}


static char* vala_ccode_base_module_real_get_dynamic_property_setter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node) {
	char* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) node), _tmp1_ = g_strdup_printf ("dynamic properties are not supported for %s", _tmp0_ = vala_code_node_to_string ((ValaCodeNode*) vala_dynamic_property_get_dynamic_type (node))));
	_g_free0 (_tmp1_);
	_g_free0 (_tmp0_);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_property_setter_cname (ValaCCodeBaseModule* self, ValaDynamicProperty* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_property_setter_cname (self, node);
}


static char* vala_ccode_base_module_real_get_dynamic_signal_cname (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_signal_cname (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_signal_cname (self, node);
}


static char* vala_ccode_base_module_real_get_dynamic_signal_connect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_signal_connect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_signal_connect_wrapper_name (self, node);
}


static char* vala_ccode_base_module_real_get_dynamic_signal_connect_after_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_signal_connect_after_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_signal_connect_after_wrapper_name (self, node);
}


static char* vala_ccode_base_module_real_get_dynamic_signal_disconnect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_dynamic_signal_disconnect_wrapper_name (ValaCCodeBaseModule* self, ValaDynamicSignal* node) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_dynamic_signal_disconnect_wrapper_name (self, node);
}


static void vala_ccode_base_module_real_generate_marshaller (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (params != NULL);
	g_return_if_fail (return_type != NULL);
}


void vala_ccode_base_module_generate_marshaller (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->generate_marshaller (self, params, return_type, dbus);
}


static char* vala_ccode_base_module_real_get_marshaller_function (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (params != NULL, NULL);
	g_return_val_if_fail (return_type != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_marshaller_function (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_marshaller_function (self, params, return_type, prefix, dbus);
}


static char* vala_ccode_base_module_real_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (array_cname != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_array_length_cname (self, array_cname, dim);
}


static char* vala_ccode_base_module_real_get_parameter_array_length_cname (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (param != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_parameter_array_length_cname (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_parameter_array_length_cname (self, param, dim);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_array_length_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (array_expr != NULL, NULL);
	result = (ValaCCodeExpression*) vala_ccode_constant_new ("");
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_array_length_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_array_length_cexpression (self, array_expr, dim);
}


static char* vala_ccode_base_module_real_get_array_size_cname (ValaCCodeBaseModule* self, const char* array_cname) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (array_cname != NULL, NULL);
	result = g_strdup ("");
	return result;
}


char* vala_ccode_base_module_get_array_size_cname (ValaCCodeBaseModule* self, const char* array_cname) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_array_size_cname (self, array_cname);
}


static ValaCCodeExpression* vala_ccode_base_module_real_get_array_size_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (array_expr != NULL, NULL);
	result = (ValaCCodeExpression*) vala_ccode_constant_new ("");
	return result;
}


ValaCCodeExpression* vala_ccode_base_module_get_array_size_cexpression (ValaCCodeBaseModule* self, ValaExpression* array_expr) {
	return VALA_CCODE_BASE_MODULE_GET_CLASS (self)->get_array_size_cexpression (self, array_expr);
}


static void vala_ccode_base_module_real_add_simple_check (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (node != NULL);
	g_return_if_fail (cfrag != NULL);
}


void vala_ccode_base_module_add_simple_check (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails) {
	VALA_CCODE_BASE_MODULE_GET_CLASS (self)->add_simple_check (self, node, cfrag, always_fails);
}


ValaCodeContext* vala_ccode_base_module_get_context (ValaCCodeBaseModule* self) {
	ValaCodeContext* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->priv->_context;
	return result;
}


static gpointer _vala_code_context_ref0 (gpointer self) {
	return self ? vala_code_context_ref (self) : NULL;
}


void vala_ccode_base_module_set_context (ValaCCodeBaseModule* self, ValaCodeContext* value) {
	ValaCodeContext* _tmp0_;
	g_return_if_fail (self != NULL);
	self->priv->_context = (_tmp0_ = _vala_code_context_ref0 (value), _vala_code_context_unref0 (self->priv->_context), _tmp0_);
}


ValaSymbol* vala_ccode_base_module_get_current_symbol (ValaCCodeBaseModule* self) {
	ValaSymbol* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->current_symbol;
	return result;
}


ValaTryStatement* vala_ccode_base_module_get_current_try (ValaCCodeBaseModule* self) {
	ValaTryStatement* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->current_try;
	return result;
}


void vala_ccode_base_module_set_current_try (ValaCCodeBaseModule* self, ValaTryStatement* value) {
	ValaTryStatement* _tmp0_;
	g_return_if_fail (self != NULL);
	self->emit_context->current_try = (_tmp0_ = _vala_code_node_ref0 (value), _vala_code_node_unref0 (self->emit_context->current_try), _tmp0_);
}


ValaTypeSymbol* vala_ccode_base_module_get_current_type_symbol (ValaCCodeBaseModule* self) {
	ValaTypeSymbol* result;
	ValaSymbol* sym;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_ccode_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!(sym != NULL)) {
			break;
		}
		if (VALA_IS_TYPESYMBOL (sym)) {
			result = VALA_TYPESYMBOL (sym);
			_vala_code_node_unref0 (sym);
			return result;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = NULL;
	_vala_code_node_unref0 (sym);
	return result;
}


ValaClass* vala_ccode_base_module_get_current_class (ValaCCodeBaseModule* self) {
	ValaClass* result;
	ValaTypeSymbol* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	result = (_tmp0_ = vala_ccode_base_module_get_current_type_symbol (self), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL);
	return result;
}


ValaMethod* vala_ccode_base_module_get_current_method (ValaCCodeBaseModule* self) {
	ValaMethod* result;
	ValaSymbol* sym;
	ValaSymbol* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_ccode_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!VALA_IS_BLOCK (sym)) {
			break;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = (_tmp1_ = sym, VALA_IS_METHOD (_tmp1_) ? ((ValaMethod*) _tmp1_) : NULL);
	_vala_code_node_unref0 (sym);
	return result;
	_vala_code_node_unref0 (sym);
}


ValaPropertyAccessor* vala_ccode_base_module_get_current_property_accessor (ValaCCodeBaseModule* self) {
	ValaPropertyAccessor* result;
	ValaSymbol* sym;
	ValaSymbol* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_ccode_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!VALA_IS_BLOCK (sym)) {
			break;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = (_tmp1_ = sym, VALA_IS_PROPERTY_ACCESSOR (_tmp1_) ? ((ValaPropertyAccessor*) _tmp1_) : NULL);
	_vala_code_node_unref0 (sym);
	return result;
	_vala_code_node_unref0 (sym);
}


ValaDataType* vala_ccode_base_module_get_current_return_type (ValaCCodeBaseModule* self) {
	ValaDataType* result;
	ValaMethod* m;
	ValaPropertyAccessor* acc;
	g_return_val_if_fail (self != NULL, NULL);
	m = _vala_code_node_ref0 (vala_ccode_base_module_get_current_method (self));
	if (m != NULL) {
		result = vala_method_get_return_type (m);
		_vala_code_node_unref0 (m);
		return result;
	}
	acc = _vala_code_node_ref0 (vala_ccode_base_module_get_current_property_accessor (self));
	if (acc != NULL) {
		if (vala_property_accessor_get_readable (acc)) {
			result = vala_property_accessor_get_value_type (acc);
			_vala_code_node_unref0 (acc);
			_vala_code_node_unref0 (m);
			return result;
		} else {
			result = self->void_type;
			_vala_code_node_unref0 (acc);
			_vala_code_node_unref0 (m);
			return result;
		}
	}
	result = NULL;
	_vala_code_node_unref0 (acc);
	_vala_code_node_unref0 (m);
	return result;
}


ValaBlock* vala_ccode_base_module_get_current_closure_block (ValaCCodeBaseModule* self) {
	ValaBlock* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = vala_ccode_base_module_next_closure_block (self, vala_ccode_base_module_get_current_symbol (self));
	return result;
}


ValaCCodeSwitchStatement* vala_ccode_base_module_get_state_switch_statement (ValaCCodeBaseModule* self) {
	ValaCCodeSwitchStatement* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->state_switch_statement;
	return result;
}


void vala_ccode_base_module_set_state_switch_statement (ValaCCodeBaseModule* self, ValaCCodeSwitchStatement* value) {
	ValaCCodeSwitchStatement* _tmp0_;
	g_return_if_fail (self != NULL);
	self->emit_context->state_switch_statement = (_tmp0_ = _vala_ccode_node_ref0 (value), _vala_ccode_node_unref0 (self->emit_context->state_switch_statement), _tmp0_);
}


ValaArrayList* vala_ccode_base_module_get_temp_vars (ValaCCodeBaseModule* self) {
	ValaArrayList* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->temp_vars;
	return result;
}


ValaArrayList* vala_ccode_base_module_get_temp_ref_vars (ValaCCodeBaseModule* self) {
	ValaArrayList* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->temp_ref_vars;
	return result;
}


gint vala_ccode_base_module_get_next_temp_var_id (ValaCCodeBaseModule* self) {
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->emit_context->next_temp_var_id;
	return result;
}


void vala_ccode_base_module_set_next_temp_var_id (ValaCCodeBaseModule* self, gint value) {
	g_return_if_fail (self != NULL);
	self->emit_context->next_temp_var_id = value;
}


gboolean vala_ccode_base_module_get_in_creation_method (ValaCCodeBaseModule* self) {
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = VALA_IS_CREATION_METHOD (vala_ccode_base_module_get_current_method (self));
	return result;
}


gboolean vala_ccode_base_module_get_current_method_inner_error (ValaCCodeBaseModule* self) {
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = self->emit_context->current_method_inner_error;
	return result;
}


void vala_ccode_base_module_set_current_method_inner_error (ValaCCodeBaseModule* self, gboolean value) {
	g_return_if_fail (self != NULL);
	self->emit_context->current_method_inner_error = value;
}


ValaMap* vala_ccode_base_module_get_variable_name_map (ValaCCodeBaseModule* self) {
	ValaMap* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->variable_name_map;
	return result;
}


ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_construct (GType object_type, ValaSymbol* symbol) {
	ValaCCodeBaseModuleEmitContext* self = (ValaCCodeBaseModuleEmitContext*) g_type_create_instance (object_type);
	ValaSymbol* _tmp0_;
	self->current_symbol = (_tmp0_ = _vala_code_node_ref0 (symbol), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
	return self;
}


ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_new (ValaSymbol* symbol) {
	return vala_ccode_base_module_emit_context_construct (VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, symbol);
}


void vala_ccode_base_module_emit_context_push_symbol (ValaCCodeBaseModuleEmitContext* self, ValaSymbol* symbol) {
	ValaSymbol* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (symbol != NULL);
	vala_collection_add ((ValaCollection*) self->symbol_stack, self->current_symbol);
	self->current_symbol = (_tmp0_ = _vala_code_node_ref0 (symbol), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
}


void vala_ccode_base_module_emit_context_pop_symbol (ValaCCodeBaseModuleEmitContext* self) {
	ValaSymbol* _tmp0_;
	g_return_if_fail (self != NULL);
	self->current_symbol = (_tmp0_ = (ValaSymbol*) vala_list_get ((ValaList*) self->symbol_stack, vala_collection_get_size ((ValaCollection*) self->symbol_stack) - 1), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
	vala_list_remove_at ((ValaList*) self->symbol_stack, vala_collection_get_size ((ValaCollection*) self->symbol_stack) - 1);
}


static void vala_ccode_base_module_value_emit_context_init (GValue* value) {
	value->data[0].v_pointer = NULL;
}


static void vala_ccode_base_module_value_emit_context_free_value (GValue* value) {
	if (value->data[0].v_pointer) {
		vala_ccode_base_module_emit_context_unref (value->data[0].v_pointer);
	}
}


static void vala_ccode_base_module_value_emit_context_copy_value (const GValue* src_value, GValue* dest_value) {
	if (src_value->data[0].v_pointer) {
		dest_value->data[0].v_pointer = vala_ccode_base_module_emit_context_ref (src_value->data[0].v_pointer);
	} else {
		dest_value->data[0].v_pointer = NULL;
	}
}


static gpointer vala_ccode_base_module_value_emit_context_peek_pointer (const GValue* value) {
	return value->data[0].v_pointer;
}


static gchar* vala_ccode_base_module_value_emit_context_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	if (collect_values[0].v_pointer) {
		ValaCCodeBaseModuleEmitContext* object;
		object = collect_values[0].v_pointer;
		if (object->parent_instance.g_class == NULL) {
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		}
		value->data[0].v_pointer = vala_ccode_base_module_emit_context_ref (object);
	} else {
		value->data[0].v_pointer = NULL;
	}
	return NULL;
}


static gchar* vala_ccode_base_module_value_emit_context_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	ValaCCodeBaseModuleEmitContext** object_p;
	object_p = collect_values[0].v_pointer;
	if (!object_p) {
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
	}
	if (!value->data[0].v_pointer) {
		*object_p = NULL;
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
		*object_p = value->data[0].v_pointer;
	} else {
		*object_p = vala_ccode_base_module_emit_context_ref (value->data[0].v_pointer);
	}
	return NULL;
}


GParamSpec* vala_ccode_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	ValaCCodeBaseModuleParamSpecEmitContext* spec;
	g_return_val_if_fail (g_type_is_a (object_type, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT), NULL);
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
	G_PARAM_SPEC (spec)->value_type = object_type;
	return G_PARAM_SPEC (spec);
}


gpointer vala_ccode_base_module_value_get_emit_context (const GValue* value) {
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT), NULL);
	return value->data[0].v_pointer;
}


void vala_ccode_base_module_value_set_emit_context (GValue* value, gpointer v_object) {
	ValaCCodeBaseModuleEmitContext* old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
		vala_ccode_base_module_emit_context_ref (value->data[0].v_pointer);
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		vala_ccode_base_module_emit_context_unref (old);
	}
}


void vala_ccode_base_module_value_take_emit_context (GValue* value, gpointer v_object) {
	ValaCCodeBaseModuleEmitContext* old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		vala_ccode_base_module_emit_context_unref (old);
	}
}


static void vala_ccode_base_module_emit_context_class_init (ValaCCodeBaseModuleEmitContextClass * klass) {
	vala_ccode_base_module_emit_context_parent_class = g_type_class_peek_parent (klass);
	VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_CLASS (klass)->finalize = vala_ccode_base_module_emit_context_finalize;
}


static void vala_ccode_base_module_emit_context_instance_init (ValaCCodeBaseModuleEmitContext * self) {
	self->symbol_stack = vala_array_list_new (VALA_TYPE_SYMBOL, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->temp_vars = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->temp_ref_vars = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->variable_name_map = (ValaMap*) vala_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal, g_direct_equal);
	self->ref_count = 1;
}


static void vala_ccode_base_module_emit_context_finalize (ValaCCodeBaseModuleEmitContext* obj) {
	ValaCCodeBaseModuleEmitContext * self;
	self = VALA_CCODE_BASE_MODULE_EMIT_CONTEXT (obj);
	_vala_code_node_unref0 (self->current_symbol);
	_vala_collection_object_unref0 (self->symbol_stack);
	_vala_code_node_unref0 (self->current_try);
	_vala_ccode_node_unref0 (self->state_switch_statement);
	_vala_collection_object_unref0 (self->temp_vars);
	_vala_collection_object_unref0 (self->temp_ref_vars);
	_vala_collection_object_unref0 (self->variable_name_map);
}


GType vala_ccode_base_module_emit_context_get_type (void) {
	static volatile gsize vala_ccode_base_module_emit_context_type_id__volatile = 0;
	if (g_once_init_enter (&vala_ccode_base_module_emit_context_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { vala_ccode_base_module_value_emit_context_init, vala_ccode_base_module_value_emit_context_free_value, vala_ccode_base_module_value_emit_context_copy_value, vala_ccode_base_module_value_emit_context_peek_pointer, "p", vala_ccode_base_module_value_emit_context_collect_value, "p", vala_ccode_base_module_value_emit_context_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (ValaCCodeBaseModuleEmitContextClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_ccode_base_module_emit_context_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaCCodeBaseModuleEmitContext), 0, (GInstanceInitFunc) vala_ccode_base_module_emit_context_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType vala_ccode_base_module_emit_context_type_id;
		vala_ccode_base_module_emit_context_type_id = g_type_register_fundamental (g_type_fundamental_next (), "ValaCCodeBaseModuleEmitContext", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&vala_ccode_base_module_emit_context_type_id__volatile, vala_ccode_base_module_emit_context_type_id);
	}
	return vala_ccode_base_module_emit_context_type_id__volatile;
}


gpointer vala_ccode_base_module_emit_context_ref (gpointer instance) {
	ValaCCodeBaseModuleEmitContext* self;
	self = instance;
	g_atomic_int_inc (&self->ref_count);
	return instance;
}


void vala_ccode_base_module_emit_context_unref (gpointer instance) {
	ValaCCodeBaseModuleEmitContext* self;
	self = instance;
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
		VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_GET_CLASS (self)->finalize (self);
		g_type_free_instance ((GTypeInstance *) self);
	}
}


static void vala_ccode_base_module_class_init (ValaCCodeBaseModuleClass * klass) {
	vala_ccode_base_module_parent_class = g_type_class_peek_parent (klass);
	VALA_CODE_VISITOR_CLASS (klass)->finalize = vala_ccode_base_module_finalize;
	g_type_class_add_private (klass, sizeof (ValaCCodeBaseModulePrivate));
	VALA_CODE_GENERATOR_CLASS (klass)->emit = vala_ccode_base_module_real_emit;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->append_vala_array_free = vala_ccode_base_module_real_append_vala_array_free;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->append_vala_array_move = vala_ccode_base_module_real_append_vala_array_move;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->append_vala_array_length = vala_ccode_base_module_real_append_vala_array_length;
	VALA_CODE_VISITOR_CLASS (klass)->visit_source_file = vala_ccode_base_module_real_visit_source_file;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_enum_declaration = vala_ccode_base_module_real_generate_enum_declaration;
	VALA_CODE_VISITOR_CLASS (klass)->visit_enum = vala_ccode_base_module_real_visit_enum;
	VALA_CODE_VISITOR_CLASS (klass)->visit_constant = vala_ccode_base_module_real_visit_constant;
	VALA_CODE_VISITOR_CLASS (klass)->visit_field = vala_ccode_base_module_real_visit_field;
	VALA_CODE_VISITOR_CLASS (klass)->visit_formal_parameter = vala_ccode_base_module_real_visit_formal_parameter;
	VALA_CODE_VISITOR_CLASS (klass)->visit_property = vala_ccode_base_module_real_visit_property;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_class_struct_declaration = vala_ccode_base_module_real_generate_class_struct_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_struct_declaration = vala_ccode_base_module_real_generate_struct_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_delegate_declaration = vala_ccode_base_module_real_generate_delegate_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_cparameters = vala_ccode_base_module_real_generate_cparameters;
	VALA_CODE_VISITOR_CLASS (klass)->visit_property_accessor = vala_ccode_base_module_real_visit_property_accessor;
	VALA_CODE_VISITOR_CLASS (klass)->visit_destructor = vala_ccode_base_module_real_visit_destructor;
	VALA_CODE_VISITOR_CLASS (klass)->visit_block = vala_ccode_base_module_real_visit_block;
	VALA_CODE_VISITOR_CLASS (klass)->visit_empty_statement = vala_ccode_base_module_real_visit_empty_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_declaration_statement = vala_ccode_base_module_real_visit_declaration_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_local_variable = vala_ccode_base_module_real_visit_local_variable;
	VALA_CODE_VISITOR_CLASS (klass)->visit_initializer_list = vala_ccode_base_module_real_visit_initializer_list;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dup_func_expression = vala_ccode_base_module_real_get_dup_func_expression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->append_struct_array_free = vala_ccode_base_module_real_append_struct_array_free;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_unref_expression = vala_ccode_base_module_real_get_unref_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_end_full_expression = vala_ccode_base_module_real_visit_end_full_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_expression_statement = vala_ccode_base_module_real_visit_expression_statement;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->append_local_free = vala_ccode_base_module_real_append_local_free;
	VALA_CODE_VISITOR_CLASS (klass)->visit_return_statement = vala_ccode_base_module_real_visit_return_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_lock_statement = vala_ccode_base_module_real_visit_lock_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_unlock_statement = vala_ccode_base_module_real_visit_unlock_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_delete_statement = vala_ccode_base_module_real_visit_delete_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_expression = vala_ccode_base_module_real_visit_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_boolean_literal = vala_ccode_base_module_real_visit_boolean_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_character_literal = vala_ccode_base_module_real_visit_character_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_integer_literal = vala_ccode_base_module_real_visit_integer_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_real_literal = vala_ccode_base_module_real_visit_real_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_string_literal = vala_ccode_base_module_real_visit_string_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_regex_literal = vala_ccode_base_module_real_visit_regex_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_null_literal = vala_ccode_base_module_real_visit_null_literal;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_delegate_target_cname = vala_ccode_base_module_real_get_delegate_target_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_delegate_target_cexpression = vala_ccode_base_module_real_get_delegate_target_cexpression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_delegate_target_destroy_notify_cname = vala_ccode_base_module_real_get_delegate_target_destroy_notify_cname;
	VALA_CODE_VISITOR_CLASS (klass)->visit_base_access = vala_ccode_base_module_real_visit_base_access;
	VALA_CODE_VISITOR_CLASS (klass)->visit_postfix_expression = vala_ccode_base_module_real_visit_postfix_expression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_ref_cexpression = vala_ccode_base_module_real_get_ref_cexpression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_class_declaration = vala_ccode_base_module_real_generate_class_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_interface_declaration = vala_ccode_base_module_real_generate_interface_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_method_declaration = vala_ccode_base_module_real_generate_method_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_error_domain_declaration = vala_ccode_base_module_real_generate_error_domain_declaration;
	VALA_CODE_VISITOR_CLASS (klass)->visit_object_creation_expression = vala_ccode_base_module_real_visit_object_creation_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_sizeof_expression = vala_ccode_base_module_real_visit_sizeof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_typeof_expression = vala_ccode_base_module_real_visit_typeof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_unary_expression = vala_ccode_base_module_real_visit_unary_expression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->deserialize_expression = vala_ccode_base_module_real_deserialize_expression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->serialize_expression = vala_ccode_base_module_real_serialize_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_cast_expression = vala_ccode_base_module_real_visit_cast_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_named_argument = vala_ccode_base_module_real_visit_named_argument;
	VALA_CODE_VISITOR_CLASS (klass)->visit_pointer_indirection = vala_ccode_base_module_real_visit_pointer_indirection;
	VALA_CODE_VISITOR_CLASS (klass)->visit_addressof_expression = vala_ccode_base_module_real_visit_addressof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_reference_transfer_expression = vala_ccode_base_module_real_visit_reference_transfer_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_binary_expression = vala_ccode_base_module_real_visit_binary_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_type_check = vala_ccode_base_module_real_visit_type_check;
	VALA_CODE_VISITOR_CLASS (klass)->visit_lambda_expression = vala_ccode_base_module_real_visit_lambda_expression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_implicit_cast_expression = vala_ccode_base_module_real_get_implicit_cast_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_class = vala_ccode_base_module_real_visit_class;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->is_gobject_property = vala_ccode_base_module_real_is_gobject_property;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_custom_creturn_type = vala_ccode_base_module_real_get_custom_creturn_type;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_dynamic_method_wrapper = vala_ccode_base_module_real_generate_dynamic_method_wrapper;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->method_has_wrapper = vala_ccode_base_module_real_method_has_wrapper;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_construct_property_assignment = vala_ccode_base_module_real_get_construct_property_assignment;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_param_spec = vala_ccode_base_module_real_get_param_spec;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_signal_creation = vala_ccode_base_module_real_get_signal_creation;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->register_dbus_info = vala_ccode_base_module_real_register_dbus_info;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_property_getter_cname = vala_ccode_base_module_real_get_dynamic_property_getter_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_property_setter_cname = vala_ccode_base_module_real_get_dynamic_property_setter_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_signal_cname = vala_ccode_base_module_real_get_dynamic_signal_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_signal_connect_wrapper_name = vala_ccode_base_module_real_get_dynamic_signal_connect_wrapper_name;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_signal_connect_after_wrapper_name = vala_ccode_base_module_real_get_dynamic_signal_connect_after_wrapper_name;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_dynamic_signal_disconnect_wrapper_name = vala_ccode_base_module_real_get_dynamic_signal_disconnect_wrapper_name;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_marshaller = vala_ccode_base_module_real_generate_marshaller;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_marshaller_function = vala_ccode_base_module_real_get_marshaller_function;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_array_length_cname = vala_ccode_base_module_real_get_array_length_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_parameter_array_length_cname = vala_ccode_base_module_real_get_parameter_array_length_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_array_length_cexpression = vala_ccode_base_module_real_get_array_length_cexpression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_array_size_cname = vala_ccode_base_module_real_get_array_size_cname;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_array_size_cexpression = vala_ccode_base_module_real_get_array_size_cexpression;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->add_simple_check = vala_ccode_base_module_real_add_simple_check;
}


static void vala_ccode_base_module_instance_init (ValaCCodeBaseModule * self) {
	self->priv = VALA_CCODE_BASE_MODULE_GET_PRIVATE (self);
	self->emit_context = vala_ccode_base_module_emit_context_new (NULL);
	self->priv->emit_context_stack = (ValaList*) vala_array_list_new (VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, (GBoxedCopyFunc) vala_ccode_base_module_emit_context_ref, vala_ccode_base_module_emit_context_unref, g_direct_equal);
	self->next_regex_id = 0;
	self->in_constructor = FALSE;
	self->in_static_or_class_context = FALSE;
	self->next_coroutine_state = 1;
	self->priv->next_block_id = 0;
	self->priv->block_map = (ValaMap*) vala_hash_map_new (VALA_TYPE_BLOCK, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, G_TYPE_INT, NULL, NULL, g_direct_hash, g_direct_equal, g_direct_equal);
	self->void_type = (ValaDataType*) vala_void_type_new (NULL);
	self->in_plugin = FALSE;
	self->priv->next_variant_function_id = 0;
}


static void vala_ccode_base_module_finalize (ValaCodeVisitor* obj) {
	ValaCCodeBaseModule * self;
	self = VALA_CCODE_BASE_MODULE (obj);
	_vala_code_context_unref0 (self->priv->_context);
	_vala_code_node_unref0 (self->root_symbol);
	_vala_ccode_base_module_emit_context_unref0 (self->emit_context);
	_vala_collection_object_unref0 (self->priv->emit_context_stack);
	_vala_ccode_declaration_space_unref0 (self->header_declarations);
	_vala_ccode_declaration_space_unref0 (self->internal_header_declarations);
	_vala_ccode_declaration_space_unref0 (self->source_declarations);
	_vala_ccode_node_unref0 (self->source_signal_marshaller_declaration);
	_vala_ccode_node_unref0 (self->source_type_member_definition);
	_vala_ccode_node_unref0 (self->class_init_fragment);
	_vala_ccode_node_unref0 (self->base_init_fragment);
	_vala_ccode_node_unref0 (self->class_finalize_fragment);
	_vala_ccode_node_unref0 (self->base_finalize_fragment);
	_vala_ccode_node_unref0 (self->instance_init_fragment);
	_vala_ccode_node_unref0 (self->instance_finalize_fragment);
	_vala_ccode_node_unref0 (self->source_signal_marshaller_definition);
	_vala_ccode_node_unref0 (self->param_spec_struct);
	_vala_ccode_node_unref0 (self->closure_struct);
	_vala_ccode_node_unref0 (self->prop_enum);
	_vala_ccode_node_unref0 (self->function);
	_vala_ccode_node_unref0 (self->pre_statement_fragment);
	_vala_collection_object_unref0 (self->user_marshal_set);
	_vala_collection_object_unref0 (self->predefined_marshal_set);
	_vala_collection_object_unref0 (self->priv->reserved_identifiers);
	_vala_collection_object_unref0 (self->priv->block_map);
	_vala_code_node_unref0 (self->void_type);
	_vala_code_node_unref0 (self->bool_type);
	_vala_code_node_unref0 (self->char_type);
	_vala_code_node_unref0 (self->uchar_type);
	_vala_code_node_unref0 (self->unichar_type);
	_vala_code_node_unref0 (self->short_type);
	_vala_code_node_unref0 (self->ushort_type);
	_vala_code_node_unref0 (self->int_type);
	_vala_code_node_unref0 (self->uint_type);
	_vala_code_node_unref0 (self->long_type);
	_vala_code_node_unref0 (self->ulong_type);
	_vala_code_node_unref0 (self->int8_type);
	_vala_code_node_unref0 (self->uint8_type);
	_vala_code_node_unref0 (self->int16_type);
	_vala_code_node_unref0 (self->uint16_type);
	_vala_code_node_unref0 (self->int32_type);
	_vala_code_node_unref0 (self->uint32_type);
	_vala_code_node_unref0 (self->int64_type);
	_vala_code_node_unref0 (self->uint64_type);
	_vala_code_node_unref0 (self->string_type);
	_vala_code_node_unref0 (self->regex_type);
	_vala_code_node_unref0 (self->float_type);
	_vala_code_node_unref0 (self->double_type);
	_vala_code_node_unref0 (self->gtype_type);
	_vala_code_node_unref0 (self->gobject_type);
	_vala_code_node_unref0 (self->gerror_type);
	_vala_code_node_unref0 (self->glist_type);
	_vala_code_node_unref0 (self->gslist_type);
	_vala_code_node_unref0 (self->gnode_type);
	_vala_code_node_unref0 (self->gvaluearray_type);
	_vala_code_node_unref0 (self->gstringbuilder_type);
	_vala_code_node_unref0 (self->garray_type);
	_vala_code_node_unref0 (self->gbytearray_type);
	_vala_code_node_unref0 (self->gptrarray_type);
	_vala_code_node_unref0 (self->gthreadpool_type);
	_vala_code_node_unref0 (self->gquark_type);
	_vala_code_node_unref0 (self->gvalue_type);
	_vala_code_node_unref0 (self->gvariant_type);
	_vala_code_node_unref0 (self->mutex_type);
	_vala_code_node_unref0 (self->type_module_type);
	_vala_code_node_unref0 (self->dbus_proxy_type);
	_vala_code_node_unref0 (self->dbus_object_type);
	_g_free0 (self->module_init_param_name);
	_vala_collection_object_unref0 (self->wrappers);
	_vala_collection_object_unref0 (self->priv->generated_external_symbols);
	VALA_CODE_VISITOR_CLASS (vala_ccode_base_module_parent_class)->finalize (obj);
}


/**
 * Code visitor generating C Code.
 */
GType vala_ccode_base_module_get_type (void) {
	static volatile gsize vala_ccode_base_module_type_id__volatile = 0;
	if (g_once_init_enter (&vala_ccode_base_module_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ValaCCodeBaseModuleClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_ccode_base_module_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaCCodeBaseModule), 0, (GInstanceInitFunc) vala_ccode_base_module_instance_init, NULL };
		GType vala_ccode_base_module_type_id;
		vala_ccode_base_module_type_id = g_type_register_static (VALA_TYPE_CODE_GENERATOR, "ValaCCodeBaseModule", &g_define_type_info, 0);
		g_once_init_leave (&vala_ccode_base_module_type_id__volatile, vala_ccode_base_module_type_id);
	}
	return vala_ccode_base_module_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}


static int _vala_strcmp0 (const char * str1, const char * str2) {
	if (str1 == NULL) {
		return -(str1 != str2);
	}
	if (str2 == NULL) {
		return str1 != str2;
	}
	return strcmp (str1, str2);
}




