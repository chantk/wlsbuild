/* valaccodemethodmodule.c generated by valac, the Vala compiler
 * generated from valaccodemethodmodule.vala, do not modify */

/* valaccodemethodmodule.vala
 *
 * Copyright (C) 2007-2010  Jürg Billeter
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 *	Raffaele Sandrini <raffaele@sandrini.ch>
 */

#include <glib.h>
#include <glib-object.h>
#include <vala.h>
#include <valagee.h>
#include <valaccode.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>


#define VALA_TYPE_CCODE_BASE_MODULE (vala_ccode_base_module_get_type ())
#define VALA_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModule))
#define VALA_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))
#define VALA_IS_CCODE_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_IS_CCODE_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_BASE_MODULE))
#define VALA_CCODE_BASE_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_BASE_MODULE, ValaCCodeBaseModuleClass))

typedef struct _ValaCCodeBaseModule ValaCCodeBaseModule;
typedef struct _ValaCCodeBaseModuleClass ValaCCodeBaseModuleClass;
typedef struct _ValaCCodeBaseModulePrivate ValaCCodeBaseModulePrivate;

#define VALA_TYPE_CCODE_DECLARATION_SPACE (vala_ccode_declaration_space_get_type ())
#define VALA_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpace))
#define VALA_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))
#define VALA_IS_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_IS_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_CCODE_DECLARATION_SPACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))

typedef struct _ValaCCodeDeclarationSpace ValaCCodeDeclarationSpace;
typedef struct _ValaCCodeDeclarationSpaceClass ValaCCodeDeclarationSpaceClass;

#define VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT (vala_ccode_base_module_emit_context_get_type ())
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContext))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_IS_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_CCODE_BASE_MODULE_EMIT_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_CCODE_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaCCodeBaseModuleEmitContextClass))

typedef struct _ValaCCodeBaseModuleEmitContext ValaCCodeBaseModuleEmitContext;
typedef struct _ValaCCodeBaseModuleEmitContextClass ValaCCodeBaseModuleEmitContextClass;

#define VALA_TYPE_CCODE_STRUCT_MODULE (vala_ccode_struct_module_get_type ())
#define VALA_CCODE_STRUCT_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModule))
#define VALA_CCODE_STRUCT_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModuleClass))
#define VALA_IS_CCODE_STRUCT_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_STRUCT_MODULE))
#define VALA_IS_CCODE_STRUCT_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_STRUCT_MODULE))
#define VALA_CCODE_STRUCT_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_STRUCT_MODULE, ValaCCodeStructModuleClass))

typedef struct _ValaCCodeStructModule ValaCCodeStructModule;
typedef struct _ValaCCodeStructModuleClass ValaCCodeStructModuleClass;
typedef struct _ValaCCodeStructModulePrivate ValaCCodeStructModulePrivate;

#define VALA_TYPE_CCODE_METHOD_MODULE (vala_ccode_method_module_get_type ())
#define VALA_CCODE_METHOD_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModule))
#define VALA_CCODE_METHOD_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModuleClass))
#define VALA_IS_CCODE_METHOD_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_METHOD_MODULE))
#define VALA_IS_CCODE_METHOD_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_METHOD_MODULE))
#define VALA_CCODE_METHOD_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_METHOD_MODULE, ValaCCodeMethodModuleClass))

typedef struct _ValaCCodeMethodModule ValaCCodeMethodModule;
typedef struct _ValaCCodeMethodModuleClass ValaCCodeMethodModuleClass;
typedef struct _ValaCCodeMethodModulePrivate ValaCCodeMethodModulePrivate;
#define _vala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_node_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _vala_ccode_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_node_unref (var), NULL)))
#define _vala_collection_object_unref0(var) ((var == NULL) ? NULL : (var = (vala_collection_object_unref (var), NULL)))
#define _vala_ccode_base_module_emit_context_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_base_module_emit_context_unref (var), NULL)))

struct _ValaCCodeBaseModule {
	ValaCodeGenerator parent_instance;
	ValaCCodeBaseModulePrivate * priv;
	ValaSymbol* root_symbol;
	ValaCCodeBaseModuleEmitContext* emit_context;
	ValaCCodeDeclarationSpace* header_declarations;
	ValaCCodeDeclarationSpace* internal_header_declarations;
	ValaCCodeDeclarationSpace* source_declarations;
	ValaCCodeFragment* source_signal_marshaller_declaration;
	ValaCCodeFragment* source_type_member_definition;
	ValaCCodeFragment* class_init_fragment;
	ValaCCodeFragment* base_init_fragment;
	ValaCCodeFragment* class_finalize_fragment;
	ValaCCodeFragment* base_finalize_fragment;
	ValaCCodeFragment* instance_init_fragment;
	ValaCCodeFragment* instance_finalize_fragment;
	ValaCCodeFragment* source_signal_marshaller_definition;
	ValaCCodeStruct* param_spec_struct;
	ValaCCodeStruct* closure_struct;
	ValaCCodeEnum* prop_enum;
	ValaCCodeFunction* function;
	ValaCCodeFragment* pre_statement_fragment;
	ValaSet* user_marshal_set;
	ValaSet* predefined_marshal_set;
	gint next_regex_id;
	gboolean in_constructor;
	gboolean in_static_or_class_context;
	gint next_coroutine_state;
	ValaDataType* void_type;
	ValaDataType* bool_type;
	ValaDataType* char_type;
	ValaDataType* uchar_type;
	ValaDataType* unichar_type;
	ValaDataType* short_type;
	ValaDataType* ushort_type;
	ValaDataType* int_type;
	ValaDataType* uint_type;
	ValaDataType* long_type;
	ValaDataType* ulong_type;
	ValaDataType* int8_type;
	ValaDataType* uint8_type;
	ValaDataType* int16_type;
	ValaDataType* uint16_type;
	ValaDataType* int32_type;
	ValaDataType* uint32_type;
	ValaDataType* int64_type;
	ValaDataType* uint64_type;
	ValaDataType* string_type;
	ValaDataType* regex_type;
	ValaDataType* float_type;
	ValaDataType* double_type;
	ValaTypeSymbol* gtype_type;
	ValaTypeSymbol* gobject_type;
	ValaErrorType* gerror_type;
	ValaClass* glist_type;
	ValaClass* gslist_type;
	ValaClass* gnode_type;
	ValaClass* gvaluearray_type;
	ValaTypeSymbol* gstringbuilder_type;
	ValaTypeSymbol* garray_type;
	ValaTypeSymbol* gbytearray_type;
	ValaTypeSymbol* gptrarray_type;
	ValaTypeSymbol* gthreadpool_type;
	ValaDataType* gquark_type;
	ValaStruct* gvalue_type;
	ValaClass* gvariant_type;
	ValaStruct* mutex_type;
	ValaTypeSymbol* type_module_type;
	ValaTypeSymbol* dbus_proxy_type;
	ValaTypeSymbol* dbus_object_type;
	gboolean in_plugin;
	char* module_init_param_name;
	gboolean gvaluecollector_h_needed;
	gboolean requires_array_free;
	gboolean requires_array_move;
	gboolean requires_array_length;
	gboolean requires_strcmp0;
	ValaSet* wrappers;
};

struct _ValaCCodeBaseModuleClass {
	ValaCodeGeneratorClass parent_class;
	void (*append_vala_array_free) (ValaCCodeBaseModule* self);
	void (*append_vala_array_move) (ValaCCodeBaseModule* self);
	void (*append_vala_array_length) (ValaCCodeBaseModule* self);
	gboolean (*generate_enum_declaration) (ValaCCodeBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_class_struct_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_struct_declaration) (ValaCCodeBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_delegate_declaration) (ValaCCodeBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_cparameters) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
	ValaCCodeExpression* (*get_dup_func_expression) (ValaCCodeBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
	char* (*append_struct_array_free) (ValaCCodeBaseModule* self, ValaStruct* st);
	ValaCCodeExpression* (*get_unref_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr, gboolean is_macro_definition);
	void (*append_local_free) (ValaCCodeBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
	char* (*get_delegate_target_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_delegate_target_cexpression) (ValaCCodeBaseModule* self, ValaExpression* delegate_expr, ValaCCodeExpression** delegate_target_destroy_notify);
	char* (*get_delegate_target_destroy_notify_cname) (ValaCCodeBaseModule* self, const char* delegate_cname);
	ValaCCodeExpression* (*get_ref_cexpression) (ValaCCodeBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
	void (*generate_class_declaration) (ValaCCodeBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_interface_declaration) (ValaCCodeBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_method_declaration) (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_error_domain_declaration) (ValaCCodeBaseModule* self, ValaErrorDomain* edomain, ValaCCodeDeclarationSpace* decl_space);
	ValaCCodeExpression* (*deserialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* variant_expr, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*serialize_expression) (ValaCCodeBaseModule* self, ValaCCodeFragment* fragment, ValaDataType* type, ValaCCodeExpression* expr);
	ValaCCodeExpression* (*get_implicit_cast_expression) (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
	gboolean (*is_gobject_property) (ValaCCodeBaseModule* self, ValaProperty* prop);
	char* (*get_custom_creturn_type) (ValaCCodeBaseModule* self, ValaMethod* m);
	void (*generate_dynamic_method_wrapper) (ValaCCodeBaseModule* self, ValaDynamicMethod* method);
	gboolean (*method_has_wrapper) (ValaCCodeBaseModule* self, ValaMethod* method);
	ValaCCodeExpression* (*get_construct_property_assignment) (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
	ValaCCodeFunctionCall* (*get_param_spec) (ValaCCodeBaseModule* self, ValaProperty* prop);
	ValaCCodeFunctionCall* (*get_signal_creation) (ValaCCodeBaseModule* self, ValaSignal* sig, ValaTypeSymbol* type);
	ValaCCodeFragment* (*register_dbus_info) (ValaCCodeBaseModule* self, ValaObjectTypeSymbol* bindable);
	char* (*get_dynamic_property_getter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_property_setter_cname) (ValaCCodeBaseModule* self, ValaDynamicProperty* node);
	char* (*get_dynamic_signal_cname) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_connect_after_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	char* (*get_dynamic_signal_disconnect_wrapper_name) (ValaCCodeBaseModule* self, ValaDynamicSignal* node);
	void (*generate_marshaller) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, gboolean dbus);
	char* (*get_marshaller_function) (ValaCCodeBaseModule* self, ValaList* params, ValaDataType* return_type, const char* prefix, gboolean dbus);
	char* (*get_array_length_cname) (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
	char* (*get_parameter_array_length_cname) (ValaCCodeBaseModule* self, ValaFormalParameter* param, gint dim);
	ValaCCodeExpression* (*get_array_length_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr, gint dim);
	char* (*get_array_size_cname) (ValaCCodeBaseModule* self, const char* array_cname);
	ValaCCodeExpression* (*get_array_size_cexpression) (ValaCCodeBaseModule* self, ValaExpression* array_expr);
	void (*add_simple_check) (ValaCCodeBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
};

struct _ValaCCodeStructModule {
	ValaCCodeBaseModule parent_instance;
	ValaCCodeStructModulePrivate * priv;
};

struct _ValaCCodeStructModuleClass {
	ValaCCodeBaseModuleClass parent_class;
};

struct _ValaCCodeMethodModule {
	ValaCCodeStructModule parent_instance;
	ValaCCodeMethodModulePrivate * priv;
};

struct _ValaCCodeMethodModuleClass {
	ValaCCodeStructModuleClass parent_class;
	void (*generate_method_result_declaration) (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map);
	void (*generate_parameter) (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map);
};


static gpointer vala_ccode_method_module_parent_class = NULL;

GType vala_ccode_base_module_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_declaration_space_ref (gpointer instance);
void vala_ccode_declaration_space_unref (gpointer instance);
GParamSpec* vala_param_spec_ccode_declaration_space (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_value_set_ccode_declaration_space (GValue* value, gpointer v_object);
void vala_value_take_ccode_declaration_space (GValue* value, gpointer v_object);
gpointer vala_value_get_ccode_declaration_space (const GValue* value);
GType vala_ccode_declaration_space_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_base_module_emit_context_ref (gpointer instance);
void vala_ccode_base_module_emit_context_unref (gpointer instance);
GParamSpec* vala_ccode_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_ccode_base_module_value_set_emit_context (GValue* value, gpointer v_object);
void vala_ccode_base_module_value_take_emit_context (GValue* value, gpointer v_object);
gpointer vala_ccode_base_module_value_get_emit_context (const GValue* value);
GType vala_ccode_base_module_emit_context_get_type (void) G_GNUC_CONST;
GType vala_ccode_struct_module_get_type (void) G_GNUC_CONST;
GType vala_ccode_method_module_get_type (void) G_GNUC_CONST;
enum  {
	VALA_CCODE_METHOD_MODULE_DUMMY_PROPERTY
};
static gboolean vala_ccode_method_module_real_method_has_wrapper (ValaCCodeBaseModule* base, ValaMethod* method);
static char* vala_ccode_method_module_real_get_custom_creturn_type (ValaCCodeBaseModule* base, ValaMethod* m);
static char* vala_ccode_method_module_get_creturn_type (ValaCCodeMethodModule* self, ValaMethod* m, const char* default_value);
char* vala_ccode_base_module_get_custom_creturn_type (ValaCCodeBaseModule* self, ValaMethod* m);
static gboolean vala_ccode_method_module_is_gtypeinstance_creation_method (ValaCCodeMethodModule* self, ValaMethod* m);
void vala_ccode_method_module_generate_method_result_declaration (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map);
static void vala_ccode_method_module_real_generate_method_result_declaration (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map);
void vala_ccode_base_module_generate_type_declaration (ValaCCodeBaseModule* self, ValaDataType* type, ValaCCodeDeclarationSpace* decl_space);
gint vala_ccode_base_module_get_param_pos (ValaCCodeBaseModule* self, double param_pos, gboolean ellipsis);
ValaCCodeExpression* vala_ccode_base_module_get_result_cexpression (ValaCCodeBaseModule* self, const char* cname);
char* vala_ccode_base_module_get_array_length_cname (ValaCCodeBaseModule* self, const char* array_cname, gint dim);
ValaCCodeExpression* vala_ccode_base_module_get_variable_cexpression (ValaCCodeBaseModule* self, const char* name);
char* vala_ccode_base_module_get_delegate_target_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
char* vala_ccode_base_module_get_delegate_target_destroy_notify_cname (ValaCCodeBaseModule* self, const char* delegate_cname);
ValaCCodeStatement* vala_ccode_method_module_complete_async (ValaCCodeMethodModule* self);
static void vala_ccode_method_module_real_generate_method_declaration (ValaCCodeBaseModule* base, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
gboolean vala_ccode_declaration_space_add_symbol_declaration (ValaCCodeDeclarationSpace* self, ValaSymbol* sym, const char* name);
void vala_ccode_base_module_generate_cparameters (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
void vala_ccode_declaration_space_add_type_member_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_ccode_method_module_register_plugin_types (ValaCCodeMethodModule* self, ValaCCodeFragment* module_init_fragment, ValaSymbol* sym, ValaSet* registered_types);
static void vala_ccode_method_module_register_plugin_type (ValaCCodeMethodModule* self, ValaCCodeFragment* module_init_fragment, ValaObjectTypeSymbol* type_symbol, ValaSet* registered_types);
static void vala_ccode_method_module_real_visit_method (ValaCodeVisitor* base, ValaMethod* m);
void vala_ccode_base_module_push_context (ValaCCodeBaseModule* self, ValaCCodeBaseModuleEmitContext* emit_context);
ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_new (ValaSymbol* symbol);
ValaCCodeBaseModuleEmitContext* vala_ccode_base_module_emit_context_construct (GType object_type, ValaSymbol* symbol);
void vala_ccode_base_module_check_type (ValaCCodeBaseModule* self, ValaDataType* type);
ValaTypeSymbol* vala_ccode_base_module_get_current_type_symbol (ValaCCodeBaseModule* self);
void vala_ccode_base_module_set_state_switch_statement (ValaCCodeBaseModule* self, ValaCCodeSwitchStatement* value);
ValaCCodeSwitchStatement* vala_ccode_base_module_get_state_switch_statement (ValaCCodeBaseModule* self);
void vala_ccode_base_module_generate_method_declaration (ValaCCodeBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
ValaBlock* vala_ccode_base_module_get_current_closure_block (ValaCCodeBaseModule* self);
gint vala_ccode_base_module_get_block_id (ValaCCodeBaseModule* self, ValaBlock* b);
ValaBlock* vala_ccode_base_module_next_closure_block (ValaCCodeBaseModule* self, ValaSymbol* sym);
ValaClass* vala_ccode_base_module_get_current_class (ValaCCodeBaseModule* self);
ValaCCodeExpression* vala_ccode_base_module_transform_expression (ValaCCodeBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
static ValaCCodeStatement* vala_ccode_method_module_create_method_type_check_statement (ValaCCodeMethodModule* self, ValaMethod* m, ValaDataType* return_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name);
char* vala_ccode_base_module_get_variable_cname (ValaCCodeBaseModule* self, const char* name);
ValaCCodeExpression* vala_ccode_base_module_default_value_for_type (ValaCCodeBaseModule* self, ValaDataType* type, gboolean initializer_expression);
ValaCCodeExpression* vala_ccode_base_module_get_construct_property_assignment (ValaCCodeBaseModule* self, ValaCCodeConstant* canonical_cconstant, ValaDataType* property_type, ValaCCodeExpression* value);
static void vala_ccode_method_module_add_object_creation (ValaCCodeMethodModule* self, ValaCCodeFragment* ccode, gboolean has_params);
void vala_ccode_declaration_space_add_include (ValaCCodeDeclarationSpace* self, const char* filename, gboolean local);
ValaCodeContext* vala_ccode_base_module_get_context (ValaCCodeBaseModule* self);
static ValaCCodeStatement* vala_ccode_method_module_create_precondition_statement (ValaCCodeMethodModule* self, ValaCodeNode* method_node, ValaDataType* ret_type, ValaExpression* precondition);
gboolean vala_ccode_base_module_get_current_method_inner_error (ValaCCodeBaseModule* self);
void vala_ccode_base_module_pop_context (ValaCCodeBaseModule* self);
void vala_ccode_method_module_generate_vfunc (ValaCCodeMethodModule* self, ValaMethod* m, ValaDataType* return_type, ValaMap* cparam_map, ValaMap* carg_map, const char* suffix, gint direction);
void vala_ccode_method_module_generate_parameter (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map);
static void vala_ccode_method_module_real_generate_parameter (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map);
static void vala_ccode_method_module_real_generate_cparameters (ValaCCodeBaseModule* base, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction);
static ValaTypeSymbol* vala_ccode_method_module_find_parent_type (ValaCCodeMethodModule* self, ValaSymbol* sym);
ValaCCodeStatement* vala_ccode_base_module_create_postcondition_statement (ValaCCodeBaseModule* self, ValaExpression* postcondition);
ValaCCodeStatement* vala_ccode_base_module_create_type_check_statement (ValaCCodeBaseModule* self, ValaCodeNode* method_node, ValaDataType* ret_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name);
static void vala_ccode_method_module_real_visit_creation_method (ValaCodeVisitor* base, ValaCreationMethod* m);
ValaCCodeMethodModule* vala_ccode_method_module_new (void);
ValaCCodeMethodModule* vala_ccode_method_module_construct (GType object_type);
ValaCCodeStructModule* vala_ccode_struct_module_new (void);
ValaCCodeStructModule* vala_ccode_struct_module_construct (GType object_type);
static int _vala_strcmp0 (const char * str1, const char * str2);



static gboolean vala_ccode_method_module_real_method_has_wrapper (ValaCCodeBaseModule* base, ValaMethod* method) {
	ValaCCodeMethodModule * self;
	gboolean result = FALSE;
	ValaAttribute* _tmp0_;
	gboolean _tmp1_;
	self = (ValaCCodeMethodModule*) base;
	g_return_val_if_fail (method != NULL, FALSE);
	result = (_tmp1_ = (_tmp0_ = vala_code_node_get_attribute ((ValaCodeNode*) method, "NoWrapper")) == NULL, _vala_code_node_unref0 (_tmp0_), _tmp1_);
	return result;
}


static char* vala_ccode_method_module_real_get_custom_creturn_type (ValaCCodeBaseModule* base, ValaMethod* m) {
	ValaCCodeMethodModule * self;
	char* result = NULL;
	ValaAttribute* attr;
	self = (ValaCCodeMethodModule*) base;
	g_return_val_if_fail (m != NULL, NULL);
	attr = vala_code_node_get_attribute ((ValaCodeNode*) m, "CCode");
	if (attr != NULL) {
		char* type;
		type = vala_attribute_get_string (attr, "type");
		if (type != NULL) {
			result = type;
			_vala_code_node_unref0 (attr);
			return result;
		}
		_g_free0 (type);
	}
	result = NULL;
	_vala_code_node_unref0 (attr);
	return result;
}


static char* vala_ccode_method_module_get_creturn_type (ValaCCodeMethodModule* self, ValaMethod* m, const char* default_value) {
	char* result = NULL;
	char* type;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (m != NULL, NULL);
	g_return_val_if_fail (default_value != NULL, NULL);
	type = vala_ccode_base_module_get_custom_creturn_type ((ValaCCodeBaseModule*) self, m);
	if (type == NULL) {
		result = g_strdup (default_value);
		_g_free0 (type);
		return result;
	}
	result = type;
	return result;
}


static gpointer _vala_code_node_ref0 (gpointer self) {
	return self ? vala_code_node_ref (self) : NULL;
}


static gboolean vala_ccode_method_module_is_gtypeinstance_creation_method (ValaCCodeMethodModule* self, ValaMethod* m) {
	gboolean result = FALSE;
	gboolean _result_;
	ValaSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (m != NULL, FALSE);
	_result_ = FALSE;
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_symbol_get_parent_symbol ((ValaSymbol*) m), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (VALA_IS_CREATION_METHOD (m)) {
		_tmp2_ = cl != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		_tmp1_ = !vala_class_get_is_compact (cl);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		_result_ = TRUE;
	}
	result = _result_;
	_vala_code_node_unref0 (cl);
	return result;
}


static void vala_ccode_method_module_real_generate_method_result_declaration (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map) {
	ValaDataType* creturn_type;
	char* _tmp3_;
	char* _tmp4_;
	gboolean _tmp20_ = FALSE;
	gboolean _tmp21_ = FALSE;
	ValaList* _tmp22_;
	gboolean _tmp23_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
	g_return_if_fail (cfunc != NULL);
	g_return_if_fail (cparam_map != NULL);
	creturn_type = _vala_code_node_ref0 (vala_method_get_return_type (m));
	if (VALA_IS_CREATION_METHOD (m)) {
		ValaSymbol* _tmp0_;
		ValaClass* cl;
		cl = _vala_code_node_ref0 ((_tmp0_ = vala_symbol_get_parent_symbol ((ValaSymbol*) m), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
		if (cl != NULL) {
			ValaDataType* _tmp1_;
			creturn_type = (_tmp1_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) cl), _vala_code_node_unref0 (creturn_type), _tmp1_);
		}
		_vala_code_node_unref0 (cl);
	} else {
		if (vala_data_type_is_real_non_null_struct_type (vala_method_get_return_type (m))) {
			ValaDataType* _tmp2_;
			creturn_type = (_tmp2_ = (ValaDataType*) vala_void_type_new (NULL), _vala_code_node_unref0 (creturn_type), _tmp2_);
		}
	}
	vala_ccode_function_set_return_type (cfunc, _tmp4_ = vala_ccode_method_module_get_creturn_type (self, m, _tmp3_ = vala_data_type_get_cname (creturn_type)));
	_g_free0 (_tmp4_);
	_g_free0 (_tmp3_);
	vala_ccode_base_module_generate_type_declaration ((ValaCCodeBaseModule*) self, vala_method_get_return_type (m), decl_space);
	if (vala_data_type_is_real_non_null_struct_type (vala_method_get_return_type (m))) {
		char* _tmp5_;
		char* _tmp6_;
		ValaCCodeFormalParameter* _tmp7_;
		ValaCCodeFormalParameter* cparam;
		cparam = (_tmp7_ = vala_ccode_formal_parameter_new ("result", _tmp6_ = g_strconcat (_tmp5_ = vala_data_type_get_cname (vala_method_get_return_type (m)), "*", NULL)), _g_free0 (_tmp6_), _g_free0 (_tmp5_), _tmp7_);
		vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (double) (-3), FALSE)), cparam);
		if (carg_map != NULL) {
			ValaCCodeExpression* _tmp8_;
			vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (double) (-3), FALSE)), _tmp8_ = vala_ccode_base_module_get_result_cexpression ((ValaCCodeBaseModule*) self, "result"));
			_vala_ccode_node_unref0 (_tmp8_);
		}
		_vala_ccode_node_unref0 (cparam);
	} else {
		gboolean _tmp9_ = FALSE;
		if (!vala_method_get_no_array_length (m)) {
			_tmp9_ = VALA_IS_ARRAY_TYPE (vala_method_get_return_type (m));
		} else {
			_tmp9_ = FALSE;
		}
		if (_tmp9_) {
			ValaArrayType* array_type;
			array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (vala_method_get_return_type (m)));
			{
				gint dim;
				dim = 1;
				{
					gboolean _tmp10_;
					_tmp10_ = TRUE;
					while (TRUE) {
						char* _tmp11_;
						ValaCCodeFormalParameter* _tmp12_;
						ValaCCodeFormalParameter* cparam;
						if (!_tmp10_) {
							dim++;
						}
						_tmp10_ = FALSE;
						if (!(dim <= vala_array_type_get_rank (array_type))) {
							break;
						}
						cparam = (_tmp12_ = vala_ccode_formal_parameter_new (_tmp11_ = vala_ccode_base_module_get_array_length_cname ((ValaCCodeBaseModule*) self, "result", dim), "int*"), _g_free0 (_tmp11_), _tmp12_);
						vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_carray_length_parameter_position (m) + (0.01 * dim), FALSE)), cparam);
						if (carg_map != NULL) {
							ValaCCodeExpression* _tmp13_;
							vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_carray_length_parameter_position (m) + (0.01 * dim), FALSE)), _tmp13_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_ccode_formal_parameter_get_name (cparam)));
							_vala_ccode_node_unref0 (_tmp13_);
						}
						_vala_ccode_node_unref0 (cparam);
					}
				}
			}
			_vala_code_node_unref0 (array_type);
		} else {
			if (VALA_IS_DELEGATE_TYPE (vala_method_get_return_type (m))) {
				ValaDelegateType* deleg_type;
				ValaDelegate* d;
				deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_method_get_return_type (m)));
				d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
				if (vala_delegate_get_has_target (d)) {
					char* _tmp14_;
					ValaCCodeFormalParameter* _tmp15_;
					ValaCCodeFormalParameter* cparam;
					cparam = (_tmp15_ = vala_ccode_formal_parameter_new (_tmp14_ = vala_ccode_base_module_get_delegate_target_cname ((ValaCCodeBaseModule*) self, "result"), "void**"), _g_free0 (_tmp14_), _tmp15_);
					vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cdelegate_target_parameter_position (m), FALSE)), cparam);
					if (carg_map != NULL) {
						ValaCCodeExpression* _tmp16_;
						vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cdelegate_target_parameter_position (m), FALSE)), _tmp16_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_ccode_formal_parameter_get_name (cparam)));
						_vala_ccode_node_unref0 (_tmp16_);
					}
					if (vala_data_type_get_value_owned ((ValaDataType*) deleg_type)) {
						char* _tmp17_;
						ValaCCodeFormalParameter* _tmp18_;
						cparam = (_tmp18_ = vala_ccode_formal_parameter_new (_tmp17_ = vala_ccode_base_module_get_delegate_target_destroy_notify_cname ((ValaCCodeBaseModule*) self, "result"), "GDestroyNotify*"), _vala_ccode_node_unref0 (cparam), _tmp18_);
						_g_free0 (_tmp17_);
						vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cdelegate_target_parameter_position (m) + 0.01, FALSE)), cparam);
						if (carg_map != NULL) {
							ValaCCodeExpression* _tmp19_;
							vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cdelegate_target_parameter_position (m) + 0.01, FALSE)), _tmp19_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_ccode_formal_parameter_get_name (cparam)));
							_vala_ccode_node_unref0 (_tmp19_);
						}
					}
					_vala_ccode_node_unref0 (cparam);
				}
				_vala_code_node_unref0 (d);
				_vala_code_node_unref0 (deleg_type);
			}
		}
	}
	if ((_tmp23_ = vala_collection_get_size ((ValaCollection*) (_tmp22_ = vala_code_node_get_error_types ((ValaCodeNode*) m))) > 0, _vala_collection_object_unref0 (_tmp22_), _tmp23_)) {
		_tmp21_ = TRUE;
	} else {
		gboolean _tmp24_ = FALSE;
		if (vala_method_get_base_method (m) != NULL) {
			ValaList* _tmp25_;
			_tmp24_ = vala_collection_get_size ((ValaCollection*) (_tmp25_ = vala_code_node_get_error_types ((ValaCodeNode*) vala_method_get_base_method (m)))) > 0;
			_vala_collection_object_unref0 (_tmp25_);
		} else {
			_tmp24_ = FALSE;
		}
		_tmp21_ = _tmp24_;
	}
	if (_tmp21_) {
		_tmp20_ = TRUE;
	} else {
		gboolean _tmp26_ = FALSE;
		if (vala_method_get_base_interface_method (m) != NULL) {
			ValaList* _tmp27_;
			_tmp26_ = vala_collection_get_size ((ValaCollection*) (_tmp27_ = vala_code_node_get_error_types ((ValaCodeNode*) vala_method_get_base_interface_method (m)))) > 0;
			_vala_collection_object_unref0 (_tmp27_);
		} else {
			_tmp26_ = FALSE;
		}
		_tmp20_ = _tmp26_;
	}
	if (_tmp20_) {
		ValaCCodeFormalParameter* cparam;
		{
			ValaList* _tmp28_;
			ValaIterator* _tmp29_;
			ValaIterator* _error_type_it;
			_error_type_it = (_tmp29_ = vala_iterable_iterator ((ValaIterable*) (_tmp28_ = vala_code_node_get_error_types ((ValaCodeNode*) m))), _vala_collection_object_unref0 (_tmp28_), _tmp29_);
			while (TRUE) {
				ValaDataType* error_type;
				if (!vala_iterator_next (_error_type_it)) {
					break;
				}
				error_type = (ValaDataType*) vala_iterator_get (_error_type_it);
				vala_ccode_base_module_generate_type_declaration ((ValaCCodeBaseModule*) self, error_type, decl_space);
				_vala_code_node_unref0 (error_type);
			}
			_vala_collection_object_unref0 (_error_type_it);
		}
		cparam = vala_ccode_formal_parameter_new ("error", "GError**");
		vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (double) (-1), FALSE)), cparam);
		if (carg_map != NULL) {
			ValaCCodeIdentifier* _tmp30_;
			vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (double) (-1), FALSE)), (ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new (vala_ccode_formal_parameter_get_name (cparam))));
			_vala_ccode_node_unref0 (_tmp30_);
		}
		_vala_ccode_node_unref0 (cparam);
	}
	_vala_code_node_unref0 (creturn_type);
}


void vala_ccode_method_module_generate_method_result_declaration (ValaCCodeMethodModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* cfunc, ValaMap* cparam_map, ValaMap* carg_map) {
	VALA_CCODE_METHOD_MODULE_GET_CLASS (self)->generate_method_result_declaration (self, m, decl_space, cfunc, cparam_map, carg_map);
}


ValaCCodeStatement* vala_ccode_method_module_complete_async (ValaCCodeMethodModule* self) {
	ValaCCodeStatement* result = NULL;
	ValaCCodeBlock* complete_block;
	ValaCCodeBlock* direct_block;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* direct_call;
	ValaCCodeIdentifier* _tmp2_;
	ValaCCodeMemberAccess* _tmp3_;
	ValaCCodeMemberAccess* async_result_expr;
	ValaCCodeExpressionStatement* _tmp4_;
	ValaCCodeBlock* idle_block;
	ValaCCodeIdentifier* _tmp5_;
	ValaCCodeFunctionCall* _tmp6_;
	ValaCCodeFunctionCall* idle_call;
	ValaCCodeExpressionStatement* _tmp7_;
	ValaCCodeIdentifier* _tmp8_;
	ValaCCodeMemberAccess* _tmp9_;
	ValaCCodeMemberAccess* state;
	ValaCCodeConstant* zero;
	ValaCCodeBinaryExpression* state_is_zero;
	ValaCCodeIfStatement* dispatch;
	ValaCCodeIdentifier* _tmp10_;
	ValaCCodeFunctionCall* _tmp11_;
	ValaCCodeFunctionCall* unref;
	ValaCCodeExpressionStatement* _tmp12_;
	ValaCCodeConstant* _tmp13_;
	ValaCCodeReturnStatement* _tmp14_;
	g_return_val_if_fail (self != NULL, NULL);
	complete_block = vala_ccode_block_new ();
	direct_block = vala_ccode_block_new ();
	direct_call = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("g_simple_async_result_complete"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	async_result_expr = (_tmp3_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new ("data")), "_async_result"), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	vala_ccode_function_call_add_argument (direct_call, (ValaCCodeExpression*) async_result_expr);
	vala_ccode_block_add_statement (direct_block, (ValaCCodeNode*) (_tmp4_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) direct_call)));
	_vala_ccode_node_unref0 (_tmp4_);
	idle_block = vala_ccode_block_new ();
	idle_call = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new ("g_simple_async_result_complete_in_idle"))), _vala_ccode_node_unref0 (_tmp5_), _tmp6_);
	vala_ccode_function_call_add_argument (idle_call, (ValaCCodeExpression*) async_result_expr);
	vala_ccode_block_add_statement (idle_block, (ValaCCodeNode*) (_tmp7_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) idle_call)));
	_vala_ccode_node_unref0 (_tmp7_);
	state = (_tmp9_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("data")), "_state_"), _vala_ccode_node_unref0 (_tmp8_), _tmp9_);
	zero = vala_ccode_constant_new ("0");
	state_is_zero = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) state, (ValaCCodeExpression*) zero);
	dispatch = vala_ccode_if_statement_new ((ValaCCodeExpression*) state_is_zero, (ValaCCodeStatement*) idle_block, (ValaCCodeStatement*) direct_block);
	vala_ccode_block_add_statement (complete_block, (ValaCCodeNode*) dispatch);
	unref = (_tmp11_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new ("g_object_unref"))), _vala_ccode_node_unref0 (_tmp10_), _tmp11_);
	vala_ccode_function_call_add_argument (unref, (ValaCCodeExpression*) async_result_expr);
	vala_ccode_block_add_statement (complete_block, (ValaCCodeNode*) (_tmp12_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) unref)));
	_vala_ccode_node_unref0 (_tmp12_);
	vala_ccode_block_add_statement (complete_block, (ValaCCodeNode*) (_tmp14_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_constant_new ("FALSE")))));
	_vala_ccode_node_unref0 (_tmp14_);
	_vala_ccode_node_unref0 (_tmp13_);
	result = (ValaCCodeStatement*) complete_block;
	_vala_ccode_node_unref0 (unref);
	_vala_ccode_node_unref0 (dispatch);
	_vala_ccode_node_unref0 (state_is_zero);
	_vala_ccode_node_unref0 (zero);
	_vala_ccode_node_unref0 (state);
	_vala_ccode_node_unref0 (idle_call);
	_vala_ccode_node_unref0 (idle_block);
	_vala_ccode_node_unref0 (async_result_expr);
	_vala_ccode_node_unref0 (direct_call);
	_vala_ccode_node_unref0 (direct_block);
	return result;
}


static void vala_ccode_method_module_real_generate_method_declaration (ValaCCodeBaseModule* base, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space) {
	ValaCCodeMethodModule * self;
	char* _tmp0_;
	gboolean _tmp1_;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* function;
	gboolean _tmp4_ = FALSE;
	ValaHashMap* cparam_map;
	ValaHashMap* carg_map;
	ValaSymbol* _tmp5_;
	ValaClass* cl;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp10_ = FALSE;
	self = (ValaCCodeMethodModule*) base;
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
	if (vala_method_get_is_async_callback (m)) {
		return;
	}
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) m, _tmp0_ = vala_method_get_cname (m)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	function = (_tmp3_ = vala_ccode_function_new (_tmp2_ = vala_method_get_cname (m), "void"), _g_free0 (_tmp2_), _tmp3_);
	if (vala_symbol_is_private_symbol ((ValaSymbol*) m)) {
		_tmp4_ = !vala_symbol_get_external ((ValaSymbol*) m);
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
		if (vala_method_get_is_inline (m)) {
			vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_INLINE);
		}
	}
	if (vala_symbol_get_deprecated ((ValaSymbol*) m)) {
		vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_DEPRECATED);
	}
	cparam_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_FORMAL_PARAMETER, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
	carg_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_EXPRESSION, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
	cl = _vala_code_node_ref0 ((_tmp5_ = vala_symbol_get_parent_symbol ((ValaSymbol*) m), VALA_IS_CLASS (_tmp5_) ? ((ValaClass*) _tmp5_) : NULL));
	if (VALA_IS_CREATION_METHOD (m)) {
		_tmp7_ = cl != NULL;
	} else {
		_tmp7_ = FALSE;
	}
	if (_tmp7_) {
		_tmp6_ = vala_class_get_is_abstract (cl);
	} else {
		_tmp6_ = FALSE;
	}
	if (!_tmp6_) {
		ValaCCodeIdentifier* _tmp8_;
		ValaCCodeFunctionCall* _tmp9_;
		vala_ccode_base_module_generate_cparameters ((ValaCCodeBaseModule*) self, m, decl_space, (ValaMap*) cparam_map, function, NULL, (ValaMap*) carg_map, _tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("fake"))), 3);
		_vala_ccode_node_unref0 (_tmp9_);
		_vala_ccode_node_unref0 (_tmp8_);
		vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) function);
	}
	if (VALA_IS_CREATION_METHOD (m)) {
		_tmp10_ = cl != NULL;
	} else {
		_tmp10_ = FALSE;
	}
	if (_tmp10_) {
		char* _tmp11_;
		ValaCCodeFunction* _tmp12_;
		ValaHashMap* _tmp13_;
		function = (_tmp12_ = vala_ccode_function_new (_tmp11_ = vala_method_get_real_cname (m), "void"), _vala_ccode_node_unref0 (function), _tmp12_);
		_g_free0 (_tmp11_);
		if (vala_symbol_is_private_symbol ((ValaSymbol*) m)) {
			vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
		}
		cparam_map = (_tmp13_ = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_FORMAL_PARAMETER, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal), _vala_collection_object_unref0 (cparam_map), _tmp13_);
		vala_ccode_base_module_generate_cparameters ((ValaCCodeBaseModule*) self, m, decl_space, (ValaMap*) cparam_map, function, NULL, NULL, NULL, 3);
		vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) function);
	}
	_vala_code_node_unref0 (cl);
	_vala_collection_object_unref0 (carg_map);
	_vala_collection_object_unref0 (cparam_map);
	_vala_ccode_node_unref0 (function);
}


static void vala_ccode_method_module_register_plugin_types (ValaCCodeMethodModule* self, ValaCCodeFragment* module_init_fragment, ValaSymbol* sym, ValaSet* registered_types) {
	ValaSymbol* _tmp0_;
	ValaNamespace* ns;
	ValaSymbol* _tmp1_;
	ValaClass* cl;
	ValaSymbol* _tmp2_;
	ValaInterface* iface;
	g_return_if_fail (self != NULL);
	g_return_if_fail (module_init_fragment != NULL);
	g_return_if_fail (sym != NULL);
	g_return_if_fail (registered_types != NULL);
	ns = _vala_code_node_ref0 ((_tmp0_ = sym, VALA_IS_NAMESPACE (_tmp0_) ? ((ValaNamespace*) _tmp0_) : NULL));
	cl = _vala_code_node_ref0 ((_tmp1_ = sym, VALA_IS_CLASS (_tmp1_) ? ((ValaClass*) _tmp1_) : NULL));
	iface = _vala_code_node_ref0 ((_tmp2_ = sym, VALA_IS_INTERFACE (_tmp2_) ? ((ValaInterface*) _tmp2_) : NULL));
	if (ns != NULL) {
		{
			ValaList* _tmp3_;
			ValaIterator* _tmp4_;
			ValaIterator* _ns_ns_it;
			_ns_ns_it = (_tmp4_ = vala_iterable_iterator ((ValaIterable*) (_tmp3_ = vala_namespace_get_namespaces (ns))), _vala_collection_object_unref0 (_tmp3_), _tmp4_);
			while (TRUE) {
				ValaNamespace* ns_ns;
				if (!vala_iterator_next (_ns_ns_it)) {
					break;
				}
				ns_ns = (ValaNamespace*) vala_iterator_get (_ns_ns_it);
				vala_ccode_method_module_register_plugin_types (self, module_init_fragment, (ValaSymbol*) ns_ns, registered_types);
				_vala_code_node_unref0 (ns_ns);
			}
			_vala_collection_object_unref0 (_ns_ns_it);
		}
		{
			ValaList* _tmp5_;
			ValaIterator* _tmp6_;
			ValaIterator* _ns_cl_it;
			_ns_cl_it = (_tmp6_ = vala_iterable_iterator ((ValaIterable*) (_tmp5_ = vala_namespace_get_classes (ns))), _vala_collection_object_unref0 (_tmp5_), _tmp6_);
			while (TRUE) {
				ValaClass* ns_cl;
				if (!vala_iterator_next (_ns_cl_it)) {
					break;
				}
				ns_cl = (ValaClass*) vala_iterator_get (_ns_cl_it);
				vala_ccode_method_module_register_plugin_types (self, module_init_fragment, (ValaSymbol*) ns_cl, registered_types);
				_vala_code_node_unref0 (ns_cl);
			}
			_vala_collection_object_unref0 (_ns_cl_it);
		}
		{
			ValaList* _tmp7_;
			ValaIterator* _tmp8_;
			ValaIterator* _ns_iface_it;
			_ns_iface_it = (_tmp8_ = vala_iterable_iterator ((ValaIterable*) (_tmp7_ = vala_namespace_get_interfaces (ns))), _vala_collection_object_unref0 (_tmp7_), _tmp8_);
			while (TRUE) {
				ValaInterface* ns_iface;
				if (!vala_iterator_next (_ns_iface_it)) {
					break;
				}
				ns_iface = (ValaInterface*) vala_iterator_get (_ns_iface_it);
				vala_ccode_method_module_register_plugin_types (self, module_init_fragment, (ValaSymbol*) ns_iface, registered_types);
				_vala_code_node_unref0 (ns_iface);
			}
			_vala_collection_object_unref0 (_ns_iface_it);
		}
	} else {
		if (cl != NULL) {
			vala_ccode_method_module_register_plugin_type (self, module_init_fragment, (ValaObjectTypeSymbol*) cl, registered_types);
			{
				ValaList* _tmp9_;
				ValaIterator* _tmp10_;
				ValaIterator* _cl_cl_it;
				_cl_cl_it = (_tmp10_ = vala_iterable_iterator ((ValaIterable*) (_tmp9_ = vala_class_get_classes (cl))), _vala_collection_object_unref0 (_tmp9_), _tmp10_);
				while (TRUE) {
					ValaClass* cl_cl;
					if (!vala_iterator_next (_cl_cl_it)) {
						break;
					}
					cl_cl = (ValaClass*) vala_iterator_get (_cl_cl_it);
					vala_ccode_method_module_register_plugin_types (self, module_init_fragment, (ValaSymbol*) cl_cl, registered_types);
					_vala_code_node_unref0 (cl_cl);
				}
				_vala_collection_object_unref0 (_cl_cl_it);
			}
		} else {
			if (iface != NULL) {
				vala_ccode_method_module_register_plugin_type (self, module_init_fragment, (ValaObjectTypeSymbol*) iface, registered_types);
				{
					ValaList* _tmp11_;
					ValaIterator* _tmp12_;
					ValaIterator* _iface_cl_it;
					_iface_cl_it = (_tmp12_ = vala_iterable_iterator ((ValaIterable*) (_tmp11_ = vala_interface_get_classes (iface))), _vala_collection_object_unref0 (_tmp11_), _tmp12_);
					while (TRUE) {
						ValaClass* iface_cl;
						if (!vala_iterator_next (_iface_cl_it)) {
							break;
						}
						iface_cl = (ValaClass*) vala_iterator_get (_iface_cl_it);
						vala_ccode_method_module_register_plugin_types (self, module_init_fragment, (ValaSymbol*) iface_cl, registered_types);
						_vala_code_node_unref0 (iface_cl);
					}
					_vala_collection_object_unref0 (_iface_cl_it);
				}
			}
		}
	}
	_vala_code_node_unref0 (iface);
	_vala_code_node_unref0 (cl);
	_vala_code_node_unref0 (ns);
}


static void vala_ccode_method_module_register_plugin_type (ValaCCodeMethodModule* self, ValaCCodeFragment* module_init_fragment, ValaObjectTypeSymbol* type_symbol, ValaSet* registered_types) {
	ValaObjectTypeSymbol* _tmp0_;
	ValaClass* cl;
	char* _tmp3_;
	char* _tmp4_;
	ValaCCodeIdentifier* _tmp5_;
	ValaCCodeFunctionCall* _tmp6_;
	ValaCCodeFunctionCall* register_call;
	ValaCCodeIdentifier* _tmp7_;
	ValaCCodeExpressionStatement* _tmp8_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (module_init_fragment != NULL);
	g_return_if_fail (type_symbol != NULL);
	g_return_if_fail (registered_types != NULL);
	if (vala_symbol_get_external_package ((ValaSymbol*) type_symbol)) {
		return;
	}
	if (!vala_collection_add ((ValaCollection*) registered_types, (ValaSymbol*) type_symbol)) {
		return;
	}
	cl = _vala_code_node_ref0 ((_tmp0_ = type_symbol, VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		if (vala_class_get_is_compact (cl)) {
			_vala_code_node_unref0 (cl);
			return;
		}
		{
			ValaList* _tmp1_;
			ValaIterator* _tmp2_;
			ValaIterator* _base_type_it;
			_base_type_it = (_tmp2_ = vala_iterable_iterator ((ValaIterable*) (_tmp1_ = vala_class_get_base_types (cl))), _vala_collection_object_unref0 (_tmp1_), _tmp2_);
			while (TRUE) {
				ValaDataType* base_type;
				if (!vala_iterator_next (_base_type_it)) {
					break;
				}
				base_type = (ValaDataType*) vala_iterator_get (_base_type_it);
				vala_ccode_method_module_register_plugin_type (self, module_init_fragment, VALA_OBJECT_TYPE_SYMBOL (vala_data_type_get_data_type (base_type)), registered_types);
				_vala_code_node_unref0 (base_type);
			}
			_vala_collection_object_unref0 (_base_type_it);
		}
	}
	register_call = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new (_tmp4_ = g_strdup_printf ("%s_register_type", _tmp3_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) type_symbol, NULL))))), _vala_ccode_node_unref0 (_tmp5_), _g_free0 (_tmp4_), _g_free0 (_tmp3_), _tmp6_);
	vala_ccode_function_call_add_argument (register_call, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new (((ValaCCodeBaseModule*) self)->module_init_param_name)));
	_vala_ccode_node_unref0 (_tmp7_);
	vala_ccode_fragment_append (module_init_fragment, (ValaCCodeNode*) (_tmp8_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) register_call)));
	_vala_ccode_node_unref0 (_tmp8_);
	_vala_ccode_node_unref0 (register_call);
	_vala_code_node_unref0 (cl);
}


static gpointer _vala_ccode_node_ref0 (gpointer self) {
	return self ? vala_ccode_node_ref (self) : NULL;
}


static void vala_ccode_method_module_real_visit_method (ValaCodeVisitor* base, ValaMethod* m) {
	ValaCCodeMethodModule * self;
	ValaCCodeBaseModuleEmitContext* _tmp0_;
	gboolean in_gobject_creation_method;
	gboolean in_fundamental_creation_method;
	ValaCCodeSwitchStatement* current_state_switch;
	ValaDataType* creturn_type;
	gboolean _tmp11_ = FALSE;
	gboolean _tmp18_ = FALSE;
	gboolean _tmp19_ = FALSE;
	ValaCCodeFunction* function;
	char* _tmp22_;
	ValaCCodeFunction* _tmp23_;
	ValaHashMap* cparam_map;
	gboolean _tmp24_ = FALSE;
	gboolean _tmp28_ = FALSE;
	ValaCCodeFragment* cinit;
	gboolean _tmp38_ = FALSE;
	gboolean _tmp204_ = FALSE;
	gboolean _tmp228_ = FALSE;
	gboolean _tmp229_ = FALSE;
	gboolean _tmp230_ = FALSE;
	self = (ValaCCodeMethodModule*) base;
	g_return_if_fail (m != NULL);
	vala_ccode_base_module_push_context ((ValaCCodeBaseModule*) self, _tmp0_ = vala_ccode_base_module_emit_context_new ((ValaSymbol*) m));
	_vala_ccode_base_module_emit_context_unref0 (_tmp0_);
	in_gobject_creation_method = FALSE;
	in_fundamental_creation_method = FALSE;
	vala_ccode_base_module_check_type ((ValaCCodeBaseModule*) self, vala_method_get_return_type (m));
	if (VALA_IS_CREATION_METHOD (m)) {
		ValaTypeSymbol* _tmp1_;
		ValaClass* cl;
		gboolean _tmp2_ = FALSE;
		cl = _vala_code_node_ref0 ((_tmp1_ = vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self), VALA_IS_CLASS (_tmp1_) ? ((ValaClass*) _tmp1_) : NULL));
		if (cl != NULL) {
			_tmp2_ = !vala_class_get_is_compact (cl);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			if (vala_class_get_base_class (cl) == NULL) {
				in_fundamental_creation_method = TRUE;
			} else {
				gboolean _tmp3_ = FALSE;
				if (((ValaCCodeBaseModule*) self)->gobject_type != NULL) {
					_tmp3_ = vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) cl, ((ValaCCodeBaseModule*) self)->gobject_type);
				} else {
					_tmp3_ = FALSE;
				}
				if (_tmp3_) {
					in_gobject_creation_method = TRUE;
				}
			}
		}
		_vala_code_node_unref0 (cl);
	}
	if (vala_method_get_coroutine (m)) {
		ValaCCodeIdentifier* _tmp4_;
		ValaCCodeMemberAccess* _tmp5_;
		ValaCCodeSwitchStatement* _tmp6_;
		ValaCCodeConstant* _tmp7_;
		ValaCCodeCaseStatement* _tmp8_;
		ValaCCodeGotoStatement* _tmp9_;
		vala_ccode_base_module_set_state_switch_statement ((ValaCCodeBaseModule*) self, _tmp6_ = vala_ccode_switch_statement_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new ("data")), "_state_"))));
		_vala_ccode_node_unref0 (_tmp6_);
		_vala_ccode_node_unref0 (_tmp5_);
		_vala_ccode_node_unref0 (_tmp4_);
		vala_ccode_block_add_statement ((ValaCCodeBlock*) vala_ccode_base_module_get_state_switch_statement ((ValaCCodeBaseModule*) self), (ValaCCodeNode*) (_tmp8_ = vala_ccode_case_statement_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("0")))));
		_vala_ccode_node_unref0 (_tmp8_);
		_vala_ccode_node_unref0 (_tmp7_);
		vala_ccode_block_add_statement ((ValaCCodeBlock*) vala_ccode_base_module_get_state_switch_statement ((ValaCCodeBaseModule*) self), (ValaCCodeNode*) (_tmp9_ = vala_ccode_goto_statement_new ("_state_0")));
		_vala_ccode_node_unref0 (_tmp9_);
	}
	current_state_switch = _vala_ccode_node_ref0 (vala_ccode_base_module_get_state_switch_statement ((ValaCCodeBaseModule*) self));
	creturn_type = _vala_code_node_ref0 (vala_method_get_return_type (m));
	if (vala_data_type_is_real_non_null_struct_type (vala_method_get_return_type (m))) {
		ValaDataType* _tmp10_;
		creturn_type = (_tmp10_ = (ValaDataType*) vala_void_type_new (NULL), _vala_code_node_unref0 (creturn_type), _tmp10_);
	}
	if (vala_method_get_binding (m) == MEMBER_BINDING_CLASS) {
		_tmp11_ = TRUE;
	} else {
		_tmp11_ = vala_method_get_binding (m) == MEMBER_BINDING_STATIC;
	}
	if (_tmp11_) {
		((ValaCCodeBaseModule*) self)->in_static_or_class_context = TRUE;
	}
	{
		ValaList* _tmp12_;
		ValaIterator* _tmp13_;
		ValaIterator* _param_it;
		_param_it = (_tmp13_ = vala_iterable_iterator ((ValaIterable*) (_tmp12_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp12_), _tmp13_);
		while (TRUE) {
			ValaFormalParameter* param;
			if (!vala_iterator_next (_param_it)) {
				break;
			}
			param = (ValaFormalParameter*) vala_iterator_get (_param_it);
			vala_code_node_accept ((ValaCodeNode*) param, (ValaCodeVisitor*) self);
			_vala_code_node_unref0 (param);
		}
		_vala_collection_object_unref0 (_param_it);
	}
	if (vala_method_get_result_var (m) != NULL) {
		vala_code_node_accept ((ValaCodeNode*) vala_method_get_result_var (m), (ValaCodeVisitor*) self);
	}
	{
		ValaList* _tmp14_;
		ValaIterator* _tmp15_;
		ValaIterator* _precondition_it;
		_precondition_it = (_tmp15_ = vala_iterable_iterator ((ValaIterable*) (_tmp14_ = vala_method_get_preconditions (m))), _vala_collection_object_unref0 (_tmp14_), _tmp15_);
		while (TRUE) {
			ValaExpression* precondition;
			if (!vala_iterator_next (_precondition_it)) {
				break;
			}
			precondition = (ValaExpression*) vala_iterator_get (_precondition_it);
			vala_code_node_emit ((ValaCodeNode*) precondition, (ValaCodeGenerator*) self);
			_vala_code_node_unref0 (precondition);
		}
		_vala_collection_object_unref0 (_precondition_it);
	}
	{
		ValaList* _tmp16_;
		ValaIterator* _tmp17_;
		ValaIterator* _postcondition_it;
		_postcondition_it = (_tmp17_ = vala_iterable_iterator ((ValaIterable*) (_tmp16_ = vala_method_get_postconditions (m))), _vala_collection_object_unref0 (_tmp16_), _tmp17_);
		while (TRUE) {
			ValaExpression* postcondition;
			if (!vala_iterator_next (_postcondition_it)) {
				break;
			}
			postcondition = (ValaExpression*) vala_iterator_get (_postcondition_it);
			vala_code_node_emit ((ValaCodeNode*) postcondition, (ValaCodeGenerator*) self);
			_vala_code_node_unref0 (postcondition);
		}
		_vala_collection_object_unref0 (_postcondition_it);
	}
	if (vala_method_get_is_abstract (m)) {
		_tmp19_ = TRUE;
	} else {
		_tmp19_ = vala_method_get_is_virtual (m);
	}
	if (_tmp19_) {
		_tmp18_ = TRUE;
	} else {
		gboolean _tmp20_ = FALSE;
		if (vala_method_get_base_method (m) == NULL) {
			_tmp20_ = vala_method_get_base_interface_method (m) == NULL;
		} else {
			_tmp20_ = FALSE;
		}
		_tmp18_ = _tmp20_;
	}
	if (_tmp18_) {
		vala_ccode_base_module_generate_method_declaration ((ValaCCodeBaseModule*) self, m, ((ValaCCodeBaseModule*) self)->source_declarations);
		if (!vala_symbol_is_internal_symbol ((ValaSymbol*) m)) {
			vala_ccode_base_module_generate_method_declaration ((ValaCCodeBaseModule*) self, m, ((ValaCCodeBaseModule*) self)->header_declarations);
		}
		if (!vala_symbol_is_private_symbol ((ValaSymbol*) m)) {
			vala_ccode_base_module_generate_method_declaration ((ValaCCodeBaseModule*) self, m, ((ValaCCodeBaseModule*) self)->internal_header_declarations);
		}
	}
	if (vala_symbol_get_comment ((ValaSymbol*) m) != NULL) {
		ValaCCodeComment* _tmp21_;
		vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) (_tmp21_ = vala_ccode_comment_new (vala_comment_get_content (vala_symbol_get_comment ((ValaSymbol*) m)))));
		_vala_ccode_node_unref0 (_tmp21_);
	}
	function = NULL;
	function = (_tmp23_ = vala_ccode_function_new (_tmp22_ = vala_method_get_real_cname (m), "void"), _vala_ccode_node_unref0 (function), _tmp23_);
	_g_free0 (_tmp22_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) m, (ValaCCodeNode*) function);
	if (vala_method_get_is_inline (m)) {
		vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_INLINE);
	}
	cparam_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_FORMAL_PARAMETER, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
	vala_ccode_base_module_generate_cparameters ((ValaCCodeBaseModule*) self, m, ((ValaCCodeBaseModule*) self)->source_declarations, (ValaMap*) cparam_map, function, NULL, NULL, NULL, 3);
	if (!vala_method_get_is_abstract (m)) {
		_tmp24_ = TRUE;
	} else {
		gboolean _tmp25_ = FALSE;
		if (vala_method_get_is_abstract (m)) {
			_tmp25_ = VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self));
		} else {
			_tmp25_ = FALSE;
		}
		_tmp24_ = _tmp25_;
	}
	if (_tmp24_) {
		if (!vala_method_get_coroutine (m)) {
			gboolean _tmp26_ = FALSE;
			if (vala_method_get_base_method (m) != NULL) {
				_tmp26_ = TRUE;
			} else {
				_tmp26_ = vala_method_get_base_interface_method (m) != NULL;
			}
			if (_tmp26_) {
				ValaCCodeFunction* _tmp27_;
				vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
				vala_ccode_declaration_space_add_type_member_declaration (((ValaCCodeBaseModule*) self)->source_declarations, (ValaCCodeNode*) (_tmp27_ = vala_ccode_function_copy (function)));
				_vala_ccode_node_unref0 (_tmp27_);
			} else {
				if (vala_symbol_is_private_symbol ((ValaSymbol*) m)) {
					vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
				}
			}
		}
	}
	if (!vala_method_get_is_abstract (m)) {
		_tmp28_ = TRUE;
	} else {
		gboolean _tmp29_ = FALSE;
		if (vala_method_get_is_abstract (m)) {
			_tmp29_ = VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self));
		} else {
			_tmp29_ = FALSE;
		}
		_tmp28_ = _tmp29_;
	}
	if (_tmp28_) {
		if (vala_method_get_body (m) != NULL) {
			if (vala_method_get_coroutine (m)) {
				char* _tmp30_;
				char* _tmp31_;
				ValaCCodeFunction* _tmp32_;
				char* _tmp33_;
				char* _tmp34_;
				char* _tmp35_;
				ValaCCodeFormalParameter* _tmp36_;
				ValaCCodeFunction* _tmp37_;
				function = (_tmp32_ = vala_ccode_function_new (_tmp31_ = g_strconcat (_tmp30_ = vala_method_get_real_cname (m), "_co", NULL), "gboolean"), _vala_ccode_node_unref0 (function), _tmp32_);
				_g_free0 (_tmp31_);
				_g_free0 (_tmp30_);
				vala_ccode_function_add_parameter (function, _tmp36_ = vala_ccode_formal_parameter_new ("data", _tmp35_ = g_strconcat (_tmp34_ = vala_symbol_lower_case_to_camel_case (_tmp33_ = vala_method_get_cname (m)), "Data*", NULL)));
				_vala_ccode_node_unref0 (_tmp36_);
				_g_free0 (_tmp35_);
				_g_free0 (_tmp34_);
				_g_free0 (_tmp33_);
				vala_ccode_function_set_modifiers (function, vala_ccode_function_get_modifiers (function) | VALA_CCODE_MODIFIERS_STATIC);
				vala_ccode_declaration_space_add_type_member_declaration (((ValaCCodeBaseModule*) self)->source_declarations, (ValaCCodeNode*) (_tmp37_ = vala_ccode_function_copy (function)));
				_vala_ccode_node_unref0 (_tmp37_);
			}
		}
	}
	cinit = vala_ccode_fragment_new ();
	if (!vala_method_get_is_abstract (m)) {
		_tmp38_ = TRUE;
	} else {
		gboolean _tmp39_ = FALSE;
		if (vala_method_get_is_abstract (m)) {
			_tmp39_ = VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self));
		} else {
			_tmp39_ = FALSE;
		}
		_tmp38_ = _tmp39_;
	}
	if (_tmp38_) {
		if (vala_method_get_body (m) != NULL) {
			gboolean _tmp91_ = FALSE;
			gboolean _tmp92_ = FALSE;
			gboolean _tmp200_ = FALSE;
			if (vala_method_get_coroutine (m)) {
				ValaCCodeLabel* _tmp40_;
				ValaCCodeIdentifier* _tmp41_;
				ValaCCodeFunctionCall* _tmp42_;
				ValaCCodeExpressionStatement* _tmp43_;
				ValaCCodeLabel* _tmp44_;
				vala_ccode_block_add_statement ((ValaCCodeBlock*) current_state_switch, (ValaCCodeNode*) (_tmp40_ = vala_ccode_label_new ("default")));
				_vala_ccode_node_unref0 (_tmp40_);
				vala_ccode_block_add_statement ((ValaCCodeBlock*) current_state_switch, (ValaCCodeNode*) (_tmp43_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp42_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp41_ = vala_ccode_identifier_new ("g_assert_not_reached")))))));
				_vala_ccode_node_unref0 (_tmp43_);
				_vala_ccode_node_unref0 (_tmp42_);
				_vala_ccode_node_unref0 (_tmp41_);
				vala_ccode_fragment_append (cinit, (ValaCCodeNode*) current_state_switch);
				vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp44_ = vala_ccode_label_new ("_state_0")));
				_vala_ccode_node_unref0 (_tmp44_);
			}
			if (vala_method_get_closure (m)) {
				ValaBlock* closure_block;
				gint block_id;
				closure_block = _vala_code_node_ref0 (vala_ccode_base_module_get_current_closure_block ((ValaCCodeBaseModule*) self));
				block_id = vala_ccode_base_module_get_block_id ((ValaCCodeBaseModule*) self, closure_block);
				while (TRUE) {
					ValaBlock* parent_closure_block;
					gint parent_block_id;
					char* _tmp45_;
					ValaCCodeIdentifier* _tmp46_;
					char* _tmp47_;
					ValaCCodeMemberAccess* _tmp48_;
					ValaCCodeMemberAccess* parent_data;
					char* _tmp49_;
					ValaCCodeDeclaration* _tmp50_;
					ValaCCodeDeclaration* _cdecl_;
					char* _tmp51_;
					ValaCCodeVariableDeclarator* _tmp52_;
					ValaBlock* _tmp53_;
					parent_closure_block = _vala_code_node_ref0 (vala_ccode_base_module_next_closure_block ((ValaCCodeBaseModule*) self, vala_symbol_get_parent_symbol ((ValaSymbol*) closure_block)));
					if (parent_closure_block == NULL) {
						_vala_code_node_unref0 (parent_closure_block);
						break;
					}
					parent_block_id = vala_ccode_base_module_get_block_id ((ValaCCodeBaseModule*) self, parent_closure_block);
					parent_data = (_tmp48_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp46_ = vala_ccode_identifier_new (_tmp45_ = g_strdup_printf ("_data%d_", block_id))), _tmp47_ = g_strdup_printf ("_data%d_", parent_block_id)), _g_free0 (_tmp47_), _vala_ccode_node_unref0 (_tmp46_), _g_free0 (_tmp45_), _tmp48_);
					_cdecl_ = (_tmp50_ = vala_ccode_declaration_new (_tmp49_ = g_strdup_printf ("Block%dData*", parent_block_id)), _g_free0 (_tmp49_), _tmp50_);
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp52_ = vala_ccode_variable_declarator_new (_tmp51_ = g_strdup_printf ("_data%d_", parent_block_id), (ValaCCodeExpression*) parent_data, NULL)));
					_vala_ccode_node_unref0 (_tmp52_);
					_g_free0 (_tmp51_);
					vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
					closure_block = (_tmp53_ = _vala_code_node_ref0 (parent_closure_block), _vala_code_node_unref0 (closure_block), _tmp53_);
					block_id = parent_block_id;
					_vala_ccode_node_unref0 (_cdecl_);
					_vala_ccode_node_unref0 (parent_data);
					_vala_code_node_unref0 (parent_closure_block);
				}
				if (vala_method_get_binding (m) == MEMBER_BINDING_INSTANCE) {
					char* _tmp54_;
					ValaCCodeIdentifier* _tmp55_;
					ValaCCodeMemberAccess* _tmp56_;
					ValaCCodeMemberAccess* cself;
					char* _tmp57_;
					char* _tmp58_;
					ValaCCodeDeclaration* _tmp59_;
					ValaCCodeDeclaration* _cdecl_;
					ValaCCodeVariableDeclarator* _tmp60_;
					cself = (_tmp56_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp55_ = vala_ccode_identifier_new (_tmp54_ = g_strdup_printf ("_data%d_", block_id))), "self"), _vala_ccode_node_unref0 (_tmp55_), _g_free0 (_tmp54_), _tmp56_);
					_cdecl_ = (_tmp59_ = vala_ccode_declaration_new (_tmp58_ = g_strdup_printf ("%s *", _tmp57_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self), FALSE))), _g_free0 (_tmp58_), _g_free0 (_tmp57_), _tmp59_);
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp60_ = vala_ccode_variable_declarator_new ("self", (ValaCCodeExpression*) cself, NULL)));
					_vala_ccode_node_unref0 (_tmp60_);
					vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
					_vala_ccode_node_unref0 (_cdecl_);
					_vala_ccode_node_unref0 (cself);
				}
				_vala_code_node_unref0 (closure_block);
			} else {
				gboolean _tmp61_ = FALSE;
				if (VALA_IS_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m))) {
					_tmp61_ = !vala_method_get_coroutine (m);
				} else {
					_tmp61_ = FALSE;
				}
				if (_tmp61_) {
					ValaClass* cl;
					gboolean _tmp62_ = FALSE;
					cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
					if (vala_method_get_overrides (m)) {
						_tmp62_ = TRUE;
					} else {
						gboolean _tmp63_ = FALSE;
						gboolean _tmp64_ = FALSE;
						if (vala_method_get_base_interface_method (m) != NULL) {
							_tmp64_ = !vala_method_get_is_abstract (m);
						} else {
							_tmp64_ = FALSE;
						}
						if (_tmp64_) {
							_tmp63_ = !vala_method_get_is_virtual (m);
						} else {
							_tmp63_ = FALSE;
						}
						_tmp62_ = _tmp63_;
					}
					if (_tmp62_) {
						ValaMethod* base_method;
						ValaReferenceType* base_expression_type;
						ValaObjectType* self_target_type;
						ValaCCodeIdentifier* _tmp69_;
						ValaCCodeExpression* _tmp70_;
						ValaCCodeExpression* cself;
						char* _tmp71_;
						char* _tmp72_;
						ValaCCodeDeclaration* _tmp73_;
						ValaCCodeDeclaration* _cdecl_;
						ValaCCodeVariableDeclarator* _tmp74_;
						base_method = NULL;
						base_expression_type = NULL;
						if (vala_method_get_overrides (m)) {
							ValaMethod* _tmp65_;
							ValaReferenceType* _tmp66_;
							base_method = (_tmp65_ = _vala_code_node_ref0 (vala_method_get_base_method (m)), _vala_code_node_unref0 (base_method), _tmp65_);
							base_expression_type = (_tmp66_ = (ValaReferenceType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) base_method))), _vala_code_node_unref0 (base_expression_type), _tmp66_);
						} else {
							ValaMethod* _tmp67_;
							ValaReferenceType* _tmp68_;
							base_method = (_tmp67_ = _vala_code_node_ref0 (vala_method_get_base_interface_method (m)), _vala_code_node_unref0 (base_method), _tmp67_);
							base_expression_type = (_tmp68_ = (ValaReferenceType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) base_method))), _vala_code_node_unref0 (base_expression_type), _tmp68_);
						}
						self_target_type = vala_object_type_new ((ValaObjectTypeSymbol*) cl);
						cself = (_tmp70_ = vala_ccode_base_module_transform_expression ((ValaCCodeBaseModule*) self, (ValaCCodeExpression*) (_tmp69_ = vala_ccode_identifier_new ("base")), (ValaDataType*) base_expression_type, (ValaDataType*) self_target_type, NULL), _vala_ccode_node_unref0 (_tmp69_), _tmp70_);
						_cdecl_ = (_tmp73_ = vala_ccode_declaration_new (_tmp72_ = g_strdup_printf ("%s *", _tmp71_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE))), _g_free0 (_tmp72_), _g_free0 (_tmp71_), _tmp73_);
						vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp74_ = vala_ccode_variable_declarator_new ("self", cself, NULL)));
						_vala_ccode_node_unref0 (_tmp74_);
						vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
						_vala_ccode_node_unref0 (_cdecl_);
						_vala_ccode_node_unref0 (cself);
						_vala_code_node_unref0 (self_target_type);
						_vala_code_node_unref0 (base_expression_type);
						_vala_code_node_unref0 (base_method);
					} else {
						gboolean _tmp75_ = FALSE;
						if (vala_method_get_binding (m) == MEMBER_BINDING_INSTANCE) {
							_tmp75_ = !VALA_IS_CREATION_METHOD (m);
						} else {
							_tmp75_ = FALSE;
						}
						if (_tmp75_) {
							ValaCCodeStatement* ccheckstmt;
							ccheckstmt = vala_ccode_method_module_create_method_type_check_statement (self, m, creturn_type, (ValaTypeSymbol*) cl, TRUE, "self");
							if (ccheckstmt != NULL) {
								vala_ccode_node_set_line ((ValaCCodeNode*) ccheckstmt, vala_ccode_node_get_line ((ValaCCodeNode*) function));
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) ccheckstmt);
							}
							_vala_ccode_node_unref0 (ccheckstmt);
						}
					}
					_vala_code_node_unref0 (cl);
				}
			}
			{
				ValaList* _tmp76_;
				ValaIterator* _tmp77_;
				ValaIterator* _param_it;
				_param_it = (_tmp77_ = vala_iterable_iterator ((ValaIterable*) (_tmp76_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp76_), _tmp77_);
				while (TRUE) {
					ValaFormalParameter* param;
					if (!vala_iterator_next (_param_it)) {
						break;
					}
					param = (ValaFormalParameter*) vala_iterator_get (_param_it);
					if (vala_formal_parameter_get_ellipsis (param)) {
						_vala_code_node_unref0 (param);
						break;
					}
					if (vala_formal_parameter_get_direction (param) != VALA_PARAMETER_DIRECTION_OUT) {
						ValaTypeSymbol* t;
						gboolean _tmp78_ = FALSE;
						t = _vala_code_node_ref0 (vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) param)));
						if (t != NULL) {
							_tmp78_ = vala_typesymbol_is_reference_type (t);
						} else {
							_tmp78_ = FALSE;
						}
						if (_tmp78_) {
							char* _tmp79_;
							ValaCCodeStatement* _tmp80_;
							ValaCCodeStatement* type_check;
							type_check = (_tmp80_ = vala_ccode_method_module_create_method_type_check_statement (self, m, creturn_type, t, !vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) param)), _tmp79_ = vala_ccode_base_module_get_variable_cname ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) param))), _g_free0 (_tmp79_), _tmp80_);
							if (type_check != NULL) {
								vala_ccode_node_set_line ((ValaCCodeNode*) type_check, vala_ccode_node_get_line ((ValaCCodeNode*) function));
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) type_check);
							}
							_vala_ccode_node_unref0 (type_check);
						}
						_vala_code_node_unref0 (t);
					} else {
						if (!vala_method_get_coroutine (m)) {
							ValaTypeSymbol* t;
							gboolean _tmp81_ = FALSE;
							gboolean _tmp82_ = FALSE;
							t = _vala_code_node_ref0 (vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) param)));
							if (t != NULL) {
								_tmp82_ = vala_typesymbol_is_reference_type (t);
							} else {
								_tmp82_ = FALSE;
							}
							if (_tmp82_) {
								_tmp81_ = TRUE;
							} else {
								_tmp81_ = VALA_IS_ARRAY_TYPE (vala_variable_get_variable_type ((ValaVariable*) param));
							}
							if (_tmp81_) {
								ValaCCodeExpression* _tmp83_;
								ValaCCodeUnaryExpression* _tmp84_;
								ValaCCodeConstant* _tmp85_;
								ValaCCodeAssignment* _tmp86_;
								ValaCCodeAssignment* a;
								ValaCCodeBlock* cblock;
								ValaCCodeExpressionStatement* _tmp87_;
								ValaCCodeExpression* _tmp88_;
								ValaCCodeConstant* _tmp89_;
								ValaCCodeBinaryExpression* _tmp90_;
								ValaCCodeBinaryExpression* condition;
								ValaCCodeIfStatement* if_statement;
								a = (_tmp86_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp84_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, _tmp83_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) param)))), (ValaCCodeExpression*) (_tmp85_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (_tmp85_), _vala_ccode_node_unref0 (_tmp84_), _vala_ccode_node_unref0 (_tmp83_), _tmp86_);
								cblock = vala_ccode_block_new ();
								vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp87_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) a)));
								_vala_ccode_node_unref0 (_tmp87_);
								condition = (_tmp90_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_INEQUALITY, _tmp88_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) param)), (ValaCCodeExpression*) (_tmp89_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp89_), _vala_ccode_node_unref0 (_tmp88_), _tmp90_);
								if_statement = vala_ccode_if_statement_new ((ValaCCodeExpression*) condition, (ValaCCodeStatement*) cblock, NULL);
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) if_statement);
								_vala_ccode_node_unref0 (if_statement);
								_vala_ccode_node_unref0 (condition);
								_vala_ccode_node_unref0 (cblock);
								_vala_ccode_node_unref0 (a);
							}
							_vala_code_node_unref0 (t);
						}
					}
					_vala_code_node_unref0 (param);
				}
				_vala_collection_object_unref0 (_param_it);
			}
			if (!VALA_IS_VOID_TYPE (vala_method_get_return_type (m))) {
				_tmp92_ = !vala_data_type_is_real_non_null_struct_type (vala_method_get_return_type (m));
			} else {
				_tmp92_ = FALSE;
			}
			if (_tmp92_) {
				_tmp91_ = !vala_method_get_coroutine (m);
			} else {
				_tmp91_ = FALSE;
			}
			if (_tmp91_) {
				char* _tmp93_;
				ValaCCodeDeclaration* _tmp94_;
				ValaCCodeDeclaration* _cdecl_;
				ValaCCodeExpression* _tmp95_;
				ValaCCodeVariableDeclarator* _tmp96_;
				ValaCCodeVariableDeclarator* vardecl;
				_cdecl_ = (_tmp94_ = vala_ccode_declaration_new (_tmp93_ = vala_data_type_get_cname (vala_method_get_return_type (m))), _g_free0 (_tmp93_), _tmp94_);
				vardecl = (_tmp96_ = vala_ccode_variable_declarator_new ("result", _tmp95_ = vala_ccode_base_module_default_value_for_type ((ValaCCodeBaseModule*) self, vala_method_get_return_type (m), TRUE), NULL), _vala_ccode_node_unref0 (_tmp95_), _tmp96_);
				vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
				vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) vardecl);
				vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
				_vala_ccode_node_unref0 (vardecl);
				_vala_ccode_node_unref0 (_cdecl_);
			}
			if (VALA_IS_CREATION_METHOD (m)) {
				if (in_gobject_creation_method) {
					if (!vala_creation_method_get_chain_up (VALA_CREATION_METHOD (m))) {
						ValaList* _tmp97_;
						gboolean _tmp98_;
						ValaList* _tmp140_;
						if ((_tmp98_ = vala_collection_get_size ((ValaCollection*) (_tmp97_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))) > 0, _vala_collection_object_unref0 (_tmp97_), _tmp98_)) {
							ValaCCodeIdentifier* _tmp99_;
							ValaCCodeFunctionCall* _tmp100_;
							ValaCCodeFunctionCall* cparamsinit;
							ValaCCodeIdentifier* _tmp101_;
							ValaList* _tmp102_;
							char* _tmp103_;
							ValaCCodeConstant* _tmp104_;
							ValaCCodeDeclaration* _cdecl_;
							ValaCCodeVariableDeclarator* _tmp105_;
							ValaCCodeDeclaration* _tmp106_;
							ValaCCodeIdentifier* _tmp107_;
							ValaCCodeVariableDeclarator* _tmp108_;
							cparamsinit = (_tmp100_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp99_ = vala_ccode_identifier_new ("g_new0"))), _vala_ccode_node_unref0 (_tmp99_), _tmp100_);
							vala_ccode_function_call_add_argument (cparamsinit, (ValaCCodeExpression*) (_tmp101_ = vala_ccode_identifier_new ("GParameter")));
							_vala_ccode_node_unref0 (_tmp101_);
							vala_ccode_function_call_add_argument (cparamsinit, (ValaCCodeExpression*) (_tmp104_ = vala_ccode_constant_new (_tmp103_ = g_strdup_printf ("%i", 3 * vala_collection_get_size ((ValaCollection*) (_tmp102_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self))))))));
							_vala_ccode_node_unref0 (_tmp104_);
							_g_free0 (_tmp103_);
							_vala_collection_object_unref0 (_tmp102_);
							_cdecl_ = vala_ccode_declaration_new ("GParameter *");
							vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp105_ = vala_ccode_variable_declarator_new ("__params", (ValaCCodeExpression*) cparamsinit, NULL)));
							_vala_ccode_node_unref0 (_tmp105_);
							vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
							_cdecl_ = (_tmp106_ = vala_ccode_declaration_new ("GParameter *"), _vala_ccode_node_unref0 (_cdecl_), _tmp106_);
							vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp108_ = vala_ccode_variable_declarator_new ("__params_it", (ValaCCodeExpression*) (_tmp107_ = vala_ccode_identifier_new ("__params")), NULL)));
							_vala_ccode_node_unref0 (_tmp108_);
							_vala_ccode_node_unref0 (_tmp107_);
							vala_ccode_fragment_append (cinit, (ValaCCodeNode*) _cdecl_);
							_vala_ccode_node_unref0 (_cdecl_);
							_vala_ccode_node_unref0 (cparamsinit);
						}
						{
							ValaList* _tmp109_;
							ValaIterator* _tmp110_;
							ValaIterator* _type_param_it;
							_type_param_it = (_tmp110_ = vala_iterable_iterator ((ValaIterable*) (_tmp109_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))), _vala_collection_object_unref0 (_tmp109_), _tmp110_);
							while (TRUE) {
								ValaTypeParameter* type_param;
								ValaCCodeConstant* prop_name;
								ValaCCodeIdentifier* param_name;
								char* _tmp111_;
								char* _tmp112_;
								ValaCCodeConstant* _tmp113_;
								char* _tmp114_;
								char* _tmp115_;
								ValaCCodeIdentifier* _tmp116_;
								ValaIntegerType* _tmp117_;
								ValaCCodeExpression* _tmp118_;
								ValaCCodeExpressionStatement* _tmp119_;
								char* _tmp120_;
								char* _tmp121_;
								ValaCCodeConstant* _tmp122_;
								char* _tmp123_;
								char* _tmp124_;
								ValaCCodeIdentifier* _tmp125_;
								ValaVoidType* _tmp126_;
								ValaPointerType* _tmp127_;
								ValaCCodeExpression* _tmp128_;
								ValaCCodeExpressionStatement* _tmp129_;
								char* _tmp130_;
								char* _tmp131_;
								ValaCCodeConstant* _tmp132_;
								char* _tmp133_;
								char* _tmp134_;
								ValaCCodeIdentifier* _tmp135_;
								ValaVoidType* _tmp136_;
								ValaPointerType* _tmp137_;
								ValaCCodeExpression* _tmp138_;
								ValaCCodeExpressionStatement* _tmp139_;
								if (!vala_iterator_next (_type_param_it)) {
									break;
								}
								type_param = (ValaTypeParameter*) vala_iterator_get (_type_param_it);
								prop_name = NULL;
								param_name = NULL;
								prop_name = (_tmp113_ = vala_ccode_constant_new (_tmp112_ = g_strdup_printf ("\"%s-type\"", _tmp111_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (prop_name), _tmp113_);
								_g_free0 (_tmp112_);
								_g_free0 (_tmp111_);
								param_name = (_tmp116_ = vala_ccode_identifier_new (_tmp115_ = g_strdup_printf ("%s_type", _tmp114_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp116_);
								_g_free0 (_tmp115_);
								_g_free0 (_tmp114_);
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp119_ = vala_ccode_expression_statement_new (_tmp118_ = vala_ccode_base_module_get_construct_property_assignment ((ValaCCodeBaseModule*) self, prop_name, (ValaDataType*) (_tmp117_ = vala_integer_type_new (VALA_STRUCT (((ValaCCodeBaseModule*) self)->gtype_type), NULL, NULL)), (ValaCCodeExpression*) param_name))));
								_vala_ccode_node_unref0 (_tmp119_);
								_vala_ccode_node_unref0 (_tmp118_);
								_vala_code_node_unref0 (_tmp117_);
								prop_name = (_tmp122_ = vala_ccode_constant_new (_tmp121_ = g_strdup_printf ("\"%s-dup-func\"", _tmp120_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (prop_name), _tmp122_);
								_g_free0 (_tmp121_);
								_g_free0 (_tmp120_);
								param_name = (_tmp125_ = vala_ccode_identifier_new (_tmp124_ = g_strdup_printf ("%s_dup_func", _tmp123_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp125_);
								_g_free0 (_tmp124_);
								_g_free0 (_tmp123_);
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp129_ = vala_ccode_expression_statement_new (_tmp128_ = vala_ccode_base_module_get_construct_property_assignment ((ValaCCodeBaseModule*) self, prop_name, (ValaDataType*) (_tmp127_ = vala_pointer_type_new ((ValaDataType*) (_tmp126_ = vala_void_type_new (NULL)), NULL)), (ValaCCodeExpression*) param_name))));
								_vala_ccode_node_unref0 (_tmp129_);
								_vala_ccode_node_unref0 (_tmp128_);
								_vala_code_node_unref0 (_tmp127_);
								_vala_code_node_unref0 (_tmp126_);
								prop_name = (_tmp132_ = vala_ccode_constant_new (_tmp131_ = g_strdup_printf ("\"%s-destroy-func\"", _tmp130_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (prop_name), _tmp132_);
								_g_free0 (_tmp131_);
								_g_free0 (_tmp130_);
								param_name = (_tmp135_ = vala_ccode_identifier_new (_tmp134_ = g_strdup_printf ("%s_destroy_func", _tmp133_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp135_);
								_g_free0 (_tmp134_);
								_g_free0 (_tmp133_);
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp139_ = vala_ccode_expression_statement_new (_tmp138_ = vala_ccode_base_module_get_construct_property_assignment ((ValaCCodeBaseModule*) self, prop_name, (ValaDataType*) (_tmp137_ = vala_pointer_type_new ((ValaDataType*) (_tmp136_ = vala_void_type_new (NULL)), NULL)), (ValaCCodeExpression*) param_name))));
								_vala_ccode_node_unref0 (_tmp139_);
								_vala_ccode_node_unref0 (_tmp138_);
								_vala_code_node_unref0 (_tmp137_);
								_vala_code_node_unref0 (_tmp136_);
								_vala_ccode_node_unref0 (param_name);
								_vala_ccode_node_unref0 (prop_name);
								_vala_code_node_unref0 (type_param);
							}
							_vala_collection_object_unref0 (_type_param_it);
						}
						vala_ccode_method_module_add_object_creation (self, cinit, vala_collection_get_size ((ValaCollection*) (_tmp140_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))) > 0);
						_vala_collection_object_unref0 (_tmp140_);
					} else {
						char* _tmp141_;
						char* _tmp142_;
						ValaCCodeDeclaration* _tmp143_;
						ValaCCodeDeclaration* cdeclaration;
						ValaCCodeConstant* _tmp144_;
						ValaCCodeVariableDeclarator* _tmp145_;
						cdeclaration = (_tmp143_ = vala_ccode_declaration_new (_tmp142_ = g_strdup_printf ("%s *", _tmp141_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) VALA_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self)), FALSE))), _g_free0 (_tmp142_), _g_free0 (_tmp141_), _tmp143_);
						vala_ccode_declaration_add_declarator (cdeclaration, (ValaCCodeDeclarator*) (_tmp145_ = vala_ccode_variable_declarator_new_zero ("self", (ValaCCodeExpression*) (_tmp144_ = vala_ccode_constant_new ("NULL")), NULL)));
						_vala_ccode_node_unref0 (_tmp145_);
						_vala_ccode_node_unref0 (_tmp144_);
						vala_ccode_fragment_append (cinit, (ValaCCodeNode*) cdeclaration);
						_vala_ccode_node_unref0 (cdeclaration);
					}
				} else {
					if (vala_ccode_method_module_is_gtypeinstance_creation_method (self, m)) {
						ValaClass* cl;
						char* _tmp146_;
						char* _tmp147_;
						ValaCCodeDeclaration* _tmp148_;
						ValaCCodeDeclaration* cdeclaration;
						ValaCCodeConstant* _tmp149_;
						ValaCCodeVariableDeclarator* _tmp150_;
						ValaCCodeVariableDeclarator* _cdecl_;
						cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
						cdeclaration = (_tmp148_ = vala_ccode_declaration_new (_tmp147_ = g_strconcat (_tmp146_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE), "*", NULL)), _g_free0 (_tmp147_), _g_free0 (_tmp146_), _tmp148_);
						_cdecl_ = (_tmp150_ = vala_ccode_variable_declarator_new_zero ("self", (ValaCCodeExpression*) (_tmp149_ = vala_ccode_constant_new ("NULL")), NULL), _vala_ccode_node_unref0 (_tmp149_), _tmp150_);
						vala_ccode_declaration_add_declarator (cdeclaration, (ValaCCodeDeclarator*) _cdecl_);
						vala_ccode_fragment_append (cinit, (ValaCCodeNode*) cdeclaration);
						if (!vala_creation_method_get_chain_up (VALA_CREATION_METHOD (m))) {
							ValaCCodeIdentifier* _tmp151_;
							ValaCCodeFunctionCall* _tmp152_;
							ValaCCodeFunctionCall* ccall;
							ValaCCodeIdentifier* _tmp153_;
							char* _tmp154_;
							char* _tmp155_;
							ValaCCodeCastExpression* _tmp156_;
							ccall = (_tmp152_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp151_ = vala_ccode_identifier_new ("g_type_create_instance"))), _vala_ccode_node_unref0 (_tmp151_), _tmp152_);
							vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp153_ = vala_ccode_identifier_new ("object_type")));
							_vala_ccode_node_unref0 (_tmp153_);
							vala_ccode_variable_declarator_set_initializer (_cdecl_, (ValaCCodeExpression*) (_tmp156_ = vala_ccode_cast_expression_new ((ValaCCodeExpression*) ccall, _tmp155_ = g_strconcat (_tmp154_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE), "*", NULL))));
							_vala_ccode_node_unref0 (_tmp156_);
							_g_free0 (_tmp155_);
							_g_free0 (_tmp154_);
							{
								ValaList* _tmp157_;
								ValaIterator* _tmp158_;
								ValaIterator* _type_param_it;
								_type_param_it = (_tmp158_ = vala_iterable_iterator ((ValaIterable*) (_tmp157_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))), _vala_collection_object_unref0 (_tmp157_), _tmp158_);
								while (TRUE) {
									ValaTypeParameter* type_param;
									ValaCCodeIdentifier* param_name;
									ValaCCodeAssignment* assign;
									ValaCCodeIdentifier* _tmp159_;
									ValaCCodeMemberAccess* _tmp160_;
									ValaCCodeMemberAccess* priv_access;
									char* _tmp161_;
									char* _tmp162_;
									ValaCCodeIdentifier* _tmp163_;
									ValaCCodeMemberAccess* _tmp164_;
									ValaCCodeAssignment* _tmp165_;
									ValaCCodeExpressionStatement* _tmp166_;
									char* _tmp167_;
									char* _tmp168_;
									ValaCCodeIdentifier* _tmp169_;
									ValaCCodeMemberAccess* _tmp170_;
									ValaCCodeAssignment* _tmp171_;
									ValaCCodeExpressionStatement* _tmp172_;
									char* _tmp173_;
									char* _tmp174_;
									ValaCCodeIdentifier* _tmp175_;
									ValaCCodeMemberAccess* _tmp176_;
									ValaCCodeAssignment* _tmp177_;
									ValaCCodeExpressionStatement* _tmp178_;
									if (!vala_iterator_next (_type_param_it)) {
										break;
									}
									type_param = (ValaTypeParameter*) vala_iterator_get (_type_param_it);
									param_name = NULL;
									assign = NULL;
									priv_access = (_tmp160_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp159_ = vala_ccode_identifier_new ("self")), "priv"), _vala_ccode_node_unref0 (_tmp159_), _tmp160_);
									param_name = (_tmp163_ = vala_ccode_identifier_new (_tmp162_ = g_strdup_printf ("%s_type", _tmp161_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp163_);
									_g_free0 (_tmp162_);
									_g_free0 (_tmp161_);
									assign = (_tmp165_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp164_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) priv_access, vala_ccode_identifier_get_name (param_name))), (ValaCCodeExpression*) param_name, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (assign), _tmp165_);
									_vala_ccode_node_unref0 (_tmp164_);
									vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp166_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) assign)));
									_vala_ccode_node_unref0 (_tmp166_);
									param_name = (_tmp169_ = vala_ccode_identifier_new (_tmp168_ = g_strdup_printf ("%s_dup_func", _tmp167_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp169_);
									_g_free0 (_tmp168_);
									_g_free0 (_tmp167_);
									assign = (_tmp171_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp170_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) priv_access, vala_ccode_identifier_get_name (param_name))), (ValaCCodeExpression*) param_name, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (assign), _tmp171_);
									_vala_ccode_node_unref0 (_tmp170_);
									vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp172_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) assign)));
									_vala_ccode_node_unref0 (_tmp172_);
									param_name = (_tmp175_ = vala_ccode_identifier_new (_tmp174_ = g_strdup_printf ("%s_destroy_func", _tmp173_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1))), _vala_ccode_node_unref0 (param_name), _tmp175_);
									_g_free0 (_tmp174_);
									_g_free0 (_tmp173_);
									assign = (_tmp177_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp176_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) priv_access, vala_ccode_identifier_get_name (param_name))), (ValaCCodeExpression*) param_name, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (assign), _tmp177_);
									_vala_ccode_node_unref0 (_tmp176_);
									vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp178_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) assign)));
									_vala_ccode_node_unref0 (_tmp178_);
									_vala_ccode_node_unref0 (priv_access);
									_vala_ccode_node_unref0 (assign);
									_vala_ccode_node_unref0 (param_name);
									_vala_code_node_unref0 (type_param);
								}
								_vala_collection_object_unref0 (_type_param_it);
							}
							_vala_ccode_node_unref0 (ccall);
						}
						_vala_ccode_node_unref0 (_cdecl_);
						_vala_ccode_node_unref0 (cdeclaration);
						_vala_code_node_unref0 (cl);
					} else {
						if (VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self))) {
							ValaClass* cl;
							char* _tmp179_;
							char* _tmp180_;
							ValaCCodeDeclaration* _tmp181_;
							ValaCCodeDeclaration* cdeclaration;
							ValaCCodeVariableDeclarator* _cdecl_;
							cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
							cdeclaration = (_tmp181_ = vala_ccode_declaration_new (_tmp180_ = g_strconcat (_tmp179_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE), "*", NULL)), _g_free0 (_tmp180_), _g_free0 (_tmp179_), _tmp181_);
							_cdecl_ = vala_ccode_variable_declarator_new ("self", NULL, NULL);
							vala_ccode_declaration_add_declarator (cdeclaration, (ValaCCodeDeclarator*) _cdecl_);
							vala_ccode_fragment_append (cinit, (ValaCCodeNode*) cdeclaration);
							if (!vala_creation_method_get_chain_up (VALA_CREATION_METHOD (m))) {
								ValaCCodeIdentifier* _tmp182_;
								ValaCCodeFunctionCall* _tmp183_;
								ValaCCodeFunctionCall* ccall;
								char* _tmp184_;
								ValaCCodeIdentifier* _tmp185_;
								ccall = (_tmp183_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp182_ = vala_ccode_identifier_new ("g_slice_new0"))), _vala_ccode_node_unref0 (_tmp182_), _tmp183_);
								vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp185_ = vala_ccode_identifier_new (_tmp184_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE))));
								_vala_ccode_node_unref0 (_tmp185_);
								_g_free0 (_tmp184_);
								vala_ccode_variable_declarator_set_initializer (_cdecl_, (ValaCCodeExpression*) ccall);
								_vala_ccode_node_unref0 (ccall);
							}
							if (vala_class_get_base_class (cl) == NULL) {
								char* _tmp186_;
								char* _tmp187_;
								ValaCCodeIdentifier* _tmp188_;
								ValaCCodeFunctionCall* _tmp189_;
								ValaCCodeFunctionCall* cinitcall;
								ValaCCodeIdentifier* _tmp190_;
								ValaCCodeExpressionStatement* _tmp191_;
								cinitcall = (_tmp189_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp188_ = vala_ccode_identifier_new (_tmp187_ = g_strdup_printf ("%s_instance_init", _tmp186_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) cl, NULL))))), _vala_ccode_node_unref0 (_tmp188_), _g_free0 (_tmp187_), _g_free0 (_tmp186_), _tmp189_);
								vala_ccode_function_call_add_argument (cinitcall, (ValaCCodeExpression*) (_tmp190_ = vala_ccode_identifier_new ("self")));
								_vala_ccode_node_unref0 (_tmp190_);
								vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp191_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cinitcall)));
								_vala_ccode_node_unref0 (_tmp191_);
								_vala_ccode_node_unref0 (cinitcall);
							}
							_vala_ccode_node_unref0 (_cdecl_);
							_vala_ccode_node_unref0 (cdeclaration);
							_vala_code_node_unref0 (cl);
						} else {
							ValaStruct* st;
							ValaCCodeIdentifier* _tmp192_;
							ValaCCodeFunctionCall* _tmp193_;
							ValaCCodeFunctionCall* czero;
							ValaCCodeIdentifier* _tmp194_;
							ValaCCodeConstant* _tmp195_;
							char* _tmp196_;
							char* _tmp197_;
							ValaCCodeIdentifier* _tmp198_;
							ValaCCodeExpressionStatement* _tmp199_;
							st = _vala_code_node_ref0 (VALA_STRUCT (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
							vala_ccode_declaration_space_add_include (((ValaCCodeBaseModule*) self)->source_declarations, "string.h", FALSE);
							czero = (_tmp193_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp192_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp192_), _tmp193_);
							vala_ccode_function_call_add_argument (czero, (ValaCCodeExpression*) (_tmp194_ = vala_ccode_identifier_new ("self")));
							_vala_ccode_node_unref0 (_tmp194_);
							vala_ccode_function_call_add_argument (czero, (ValaCCodeExpression*) (_tmp195_ = vala_ccode_constant_new ("0")));
							_vala_ccode_node_unref0 (_tmp195_);
							vala_ccode_function_call_add_argument (czero, (ValaCCodeExpression*) (_tmp198_ = vala_ccode_identifier_new (_tmp197_ = g_strdup_printf ("sizeof (%s)", _tmp196_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) st, FALSE)))));
							_vala_ccode_node_unref0 (_tmp198_);
							_g_free0 (_tmp197_);
							_g_free0 (_tmp196_);
							vala_ccode_fragment_append (cinit, (ValaCCodeNode*) (_tmp199_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) czero)));
							_vala_ccode_node_unref0 (_tmp199_);
							_vala_ccode_node_unref0 (czero);
							_vala_code_node_unref0 (st);
						}
					}
				}
			}
			if (vala_code_context_get_module_init_method (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self)) == m) {
				_tmp200_ = ((ValaCCodeBaseModule*) self)->in_plugin;
			} else {
				_tmp200_ = FALSE;
			}
			if (_tmp200_) {
				ValaHashSet* _tmp201_;
				vala_ccode_method_module_register_plugin_types (self, cinit, (ValaSymbol*) vala_code_context_get_root (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self)), (ValaSet*) (_tmp201_ = vala_hash_set_new (VALA_TYPE_SYMBOL, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_hash, g_direct_equal)));
				_vala_collection_object_unref0 (_tmp201_);
			}
			{
				ValaList* _tmp202_;
				ValaIterator* _tmp203_;
				ValaIterator* _precondition_it;
				_precondition_it = (_tmp203_ = vala_iterable_iterator ((ValaIterable*) (_tmp202_ = vala_method_get_preconditions (m))), _vala_collection_object_unref0 (_tmp202_), _tmp203_);
				while (TRUE) {
					ValaExpression* precondition;
					ValaCCodeStatement* check_stmt;
					if (!vala_iterator_next (_precondition_it)) {
						break;
					}
					precondition = (ValaExpression*) vala_iterator_get (_precondition_it);
					check_stmt = vala_ccode_method_module_create_precondition_statement (self, (ValaCodeNode*) m, creturn_type, precondition);
					if (check_stmt != NULL) {
						vala_ccode_fragment_append (cinit, (ValaCCodeNode*) check_stmt);
					}
					_vala_ccode_node_unref0 (check_stmt);
					_vala_code_node_unref0 (precondition);
				}
				_vala_collection_object_unref0 (_precondition_it);
			}
		}
	}
	if (vala_method_get_body (m) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_method_get_body (m), (ValaCodeGenerator*) self);
	}
	if (!vala_method_get_is_abstract (m)) {
		_tmp204_ = TRUE;
	} else {
		gboolean _tmp205_ = FALSE;
		if (vala_method_get_is_abstract (m)) {
			_tmp205_ = VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self));
		} else {
			_tmp205_ = FALSE;
		}
		_tmp204_ = _tmp205_;
	}
	if (_tmp204_) {
		if (vala_method_get_body (m) != NULL) {
			gboolean _tmp209_ = FALSE;
			gboolean _tmp210_ = FALSE;
			vala_ccode_function_set_block (function, VALA_CCODE_BLOCK (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_method_get_body (m))));
			vala_ccode_node_set_line ((ValaCCodeNode*) vala_ccode_function_get_block (function), vala_ccode_node_get_line ((ValaCCodeNode*) function));
			vala_ccode_block_prepend_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) cinit);
			if (vala_ccode_base_module_get_current_method_inner_error ((ValaCCodeBaseModule*) self)) {
				if (vala_method_get_coroutine (m)) {
					vala_ccode_struct_add_field (((ValaCCodeBaseModule*) self)->closure_struct, "GError *", "_inner_error_", NULL);
				} else {
					ValaCCodeDeclaration* _cdecl_;
					ValaCCodeConstant* _tmp206_;
					ValaCCodeVariableDeclarator* _tmp207_;
					_cdecl_ = vala_ccode_declaration_new ("GError *");
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp207_ = vala_ccode_variable_declarator_new_zero ("_inner_error_", (ValaCCodeExpression*) (_tmp206_ = vala_ccode_constant_new ("NULL")), NULL)));
					_vala_ccode_node_unref0 (_tmp207_);
					_vala_ccode_node_unref0 (_tmp206_);
					vala_ccode_block_add_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) _cdecl_);
					_vala_ccode_node_unref0 (_cdecl_);
				}
			}
			if (vala_method_get_coroutine (m)) {
				ValaCCodeStatement* _tmp208_;
				vala_ccode_block_add_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) (_tmp208_ = vala_ccode_method_module_complete_async (self)));
				_vala_ccode_node_unref0 (_tmp208_);
			}
			if (!VALA_IS_VOID_TYPE (vala_method_get_return_type (m))) {
				_tmp210_ = !vala_data_type_is_real_non_null_struct_type (vala_method_get_return_type (m));
			} else {
				_tmp210_ = FALSE;
			}
			if (_tmp210_) {
				_tmp209_ = !vala_method_get_coroutine (m);
			} else {
				_tmp209_ = FALSE;
			}
			if (_tmp209_) {
				gboolean _tmp211_ = FALSE;
				if (vala_method_get_return_block (m) != NULL) {
					ValaList* _tmp212_;
					_tmp211_ = vala_collection_get_size ((ValaCollection*) (_tmp212_ = vala_basic_block_get_predecessors (vala_method_get_return_block (m)))) == 0;
					_vala_collection_object_unref0 (_tmp212_);
				} else {
					_tmp211_ = FALSE;
				}
				if (_tmp211_) {
					ValaCCodeIdentifier* _tmp213_;
					ValaCCodeReturnStatement* _tmp214_;
					vala_ccode_block_add_statement (vala_ccode_function_get_block (function), (ValaCCodeNode*) (_tmp214_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp213_ = vala_ccode_identifier_new ("result")))));
					_vala_ccode_node_unref0 (_tmp214_);
					_vala_ccode_node_unref0 (_tmp213_);
				}
			}
			vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) function);
		} else {
			if (vala_method_get_is_abstract (m)) {
				ValaCCodeBlock* cblock;
				ValaCCodeStatement* check_stmt;
				ValaCCodeIdentifier* _tmp215_;
				ValaCCodeFunctionCall* _tmp216_;
				ValaCCodeFunctionCall* type_from_instance_call;
				ValaCCodeIdentifier* _tmp217_;
				ValaCCodeIdentifier* _tmp218_;
				ValaCCodeFunctionCall* _tmp219_;
				ValaCCodeFunctionCall* type_name_call;
				char* _tmp220_;
				char* _tmp221_;
				char* error_string;
				ValaCCodeIdentifier* _tmp222_;
				ValaCCodeFunctionCall* _tmp223_;
				ValaCCodeFunctionCall* cerrorcall;
				ValaCCodeConstant* _tmp224_;
				ValaCCodeExpressionStatement* _tmp225_;
				ValaCCodeExpression* _tmp226_;
				ValaCCodeReturnStatement* _tmp227_;
				cblock = vala_ccode_block_new ();
				check_stmt = vala_ccode_method_module_create_method_type_check_statement (self, m, creturn_type, vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self), TRUE, "self");
				if (check_stmt != NULL) {
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) check_stmt);
				}
				type_from_instance_call = (_tmp216_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp215_ = vala_ccode_identifier_new ("G_TYPE_FROM_INSTANCE"))), _vala_ccode_node_unref0 (_tmp215_), _tmp216_);
				vala_ccode_function_call_add_argument (type_from_instance_call, (ValaCCodeExpression*) (_tmp217_ = vala_ccode_identifier_new ("self")));
				_vala_ccode_node_unref0 (_tmp217_);
				type_name_call = (_tmp219_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp218_ = vala_ccode_identifier_new ("g_type_name"))), _vala_ccode_node_unref0 (_tmp218_), _tmp219_);
				vala_ccode_function_call_add_argument (type_name_call, (ValaCCodeExpression*) type_from_instance_call);
				error_string = (_tmp221_ = g_strdup_printf ("\"Type `%%s' does not implement abstract method `%s'\"", _tmp220_ = vala_method_get_cname (m)), _g_free0 (_tmp220_), _tmp221_);
				cerrorcall = (_tmp223_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp222_ = vala_ccode_identifier_new ("g_critical"))), _vala_ccode_node_unref0 (_tmp222_), _tmp223_);
				vala_ccode_function_call_add_argument (cerrorcall, (ValaCCodeExpression*) (_tmp224_ = vala_ccode_constant_new (error_string)));
				_vala_ccode_node_unref0 (_tmp224_);
				vala_ccode_function_call_add_argument (cerrorcall, (ValaCCodeExpression*) type_name_call);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp225_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cerrorcall)));
				_vala_ccode_node_unref0 (_tmp225_);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp227_ = vala_ccode_return_statement_new (_tmp226_ = vala_ccode_base_module_default_value_for_type ((ValaCCodeBaseModule*) self, creturn_type, FALSE))));
				_vala_ccode_node_unref0 (_tmp227_);
				_vala_ccode_node_unref0 (_tmp226_);
				vala_ccode_function_set_block (function, cblock);
				vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) function);
				_vala_ccode_node_unref0 (cerrorcall);
				_g_free0 (error_string);
				_vala_ccode_node_unref0 (type_name_call);
				_vala_ccode_node_unref0 (type_from_instance_call);
				_vala_ccode_node_unref0 (check_stmt);
				_vala_ccode_node_unref0 (cblock);
			}
		}
	}
	((ValaCCodeBaseModule*) self)->in_static_or_class_context = FALSE;
	vala_ccode_base_module_pop_context ((ValaCCodeBaseModule*) self);
	if (vala_method_get_is_abstract (m)) {
		_tmp230_ = TRUE;
	} else {
		_tmp230_ = vala_method_get_is_virtual (m);
	}
	if (_tmp230_) {
		_tmp229_ = !vala_method_get_coroutine (m);
	} else {
		_tmp229_ = FALSE;
	}
	if (_tmp229_) {
		_tmp228_ = vala_method_get_signal_reference (m) == NULL;
	} else {
		_tmp228_ = FALSE;
	}
	if (_tmp228_) {
		ValaHashMap* _tmp231_;
		ValaHashMap* carg_map;
		cparam_map = (_tmp231_ = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_FORMAL_PARAMETER, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal), _vala_collection_object_unref0 (cparam_map), _tmp231_);
		carg_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_EXPRESSION, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
		vala_ccode_method_module_generate_vfunc (self, m, creturn_type, (ValaMap*) cparam_map, (ValaMap*) carg_map, "", 3);
		_vala_collection_object_unref0 (carg_map);
	}
	if (vala_method_get_entry_point (m)) {
		ValaCCodeFunction* cmain;
		ValaCCodeFormalParameter* _tmp232_;
		ValaCCodeFormalParameter* _tmp233_;
		ValaCCodeBlock* main_block;
		ValaCCodeIdentifier* _tmp245_;
		ValaCCodeFunctionCall* _tmp246_;
		ValaCCodeFunctionCall* main_call;
		ValaList* _tmp247_;
		gboolean _tmp248_;
		cmain = vala_ccode_function_new ("main", "int");
		vala_ccode_node_set_line ((ValaCCodeNode*) cmain, vala_ccode_node_get_line ((ValaCCodeNode*) function));
		vala_ccode_function_add_parameter (cmain, _tmp232_ = vala_ccode_formal_parameter_new ("argc", "int"));
		_vala_ccode_node_unref0 (_tmp232_);
		vala_ccode_function_add_parameter (cmain, _tmp233_ = vala_ccode_formal_parameter_new ("argv", "char **"));
		_vala_ccode_node_unref0 (_tmp233_);
		main_block = vala_ccode_block_new ();
		if (vala_code_context_get_profile (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self)) == VALA_PROFILE_GOBJECT) {
			ValaCCodeIdentifier* _tmp242_;
			ValaCCodeFunctionCall* _tmp243_;
			ValaCCodeExpressionStatement* _tmp244_;
			ValaCCodeExpressionStatement* type_init_call;
			if (vala_code_context_get_mem_profiler (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self))) {
				ValaCCodeIdentifier* _tmp234_;
				ValaCCodeFunctionCall* _tmp235_;
				ValaCCodeFunctionCall* mem_profiler_init_call;
				ValaCCodeConstant* _tmp236_;
				ValaCCodeExpressionStatement* _tmp237_;
				mem_profiler_init_call = (_tmp235_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp234_ = vala_ccode_identifier_new ("g_mem_set_vtable"))), _vala_ccode_node_unref0 (_tmp234_), _tmp235_);
				vala_ccode_node_set_line ((ValaCCodeNode*) mem_profiler_init_call, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
				vala_ccode_function_call_add_argument (mem_profiler_init_call, (ValaCCodeExpression*) (_tmp236_ = vala_ccode_constant_new ("glib_mem_profiler_table")));
				_vala_ccode_node_unref0 (_tmp236_);
				vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) (_tmp237_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) mem_profiler_init_call)));
				_vala_ccode_node_unref0 (_tmp237_);
				_vala_ccode_node_unref0 (mem_profiler_init_call);
			}
			if (vala_code_context_get_thread (vala_ccode_base_module_get_context ((ValaCCodeBaseModule*) self))) {
				ValaCCodeIdentifier* _tmp238_;
				ValaCCodeFunctionCall* _tmp239_;
				ValaCCodeFunctionCall* thread_init_call;
				ValaCCodeConstant* _tmp240_;
				ValaCCodeExpressionStatement* _tmp241_;
				thread_init_call = (_tmp239_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp238_ = vala_ccode_identifier_new ("g_thread_init"))), _vala_ccode_node_unref0 (_tmp238_), _tmp239_);
				vala_ccode_node_set_line ((ValaCCodeNode*) thread_init_call, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
				vala_ccode_function_call_add_argument (thread_init_call, (ValaCCodeExpression*) (_tmp240_ = vala_ccode_constant_new ("NULL")));
				_vala_ccode_node_unref0 (_tmp240_);
				vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) (_tmp241_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) thread_init_call)));
				_vala_ccode_node_unref0 (_tmp241_);
				_vala_ccode_node_unref0 (thread_init_call);
			}
			type_init_call = (_tmp244_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp243_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp242_ = vala_ccode_identifier_new ("g_type_init"))))), _vala_ccode_node_unref0 (_tmp243_), _vala_ccode_node_unref0 (_tmp242_), _tmp244_);
			vala_ccode_node_set_line ((ValaCCodeNode*) type_init_call, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
			vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) type_init_call);
			_vala_ccode_node_unref0 (type_init_call);
		}
		main_call = (_tmp246_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp245_ = vala_ccode_identifier_new (vala_ccode_function_get_name (function)))), _vala_ccode_node_unref0 (_tmp245_), _tmp246_);
		if ((_tmp248_ = vala_collection_get_size ((ValaCollection*) (_tmp247_ = vala_method_get_parameters (m))) == 1, _vala_collection_object_unref0 (_tmp247_), _tmp248_)) {
			ValaCCodeIdentifier* _tmp249_;
			ValaCCodeIdentifier* _tmp250_;
			vala_ccode_function_call_add_argument (main_call, (ValaCCodeExpression*) (_tmp249_ = vala_ccode_identifier_new ("argv")));
			_vala_ccode_node_unref0 (_tmp249_);
			vala_ccode_function_call_add_argument (main_call, (ValaCCodeExpression*) (_tmp250_ = vala_ccode_identifier_new ("argc")));
			_vala_ccode_node_unref0 (_tmp250_);
		}
		if (VALA_IS_VOID_TYPE (vala_method_get_return_type (m))) {
			ValaCCodeExpressionStatement* main_stmt;
			ValaCCodeConstant* _tmp251_;
			ValaCCodeReturnStatement* _tmp252_;
			ValaCCodeReturnStatement* ret_stmt;
			main_stmt = vala_ccode_expression_statement_new ((ValaCCodeExpression*) main_call);
			vala_ccode_node_set_line ((ValaCCodeNode*) main_stmt, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
			vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) main_stmt);
			ret_stmt = (_tmp252_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp251_ = vala_ccode_constant_new ("0"))), _vala_ccode_node_unref0 (_tmp251_), _tmp252_);
			vala_ccode_node_set_line ((ValaCCodeNode*) ret_stmt, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
			vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) ret_stmt);
			_vala_ccode_node_unref0 (ret_stmt);
			_vala_ccode_node_unref0 (main_stmt);
		} else {
			ValaCCodeReturnStatement* main_stmt;
			main_stmt = vala_ccode_return_statement_new ((ValaCCodeExpression*) main_call);
			vala_ccode_node_set_line ((ValaCCodeNode*) main_stmt, vala_ccode_node_get_line ((ValaCCodeNode*) cmain));
			vala_ccode_block_add_statement (main_block, (ValaCCodeNode*) main_stmt);
			_vala_ccode_node_unref0 (main_stmt);
		}
		vala_ccode_function_set_block (cmain, main_block);
		vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) cmain);
		_vala_ccode_node_unref0 (main_call);
		_vala_ccode_node_unref0 (main_block);
		_vala_ccode_node_unref0 (cmain);
	}
	_vala_ccode_node_unref0 (cinit);
	_vala_collection_object_unref0 (cparam_map);
	_vala_ccode_node_unref0 (function);
	_vala_code_node_unref0 (creturn_type);
	_vala_ccode_node_unref0 (current_state_switch);
}


static void vala_ccode_method_module_real_generate_parameter (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map) {
	gboolean _tmp8_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (param != NULL);
	g_return_if_fail (decl_space != NULL);
	g_return_if_fail (cparam_map != NULL);
	if (!vala_formal_parameter_get_ellipsis (param)) {
		char* ctypename;
		char* _tmp5_;
		ValaCCodeFormalParameter* _tmp6_;
		ctypename = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) param));
		vala_ccode_base_module_generate_type_declaration ((ValaCCodeBaseModule*) self, vala_variable_get_variable_type ((ValaVariable*) param), decl_space);
		if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) param)))) {
			ValaStruct* st;
			gboolean _tmp0_ = FALSE;
			st = _vala_code_node_ref0 (VALA_STRUCT (vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) param))));
			if (!vala_struct_is_simple_type (st)) {
				_tmp0_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
			} else {
				_tmp0_ = FALSE;
			}
			if (_tmp0_) {
				gboolean _tmp1_ = FALSE;
				if (vala_struct_get_is_immutable (st)) {
					_tmp1_ = !vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) param));
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					char* _tmp2_;
					ctypename = (_tmp2_ = g_strconcat ("const ", ctypename, NULL), _g_free0 (ctypename), _tmp2_);
				}
				if (!vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) param))) {
					char* _tmp3_;
					ctypename = (_tmp3_ = g_strconcat (ctypename, "*", NULL), _g_free0 (ctypename), _tmp3_);
				}
			}
			_vala_code_node_unref0 (st);
		}
		if (vala_formal_parameter_get_direction (param) != VALA_PARAMETER_DIRECTION_IN) {
			char* _tmp4_;
			ctypename = (_tmp4_ = g_strconcat (ctypename, "*", NULL), _g_free0 (ctypename), _tmp4_);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) param, (ValaCCodeNode*) (_tmp6_ = vala_ccode_formal_parameter_new (_tmp5_ = vala_ccode_base_module_get_variable_cname ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) param)), ctypename)));
		_vala_ccode_node_unref0 (_tmp6_);
		_g_free0 (_tmp5_);
		_g_free0 (ctypename);
	} else {
		ValaCCodeFormalParameter* _tmp7_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) param, (ValaCCodeNode*) (_tmp7_ = vala_ccode_formal_parameter_new_with_ellipsis ()));
		_vala_ccode_node_unref0 (_tmp7_);
	}
	vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_formal_parameter_get_cparameter_position (param), vala_formal_parameter_get_ellipsis (param))), VALA_CCODE_FORMAL_PARAMETER (vala_code_node_get_ccodenode ((ValaCodeNode*) param)));
	if (carg_map != NULL) {
		_tmp8_ = !vala_formal_parameter_get_ellipsis (param);
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		ValaCCodeExpression* _tmp9_;
		vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_formal_parameter_get_cparameter_position (param), vala_formal_parameter_get_ellipsis (param))), _tmp9_ = vala_ccode_base_module_get_variable_cexpression ((ValaCCodeBaseModule*) self, vala_symbol_get_name ((ValaSymbol*) param)));
		_vala_ccode_node_unref0 (_tmp9_);
	}
}


void vala_ccode_method_module_generate_parameter (ValaCCodeMethodModule* self, ValaFormalParameter* param, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaMap* carg_map) {
	VALA_CCODE_METHOD_MODULE_GET_CLASS (self)->generate_parameter (self, param, decl_space, cparam_map, carg_map);
}


static void vala_ccode_method_module_real_generate_cparameters (ValaCCodeBaseModule* base, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaMap* cparam_map, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaMap* carg_map, ValaCCodeFunctionCall* vcall, gint direction) {
	ValaCCodeMethodModule * self;
	gint last_pos;
	gint min_pos = 0;
	self = (ValaCCodeMethodModule*) base;
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
	g_return_if_fail (cparam_map != NULL);
	g_return_if_fail (func != NULL);
	if (vala_method_get_closure (m)) {
		ValaBlock* closure_block;
		gint block_id;
		char* _tmp0_;
		char* _tmp1_;
		ValaCCodeFormalParameter* _tmp2_;
		ValaCCodeFormalParameter* instance_param;
		closure_block = _vala_code_node_ref0 (vala_ccode_base_module_get_current_closure_block ((ValaCCodeBaseModule*) self));
		block_id = vala_ccode_base_module_get_block_id ((ValaCCodeBaseModule*) self, closure_block);
		instance_param = (_tmp2_ = vala_ccode_formal_parameter_new (_tmp0_ = g_strdup_printf ("_data%d_", block_id), _tmp1_ = g_strdup_printf ("Block%dData*", block_id)), _g_free0 (_tmp1_), _g_free0 (_tmp0_), _tmp2_);
		vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cinstance_parameter_position (m), FALSE)), instance_param);
		_vala_ccode_node_unref0 (instance_param);
		_vala_code_node_unref0 (closure_block);
	} else {
		gboolean _tmp3_ = FALSE;
		if (VALA_IS_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m))) {
			_tmp3_ = VALA_IS_CREATION_METHOD (m);
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
			ValaClass* cl;
			gboolean _tmp4_ = FALSE;
			cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
			if (!vala_class_get_is_compact (cl)) {
				_tmp4_ = vcall == NULL;
			} else {
				_tmp4_ = FALSE;
			}
			if (_tmp4_) {
				ValaCCodeFormalParameter* _tmp5_;
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cinstance_parameter_position (m), FALSE)), _tmp5_ = vala_ccode_formal_parameter_new ("object_type", "GType"));
				_vala_ccode_node_unref0 (_tmp5_);
			}
			_vala_code_node_unref0 (cl);
		} else {
			gboolean _tmp6_ = FALSE;
			if (vala_method_get_binding (m) == MEMBER_BINDING_INSTANCE) {
				_tmp6_ = TRUE;
			} else {
				gboolean _tmp7_ = FALSE;
				if (VALA_IS_STRUCT (vala_symbol_get_parent_symbol ((ValaSymbol*) m))) {
					_tmp7_ = VALA_IS_CREATION_METHOD (m);
				} else {
					_tmp7_ = FALSE;
				}
				_tmp6_ = _tmp7_;
			}
			if (_tmp6_) {
				ValaTypeSymbol* parent_type;
				ValaDataType* this_type;
				ValaCCodeFormalParameter* instance_param;
				gboolean _tmp12_ = FALSE;
				gboolean _tmp13_ = FALSE;
				parent_type = vala_ccode_method_module_find_parent_type (self, (ValaSymbol*) m);
				this_type = NULL;
				if (VALA_IS_CLASS (parent_type)) {
					ValaDataType* _tmp8_;
					this_type = (_tmp8_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_CLASS (parent_type)), _vala_code_node_unref0 (this_type), _tmp8_);
				} else {
					if (VALA_IS_INTERFACE (parent_type)) {
						ValaDataType* _tmp9_;
						this_type = (_tmp9_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_INTERFACE (parent_type)), _vala_code_node_unref0 (this_type), _tmp9_);
					} else {
						if (VALA_IS_STRUCT (parent_type)) {
							ValaDataType* _tmp10_;
							this_type = (_tmp10_ = (ValaDataType*) vala_struct_value_type_new (VALA_STRUCT (parent_type)), _vala_code_node_unref0 (this_type), _tmp10_);
						} else {
							if (VALA_IS_ENUM (parent_type)) {
								ValaDataType* _tmp11_;
								this_type = (_tmp11_ = (ValaDataType*) vala_enum_value_type_new (VALA_ENUM (parent_type)), _vala_code_node_unref0 (this_type), _tmp11_);
							} else {
								g_assert_not_reached ();
							}
						}
					}
				}
				vala_ccode_base_module_generate_type_declaration ((ValaCCodeBaseModule*) self, this_type, decl_space);
				instance_param = NULL;
				if (vala_method_get_base_interface_method (m) != NULL) {
					_tmp13_ = !vala_method_get_is_abstract (m);
				} else {
					_tmp13_ = FALSE;
				}
				if (_tmp13_) {
					_tmp12_ = !vala_method_get_is_virtual (m);
				} else {
					_tmp12_ = FALSE;
				}
				if (_tmp12_) {
					ValaObjectType* base_type;
					char* _tmp14_;
					ValaCCodeFormalParameter* _tmp15_;
					base_type = vala_object_type_new ((ValaObjectTypeSymbol*) VALA_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_method_get_base_interface_method (m))));
					instance_param = (_tmp15_ = vala_ccode_formal_parameter_new ("base", _tmp14_ = vala_data_type_get_cname ((ValaDataType*) base_type)), _vala_ccode_node_unref0 (instance_param), _tmp15_);
					_g_free0 (_tmp14_);
					_vala_code_node_unref0 (base_type);
				} else {
					if (vala_method_get_overrides (m)) {
						ValaObjectType* base_type;
						char* _tmp16_;
						ValaCCodeFormalParameter* _tmp17_;
						base_type = vala_object_type_new ((ValaObjectTypeSymbol*) VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_method_get_base_method (m))));
						instance_param = (_tmp17_ = vala_ccode_formal_parameter_new ("base", _tmp16_ = vala_data_type_get_cname ((ValaDataType*) base_type)), _vala_ccode_node_unref0 (instance_param), _tmp17_);
						_g_free0 (_tmp16_);
						_vala_code_node_unref0 (base_type);
					} else {
						gboolean _tmp18_ = FALSE;
						if (VALA_IS_STRUCT (vala_symbol_get_parent_symbol ((ValaSymbol*) m))) {
							_tmp18_ = !vala_struct_is_simple_type (VALA_STRUCT (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
						} else {
							_tmp18_ = FALSE;
						}
						if (_tmp18_) {
							char* _tmp19_;
							ValaCCodeFormalParameter* _tmp20_;
							instance_param = (_tmp20_ = vala_ccode_formal_parameter_new ("*self", _tmp19_ = vala_data_type_get_cname (this_type)), _vala_ccode_node_unref0 (instance_param), _tmp20_);
							_g_free0 (_tmp19_);
						} else {
							char* _tmp21_;
							ValaCCodeFormalParameter* _tmp22_;
							instance_param = (_tmp22_ = vala_ccode_formal_parameter_new ("self", _tmp21_ = vala_data_type_get_cname (this_type)), _vala_ccode_node_unref0 (instance_param), _tmp22_);
							_g_free0 (_tmp21_);
						}
					}
				}
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cinstance_parameter_position (m), FALSE)), instance_param);
				_vala_ccode_node_unref0 (instance_param);
				_vala_code_node_unref0 (this_type);
				_vala_code_node_unref0 (parent_type);
			} else {
				if (vala_method_get_binding (m) == MEMBER_BINDING_CLASS) {
					ValaTypeSymbol* parent_type;
					ValaDataType* this_type;
					ValaDataType* _tmp23_;
					char* _tmp24_;
					ValaCCodeFormalParameter* _tmp25_;
					ValaCCodeFormalParameter* class_param;
					parent_type = vala_ccode_method_module_find_parent_type (self, (ValaSymbol*) m);
					this_type = NULL;
					this_type = (_tmp23_ = (ValaDataType*) vala_class_type_new (VALA_CLASS (parent_type)), _vala_code_node_unref0 (this_type), _tmp23_);
					class_param = (_tmp25_ = vala_ccode_formal_parameter_new ("klass", _tmp24_ = vala_data_type_get_cname (this_type)), _g_free0 (_tmp24_), _tmp25_);
					vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cinstance_parameter_position (m), FALSE)), class_param);
					_vala_ccode_node_unref0 (class_param);
					_vala_code_node_unref0 (this_type);
					_vala_code_node_unref0 (parent_type);
				}
			}
		}
	}
	if (vala_ccode_method_module_is_gtypeinstance_creation_method (self, m)) {
		gint type_param_index;
		ValaClass* cl;
		type_param_index = 0;
		cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
		{
			ValaList* _tmp26_;
			ValaIterator* _tmp27_;
			ValaIterator* _type_param_it;
			_type_param_it = (_tmp27_ = vala_iterable_iterator ((ValaIterable*) (_tmp26_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) cl))), _vala_collection_object_unref0 (_tmp26_), _tmp27_);
			while (TRUE) {
				ValaTypeParameter* type_param;
				char* _tmp28_;
				char* _tmp29_;
				ValaCCodeFormalParameter* _tmp30_;
				char* _tmp31_;
				char* _tmp32_;
				ValaCCodeFormalParameter* _tmp33_;
				char* _tmp34_;
				char* _tmp35_;
				ValaCCodeFormalParameter* _tmp36_;
				if (!vala_iterator_next (_type_param_it)) {
					break;
				}
				type_param = (ValaTypeParameter*) vala_iterator_get (_type_param_it);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.01, FALSE)), _tmp30_ = vala_ccode_formal_parameter_new (_tmp29_ = g_strdup_printf ("%s_type", _tmp28_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GType"));
				_vala_ccode_node_unref0 (_tmp30_);
				_g_free0 (_tmp29_);
				_g_free0 (_tmp28_);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.02, FALSE)), _tmp33_ = vala_ccode_formal_parameter_new (_tmp32_ = g_strdup_printf ("%s_dup_func", _tmp31_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GBoxedCopyFunc"));
				_vala_ccode_node_unref0 (_tmp33_);
				_g_free0 (_tmp32_);
				_g_free0 (_tmp31_);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.03, FALSE)), _tmp36_ = vala_ccode_formal_parameter_new (_tmp35_ = g_strdup_printf ("%s_destroy_func", _tmp34_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GDestroyNotify"));
				_vala_ccode_node_unref0 (_tmp36_);
				_g_free0 (_tmp35_);
				_g_free0 (_tmp34_);
				if (carg_map != NULL) {
					char* _tmp37_;
					char* _tmp38_;
					ValaCCodeIdentifier* _tmp39_;
					char* _tmp40_;
					char* _tmp41_;
					ValaCCodeIdentifier* _tmp42_;
					char* _tmp43_;
					char* _tmp44_;
					ValaCCodeIdentifier* _tmp45_;
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.01, FALSE)), (ValaCCodeExpression*) (_tmp39_ = vala_ccode_identifier_new (_tmp38_ = g_strdup_printf ("%s_type", _tmp37_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp39_);
					_g_free0 (_tmp38_);
					_g_free0 (_tmp37_);
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.02, FALSE)), (ValaCCodeExpression*) (_tmp42_ = vala_ccode_identifier_new (_tmp41_ = g_strdup_printf ("%s_dup_func", _tmp40_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp42_);
					_g_free0 (_tmp41_);
					_g_free0 (_tmp40_);
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.03, FALSE)), (ValaCCodeExpression*) (_tmp45_ = vala_ccode_identifier_new (_tmp44_ = g_strdup_printf ("%s_destroy_func", _tmp43_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp45_);
					_g_free0 (_tmp44_);
					_g_free0 (_tmp43_);
				}
				type_param_index++;
				_vala_code_node_unref0 (type_param);
			}
			_vala_collection_object_unref0 (_type_param_it);
		}
		_vala_code_node_unref0 (cl);
	} else {
		gint type_param_index;
		type_param_index = 0;
		{
			ValaList* _tmp46_;
			ValaIterator* _tmp47_;
			ValaIterator* _type_param_it;
			_type_param_it = (_tmp47_ = vala_iterable_iterator ((ValaIterable*) (_tmp46_ = vala_method_get_type_parameters (m))), _vala_collection_object_unref0 (_tmp46_), _tmp47_);
			while (TRUE) {
				ValaTypeParameter* type_param;
				char* _tmp48_;
				char* _tmp49_;
				ValaCCodeFormalParameter* _tmp50_;
				char* _tmp51_;
				char* _tmp52_;
				ValaCCodeFormalParameter* _tmp53_;
				char* _tmp54_;
				char* _tmp55_;
				ValaCCodeFormalParameter* _tmp56_;
				if (!vala_iterator_next (_type_param_it)) {
					break;
				}
				type_param = (ValaTypeParameter*) vala_iterator_get (_type_param_it);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.01, FALSE)), _tmp50_ = vala_ccode_formal_parameter_new (_tmp49_ = g_strdup_printf ("%s_type", _tmp48_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GType"));
				_vala_ccode_node_unref0 (_tmp50_);
				_g_free0 (_tmp49_);
				_g_free0 (_tmp48_);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.02, FALSE)), _tmp53_ = vala_ccode_formal_parameter_new (_tmp52_ = g_strdup_printf ("%s_dup_func", _tmp51_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GBoxedCopyFunc"));
				_vala_ccode_node_unref0 (_tmp53_);
				_g_free0 (_tmp52_);
				_g_free0 (_tmp51_);
				vala_map_set (cparam_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.03, FALSE)), _tmp56_ = vala_ccode_formal_parameter_new (_tmp55_ = g_strdup_printf ("%s_destroy_func", _tmp54_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)), "GDestroyNotify"));
				_vala_ccode_node_unref0 (_tmp56_);
				_g_free0 (_tmp55_);
				_g_free0 (_tmp54_);
				if (carg_map != NULL) {
					char* _tmp57_;
					char* _tmp58_;
					ValaCCodeIdentifier* _tmp59_;
					char* _tmp60_;
					char* _tmp61_;
					ValaCCodeIdentifier* _tmp62_;
					char* _tmp63_;
					char* _tmp64_;
					ValaCCodeIdentifier* _tmp65_;
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.01, FALSE)), (ValaCCodeExpression*) (_tmp59_ = vala_ccode_identifier_new (_tmp58_ = g_strdup_printf ("%s_type", _tmp57_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp59_);
					_g_free0 (_tmp58_);
					_g_free0 (_tmp57_);
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.02, FALSE)), (ValaCCodeExpression*) (_tmp62_ = vala_ccode_identifier_new (_tmp61_ = g_strdup_printf ("%s_dup_func", _tmp60_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp62_);
					_g_free0 (_tmp61_);
					_g_free0 (_tmp60_);
					vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, (0.1 * type_param_index) + 0.03, FALSE)), (ValaCCodeExpression*) (_tmp65_ = vala_ccode_identifier_new (_tmp64_ = g_strdup_printf ("%s_destroy_func", _tmp63_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) type_param), -1)))));
					_vala_ccode_node_unref0 (_tmp65_);
					_g_free0 (_tmp64_);
					_g_free0 (_tmp63_);
				}
				type_param_index++;
				_vala_code_node_unref0 (type_param);
			}
			_vala_collection_object_unref0 (_type_param_it);
		}
	}
	{
		ValaList* _tmp66_;
		ValaIterator* _tmp67_;
		ValaIterator* _param_it;
		_param_it = (_tmp67_ = vala_iterable_iterator ((ValaIterable*) (_tmp66_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp66_), _tmp67_);
		while (TRUE) {
			ValaFormalParameter* param;
			if (!vala_iterator_next (_param_it)) {
				break;
			}
			param = (ValaFormalParameter*) vala_iterator_get (_param_it);
			if (vala_formal_parameter_get_direction (param) != VALA_PARAMETER_DIRECTION_OUT) {
				if ((direction & 1) == 0) {
					_vala_code_node_unref0 (param);
					continue;
				}
			} else {
				if ((direction & 2) == 0) {
					_vala_code_node_unref0 (param);
					continue;
				}
			}
			vala_ccode_method_module_generate_parameter (self, param, decl_space, cparam_map, carg_map);
			_vala_code_node_unref0 (param);
		}
		_vala_collection_object_unref0 (_param_it);
	}
	if ((direction & 2) != 0) {
		vala_ccode_method_module_generate_method_result_declaration (self, m, decl_space, func, cparam_map, carg_map);
	}
	last_pos = -1;
	while (TRUE) {
		ValaCCodeFormalParameter* _tmp72_;
		min_pos = -1;
		{
			ValaSet* _tmp68_;
			ValaIterator* _tmp69_;
			ValaIterator* _pos_it;
			_pos_it = (_tmp69_ = vala_iterable_iterator ((ValaIterable*) (_tmp68_ = vala_map_get_keys (cparam_map))), _vala_collection_object_unref0 (_tmp68_), _tmp69_);
			while (TRUE) {
				gint pos;
				gboolean _tmp70_ = FALSE;
				if (!vala_iterator_next (_pos_it)) {
					break;
				}
				pos = GPOINTER_TO_INT (vala_iterator_get (_pos_it));
				if (pos > last_pos) {
					gboolean _tmp71_ = FALSE;
					if (min_pos == (-1)) {
						_tmp71_ = TRUE;
					} else {
						_tmp71_ = pos < min_pos;
					}
					_tmp70_ = _tmp71_;
				} else {
					_tmp70_ = FALSE;
				}
				if (_tmp70_) {
					min_pos = pos;
				}
			}
			_vala_collection_object_unref0 (_pos_it);
		}
		if (min_pos == (-1)) {
			break;
		}
		vala_ccode_function_add_parameter (func, _tmp72_ = (ValaCCodeFormalParameter*) vala_map_get (cparam_map, GINT_TO_POINTER (min_pos)));
		_vala_ccode_node_unref0 (_tmp72_);
		if (vdeclarator != NULL) {
			ValaCCodeFormalParameter* _tmp73_;
			vala_ccode_function_declarator_add_parameter (vdeclarator, _tmp73_ = (ValaCCodeFormalParameter*) vala_map_get (cparam_map, GINT_TO_POINTER (min_pos)));
			_vala_ccode_node_unref0 (_tmp73_);
		}
		if (vcall != NULL) {
			ValaCCodeExpression* arg;
			arg = (ValaCCodeExpression*) vala_map_get (carg_map, GINT_TO_POINTER (min_pos));
			if (arg != NULL) {
				vala_ccode_function_call_add_argument (vcall, arg);
			}
			_vala_ccode_node_unref0 (arg);
		}
		last_pos = min_pos;
	}
}


static glong string_get_length (const char* self) {
	glong result;
	g_return_val_if_fail (self != NULL, 0L);
	result = g_utf8_strlen (self, (gssize) (-1));
	return result;
}


static char* string_substring (const char* self, glong offset, glong len) {
	char* result = NULL;
	glong string_length;
	const char* start;
	g_return_val_if_fail (self != NULL, NULL);
	string_length = string_get_length (self);
	if (offset < 0) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= 0, NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < 0) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	start = g_utf8_offset_to_pointer (self, offset);
	result = g_strndup (start, ((gchar*) g_utf8_offset_to_pointer (start, len)) - ((gchar*) start));
	return result;
}


void vala_ccode_method_module_generate_vfunc (ValaCCodeMethodModule* self, ValaMethod* m, ValaDataType* return_type, ValaMap* cparam_map, ValaMap* carg_map, const char* suffix, gint direction) {
	char* cname;
	gboolean _tmp0_ = FALSE;
	char* _tmp2_;
	ValaCCodeFunction* _tmp3_;
	ValaCCodeFunction* vfunc;
	ValaCCodeBlock* vblock;
	ValaCCodeFunctionCall* vcast;
	ValaCCodeIdentifier* _tmp14_;
	char* _tmp15_;
	gboolean _tmp16_ = FALSE;
	char* _tmp18_;
	ValaCCodeMemberAccess* _tmp19_;
	ValaCCodeFunctionCall* _tmp20_;
	ValaCCodeFunctionCall* vcall;
	ValaCCodeIdentifier* _tmp21_;
	ValaCCodeStatement* cstmt;
	gboolean _tmp22_ = FALSE;
	ValaList* _tmp32_;
	gboolean _tmp33_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (return_type != NULL);
	g_return_if_fail (cparam_map != NULL);
	g_return_if_fail (carg_map != NULL);
	g_return_if_fail (suffix != NULL);
	cname = vala_method_get_cname (m);
	if (_vala_strcmp0 (suffix, "_finish") == 0) {
		_tmp0_ = g_str_has_suffix (cname, "_async");
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		char* _tmp1_;
		cname = (_tmp1_ = string_substring (cname, (glong) 0, string_get_length (cname) - string_get_length ("_async")), _g_free0 (cname), _tmp1_);
	}
	vfunc = (_tmp3_ = vala_ccode_function_new (_tmp2_ = g_strconcat (cname, suffix, NULL), "void"), _g_free0 (_tmp2_), _tmp3_);
	if (((ValaCCodeBaseModule*) self)->function != NULL) {
		vala_ccode_node_set_line ((ValaCCodeNode*) vfunc, vala_ccode_node_get_line ((ValaCCodeNode*) ((ValaCCodeBaseModule*) self)->function));
	}
	vblock = vala_ccode_block_new ();
	{
		ValaList* _tmp4_;
		ValaIterator* _tmp5_;
		ValaIterator* _precondition_it;
		_precondition_it = (_tmp5_ = vala_iterable_iterator ((ValaIterable*) (_tmp4_ = vala_method_get_preconditions (m))), _vala_collection_object_unref0 (_tmp4_), _tmp5_);
		while (TRUE) {
			ValaExpression* precondition;
			ValaCCodeStatement* check_stmt;
			if (!vala_iterator_next (_precondition_it)) {
				break;
			}
			precondition = (ValaExpression*) vala_iterator_get (_precondition_it);
			check_stmt = vala_ccode_method_module_create_precondition_statement (self, (ValaCodeNode*) m, return_type, precondition);
			if (check_stmt != NULL) {
				vala_ccode_block_add_statement (vblock, (ValaCCodeNode*) check_stmt);
			}
			_vala_ccode_node_unref0 (check_stmt);
			_vala_code_node_unref0 (precondition);
		}
		_vala_collection_object_unref0 (_precondition_it);
	}
	vcast = NULL;
	if (VALA_IS_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) m))) {
		ValaInterface* iface;
		char* _tmp6_;
		char* _tmp7_;
		ValaCCodeIdentifier* _tmp8_;
		ValaCCodeFunctionCall* _tmp9_;
		iface = _vala_code_node_ref0 (VALA_INTERFACE (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
		vcast = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new (_tmp7_ = g_strdup_printf ("%s_GET_INTERFACE", _tmp6_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) iface, NULL))))), _vala_ccode_node_unref0 (vcast), _tmp9_);
		_vala_ccode_node_unref0 (_tmp8_);
		_g_free0 (_tmp7_);
		_g_free0 (_tmp6_);
		_vala_code_node_unref0 (iface);
	} else {
		ValaClass* cl;
		char* _tmp10_;
		char* _tmp11_;
		ValaCCodeIdentifier* _tmp12_;
		ValaCCodeFunctionCall* _tmp13_;
		cl = _vala_code_node_ref0 (VALA_CLASS (vala_symbol_get_parent_symbol ((ValaSymbol*) m)));
		vcast = (_tmp13_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new (_tmp11_ = g_strdup_printf ("%s_GET_CLASS", _tmp10_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) cl, NULL))))), _vala_ccode_node_unref0 (vcast), _tmp13_);
		_vala_ccode_node_unref0 (_tmp12_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp10_);
		_vala_code_node_unref0 (cl);
	}
	vala_ccode_function_call_add_argument (vcast, (ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("self")));
	_vala_ccode_node_unref0 (_tmp14_);
	cname = (_tmp15_ = g_strdup (vala_method_get_vfunc_name (m)), _g_free0 (cname), _tmp15_);
	if (_vala_strcmp0 (suffix, "_finish") == 0) {
		_tmp16_ = g_str_has_suffix (cname, "_async");
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		char* _tmp17_;
		cname = (_tmp17_ = string_substring (cname, (glong) 0, string_get_length (cname) - string_get_length ("_async")), _g_free0 (cname), _tmp17_);
	}
	vcall = (_tmp20_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) vcast, _tmp18_ = g_strconcat (cname, suffix, NULL)))), _vala_ccode_node_unref0 (_tmp19_), _g_free0 (_tmp18_), _tmp20_);
	vala_map_set (carg_map, GINT_TO_POINTER (vala_ccode_base_module_get_param_pos ((ValaCCodeBaseModule*) self, vala_method_get_cinstance_parameter_position (m), FALSE)), (ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new ("self")));
	_vala_ccode_node_unref0 (_tmp21_);
	vala_ccode_base_module_generate_cparameters ((ValaCCodeBaseModule*) self, m, ((ValaCCodeBaseModule*) self)->source_declarations, cparam_map, vfunc, NULL, carg_map, vcall, direction);
	cstmt = NULL;
	if (VALA_IS_VOID_TYPE (return_type)) {
		_tmp22_ = TRUE;
	} else {
		_tmp22_ = vala_data_type_is_real_non_null_struct_type (return_type);
	}
	if (_tmp22_) {
		ValaCCodeStatement* _tmp23_;
		cstmt = (_tmp23_ = (ValaCCodeStatement*) vala_ccode_expression_statement_new ((ValaCCodeExpression*) vcall), _vala_ccode_node_unref0 (cstmt), _tmp23_);
	} else {
		ValaList* _tmp24_;
		gboolean _tmp25_;
		if ((_tmp25_ = vala_collection_get_size ((ValaCollection*) (_tmp24_ = vala_method_get_postconditions (m))) == 0, _vala_collection_object_unref0 (_tmp24_), _tmp25_)) {
			ValaCCodeStatement* _tmp26_;
			cstmt = (_tmp26_ = (ValaCCodeStatement*) vala_ccode_return_statement_new ((ValaCCodeExpression*) vcall), _vala_ccode_node_unref0 (cstmt), _tmp26_);
		} else {
			char* _tmp27_;
			char* _tmp28_;
			ValaCCodeDeclaration* _tmp29_;
			ValaCCodeDeclaration* _cdecl_;
			ValaCCodeVariableDeclarator* _tmp30_;
			ValaCCodeStatement* _tmp31_;
			_cdecl_ = (_tmp29_ = vala_ccode_declaration_new (_tmp28_ = vala_ccode_method_module_get_creturn_type (self, m, _tmp27_ = vala_data_type_get_cname (return_type))), _g_free0 (_tmp28_), _g_free0 (_tmp27_), _tmp29_);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp30_ = vala_ccode_variable_declarator_new ("result", (ValaCCodeExpression*) vcall, NULL)));
			_vala_ccode_node_unref0 (_tmp30_);
			cstmt = (_tmp31_ = _vala_ccode_node_ref0 ((ValaCCodeStatement*) _cdecl_), _vala_ccode_node_unref0 (cstmt), _tmp31_);
			_vala_ccode_node_unref0 (_cdecl_);
		}
	}
	vala_ccode_node_set_line ((ValaCCodeNode*) cstmt, vala_ccode_node_get_line ((ValaCCodeNode*) vfunc));
	vala_ccode_block_add_statement (vblock, (ValaCCodeNode*) cstmt);
	if ((_tmp33_ = vala_collection_get_size ((ValaCollection*) (_tmp32_ = vala_method_get_postconditions (m))) > 0, _vala_collection_object_unref0 (_tmp32_), _tmp33_)) {
		{
			ValaList* _tmp34_;
			ValaIterator* _tmp35_;
			ValaIterator* _postcondition_it;
			_postcondition_it = (_tmp35_ = vala_iterable_iterator ((ValaIterable*) (_tmp34_ = vala_method_get_postconditions (m))), _vala_collection_object_unref0 (_tmp34_), _tmp35_);
			while (TRUE) {
				ValaExpression* postcondition;
				ValaCCodeStatement* _tmp36_;
				if (!vala_iterator_next (_postcondition_it)) {
					break;
				}
				postcondition = (ValaExpression*) vala_iterator_get (_postcondition_it);
				vala_ccode_block_add_statement (vblock, (ValaCCodeNode*) (_tmp36_ = vala_ccode_base_module_create_postcondition_statement ((ValaCCodeBaseModule*) self, postcondition)));
				_vala_ccode_node_unref0 (_tmp36_);
				_vala_code_node_unref0 (postcondition);
			}
			_vala_collection_object_unref0 (_postcondition_it);
		}
		if (!VALA_IS_VOID_TYPE (return_type)) {
			ValaCCodeIdentifier* _tmp37_;
			ValaCCodeReturnStatement* _tmp38_;
			ValaCCodeReturnStatement* cret_stmt;
			cret_stmt = (_tmp38_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp37_ = vala_ccode_identifier_new ("result"))), _vala_ccode_node_unref0 (_tmp37_), _tmp38_);
			vala_ccode_node_set_line ((ValaCCodeNode*) cret_stmt, vala_ccode_node_get_line ((ValaCCodeNode*) vfunc));
			vala_ccode_block_add_statement (vblock, (ValaCCodeNode*) cret_stmt);
			_vala_ccode_node_unref0 (cret_stmt);
		}
	}
	vala_ccode_function_set_block (vfunc, vblock);
	vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) vfunc);
	_vala_ccode_node_unref0 (cstmt);
	_vala_ccode_node_unref0 (vcall);
	_vala_ccode_node_unref0 (vcast);
	_vala_ccode_node_unref0 (vblock);
	_vala_ccode_node_unref0 (vfunc);
	_g_free0 (cname);
}


static ValaCCodeStatement* vala_ccode_method_module_create_method_type_check_statement (ValaCCodeMethodModule* self, ValaMethod* m, ValaDataType* return_type, ValaTypeSymbol* t, gboolean non_null, const char* var_name) {
	ValaCCodeStatement* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (m != NULL, NULL);
	g_return_val_if_fail (return_type != NULL, NULL);
	g_return_val_if_fail (t != NULL, NULL);
	g_return_val_if_fail (var_name != NULL, NULL);
	if (vala_method_get_coroutine (m)) {
		result = NULL;
		return result;
	} else {
		result = vala_ccode_base_module_create_type_check_statement ((ValaCCodeBaseModule*) self, (ValaCodeNode*) m, return_type, t, non_null, var_name);
		return result;
	}
}


static ValaCCodeStatement* vala_ccode_method_module_create_precondition_statement (ValaCCodeMethodModule* self, ValaCodeNode* method_node, ValaDataType* ret_type, ValaExpression* precondition) {
	ValaCCodeStatement* result = NULL;
	ValaCCodeFunctionCall* ccheck;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (method_node != NULL, NULL);
	g_return_val_if_fail (ret_type != NULL, NULL);
	g_return_val_if_fail (precondition != NULL, NULL);
	ccheck = vala_ccode_function_call_new (NULL);
	vala_ccode_function_call_add_argument (ccheck, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) precondition)));
	if (VALA_IS_CREATION_METHOD (method_node)) {
		ValaCCodeIdentifier* _tmp0_;
		ValaCCodeConstant* _tmp1_;
		vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("g_return_val_if_fail")));
		_vala_ccode_node_unref0 (_tmp0_);
		vala_ccode_function_call_add_argument (ccheck, (ValaCCodeExpression*) (_tmp1_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp1_);
	} else {
		gboolean _tmp2_ = FALSE;
		if (VALA_IS_METHOD (method_node)) {
			_tmp2_ = vala_method_get_coroutine (VALA_METHOD (method_node));
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			ValaCCodeIdentifier* _tmp3_;
			ValaCCodeConstant* _tmp4_;
			vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("g_return_val_if_fail")));
			_vala_ccode_node_unref0 (_tmp3_);
			vala_ccode_function_call_add_argument (ccheck, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("FALSE")));
			_vala_ccode_node_unref0 (_tmp4_);
		} else {
			if (VALA_IS_VOID_TYPE (ret_type)) {
				ValaCCodeIdentifier* _tmp5_;
				vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new ("g_return_if_fail")));
				_vala_ccode_node_unref0 (_tmp5_);
			} else {
				ValaCCodeIdentifier* _tmp6_;
				ValaCCodeExpression* cdefault;
				vala_ccode_function_call_set_call (ccheck, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("g_return_val_if_fail")));
				_vala_ccode_node_unref0 (_tmp6_);
				cdefault = vala_ccode_base_module_default_value_for_type ((ValaCCodeBaseModule*) self, ret_type, FALSE);
				if (cdefault != NULL) {
					vala_ccode_function_call_add_argument (ccheck, cdefault);
				} else {
					result = NULL;
					_vala_ccode_node_unref0 (cdefault);
					_vala_ccode_node_unref0 (ccheck);
					return result;
				}
				_vala_ccode_node_unref0 (cdefault);
			}
		}
	}
	result = (ValaCCodeStatement*) vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccheck);
	_vala_ccode_node_unref0 (ccheck);
	return result;
}


static ValaTypeSymbol* vala_ccode_method_module_find_parent_type (ValaCCodeMethodModule* self, ValaSymbol* sym) {
	ValaTypeSymbol* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (sym != NULL, NULL);
	while (TRUE) {
		if (!(sym != NULL)) {
			break;
		}
		if (VALA_IS_TYPESYMBOL (sym)) {
			result = _vala_code_node_ref0 (VALA_TYPESYMBOL (sym));
			return result;
		}
		sym = vala_symbol_get_parent_symbol (sym);
	}
	result = NULL;
	return result;
}


static void vala_ccode_method_module_add_object_creation (ValaCCodeMethodModule* self, ValaCCodeFragment* ccode, gboolean has_params) {
	ValaClass* cl;
	gboolean _tmp0_ = FALSE;
	ValaCCodeVariableDeclarator* _cdecl_;
	ValaCCodeIdentifier* _tmp1_;
	ValaCCodeFunctionCall* _tmp2_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeIdentifier* _tmp3_;
	char* _tmp8_;
	char* _tmp9_;
	ValaCCodeDeclaration* _tmp10_;
	ValaCCodeDeclaration* cdeclaration;
	g_return_if_fail (self != NULL);
	g_return_if_fail (ccode != NULL);
	cl = _vala_code_node_ref0 (VALA_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self)));
	if (!has_params) {
		_tmp0_ = VALA_TYPESYMBOL (vala_class_get_base_class (cl)) != ((ValaCCodeBaseModule*) self)->gobject_type;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
	}
	_cdecl_ = vala_ccode_variable_declarator_new ("self", NULL, NULL);
	ccall = (_tmp2_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp1_ = vala_ccode_identifier_new ("g_object_newv"))), _vala_ccode_node_unref0 (_tmp1_), _tmp2_);
	vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("object_type")));
	_vala_ccode_node_unref0 (_tmp3_);
	if (has_params) {
		ValaCCodeConstant* _tmp4_;
		ValaCCodeConstant* _tmp5_;
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("__params_it - __params")));
		_vala_ccode_node_unref0 (_tmp4_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_constant_new ("__params")));
		_vala_ccode_node_unref0 (_tmp5_);
	} else {
		ValaCCodeConstant* _tmp6_;
		ValaCCodeConstant* _tmp7_;
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp6_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp7_);
	}
	vala_ccode_variable_declarator_set_initializer (_cdecl_, (ValaCCodeExpression*) ccall);
	cdeclaration = (_tmp10_ = vala_ccode_declaration_new (_tmp9_ = g_strdup_printf ("%s *", _tmp8_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE))), _g_free0 (_tmp9_), _g_free0 (_tmp8_), _tmp10_);
	vala_ccode_declaration_add_declarator (cdeclaration, (ValaCCodeDeclarator*) _cdecl_);
	vala_ccode_fragment_append (ccode, (ValaCCodeNode*) cdeclaration);
	_vala_ccode_node_unref0 (cdeclaration);
	_vala_ccode_node_unref0 (ccall);
	_vala_ccode_node_unref0 (_cdecl_);
	_vala_code_node_unref0 (cl);
}


static void vala_ccode_method_module_real_visit_creation_method (ValaCodeVisitor* base, ValaCreationMethod* m) {
	ValaCCodeMethodModule * self;
	gboolean visible;
	ValaCCodeFunction* _tmp0_;
	ValaDataType* creturn_type;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp12_ = FALSE;
	gboolean _tmp13_ = FALSE;
	gboolean _tmp14_ = FALSE;
	gboolean _tmp15_ = FALSE;
	self = (ValaCCodeMethodModule*) base;
	g_return_if_fail (m != NULL);
	visible = !vala_symbol_is_private_symbol ((ValaSymbol*) m);
	vala_code_visitor_visit_method ((ValaCodeVisitor*) self, (ValaMethod*) m);
	((ValaCCodeBaseModule*) self)->function = (_tmp0_ = _vala_ccode_node_ref0 (VALA_CCODE_FUNCTION (vala_code_node_get_ccodenode ((ValaCodeNode*) m))), _vala_ccode_node_unref0 (((ValaCCodeBaseModule*) self)->function), _tmp0_);
	creturn_type = NULL;
	if (VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self))) {
		ValaDataType* _tmp1_;
		creturn_type = (_tmp1_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)), _vala_code_node_unref0 (creturn_type), _tmp1_);
	} else {
		ValaDataType* _tmp2_;
		creturn_type = (_tmp2_ = (ValaDataType*) vala_void_type_new (NULL), _vala_code_node_unref0 (creturn_type), _tmp2_);
	}
	if (VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self))) {
		_tmp4_ = !vala_class_get_is_compact (vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self));
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		_tmp3_ = !vala_class_get_is_abstract (vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self));
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		char* _tmp5_;
		ValaCCodeFunction* _tmp6_;
		ValaCCodeFunction* vfunc;
		ValaHashMap* cparam_map;
		ValaHashMap* carg_map;
		ValaCCodeBlock* vblock;
		char* _tmp7_;
		ValaCCodeIdentifier* _tmp8_;
		ValaCCodeFunctionCall* _tmp9_;
		ValaCCodeFunctionCall* vcall;
		char* _tmp10_;
		ValaCCodeIdentifier* _tmp11_;
		ValaCCodeStatement* cstmt;
		vfunc = (_tmp6_ = vala_ccode_function_new (_tmp5_ = vala_method_get_cname ((ValaMethod*) m), "void"), _g_free0 (_tmp5_), _tmp6_);
		vala_ccode_node_set_line ((ValaCCodeNode*) vfunc, vala_ccode_node_get_line ((ValaCCodeNode*) ((ValaCCodeBaseModule*) self)->function));
		cparam_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_FORMAL_PARAMETER, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
		carg_map = vala_hash_map_new (G_TYPE_INT, NULL, NULL, VALA_TYPE_CCODE_EXPRESSION, (GBoxedCopyFunc) vala_ccode_node_ref, vala_ccode_node_unref, g_direct_hash, g_direct_equal, g_direct_equal);
		vblock = vala_ccode_block_new ();
		vcall = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new (_tmp7_ = vala_method_get_real_cname ((ValaMethod*) m)))), _vala_ccode_node_unref0 (_tmp8_), _g_free0 (_tmp7_), _tmp9_);
		vala_ccode_function_call_add_argument (vcall, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new (_tmp10_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))));
		_vala_ccode_node_unref0 (_tmp11_);
		_g_free0 (_tmp10_);
		vala_ccode_base_module_generate_cparameters ((ValaCCodeBaseModule*) self, (ValaMethod*) m, ((ValaCCodeBaseModule*) self)->source_declarations, (ValaMap*) cparam_map, vfunc, NULL, (ValaMap*) carg_map, vcall, 3);
		cstmt = (ValaCCodeStatement*) vala_ccode_return_statement_new ((ValaCCodeExpression*) vcall);
		vala_ccode_node_set_line ((ValaCCodeNode*) cstmt, vala_ccode_node_get_line ((ValaCCodeNode*) vfunc));
		vala_ccode_block_add_statement (vblock, (ValaCCodeNode*) cstmt);
		if (!visible) {
			vala_ccode_function_set_modifiers (vfunc, vala_ccode_function_get_modifiers (vfunc) | VALA_CCODE_MODIFIERS_STATIC);
		}
		vala_ccode_function_set_block (vfunc, vblock);
		vala_ccode_fragment_append (((ValaCCodeBaseModule*) self)->source_type_member_definition, (ValaCCodeNode*) vfunc);
		_vala_ccode_node_unref0 (cstmt);
		_vala_ccode_node_unref0 (vcall);
		_vala_ccode_node_unref0 (vblock);
		_vala_collection_object_unref0 (carg_map);
		_vala_collection_object_unref0 (cparam_map);
		_vala_ccode_node_unref0 (vfunc);
	}
	if (VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self))) {
		_tmp15_ = ((ValaCCodeBaseModule*) self)->gobject_type != NULL;
	} else {
		_tmp15_ = FALSE;
	}
	if (_tmp15_) {
		_tmp14_ = vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self), ((ValaCCodeBaseModule*) self)->gobject_type);
	} else {
		_tmp14_ = FALSE;
	}
	if (_tmp14_) {
		ValaList* _tmp16_;
		_tmp13_ = vala_collection_get_size ((ValaCollection*) (_tmp16_ = vala_object_type_symbol_get_type_parameters ((ValaObjectTypeSymbol*) vala_ccode_base_module_get_current_class ((ValaCCodeBaseModule*) self)))) > 0;
		_vala_collection_object_unref0 (_tmp16_);
	} else {
		_tmp13_ = FALSE;
	}
	if (_tmp13_) {
		_tmp12_ = !vala_creation_method_get_chain_up (VALA_CREATION_METHOD (m));
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		ValaCCodeIdentifier* _tmp17_;
		ValaCCodeIdentifier* _tmp18_;
		ValaCCodeBinaryExpression* _tmp19_;
		ValaCCodeBinaryExpression* ccond;
		ValaCCodeBlock* cdofreeparam;
		ValaCCodeIdentifier* _tmp20_;
		ValaCCodeUnaryExpression* _tmp21_;
		ValaCCodeExpressionStatement* _tmp22_;
		ValaCCodeIdentifier* _tmp23_;
		ValaCCodeFunctionCall* _tmp24_;
		ValaCCodeFunctionCall* cunsetcall;
		ValaCCodeIdentifier* _tmp25_;
		ValaCCodeMemberAccess* _tmp26_;
		ValaCCodeUnaryExpression* _tmp27_;
		ValaCCodeExpressionStatement* _tmp28_;
		ValaCCodeWhileStatement* _tmp29_;
		ValaCCodeIdentifier* _tmp30_;
		ValaCCodeFunctionCall* _tmp31_;
		ValaCCodeFunctionCall* cfreeparams;
		ValaCCodeIdentifier* _tmp32_;
		ValaCCodeExpressionStatement* _tmp33_;
		ccond = (_tmp19_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_GREATER_THAN, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_identifier_new ("__params_it")), (ValaCCodeExpression*) (_tmp18_ = vala_ccode_identifier_new ("__params"))), _vala_ccode_node_unref0 (_tmp18_), _vala_ccode_node_unref0 (_tmp17_), _tmp19_);
		cdofreeparam = vala_ccode_block_new ();
		vala_ccode_block_add_statement (cdofreeparam, (ValaCCodeNode*) (_tmp22_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp21_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_PREFIX_DECREMENT, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_identifier_new ("__params_it")))))));
		_vala_ccode_node_unref0 (_tmp22_);
		_vala_ccode_node_unref0 (_tmp21_);
		_vala_ccode_node_unref0 (_tmp20_);
		cunsetcall = (_tmp24_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new ("g_value_unset"))), _vala_ccode_node_unref0 (_tmp23_), _tmp24_);
		vala_ccode_function_call_add_argument (cunsetcall, (ValaCCodeExpression*) (_tmp27_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp26_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp25_ = vala_ccode_identifier_new ("__params_it")), "value")))));
		_vala_ccode_node_unref0 (_tmp27_);
		_vala_ccode_node_unref0 (_tmp26_);
		_vala_ccode_node_unref0 (_tmp25_);
		vala_ccode_block_add_statement (cdofreeparam, (ValaCCodeNode*) (_tmp28_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cunsetcall)));
		_vala_ccode_node_unref0 (_tmp28_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (((ValaCCodeBaseModule*) self)->function), (ValaCCodeNode*) (_tmp29_ = vala_ccode_while_statement_new ((ValaCCodeExpression*) ccond, (ValaCCodeStatement*) cdofreeparam)));
		_vala_ccode_node_unref0 (_tmp29_);
		cfreeparams = (_tmp31_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp30_ = vala_ccode_identifier_new ("g_free"))), _vala_ccode_node_unref0 (_tmp30_), _tmp31_);
		vala_ccode_function_call_add_argument (cfreeparams, (ValaCCodeExpression*) (_tmp32_ = vala_ccode_identifier_new ("__params")));
		_vala_ccode_node_unref0 (_tmp32_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (((ValaCCodeBaseModule*) self)->function), (ValaCCodeNode*) (_tmp33_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) cfreeparams)));
		_vala_ccode_node_unref0 (_tmp33_);
		_vala_ccode_node_unref0 (cfreeparams);
		_vala_ccode_node_unref0 (cunsetcall);
		_vala_ccode_node_unref0 (cdofreeparam);
		_vala_ccode_node_unref0 (ccond);
	}
	if (VALA_IS_CLASS (vala_ccode_base_module_get_current_type_symbol ((ValaCCodeBaseModule*) self))) {
		ValaCCodeExpression* cresult;
		char* _tmp34_;
		gboolean _tmp35_;
		ValaCCodeReturnStatement* creturn;
		cresult = (ValaCCodeExpression*) vala_ccode_identifier_new ("self");
		if ((_tmp35_ = (_tmp34_ = vala_ccode_base_module_get_custom_creturn_type ((ValaCCodeBaseModule*) self, (ValaMethod*) m)) != NULL, _g_free0 (_tmp34_), _tmp35_)) {
			char* _tmp36_;
			ValaCCodeExpression* _tmp37_;
			cresult = (_tmp37_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cresult, _tmp36_ = vala_ccode_base_module_get_custom_creturn_type ((ValaCCodeBaseModule*) self, (ValaMethod*) m)), _vala_ccode_node_unref0 (cresult), _tmp37_);
			_g_free0 (_tmp36_);
		}
		creturn = vala_ccode_return_statement_new (NULL);
		vala_ccode_return_statement_set_return_expression (creturn, cresult);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (((ValaCCodeBaseModule*) self)->function), (ValaCCodeNode*) creturn);
		_vala_ccode_node_unref0 (creturn);
		_vala_ccode_node_unref0 (cresult);
	}
	_vala_code_node_unref0 (creturn_type);
}


ValaCCodeMethodModule* vala_ccode_method_module_construct (GType object_type) {
	ValaCCodeMethodModule* self = NULL;
	self = (ValaCCodeMethodModule*) vala_ccode_struct_module_construct (object_type);
	return self;
}


ValaCCodeMethodModule* vala_ccode_method_module_new (void) {
	return vala_ccode_method_module_construct (VALA_TYPE_CCODE_METHOD_MODULE);
}


static void vala_ccode_method_module_class_init (ValaCCodeMethodModuleClass * klass) {
	vala_ccode_method_module_parent_class = g_type_class_peek_parent (klass);
	VALA_CCODE_BASE_MODULE_CLASS (klass)->method_has_wrapper = vala_ccode_method_module_real_method_has_wrapper;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->get_custom_creturn_type = vala_ccode_method_module_real_get_custom_creturn_type;
	VALA_CCODE_METHOD_MODULE_CLASS (klass)->generate_method_result_declaration = vala_ccode_method_module_real_generate_method_result_declaration;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_method_declaration = vala_ccode_method_module_real_generate_method_declaration;
	VALA_CODE_VISITOR_CLASS (klass)->visit_method = vala_ccode_method_module_real_visit_method;
	VALA_CCODE_METHOD_MODULE_CLASS (klass)->generate_parameter = vala_ccode_method_module_real_generate_parameter;
	VALA_CCODE_BASE_MODULE_CLASS (klass)->generate_cparameters = vala_ccode_method_module_real_generate_cparameters;
	VALA_CODE_VISITOR_CLASS (klass)->visit_creation_method = vala_ccode_method_module_real_visit_creation_method;
}


static void vala_ccode_method_module_instance_init (ValaCCodeMethodModule * self) {
}


/**
 * The link between a method and generated code.
 */
GType vala_ccode_method_module_get_type (void) {
	static volatile gsize vala_ccode_method_module_type_id__volatile = 0;
	if (g_once_init_enter (&vala_ccode_method_module_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ValaCCodeMethodModuleClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_ccode_method_module_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaCCodeMethodModule), 0, (GInstanceInitFunc) vala_ccode_method_module_instance_init, NULL };
		GType vala_ccode_method_module_type_id;
		vala_ccode_method_module_type_id = g_type_register_static (VALA_TYPE_CCODE_STRUCT_MODULE, "ValaCCodeMethodModule", &g_define_type_info, 0);
		g_once_init_leave (&vala_ccode_method_module_type_id__volatile, vala_ccode_method_module_type_id);
	}
	return vala_ccode_method_module_type_id__volatile;
}


static int _vala_strcmp0 (const char * str1, const char * str2) {
	if (str1 == NULL) {
		return -(str1 != str2);
	}
	if (str2 == NULL) {
		return str1 != str2;
	}
	return strcmp (str1, str2);
}




