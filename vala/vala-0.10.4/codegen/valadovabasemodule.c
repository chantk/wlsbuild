/* valadovabasemodule.c generated by valac, the Vala compiler
 * generated from valadovabasemodule.vala, do not modify */

/* valadovabasemodule.vala
 *
 * Copyright (C) 2006-2010  Jürg Billeter
 * Copyright (C) 2006-2008  Raffaele Sandrini
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 * 	Raffaele Sandrini <raffaele@sandrini.ch>
 */

#include <glib.h>
#include <glib-object.h>
#include <vala.h>
#include <valaccode.h>
#include <stdlib.h>
#include <string.h>
#include <valagee.h>
#include <gobject/gvaluecollector.h>


#define VALA_TYPE_DOVA_BASE_MODULE (vala_dova_base_module_get_type ())
#define VALA_DOVA_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_DOVA_BASE_MODULE, ValaDovaBaseModule))
#define VALA_DOVA_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_DOVA_BASE_MODULE, ValaDovaBaseModuleClass))
#define VALA_IS_DOVA_BASE_MODULE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_DOVA_BASE_MODULE))
#define VALA_IS_DOVA_BASE_MODULE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_DOVA_BASE_MODULE))
#define VALA_DOVA_BASE_MODULE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_DOVA_BASE_MODULE, ValaDovaBaseModuleClass))

typedef struct _ValaDovaBaseModule ValaDovaBaseModule;
typedef struct _ValaDovaBaseModuleClass ValaDovaBaseModuleClass;
typedef struct _ValaDovaBaseModulePrivate ValaDovaBaseModulePrivate;

#define VALA_TYPE_CCODE_DECLARATION_SPACE (vala_ccode_declaration_space_get_type ())
#define VALA_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpace))
#define VALA_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))
#define VALA_IS_CCODE_DECLARATION_SPACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_IS_CCODE_DECLARATION_SPACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_TYPE_CCODE_DECLARATION_SPACE))
#define VALA_CCODE_DECLARATION_SPACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_TYPE_CCODE_DECLARATION_SPACE, ValaCCodeDeclarationSpaceClass))

typedef struct _ValaCCodeDeclarationSpace ValaCCodeDeclarationSpace;
typedef struct _ValaCCodeDeclarationSpaceClass ValaCCodeDeclarationSpaceClass;

#define VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT (vala_dova_base_module_emit_context_get_type ())
#define VALA_DOVA_BASE_MODULE_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaDovaBaseModuleEmitContext))
#define VALA_DOVA_BASE_MODULE_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaDovaBaseModuleEmitContextClass))
#define VALA_DOVA_BASE_MODULE_IS_EMIT_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_DOVA_BASE_MODULE_IS_EMIT_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT))
#define VALA_DOVA_BASE_MODULE_EMIT_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT, ValaDovaBaseModuleEmitContextClass))

typedef struct _ValaDovaBaseModuleEmitContext ValaDovaBaseModuleEmitContext;
typedef struct _ValaDovaBaseModuleEmitContextClass ValaDovaBaseModuleEmitContextClass;
#define _vala_code_context_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_context_unref (var), NULL)))
#define _vala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_code_node_unref (var), NULL)))
#define _vala_dova_base_module_emit_context_unref0(var) ((var == NULL) ? NULL : (var = (vala_dova_base_module_emit_context_unref (var), NULL)))
#define _vala_collection_object_unref0(var) ((var == NULL) ? NULL : (var = (vala_collection_object_unref (var), NULL)))
#define _vala_ccode_declaration_space_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_declaration_space_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _vala_ccode_node_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_node_unref (var), NULL)))
#define _vala_source_file_unref0(var) ((var == NULL) ? NULL : (var = (vala_source_file_unref (var), NULL)))
#define _vala_ccode_writer_unref0(var) ((var == NULL) ? NULL : (var = (vala_ccode_writer_unref (var), NULL)))
typedef struct _ValaCCodeDeclarationSpacePrivate ValaCCodeDeclarationSpacePrivate;
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))
typedef struct _ValaDovaBaseModuleEmitContextPrivate ValaDovaBaseModuleEmitContextPrivate;
typedef struct _ValaDovaBaseModuleParamSpecEmitContext ValaDovaBaseModuleParamSpecEmitContext;

struct _ValaDovaBaseModule {
	ValaCodeGenerator parent_instance;
	ValaDovaBaseModulePrivate * priv;
	ValaSymbol* root_symbol;
	ValaDovaBaseModuleEmitContext* emit_context;
	ValaCCodeDeclarationSpace* header_declarations;
	ValaCCodeDeclarationSpace* source_declarations;
	ValaCCodeFragment* source_type_member_definition;
	ValaCCodeFragment* module_init_fragment;
	ValaCCodeFragment* instance_init_fragment;
	ValaCCodeFragment* instance_finalize_fragment;
	ValaCCodeFragment* pre_statement_fragment;
	gint next_wrapper_id;
	ValaDataType* void_type;
	ValaDataType* bool_type;
	ValaDataType* char_type;
	ValaDataType* short_type;
	ValaDataType* ushort_type;
	ValaDataType* int_type;
	ValaDataType* uint_type;
	ValaDataType* long_type;
	ValaDataType* ulong_type;
	ValaDataType* string_type;
	ValaDataType* float_type;
	ValaDataType* double_type;
	ValaClass* object_class;
	ValaClass* type_class;
	ValaClass* value_class;
	ValaClass* string_class;
	ValaClass* array_class;
	ValaClass* delegate_class;
	ValaClass* error_class;
};

struct _ValaDovaBaseModuleClass {
	ValaCodeGeneratorClass parent_class;
	void (*generate_struct_declaration) (ValaDovaBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_delegate_declaration) (ValaDovaBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_cparameters) (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaCCodeFunctionCall* vcall);
	void (*generate_property_accessor_declaration) (ValaDovaBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space);
	ValaCCodeExpression* (*get_dup_func_expression) (ValaDovaBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
	ValaCCodeExpression* (*get_unref_expression) (ValaDovaBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr);
	void (*append_local_free) (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
	ValaCCodeExpression* (*get_ref_cexpression) (ValaDovaBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
	void (*generate_class_declaration) (ValaDovaBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_interface_declaration) (ValaDovaBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
	void (*generate_method_declaration) (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
	ValaCCodeExpression* (*get_implicit_cast_expression) (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
	char* (*get_custom_creturn_type) (ValaDovaBaseModule* self, ValaMethod* m);
	gboolean (*method_has_wrapper) (ValaDovaBaseModule* self, ValaMethod* method);
	void (*add_simple_check) (ValaDovaBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
};

struct _ValaDovaBaseModulePrivate {
	ValaCodeContext* _context;
	ValaList* emit_context_stack;
	char* csource_filename;
	ValaSet* reserved_identifiers;
	gint next_block_id;
	ValaMap* block_map;
	ValaSet* generated_external_symbols;
};

struct _ValaCCodeDeclarationSpace {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ValaCCodeDeclarationSpacePrivate * priv;
	ValaCCodeFragment* include_directives;
	ValaCCodeFragment* type_declaration;
	ValaCCodeFragment* type_definition;
	ValaCCodeFragment* type_member_declaration;
	ValaCCodeFragment* constant_declaration;
};

struct _ValaCCodeDeclarationSpaceClass {
	GTypeClass parent_class;
	void (*finalize) (ValaCCodeDeclarationSpace *self);
};

struct _ValaDovaBaseModuleEmitContext {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ValaDovaBaseModuleEmitContextPrivate * priv;
	ValaSymbol* current_symbol;
	ValaArrayList* symbol_stack;
	ValaTryStatement* current_try;
	ValaArrayList* temp_vars;
	ValaArrayList* temp_ref_vars;
	gint next_temp_var_id;
	ValaMap* variable_name_map;
};

struct _ValaDovaBaseModuleEmitContextClass {
	GTypeClass parent_class;
	void (*finalize) (ValaDovaBaseModuleEmitContext *self);
};

struct _ValaDovaBaseModuleParamSpecEmitContext {
	GParamSpec parent_instance;
};


static gpointer vala_dova_base_module_emit_context_parent_class = NULL;
static gpointer vala_dova_base_module_parent_class = NULL;

GType vala_dova_base_module_get_type (void) G_GNUC_CONST;
gpointer vala_ccode_declaration_space_ref (gpointer instance);
void vala_ccode_declaration_space_unref (gpointer instance);
GParamSpec* vala_param_spec_ccode_declaration_space (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_value_set_ccode_declaration_space (GValue* value, gpointer v_object);
void vala_value_take_ccode_declaration_space (GValue* value, gpointer v_object);
gpointer vala_value_get_ccode_declaration_space (const GValue* value);
GType vala_ccode_declaration_space_get_type (void) G_GNUC_CONST;
gpointer vala_dova_base_module_emit_context_ref (gpointer instance);
void vala_dova_base_module_emit_context_unref (gpointer instance);
GParamSpec* vala_dova_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void vala_dova_base_module_value_set_emit_context (GValue* value, gpointer v_object);
void vala_dova_base_module_value_take_emit_context (GValue* value, gpointer v_object);
gpointer vala_dova_base_module_value_get_emit_context (const GValue* value);
GType vala_dova_base_module_emit_context_get_type (void) G_GNUC_CONST;
#define VALA_DOVA_BASE_MODULE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), VALA_TYPE_DOVA_BASE_MODULE, ValaDovaBaseModulePrivate))
enum  {
	VALA_DOVA_BASE_MODULE_DUMMY_PROPERTY
};
ValaDovaBaseModuleEmitContext* vala_dova_base_module_emit_context_new (ValaSymbol* symbol);
ValaDovaBaseModuleEmitContext* vala_dova_base_module_emit_context_construct (GType object_type, ValaSymbol* symbol);
ValaBlock* vala_dova_base_module_next_closure_block (ValaDovaBaseModule* self, ValaSymbol* sym);
ValaDovaBaseModule* vala_dova_base_module_new (void);
ValaDovaBaseModule* vala_dova_base_module_construct (GType object_type);
static void vala_dova_base_module_real_emit (ValaCodeGenerator* base, ValaCodeContext* context);
void vala_dova_base_module_set_context (ValaDovaBaseModule* self, ValaCodeContext* value);
ValaCCodeDeclarationSpace* vala_ccode_declaration_space_new (void);
ValaCCodeDeclarationSpace* vala_ccode_declaration_space_construct (GType object_type);
void vala_ccode_declaration_space_add_include (ValaCCodeDeclarationSpace* self, const char* filename, gboolean local);
static char* vala_dova_base_module_get_define_for_filename (const char* filename);
void vala_dova_base_module_push_context (ValaDovaBaseModule* self, ValaDovaBaseModuleEmitContext* emit_context);
void vala_dova_base_module_pop_context (ValaDovaBaseModule* self);
static void vala_dova_base_module_real_visit_source_file (ValaCodeVisitor* base, ValaSourceFile* source_file);
ValaCodeContext* vala_dova_base_module_get_context (ValaDovaBaseModule* self);
void vala_dova_base_module_generate_enum_declaration (ValaDovaBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space);
gboolean vala_ccode_declaration_space_add_symbol_declaration (ValaCCodeDeclarationSpace* self, ValaSymbol* sym, const char* name);
void vala_ccode_declaration_space_add_type_definition (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_dova_base_module_real_visit_enum (ValaCodeVisitor* base, ValaEnum* en);
void vala_dova_base_module_generate_constant_declaration (ValaDovaBaseModule* self, ValaConstant* c, ValaCCodeDeclarationSpace* decl_space);
void vala_ccode_declaration_space_add_constant_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
void vala_ccode_declaration_space_add_type_member_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
static void vala_dova_base_module_real_visit_constant (ValaCodeVisitor* base, ValaConstant* c);
void vala_dova_base_module_generate_field_declaration (ValaDovaBaseModule* self, ValaField* f, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_type_declaration (ValaDovaBaseModule* self, ValaDataType* type, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_visit_field (ValaCodeVisitor* base, ValaField* f);
void vala_dova_base_module_append_temp_decl (ValaDovaBaseModule* self, ValaCCodeFragment* cfrag, ValaList* temp_vars);
ValaArrayList* vala_dova_base_module_get_temp_vars (ValaDovaBaseModule* self);
gboolean vala_dova_base_module_requires_destroy (ValaDovaBaseModule* self, ValaDataType* type);
ValaDataType* vala_dova_base_module_get_data_type_for_symbol (ValaTypeSymbol* sym);
ValaCCodeExpression* vala_dova_base_module_get_unref_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr);
ValaCCodeExpression* vala_dova_base_module_default_value_for_type (ValaDovaBaseModule* self, ValaDataType* type, gboolean initializer_expression);
gboolean vala_dova_base_module_is_constant_ccode_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cexpr);
gboolean vala_dova_base_module_is_pure_ccode_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cexpr);
static void vala_dova_base_module_real_visit_formal_parameter (ValaCodeVisitor* base, ValaFormalParameter* p);
static void vala_dova_base_module_real_visit_property (ValaCodeVisitor* base, ValaProperty* prop);
void vala_dova_base_module_generate_class_declaration (ValaDovaBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_interface_declaration (ValaDovaBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_delegate_declaration (ValaDovaBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_struct_declaration (ValaDovaBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_generate_struct_declaration (ValaDovaBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_generate_delegate_declaration (ValaDovaBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_cparameters (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaCCodeFunctionCall* vcall);
static void vala_dova_base_module_real_generate_cparameters (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaCCodeFunctionCall* vcall);
void vala_dova_base_module_generate_property_accessor_declaration (ValaDovaBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_generate_property_accessor_declaration (ValaDovaBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_visit_destructor (ValaCodeVisitor* base, ValaDestructor* d);
gint vala_dova_base_module_get_block_id (ValaDovaBaseModule* self, ValaBlock* b);
static void vala_dova_base_module_capture_parameter (ValaDovaBaseModule* self, ValaFormalParameter* param, ValaCCodeStruct* data, ValaCCodeBlock* cblock, gint block_id, ValaCCodeBlock* free_block);
char* vala_dova_base_module_get_variable_cname (ValaDovaBaseModule* self, const char* name);
ValaCCodeExpression* vala_dova_base_module_get_variable_cexpression (ValaDovaBaseModule* self, const char* name);
gboolean vala_dova_base_module_requires_copy (ValaDovaBaseModule* self, ValaDataType* type);
ValaCCodeExpression* vala_dova_base_module_get_ref_cexpression (ValaDovaBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
static void vala_dova_base_module_real_visit_block (ValaCodeVisitor* base, ValaBlock* b);
void vala_dova_base_module_emit_context_push_symbol (ValaDovaBaseModuleEmitContext* self, ValaSymbol* symbol);
ValaMethod* vala_dova_base_module_get_current_method (ValaDovaBaseModule* self);
ValaPropertyAccessor* vala_dova_base_module_get_current_property_accessor (ValaDovaBaseModule* self);
ValaClass* vala_dova_base_module_get_current_class (ValaDovaBaseModule* self);
ValaCCodeExpression* vala_dova_base_module_get_dup_func_expression (ValaDovaBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
void vala_ccode_declaration_space_add_type_declaration (ValaCCodeDeclarationSpace* self, ValaCCodeNode* node);
void vala_dova_base_module_emit_context_pop_symbol (ValaDovaBaseModuleEmitContext* self);
static void vala_dova_base_module_real_visit_empty_statement (ValaCodeVisitor* base, ValaEmptyStatement* stmt);
static void vala_dova_base_module_real_visit_declaration_statement (ValaCodeVisitor* base, ValaDeclarationStatement* stmt);
void vala_dova_base_module_create_temp_decl (ValaDovaBaseModule* self, ValaStatement* stmt, ValaList* temp_vars);
ValaMap* vala_dova_base_module_get_variable_name_map (ValaDovaBaseModule* self);
gint vala_dova_base_module_get_next_temp_var_id (ValaDovaBaseModule* self);
void vala_dova_base_module_set_next_temp_var_id (ValaDovaBaseModule* self, gint value);
static void vala_dova_base_module_real_visit_local_variable (ValaCodeVisitor* base, ValaLocalVariable* local);
void vala_dova_base_module_add_simple_check (ValaDovaBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
static void vala_dova_base_module_real_visit_initializer_list (ValaCodeVisitor* base, ValaInitializerList* list);
ValaLocalVariable* vala_dova_base_module_get_temp_variable (ValaDovaBaseModule* self, ValaDataType* type, gboolean value_owned, ValaCodeNode* node_reference);
static gboolean vala_dova_base_module_is_in_generic_type (ValaDovaBaseModule* self, ValaDataType* type);
ValaCCodeExpression* vala_dova_base_module_get_type_private_from_type (ValaDovaBaseModule* self, ValaObjectTypeSymbol* type_symbol, ValaCCodeExpression* type_expression);
ValaCCodeExpression* vala_dova_base_module_get_type_id_expression (ValaDovaBaseModule* self, ValaDataType* type, gboolean is_chainup);
static ValaCCodeExpression* vala_dova_base_module_real_get_dup_func_expression (ValaDovaBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup);
ValaCCodeExpression* vala_dova_base_module_get_destroy_func_expression (ValaDovaBaseModule* self, ValaDataType* type, gboolean is_chainup);
ValaTypeSymbol* vala_dova_base_module_get_current_type_symbol (ValaDovaBaseModule* self);
static ValaCCodeExpression* vala_dova_base_module_real_get_unref_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr);
static void vala_dova_base_module_real_visit_end_full_expression (ValaCodeVisitor* base, ValaExpression* expr);
ValaArrayList* vala_dova_base_module_get_temp_ref_vars (ValaDovaBaseModule* self);
static void vala_dova_base_module_real_visit_expression_statement (ValaCodeVisitor* base, ValaExpressionStatement* stmt);
void vala_dova_base_module_append_local_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
static void vala_dova_base_module_real_append_local_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop);
static void vala_dova_base_module_append_param_free (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeFragment* cfrag);
void vala_dova_base_module_append_error_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, ValaTryStatement* current_try);
void vala_dova_base_module_create_local_free (ValaDovaBaseModule* self, ValaCodeNode* stmt, gboolean stop_at_loop);
ValaSymbol* vala_dova_base_module_get_current_symbol (ValaDovaBaseModule* self);
static void vala_dova_base_module_real_visit_return_statement (ValaCodeVisitor* base, ValaReturnStatement* stmt);
ValaDataType* vala_dova_base_module_get_current_return_type (ValaDovaBaseModule* self);
static void vala_dova_base_module_real_visit_delete_statement (ValaCodeVisitor* base, ValaDeleteStatement* stmt);
static void vala_dova_base_module_real_visit_expression (ValaCodeVisitor* base, ValaExpression* expr);
ValaCCodeExpression* vala_dova_base_module_transform_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
static void vala_dova_base_module_real_visit_boolean_literal (ValaCodeVisitor* base, ValaBooleanLiteral* expr);
static void vala_dova_base_module_real_visit_character_literal (ValaCodeVisitor* base, ValaCharacterLiteral* expr);
static void vala_dova_base_module_real_visit_integer_literal (ValaCodeVisitor* base, ValaIntegerLiteral* expr);
static void vala_dova_base_module_real_visit_real_literal (ValaCodeVisitor* base, ValaRealLiteral* expr);
static void vala_dova_base_module_real_visit_string_literal (ValaCodeVisitor* base, ValaStringLiteral* expr);
static void vala_dova_base_module_real_visit_null_literal (ValaCodeVisitor* base, ValaNullLiteral* expr);
static void vala_dova_base_module_real_visit_base_access (ValaCodeVisitor* base, ValaBaseAccess* expr);
static void vala_dova_base_module_real_visit_postfix_expression (ValaCodeVisitor* base, ValaPostfixExpression* expr);
static ValaMemberAccess* vala_dova_base_module_find_property_access (ValaDovaBaseModule* self, ValaExpression* expr);
ValaCCodeFunctionCall* vala_dova_base_module_get_property_set_call (ValaDovaBaseModule* self, ValaProperty* prop, ValaMemberAccess* ma, ValaCCodeExpression* cexpr, ValaExpression* rhs);
static gboolean vala_dova_base_module_is_ref_function_void (ValaDovaBaseModule* self, ValaDataType* type);
static ValaCCodeExpression* vala_dova_base_module_real_get_ref_cexpression (ValaDovaBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node);
static void vala_dova_base_module_real_generate_class_declaration (ValaDovaBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_generate_interface_declaration (ValaDovaBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_generate_method_declaration (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
static void vala_dova_base_module_real_generate_method_declaration (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space);
void vala_dova_base_module_add_generic_type_arguments (ValaDovaBaseModule* self, ValaCCodeFunctionCall* ccall, ValaList* type_args, ValaCodeNode* expr, gboolean is_chainup);
static void vala_dova_base_module_real_visit_object_creation_expression (ValaCodeVisitor* base, ValaObjectCreationExpression* expr);
ValaCCodeExpression* vala_dova_base_module_handle_struct_argument (ValaDovaBaseModule* self, ValaFormalParameter* param, ValaExpression* arg, ValaCCodeExpression* cexpr);
char* vala_dova_base_module_get_custom_creturn_type (ValaDovaBaseModule* self, ValaMethod* m);
static void vala_dova_base_module_real_visit_sizeof_expression (ValaCodeVisitor* base, ValaSizeofExpression* expr);
static void vala_dova_base_module_real_visit_typeof_expression (ValaCodeVisitor* base, ValaTypeofExpression* expr);
static void vala_dova_base_module_real_visit_unary_expression (ValaCodeVisitor* base, ValaUnaryExpression* expr);
static void vala_dova_base_module_real_visit_cast_expression (ValaCodeVisitor* base, ValaCastExpression* expr);
static void vala_dova_base_module_real_visit_pointer_indirection (ValaCodeVisitor* base, ValaPointerIndirection* expr);
static void vala_dova_base_module_real_visit_addressof_expression (ValaCodeVisitor* base, ValaAddressofExpression* expr);
static void vala_dova_base_module_real_visit_reference_transfer_expression (ValaCodeVisitor* base, ValaReferenceTransferExpression* expr);
static void vala_dova_base_module_real_visit_binary_expression (ValaCodeVisitor* base, ValaBinaryExpression* expr);
ValaCCodeExpression* vala_dova_base_module_generate_instance_cast (ValaDovaBaseModule* self, ValaCCodeExpression* expr, ValaTypeSymbol* type);
char* vala_dova_base_module_get_type_check_function (ValaDovaBaseModule* self, ValaTypeSymbol* type);
static ValaCCodeExpression* vala_dova_base_module_create_type_check (ValaDovaBaseModule* self, ValaCCodeNode* ccodenode, ValaDataType* type);
static void vala_dova_base_module_real_visit_type_check (ValaCodeVisitor* base, ValaTypeCheck* expr);
static void vala_dova_base_module_real_visit_lambda_expression (ValaCodeVisitor* base, ValaLambdaExpression* l);
ValaCCodeExpression* vala_dova_base_module_get_implicit_cast_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
static ValaCCodeExpression* vala_dova_base_module_real_get_implicit_cast_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr);
ValaBlock* vala_dova_base_module_get_current_closure_block (ValaDovaBaseModule* self);
ValaDataType* vala_dova_base_module_get_this_type (ValaDovaBaseModule* self);
ValaCCodeNode* vala_dova_base_module_get_ccodenode (ValaDovaBaseModule* self, ValaCodeNode* node);
gboolean vala_dova_base_module_add_generated_external_symbol (ValaDovaBaseModule* self, ValaSymbol* external_symbol);
static char* vala_dova_base_module_real_get_custom_creturn_type (ValaDovaBaseModule* self, ValaMethod* m);
gboolean vala_dova_base_module_method_has_wrapper (ValaDovaBaseModule* self, ValaMethod* method);
static gboolean vala_dova_base_module_real_method_has_wrapper (ValaDovaBaseModule* self, ValaMethod* method);
static void vala_dova_base_module_real_add_simple_check (ValaDovaBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails);
ValaTryStatement* vala_dova_base_module_get_current_try (ValaDovaBaseModule* self);
void vala_dova_base_module_set_current_try (ValaDovaBaseModule* self, ValaTryStatement* value);
gboolean vala_dova_base_module_get_in_creation_method (ValaDovaBaseModule* self);
enum  {
	VALA_DOVA_BASE_MODULE_EMIT_CONTEXT_DUMMY_PROPERTY
};
static void vala_dova_base_module_emit_context_finalize (ValaDovaBaseModuleEmitContext* obj);
static void vala_dova_base_module_finalize (ValaCodeVisitor* obj);
static int _vala_strcmp0 (const char * str1, const char * str2);



ValaBlock* vala_dova_base_module_next_closure_block (ValaDovaBaseModule* self, ValaSymbol* sym) {
	ValaBlock* result = NULL;
	ValaBlock* block;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (sym != NULL, NULL);
	block = NULL;
	while (TRUE) {
		ValaSymbol* _tmp0_;
		gboolean _tmp1_ = FALSE;
		gboolean _tmp2_ = FALSE;
		block = (_tmp0_ = sym, VALA_IS_BLOCK (_tmp0_) ? ((ValaBlock*) _tmp0_) : NULL);
		if (VALA_IS_BLOCK (sym)) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = VALA_IS_METHOD (sym);
		}
		if (!_tmp1_) {
			break;
		}
		if (block != NULL) {
			_tmp2_ = vala_block_get_captured (block);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			break;
		}
		sym = vala_symbol_get_parent_symbol (sym);
	}
	result = block;
	return result;
}


ValaDovaBaseModule* vala_dova_base_module_construct (GType object_type) {
	ValaDovaBaseModule* self = NULL;
	ValaSet* _tmp0_;
	self = (ValaDovaBaseModule*) vala_code_generator_construct (object_type);
	self->priv->reserved_identifiers = (_tmp0_ = (ValaSet*) vala_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal), _vala_collection_object_unref0 (self->priv->reserved_identifiers), _tmp0_);
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Bool");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Complex");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "_Imaginary");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "auto");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "break");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "case");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "char");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "const");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "continue");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "default");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "do");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "double");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "else");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "enum");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "extern");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "float");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "for");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "goto");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "if");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "inline");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "int");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "long");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "register");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "restrict");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "return");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "short");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "signed");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "sizeof");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "static");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "struct");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "switch");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "typedef");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "union");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "unsigned");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "void");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "volatile");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "while");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "result");
	vala_collection_add ((ValaCollection*) self->priv->reserved_identifiers, "this");
	return self;
}


ValaDovaBaseModule* vala_dova_base_module_new (void) {
	return vala_dova_base_module_construct (VALA_TYPE_DOVA_BASE_MODULE);
}


static gpointer _vala_code_node_ref0 (gpointer self) {
	return self ? vala_code_node_ref (self) : NULL;
}


static void vala_dova_base_module_real_emit (ValaCodeGenerator* base, ValaCodeContext* context) {
	ValaDovaBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaStruct* _tmp1_;
	ValaDataType* _tmp2_;
	ValaStruct* _tmp3_;
	ValaDataType* _tmp4_;
	ValaStruct* _tmp5_;
	ValaDataType* _tmp6_;
	ValaStruct* _tmp7_;
	ValaDataType* _tmp8_;
	ValaStruct* _tmp9_;
	ValaDataType* _tmp10_;
	ValaStruct* _tmp11_;
	ValaDataType* _tmp12_;
	ValaStruct* _tmp13_;
	ValaDataType* _tmp14_;
	ValaStruct* _tmp15_;
	ValaDataType* _tmp16_;
	ValaStruct* _tmp17_;
	ValaDataType* _tmp18_;
	ValaStruct* _tmp19_;
	ValaDataType* _tmp20_;
	ValaClass* _tmp21_;
	ValaDataType* _tmp22_;
	ValaNamespace* dova_ns;
	ValaClass* _tmp23_;
	ValaClass* _tmp24_;
	ValaClass* _tmp25_;
	ValaClass* _tmp26_;
	ValaClass* _tmp27_;
	ValaClass* _tmp28_;
	ValaClass* _tmp29_;
	ValaCCodeDeclarationSpace* _tmp30_;
	ValaCCodeDeclarationSpace* _tmp31_;
	ValaCCodeFragment* _tmp32_;
	ValaCCodeFragment* _tmp33_;
	ValaSet* _tmp34_;
	ValaList* source_files;
	ValaCCodeDeclarationSpace* _tmp36_;
	ValaCCodeFragment* _tmp37_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (context != NULL);
	vala_dova_base_module_set_context (self, context);
	self->root_symbol = (_tmp0_ = _vala_code_node_ref0 ((ValaSymbol*) vala_code_context_get_root (context)), _vala_code_node_unref0 (self->root_symbol), _tmp0_);
	self->bool_type = (_tmp2_ = (ValaDataType*) vala_boolean_type_new (_tmp1_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "bool"))), _vala_code_node_unref0 (self->bool_type), _tmp2_);
	_vala_code_node_unref0 (_tmp1_);
	self->char_type = (_tmp4_ = (ValaDataType*) vala_integer_type_new (_tmp3_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "char")), NULL, NULL), _vala_code_node_unref0 (self->char_type), _tmp4_);
	_vala_code_node_unref0 (_tmp3_);
	self->short_type = (_tmp6_ = (ValaDataType*) vala_integer_type_new (_tmp5_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "short")), NULL, NULL), _vala_code_node_unref0 (self->short_type), _tmp6_);
	_vala_code_node_unref0 (_tmp5_);
	self->ushort_type = (_tmp8_ = (ValaDataType*) vala_integer_type_new (_tmp7_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "ushort")), NULL, NULL), _vala_code_node_unref0 (self->ushort_type), _tmp8_);
	_vala_code_node_unref0 (_tmp7_);
	self->int_type = (_tmp10_ = (ValaDataType*) vala_integer_type_new (_tmp9_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "int")), NULL, NULL), _vala_code_node_unref0 (self->int_type), _tmp10_);
	_vala_code_node_unref0 (_tmp9_);
	self->uint_type = (_tmp12_ = (ValaDataType*) vala_integer_type_new (_tmp11_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "uint")), NULL, NULL), _vala_code_node_unref0 (self->uint_type), _tmp12_);
	_vala_code_node_unref0 (_tmp11_);
	self->long_type = (_tmp14_ = (ValaDataType*) vala_integer_type_new (_tmp13_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "long")), NULL, NULL), _vala_code_node_unref0 (self->long_type), _tmp14_);
	_vala_code_node_unref0 (_tmp13_);
	self->ulong_type = (_tmp16_ = (ValaDataType*) vala_integer_type_new (_tmp15_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "ulong")), NULL, NULL), _vala_code_node_unref0 (self->ulong_type), _tmp16_);
	_vala_code_node_unref0 (_tmp15_);
	self->float_type = (_tmp18_ = (ValaDataType*) vala_floating_type_new (_tmp17_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "float"))), _vala_code_node_unref0 (self->float_type), _tmp18_);
	_vala_code_node_unref0 (_tmp17_);
	self->double_type = (_tmp20_ = (ValaDataType*) vala_floating_type_new (_tmp19_ = VALA_STRUCT (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "double"))), _vala_code_node_unref0 (self->double_type), _tmp20_);
	_vala_code_node_unref0 (_tmp19_);
	self->string_type = (_tmp22_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) (_tmp21_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "string")))), _vala_code_node_unref0 (self->string_type), _tmp22_);
	_vala_code_node_unref0 (_tmp21_);
	dova_ns = VALA_NAMESPACE (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "Dova"));
	self->object_class = (_tmp23_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Object")), _vala_code_node_unref0 (self->object_class), _tmp23_);
	self->type_class = (_tmp24_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Type")), _vala_code_node_unref0 (self->type_class), _tmp24_);
	self->value_class = (_tmp25_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Value")), _vala_code_node_unref0 (self->value_class), _tmp25_);
	self->string_class = (_tmp26_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope (self->root_symbol), "string")), _vala_code_node_unref0 (self->string_class), _tmp26_);
	self->array_class = (_tmp27_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Array")), _vala_code_node_unref0 (self->array_class), _tmp27_);
	self->delegate_class = (_tmp28_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Delegate")), _vala_code_node_unref0 (self->delegate_class), _tmp28_);
	self->error_class = (_tmp29_ = VALA_CLASS (vala_scope_lookup (vala_symbol_get_scope ((ValaSymbol*) dova_ns), "Error")), _vala_code_node_unref0 (self->error_class), _tmp29_);
	self->header_declarations = (_tmp30_ = vala_ccode_declaration_space_new (), _vala_ccode_declaration_space_unref0 (self->header_declarations), _tmp30_);
	self->source_declarations = (_tmp31_ = vala_ccode_declaration_space_new (), _vala_ccode_declaration_space_unref0 (self->source_declarations), _tmp31_);
	self->module_init_fragment = (_tmp32_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (self->module_init_fragment), _tmp32_);
	self->source_type_member_definition = (_tmp33_ = vala_ccode_fragment_new (), _vala_ccode_node_unref0 (self->source_type_member_definition), _tmp33_);
	if (vala_code_context_get_nostdpkg (context)) {
		vala_ccode_declaration_space_add_include (self->header_declarations, "dova-types.h", FALSE);
		vala_ccode_declaration_space_add_include (self->source_declarations, "dova-types.h", FALSE);
	} else {
		vala_ccode_declaration_space_add_include (self->header_declarations, "dova-base.h", FALSE);
		vala_ccode_declaration_space_add_include (self->source_declarations, "dova-base.h", FALSE);
	}
	self->priv->generated_external_symbols = (_tmp34_ = (ValaSet*) vala_hash_set_new (VALA_TYPE_SYMBOL, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_hash, g_direct_equal), _vala_collection_object_unref0 (self->priv->generated_external_symbols), _tmp34_);
	source_files = vala_code_context_get_source_files (context);
	{
		ValaIterator* _file_it;
		_file_it = vala_iterable_iterator ((ValaIterable*) source_files);
		while (TRUE) {
			ValaSourceFile* file;
			if (!vala_iterator_next (_file_it)) {
				break;
			}
			file = (ValaSourceFile*) vala_iterator_get (_file_it);
			if (!vala_source_file_get_external_package (file)) {
				vala_source_file_accept (file, (ValaCodeVisitor*) self);
			}
			_vala_source_file_unref0 (file);
		}
		_vala_collection_object_unref0 (_file_it);
	}
	if (self->priv->csource_filename != NULL) {
		ValaCCodeWriter* writer;
		writer = vala_ccode_writer_new (self->priv->csource_filename, NULL);
		if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (context))) {
			char* _tmp35_;
			vala_report_error (NULL, _tmp35_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
			_g_free0 (_tmp35_);
			_vala_ccode_writer_unref0 (writer);
			_vala_collection_object_unref0 (source_files);
			_vala_code_node_unref0 (dova_ns);
			return;
		}
		vala_ccode_writer_set_line_directives (writer, vala_code_context_get_debug (context));
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write ((ValaCCodeNode*) self->source_declarations->include_directives, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->type_declaration, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->type_definition, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write_declaration ((ValaCCodeNode*) self->source_declarations->type_member_declaration, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write ((ValaCCodeNode*) self->source_declarations->type_member_declaration, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write_combined ((ValaCCodeNode*) self->source_declarations->constant_declaration, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_node_write ((ValaCCodeNode*) self->source_type_member_definition, writer);
		vala_ccode_writer_write_newline (writer);
		vala_ccode_writer_close (writer);
		_vala_ccode_writer_unref0 (writer);
	}
	self->source_declarations = (_tmp36_ = NULL, _vala_ccode_declaration_space_unref0 (self->source_declarations), _tmp36_);
	self->source_type_member_definition = (_tmp37_ = NULL, _vala_ccode_node_unref0 (self->source_type_member_definition), _tmp37_);
	if (vala_code_context_get_header_filename (context) != NULL) {
		ValaCCodeWriter* writer;
		char* _tmp39_;
		ValaCCodeOnceSection* _tmp40_;
		ValaCCodeOnceSection* once;
		ValaCCodeNewline* _tmp41_;
		ValaCCodeNewline* _tmp42_;
		ValaCCodeNewline* _tmp43_;
		ValaCCodeNewline* _tmp44_;
		ValaCCodeNewline* _tmp45_;
		ValaCCodeNewline* _tmp46_;
		ValaCCodeNewline* _tmp47_;
		ValaCCodeNewline* _tmp48_;
		writer = vala_ccode_writer_new (vala_code_context_get_header_filename (context), NULL);
		if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (context))) {
			char* _tmp38_;
			vala_report_error (NULL, _tmp38_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
			_g_free0 (_tmp38_);
			_vala_ccode_writer_unref0 (writer);
			_vala_collection_object_unref0 (source_files);
			_vala_code_node_unref0 (dova_ns);
			return;
		}
		vala_ccode_writer_write_newline (writer);
		once = (_tmp40_ = vala_ccode_once_section_new (_tmp39_ = vala_dova_base_module_get_define_for_filename (vala_ccode_writer_get_filename (writer))), _g_free0 (_tmp39_), _tmp40_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp41_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp41_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->include_directives);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp42_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp42_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp43_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp43_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp44_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp44_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_definition);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp45_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp45_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->type_member_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp46_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp46_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) self->header_declarations->constant_declaration);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp47_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp47_);
		vala_ccode_fragment_append ((ValaCCodeFragment*) once, (ValaCCodeNode*) (_tmp48_ = vala_ccode_newline_new ()));
		_vala_ccode_node_unref0 (_tmp48_);
		vala_ccode_node_write ((ValaCCodeNode*) once, writer);
		vala_ccode_writer_close (writer);
		_vala_ccode_node_unref0 (once);
		_vala_ccode_writer_unref0 (writer);
	}
	_vala_collection_object_unref0 (source_files);
	_vala_code_node_unref0 (dova_ns);
}


static gpointer _vala_dova_base_module_emit_context_ref0 (gpointer self) {
	return self ? vala_dova_base_module_emit_context_ref (self) : NULL;
}


void vala_dova_base_module_push_context (ValaDovaBaseModule* self, ValaDovaBaseModuleEmitContext* emit_context) {
	ValaDovaBaseModuleEmitContext* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (emit_context != NULL);
	if (self->emit_context != NULL) {
		vala_collection_add ((ValaCollection*) self->priv->emit_context_stack, self->emit_context);
	}
	self->emit_context = (_tmp0_ = _vala_dova_base_module_emit_context_ref0 (emit_context), _vala_dova_base_module_emit_context_unref0 (self->emit_context), _tmp0_);
}


void vala_dova_base_module_pop_context (ValaDovaBaseModule* self) {
	g_return_if_fail (self != NULL);
	if (vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) > 0) {
		ValaDovaBaseModuleEmitContext* _tmp0_;
		self->emit_context = (_tmp0_ = (ValaDovaBaseModuleEmitContext*) vala_list_get (self->priv->emit_context_stack, vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) - 1), _vala_dova_base_module_emit_context_unref0 (self->emit_context), _tmp0_);
		vala_list_remove_at (self->priv->emit_context_stack, vala_collection_get_size ((ValaCollection*) self->priv->emit_context_stack) - 1);
	} else {
		ValaDovaBaseModuleEmitContext* _tmp1_;
		self->emit_context = (_tmp1_ = NULL, _vala_dova_base_module_emit_context_unref0 (self->emit_context), _tmp1_);
	}
}


static void vala_dova_base_module_real_visit_source_file (ValaCodeVisitor* base, ValaSourceFile* source_file) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (source_file != NULL);
	if (self->priv->csource_filename == NULL) {
		char* _tmp0_;
		self->priv->csource_filename = (_tmp0_ = vala_source_file_get_csource_filename (source_file), _g_free0 (self->priv->csource_filename), _tmp0_);
	} else {
		char* _tmp1_;
		ValaCCodeWriter* _tmp2_;
		ValaCCodeWriter* writer;
		writer = (_tmp2_ = vala_ccode_writer_new (_tmp1_ = vala_source_file_get_csource_filename (source_file), NULL), _g_free0 (_tmp1_), _tmp2_);
		if (!vala_ccode_writer_open (writer, vala_code_context_get_version_header (self->priv->_context))) {
			char* _tmp3_;
			vala_report_error (NULL, _tmp3_ = g_strdup_printf ("unable to open `%s' for writing", vala_ccode_writer_get_filename (writer)));
			_g_free0 (_tmp3_);
			_vala_ccode_writer_unref0 (writer);
			return;
		}
		vala_ccode_writer_close (writer);
		_vala_ccode_writer_unref0 (writer);
	}
	vala_source_file_accept_children (source_file, (ValaCodeVisitor*) self);
	if (vala_report_get_errors (vala_code_context_get_report (self->priv->_context)) > 0) {
		return;
	}
}


static glong string_get_length (const char* self) {
	glong result;
	g_return_val_if_fail (self != NULL, 0L);
	result = g_utf8_strlen (self, (gssize) (-1));
	return result;
}


static char* vala_dova_base_module_get_define_for_filename (const char* filename) {
	char* result = NULL;
	GString* define;
	char* i;
	g_return_val_if_fail (filename != NULL, NULL);
	define = g_string_new ("__");
	i = g_strdup (filename);
	while (TRUE) {
		gunichar c;
		gboolean _tmp0_ = FALSE;
		char* _tmp1_;
		if (!(string_get_length (i) > 0)) {
			break;
		}
		c = g_utf8_get_char (i);
		if (g_unichar_isalnum (c)) {
			_tmp0_ = c < 0x80;
		} else {
			_tmp0_ = FALSE;
		}
		if (_tmp0_) {
			g_string_append_unichar (define, g_unichar_toupper (c));
		} else {
			g_string_append_c (define, '_');
		}
		i = (_tmp1_ = g_strdup (g_utf8_next_char (i)), _g_free0 (i), _tmp1_);
	}
	g_string_append (define, "__");
	result = g_strdup (define->str);
	_g_free0 (i);
	_g_string_free0 (define);
	return result;
}


void vala_dova_base_module_generate_enum_declaration (ValaDovaBaseModule* self, ValaEnum* en, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	char* _tmp2_;
	ValaCCodeEnum* _tmp3_;
	ValaCCodeEnum* cenum;
	ValaCCodeNewline* _tmp10_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (en != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) en, _tmp0_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) en, FALSE)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	cenum = (_tmp3_ = vala_ccode_enum_new (_tmp2_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) en, FALSE)), _g_free0 (_tmp2_), _tmp3_);
	{
		ValaList* _tmp4_;
		ValaIterator* _tmp5_;
		ValaIterator* _ev_it;
		_ev_it = (_tmp5_ = vala_iterable_iterator ((ValaIterable*) (_tmp4_ = vala_enum_get_values (en))), _vala_collection_object_unref0 (_tmp4_), _tmp5_);
		while (TRUE) {
			ValaEnumValue* ev;
			if (!vala_iterator_next (_ev_it)) {
				break;
			}
			ev = (ValaEnumValue*) vala_iterator_get (_ev_it);
			if (vala_constant_get_value ((ValaConstant*) ev) == NULL) {
				char* _tmp6_;
				ValaCCodeEnumValue* _tmp7_;
				vala_ccode_enum_add_value (cenum, _tmp7_ = vala_ccode_enum_value_new (_tmp6_ = vala_constant_get_cname ((ValaConstant*) ev), NULL));
				_vala_ccode_node_unref0 (_tmp7_);
				_g_free0 (_tmp6_);
			} else {
				char* _tmp8_;
				ValaCCodeEnumValue* _tmp9_;
				vala_code_node_emit ((ValaCodeNode*) vala_constant_get_value ((ValaConstant*) ev), (ValaCodeGenerator*) self);
				vala_ccode_enum_add_value (cenum, _tmp9_ = vala_ccode_enum_value_new (_tmp8_ = vala_constant_get_cname ((ValaConstant*) ev), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value ((ValaConstant*) ev)))));
				_vala_ccode_node_unref0 (_tmp9_);
				_g_free0 (_tmp8_);
			}
			_vala_code_node_unref0 (ev);
		}
		_vala_collection_object_unref0 (_ev_it);
	}
	vala_ccode_declaration_space_add_type_definition (decl_space, (ValaCCodeNode*) cenum);
	vala_ccode_declaration_space_add_type_definition (decl_space, (ValaCCodeNode*) (_tmp10_ = vala_ccode_newline_new ()));
	_vala_ccode_node_unref0 (_tmp10_);
	_vala_ccode_node_unref0 (cenum);
}


static void vala_dova_base_module_real_visit_enum (ValaCodeVisitor* base, ValaEnum* en) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (en != NULL);
	vala_code_node_accept_children ((ValaCodeNode*) en, (ValaCodeVisitor*) self);
	vala_dova_base_module_generate_enum_declaration (self, en, self->source_declarations);
	if (!vala_symbol_is_internal_symbol ((ValaSymbol*) en)) {
		vala_dova_base_module_generate_enum_declaration (self, en, self->header_declarations);
	}
}


void vala_dova_base_module_generate_constant_declaration (ValaDovaBaseModule* self, ValaConstant* c, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (c != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) c, _tmp0_ = vala_constant_get_cname (c)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	if (!vala_symbol_get_external ((ValaSymbol*) c)) {
		vala_code_node_emit ((ValaCodeNode*) vala_constant_get_value (c), (ValaCodeGenerator*) self);
		if (VALA_IS_INITIALIZER_LIST (vala_constant_get_value (c))) {
			char* _tmp2_;
			ValaCCodeDeclaration* _tmp3_;
			ValaCCodeDeclaration* _cdecl_;
			char* arr;
			char* _tmp5_;
			char* _tmp6_;
			ValaCCodeVariableDeclarator* _tmp7_;
			_cdecl_ = (_tmp3_ = vala_ccode_declaration_new (_tmp2_ = vala_data_type_get_const_cname (vala_constant_get_type_reference (c))), _g_free0 (_tmp2_), _tmp3_);
			arr = g_strdup ("");
			if (VALA_IS_ARRAY_TYPE (vala_constant_get_type_reference (c))) {
				char* _tmp4_;
				arr = (_tmp4_ = g_strdup ("[]"), _g_free0 (arr), _tmp4_);
			}
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp7_ = vala_ccode_variable_declarator_new (_tmp6_ = g_strdup_printf ("%s%s", _tmp5_ = vala_constant_get_cname (c), arr), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value (c))), NULL)));
			_vala_ccode_node_unref0 (_tmp7_);
			_g_free0 (_tmp6_);
			_g_free0 (_tmp5_);
			vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
			vala_ccode_declaration_space_add_constant_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
			_g_free0 (arr);
			_vala_ccode_node_unref0 (_cdecl_);
		} else {
			char* _tmp8_;
			ValaCCodeMacroReplacement* _tmp9_;
			ValaCCodeMacroReplacement* cdefine;
			cdefine = (_tmp9_ = vala_ccode_macro_replacement_new_with_expression (_tmp8_ = vala_constant_get_cname (c), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_constant_get_value (c)))), _g_free0 (_tmp8_), _tmp9_);
			vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) cdefine);
			_vala_ccode_node_unref0 (cdefine);
		}
	}
}


static void vala_dova_base_module_real_visit_constant (ValaCodeVisitor* base, ValaConstant* c) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (c != NULL);
	vala_dova_base_module_generate_constant_declaration (self, c, self->source_declarations);
	if (!vala_symbol_is_internal_symbol ((ValaSymbol*) c)) {
		vala_dova_base_module_generate_constant_declaration (self, c, self->header_declarations);
	}
}


void vala_dova_base_module_generate_field_declaration (ValaDovaBaseModule* self, ValaField* f, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	char* field_ctype;
	ValaCCodeDeclaration* _cdecl_;
	char* _tmp3_;
	ValaCCodeVariableDeclarator* _tmp4_;
	ValaAttribute* _tmp5_;
	gboolean _tmp6_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (f != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) f, _tmp0_ = vala_field_get_cname (f)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
	vala_dova_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) f), decl_space);
	field_ctype = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) f));
	if (vala_field_get_is_volatile (f)) {
		char* _tmp2_;
		field_ctype = (_tmp2_ = g_strconcat ("volatile ", field_ctype, NULL), _g_free0 (field_ctype), _tmp2_);
	}
	_cdecl_ = vala_ccode_declaration_new (field_ctype);
	vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp4_ = vala_ccode_variable_declarator_new (_tmp3_ = vala_field_get_cname (f), NULL, NULL)));
	_vala_ccode_node_unref0 (_tmp4_);
	_g_free0 (_tmp3_);
	if (vala_symbol_is_internal_symbol ((ValaSymbol*) f)) {
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
	} else {
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_EXTERN);
	}
	if ((_tmp6_ = (_tmp5_ = vala_code_node_get_attribute ((ValaCodeNode*) f, "ThreadLocal")) != NULL, _vala_code_node_unref0 (_tmp5_), _tmp6_)) {
		vala_ccode_declaration_set_modifiers (_cdecl_, vala_ccode_declaration_get_modifiers (_cdecl_) | VALA_CCODE_MODIFIERS_THREAD_LOCAL);
	}
	vala_ccode_declaration_space_add_type_member_declaration (decl_space, (ValaCCodeNode*) _cdecl_);
	_vala_ccode_node_unref0 (_cdecl_);
	_g_free0 (field_ctype);
}


static gpointer _vala_ccode_node_ref0 (gpointer self) {
	return self ? vala_ccode_node_ref (self) : NULL;
}


static void vala_dova_base_module_real_visit_field (ValaCodeVisitor* base, ValaField* f) {
	ValaDovaBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaClass* cl;
	ValaCCodeExpression* lhs;
	char* field_ctype;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (f != NULL);
	if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f), (ValaCodeGenerator*) self);
	}
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_symbol_get_parent_symbol ((ValaSymbol*) f), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	lhs = NULL;
	field_ctype = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) f));
	if (vala_field_get_is_volatile (f)) {
		char* _tmp1_;
		field_ctype = (_tmp1_ = g_strconcat ("volatile ", field_ctype, NULL), _g_free0 (field_ctype), _tmp1_);
	}
	if (vala_field_get_binding (f) == MEMBER_BINDING_INSTANCE) {
		gboolean _tmp2_ = FALSE;
		gboolean _tmp15_ = FALSE;
		if (cl != NULL) {
			_tmp2_ = vala_symbol_is_internal_symbol ((ValaSymbol*) f);
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			char* _tmp3_;
			char* _tmp4_;
			ValaCCodeIdentifier* _tmp5_;
			ValaCCodeFunctionCall* _tmp6_;
			ValaCCodeFunctionCall* priv_call;
			ValaCCodeIdentifier* _tmp7_;
			char* _tmp8_;
			ValaCCodeExpression* _tmp9_;
			priv_call = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new (_tmp4_ = g_strdup_printf ("%s_GET_PRIVATE", _tmp3_ = vala_typesymbol_get_upper_case_cname ((ValaTypeSymbol*) cl, NULL))))), _vala_ccode_node_unref0 (_tmp5_), _g_free0 (_tmp4_), _g_free0 (_tmp3_), _tmp6_);
			vala_ccode_function_call_add_argument (priv_call, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("this")));
			_vala_ccode_node_unref0 (_tmp7_);
			lhs = (_tmp9_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) priv_call, _tmp8_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp9_);
			_g_free0 (_tmp8_);
			_vala_ccode_node_unref0 (priv_call);
		} else {
			ValaCCodeIdentifier* _tmp10_;
			char* _tmp11_;
			ValaCCodeExpression* _tmp12_;
			lhs = (_tmp12_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new ("this")), _tmp11_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp12_);
			_g_free0 (_tmp11_);
			_vala_ccode_node_unref0 (_tmp10_);
		}
		if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
			ValaCCodeExpression* rhs;
			ValaCCodeAssignment* _tmp13_;
			ValaCCodeExpressionStatement* _tmp14_;
			rhs = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
			vala_ccode_fragment_append (self->instance_init_fragment, (ValaCCodeNode*) (_tmp14_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_assignment_new (lhs, rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp14_);
			_vala_ccode_node_unref0 (_tmp13_);
			vala_dova_base_module_append_temp_decl (self, self->instance_init_fragment, (ValaList*) vala_dova_base_module_get_temp_vars (self));
			vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
			_vala_ccode_node_unref0 (rhs);
		}
		if (vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) f))) {
			_tmp15_ = self->instance_finalize_fragment != NULL;
		} else {
			_tmp15_ = FALSE;
		}
		if (_tmp15_) {
			ValaMemberAccess* this_access;
			ValaDataType* _tmp16_;
			ValaSymbol* _tmp17_;
			ValaStruct* field_st;
			gboolean _tmp18_ = FALSE;
			ValaMemberAccess* ma;
			ValaCCodeExpression* _tmp21_;
			ValaCCodeExpressionStatement* _tmp22_;
			this_access = vala_member_access_new_simple ("this", NULL);
			vala_expression_set_value_type ((ValaExpression*) this_access, _tmp16_ = vala_dova_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f))));
			_vala_code_node_unref0 (_tmp16_);
			field_st = _vala_code_node_ref0 ((_tmp17_ = vala_symbol_get_parent_symbol ((ValaSymbol*) f), VALA_IS_STRUCT (_tmp17_) ? ((ValaStruct*) _tmp17_) : NULL));
			if (field_st != NULL) {
				_tmp18_ = !vala_struct_is_simple_type (field_st);
			} else {
				_tmp18_ = FALSE;
			}
			if (_tmp18_) {
				ValaCCodeIdentifier* _tmp19_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp19_ = vala_ccode_identifier_new ("(*this)")));
				_vala_ccode_node_unref0 (_tmp19_);
			} else {
				ValaCCodeIdentifier* _tmp20_;
				vala_code_node_set_ccodenode ((ValaCodeNode*) this_access, (ValaCCodeNode*) (_tmp20_ = vala_ccode_identifier_new ("this")));
				_vala_ccode_node_unref0 (_tmp20_);
			}
			ma = vala_member_access_new ((ValaExpression*) this_access, vala_symbol_get_name ((ValaSymbol*) f), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) f);
			vala_ccode_fragment_append (self->instance_finalize_fragment, (ValaCCodeNode*) (_tmp22_ = vala_ccode_expression_statement_new (_tmp21_ = vala_dova_base_module_get_unref_expression (self, lhs, vala_variable_get_variable_type ((ValaVariable*) f), (ValaExpression*) ma))));
			_vala_ccode_node_unref0 (_tmp22_);
			_vala_ccode_node_unref0 (_tmp21_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (field_st);
			_vala_code_node_unref0 (this_access);
		}
	} else {
		char* _tmp23_;
		ValaCCodeExpression* _tmp24_;
		char* _tmp25_;
		ValaCCodeVariableDeclarator* _tmp26_;
		ValaCCodeVariableDeclarator* var_decl;
		ValaCCodeExpression* _tmp27_;
		ValaCCodeDeclaration* var_def;
		ValaAttribute* _tmp30_;
		gboolean _tmp31_;
		vala_dova_base_module_generate_field_declaration (self, f, self->source_declarations);
		if (!vala_symbol_is_internal_symbol ((ValaSymbol*) f)) {
			vala_dova_base_module_generate_field_declaration (self, f, self->header_declarations);
		}
		lhs = (_tmp24_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp23_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp24_);
		_g_free0 (_tmp23_);
		var_decl = (_tmp26_ = vala_ccode_variable_declarator_new (_tmp25_ = vala_field_get_cname (f), NULL, NULL), _g_free0 (_tmp25_), _tmp26_);
		vala_ccode_variable_declarator_set_initializer (var_decl, _tmp27_ = vala_dova_base_module_default_value_for_type (self, vala_variable_get_variable_type ((ValaVariable*) f), TRUE));
		_vala_ccode_node_unref0 (_tmp27_);
		if (vala_variable_get_initializer ((ValaVariable*) f) != NULL) {
			ValaCCodeExpression* rhs;
			ValaCCodeAssignment* _tmp28_;
			ValaCCodeExpressionStatement* _tmp29_;
			rhs = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) f))));
			vala_ccode_fragment_append (self->module_init_fragment, (ValaCCodeNode*) (_tmp29_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp28_ = vala_ccode_assignment_new (lhs, rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp29_);
			_vala_ccode_node_unref0 (_tmp28_);
			vala_dova_base_module_append_temp_decl (self, self->module_init_fragment, (ValaList*) vala_dova_base_module_get_temp_vars (self));
			vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
			_vala_ccode_node_unref0 (rhs);
		}
		var_def = vala_ccode_declaration_new (field_ctype);
		vala_ccode_declaration_add_declarator (var_def, (ValaCCodeDeclarator*) var_decl);
		if (!vala_symbol_is_internal_symbol ((ValaSymbol*) f)) {
			vala_ccode_declaration_set_modifiers (var_def, VALA_CCODE_MODIFIERS_EXTERN);
		} else {
			vala_ccode_declaration_set_modifiers (var_def, VALA_CCODE_MODIFIERS_STATIC);
		}
		if ((_tmp31_ = (_tmp30_ = vala_code_node_get_attribute ((ValaCodeNode*) f, "ThreadLocal")) != NULL, _vala_code_node_unref0 (_tmp30_), _tmp31_)) {
			vala_ccode_declaration_set_modifiers (var_def, vala_ccode_declaration_get_modifiers (var_def) | VALA_CCODE_MODIFIERS_THREAD_LOCAL);
		}
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) var_def);
		_vala_ccode_node_unref0 (var_def);
		_vala_ccode_node_unref0 (var_decl);
	}
	_g_free0 (field_ctype);
	_vala_ccode_node_unref0 (lhs);
	_vala_code_node_unref0 (cl);
}


gboolean vala_dova_base_module_is_constant_ccode_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cexpr) {
	gboolean result = FALSE;
	ValaCCodeExpression* _tmp1_;
	ValaCCodeParenthesizedExpression* cparenthesized;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (cexpr != NULL, FALSE);
	if (VALA_IS_CCODE_CONSTANT (cexpr)) {
		result = TRUE;
		return result;
	} else {
		if (VALA_IS_CCODE_CAST_EXPRESSION (cexpr)) {
			ValaCCodeCastExpression* ccast;
			ccast = _vala_ccode_node_ref0 (VALA_CCODE_CAST_EXPRESSION (cexpr));
			result = vala_dova_base_module_is_constant_ccode_expression (self, vala_ccode_cast_expression_get_inner (ccast));
			_vala_ccode_node_unref0 (ccast);
			return result;
		} else {
			if (VALA_IS_CCODE_BINARY_EXPRESSION (cexpr)) {
				ValaCCodeBinaryExpression* cbinary;
				gboolean _tmp0_ = FALSE;
				cbinary = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (cexpr));
				if (vala_dova_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_left (cbinary))) {
					_tmp0_ = vala_dova_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_right (cbinary));
				} else {
					_tmp0_ = FALSE;
				}
				result = _tmp0_;
				_vala_ccode_node_unref0 (cbinary);
				return result;
			}
		}
	}
	cparenthesized = _vala_ccode_node_ref0 ((_tmp1_ = cexpr, VALA_IS_CCODE_PARENTHESIZED_EXPRESSION (_tmp1_) ? ((ValaCCodeParenthesizedExpression*) _tmp1_) : NULL));
	if (NULL != cparenthesized) {
		_tmp2_ = vala_dova_base_module_is_constant_ccode_expression (self, vala_ccode_parenthesized_expression_get_inner (cparenthesized));
	} else {
		_tmp2_ = FALSE;
	}
	result = _tmp2_;
	_vala_ccode_node_unref0 (cparenthesized);
	return result;
}


/**
 * Returns whether the passed cexpr is a pure expression, i.e. an
 * expression without side-effects.
 */
gboolean vala_dova_base_module_is_pure_ccode_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cexpr) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (cexpr != NULL, FALSE);
	if (VALA_IS_CCODE_CONSTANT (cexpr)) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = VALA_IS_CCODE_IDENTIFIER (cexpr);
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		if (VALA_IS_CCODE_BINARY_EXPRESSION (cexpr)) {
			ValaCCodeBinaryExpression* cbinary;
			gboolean _tmp1_ = FALSE;
			cbinary = _vala_ccode_node_ref0 (VALA_CCODE_BINARY_EXPRESSION (cexpr));
			if (vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_binary_expression_get_left (cbinary))) {
				_tmp1_ = vala_dova_base_module_is_constant_ccode_expression (self, vala_ccode_binary_expression_get_right (cbinary));
			} else {
				_tmp1_ = FALSE;
			}
			result = _tmp1_;
			_vala_ccode_node_unref0 (cbinary);
			return result;
		} else {
			if (VALA_IS_CCODE_UNARY_EXPRESSION (cexpr)) {
				ValaCCodeUnaryExpression* cunary;
				cunary = _vala_ccode_node_ref0 (VALA_CCODE_UNARY_EXPRESSION (cexpr));
				switch (vala_ccode_unary_expression_get_operator (cunary)) {
					case VALA_CCODE_UNARY_OPERATOR_PREFIX_INCREMENT:
					case VALA_CCODE_UNARY_OPERATOR_PREFIX_DECREMENT:
					case VALA_CCODE_UNARY_OPERATOR_POSTFIX_INCREMENT:
					case VALA_CCODE_UNARY_OPERATOR_POSTFIX_DECREMENT:
					{
						result = FALSE;
						_vala_ccode_node_unref0 (cunary);
						return result;
					}
					default:
					{
						result = vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_unary_expression_get_inner (cunary));
						_vala_ccode_node_unref0 (cunary);
						return result;
					}
				}
				_vala_ccode_node_unref0 (cunary);
			} else {
				if (VALA_IS_CCODE_MEMBER_ACCESS (cexpr)) {
					ValaCCodeMemberAccess* cma;
					cma = _vala_ccode_node_ref0 (VALA_CCODE_MEMBER_ACCESS (cexpr));
					result = vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_member_access_get_inner (cma));
					_vala_ccode_node_unref0 (cma);
					return result;
				} else {
					if (VALA_IS_CCODE_ELEMENT_ACCESS (cexpr)) {
						ValaCCodeElementAccess* cea;
						gboolean _tmp2_ = FALSE;
						cea = _vala_ccode_node_ref0 (VALA_CCODE_ELEMENT_ACCESS (cexpr));
						if (vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_element_access_get_container (cea))) {
							_tmp2_ = vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_element_access_get_index (cea));
						} else {
							_tmp2_ = FALSE;
						}
						result = _tmp2_;
						_vala_ccode_node_unref0 (cea);
						return result;
					} else {
						if (VALA_IS_CCODE_CAST_EXPRESSION (cexpr)) {
							ValaCCodeCastExpression* ccast;
							ccast = _vala_ccode_node_ref0 (VALA_CCODE_CAST_EXPRESSION (cexpr));
							result = vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_cast_expression_get_inner (ccast));
							_vala_ccode_node_unref0 (ccast);
							return result;
						} else {
							if (VALA_IS_CCODE_PARENTHESIZED_EXPRESSION (cexpr)) {
								ValaCCodeParenthesizedExpression* cparenthesized;
								cparenthesized = _vala_ccode_node_ref0 (VALA_CCODE_PARENTHESIZED_EXPRESSION (cexpr));
								result = vala_dova_base_module_is_pure_ccode_expression (self, vala_ccode_parenthesized_expression_get_inner (cparenthesized));
								_vala_ccode_node_unref0 (cparenthesized);
								return result;
							}
						}
					}
				}
			}
		}
	}
	result = FALSE;
	return result;
}


static void vala_dova_base_module_real_visit_formal_parameter (ValaCodeVisitor* base, ValaFormalParameter* p) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (p != NULL);
}


static void vala_dova_base_module_real_visit_property (ValaCodeVisitor* base, ValaProperty* prop) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (prop != NULL);
	vala_code_node_accept_children ((ValaCodeNode*) prop, (ValaCodeVisitor*) self);
}


void vala_dova_base_module_generate_type_declaration (ValaDovaBaseModule* self, ValaDataType* type, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	g_return_if_fail (decl_space != NULL);
	if (VALA_IS_OBJECT_TYPE (type)) {
		ValaObjectType* object_type;
		object_type = _vala_code_node_ref0 (VALA_OBJECT_TYPE (type));
		if (VALA_IS_CLASS (vala_object_type_get_type_symbol (object_type))) {
			vala_dova_base_module_generate_class_declaration (self, VALA_CLASS (vala_object_type_get_type_symbol (object_type)), decl_space);
		} else {
			if (VALA_IS_INTERFACE (vala_object_type_get_type_symbol (object_type))) {
				vala_dova_base_module_generate_interface_declaration (self, VALA_INTERFACE (vala_object_type_get_type_symbol (object_type)), decl_space);
			}
		}
		_vala_code_node_unref0 (object_type);
	} else {
		if (VALA_IS_DELEGATE_TYPE (type)) {
			ValaDelegateType* deleg_type;
			ValaDelegate* d;
			deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (type));
			d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
			vala_dova_base_module_generate_delegate_declaration (self, d, decl_space);
			_vala_code_node_unref0 (d);
			_vala_code_node_unref0 (deleg_type);
		} else {
			if (VALA_IS_ENUM (vala_data_type_get_data_type (type))) {
				ValaEnum* en;
				en = _vala_code_node_ref0 (VALA_ENUM (vala_data_type_get_data_type (type)));
				vala_dova_base_module_generate_enum_declaration (self, en, decl_space);
				_vala_code_node_unref0 (en);
			} else {
				if (VALA_IS_VALUE_TYPE (type)) {
					ValaValueType* value_type;
					value_type = _vala_code_node_ref0 (VALA_VALUE_TYPE (type));
					vala_dova_base_module_generate_struct_declaration (self, VALA_STRUCT (vala_value_type_get_type_symbol (value_type)), decl_space);
					_vala_code_node_unref0 (value_type);
				} else {
					if (VALA_IS_ARRAY_TYPE (type)) {
						ValaArrayType* array_type;
						array_type = _vala_code_node_ref0 (VALA_ARRAY_TYPE (type));
						vala_dova_base_module_generate_type_declaration (self, vala_array_type_get_element_type (array_type), decl_space);
						_vala_code_node_unref0 (array_type);
					} else {
						if (VALA_IS_POINTER_TYPE (type)) {
							ValaPointerType* pointer_type;
							pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (type));
							vala_dova_base_module_generate_type_declaration (self, vala_pointer_type_get_base_type (pointer_type), decl_space);
							_vala_code_node_unref0 (pointer_type);
						}
					}
				}
			}
		}
	}
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _type_arg_it;
		_type_arg_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_data_type_get_type_arguments (type))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaDataType* type_arg;
			if (!vala_iterator_next (_type_arg_it)) {
				break;
			}
			type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
			vala_dova_base_module_generate_type_declaration (self, type_arg, decl_space);
			_vala_code_node_unref0 (type_arg);
		}
		_vala_collection_object_unref0 (_type_arg_it);
	}
}


static void vala_dova_base_module_real_generate_struct_declaration (ValaDovaBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (st != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_dova_base_module_generate_struct_declaration (ValaDovaBaseModule* self, ValaStruct* st, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_struct_declaration (self, st, decl_space);
}


static void vala_dova_base_module_real_generate_delegate_declaration (ValaDovaBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (d != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_dova_base_module_generate_delegate_declaration (ValaDovaBaseModule* self, ValaDelegate* d, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_delegate_declaration (self, d, decl_space);
}


static void vala_dova_base_module_real_generate_cparameters (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaCCodeFunctionCall* vcall) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
	g_return_if_fail (func != NULL);
}


void vala_dova_base_module_generate_cparameters (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space, ValaCCodeFunction* func, ValaCCodeFunctionDeclarator* vdeclarator, ValaCCodeFunctionCall* vcall) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_cparameters (self, m, decl_space, func, vdeclarator, vcall);
}


static void vala_dova_base_module_real_generate_property_accessor_declaration (ValaDovaBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (acc != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_dova_base_module_generate_property_accessor_declaration (ValaDovaBaseModule* self, ValaPropertyAccessor* acc, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_property_accessor_declaration (self, acc, decl_space);
}


static void vala_dova_base_module_real_visit_destructor (ValaCodeVisitor* base, ValaDestructor* d) {
	ValaDovaBaseModule * self;
	ValaCCodeFragment* cfrag;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (d != NULL);
	vala_code_node_emit ((ValaCodeNode*) vala_destructor_get_body (d), (ValaCodeGenerator*) self);
	cfrag = vala_ccode_fragment_new ();
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_destructor_get_body (d)));
	vala_code_node_set_ccodenode ((ValaCodeNode*) d, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (cfrag);
}


gint vala_dova_base_module_get_block_id (ValaDovaBaseModule* self, ValaBlock* b) {
	gint result = 0;
	gint _result_;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_result_ = GPOINTER_TO_INT (vala_map_get (self->priv->block_map, b));
	if (_result_ == 0) {
		_result_ = self->priv->next_block_id = self->priv->next_block_id + 1;
		vala_map_set (self->priv->block_map, b, GINT_TO_POINTER (_result_));
	}
	result = _result_;
	return result;
}


static void vala_dova_base_module_capture_parameter (ValaDovaBaseModule* self, ValaFormalParameter* param, ValaCCodeStruct* data, ValaCCodeBlock* cblock, gint block_id, ValaCCodeBlock* free_block) {
	ValaDataType* param_type;
	char* _tmp0_;
	char* _tmp1_;
	ValaCCodeExpression* cparam;
	gboolean _tmp2_ = FALSE;
	char* _tmp5_;
	ValaCCodeExpression* _tmp6_;
	char* _tmp7_;
	ValaCCodeMemberAccess* _tmp8_;
	ValaCCodeAssignment* _tmp9_;
	ValaCCodeExpressionStatement* _tmp10_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (param != NULL);
	g_return_if_fail (data != NULL);
	g_return_if_fail (cblock != NULL);
	g_return_if_fail (free_block != NULL);
	vala_dova_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) param), self->source_declarations);
	param_type = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param));
	vala_data_type_set_value_owned (param_type, TRUE);
	vala_ccode_struct_add_field (data, _tmp0_ = vala_data_type_get_cname (param_type), _tmp1_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)), NULL);
	_g_free0 (_tmp1_);
	_g_free0 (_tmp0_);
	cparam = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param));
	if (vala_dova_base_module_requires_copy (self, param_type)) {
		_tmp2_ = !vala_data_type_get_value_owned (vala_variable_get_variable_type ((ValaVariable*) param));
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		ValaMemberAccess* ma;
		ValaDataType* _tmp3_;
		ValaCCodeExpression* _tmp4_;
		ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
		vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
		vala_expression_set_value_type ((ValaExpression*) ma, _tmp3_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) param)));
		_vala_code_node_unref0 (_tmp3_);
		vala_formal_parameter_set_captured (param, FALSE);
		cparam = (_tmp4_ = vala_dova_base_module_get_ref_cexpression (self, vala_variable_get_variable_type ((ValaVariable*) param), cparam, (ValaExpression*) ma, (ValaCodeNode*) param), _vala_ccode_node_unref0 (cparam), _tmp4_);
		vala_formal_parameter_set_captured (param, TRUE);
		_vala_code_node_unref0 (ma);
	}
	vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp10_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_member_access_new_pointer (_tmp6_ = vala_dova_base_module_get_variable_cexpression (self, _tmp5_ = g_strdup_printf ("_data%d_", block_id)), _tmp7_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)))), cparam, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
	_vala_ccode_node_unref0 (_tmp10_);
	_vala_ccode_node_unref0 (_tmp9_);
	_vala_ccode_node_unref0 (_tmp8_);
	_g_free0 (_tmp7_);
	_vala_ccode_node_unref0 (_tmp6_);
	_g_free0 (_tmp5_);
	if (vala_dova_base_module_requires_destroy (self, param_type)) {
		ValaMemberAccess* ma;
		ValaDataType* _tmp11_;
		char* _tmp12_;
		ValaCCodeIdentifier* _tmp13_;
		char* _tmp14_;
		ValaCCodeMemberAccess* _tmp15_;
		ValaCCodeExpression* _tmp16_;
		ValaCCodeExpressionStatement* _tmp17_;
		ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
		vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
		vala_expression_set_value_type ((ValaExpression*) ma, _tmp11_ = vala_data_type_copy (param_type));
		_vala_code_node_unref0 (_tmp11_);
		vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp17_ = vala_ccode_expression_statement_new (_tmp16_ = vala_dova_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new (_tmp12_ = g_strdup_printf ("_data%d_", block_id))), _tmp14_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) param)))), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma))));
		_vala_ccode_node_unref0 (_tmp17_);
		_vala_ccode_node_unref0 (_tmp16_);
		_vala_ccode_node_unref0 (_tmp15_);
		_g_free0 (_tmp14_);
		_vala_ccode_node_unref0 (_tmp13_);
		_g_free0 (_tmp12_);
		_vala_code_node_unref0 (ma);
	}
	_vala_ccode_node_unref0 (cparam);
	_vala_code_node_unref0 (param_type);
}


static void vala_dova_base_module_real_visit_block (ValaCodeVisitor* base, ValaBlock* b) {
	ValaDovaBaseModule * self;
	ValaList* local_vars;
	ValaCCodeBlock* cblock;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (b != NULL);
	vala_dova_base_module_emit_context_push_symbol (self->emit_context, (ValaSymbol*) b);
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _stmt_it;
		_stmt_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_block_get_statements (b))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaStatement* stmt;
			if (!vala_iterator_next (_stmt_it)) {
				break;
			}
			stmt = (ValaStatement*) vala_iterator_get (_stmt_it);
			vala_code_node_emit ((ValaCodeNode*) stmt, (ValaCodeGenerator*) self);
			_vala_code_node_unref0 (stmt);
		}
		_vala_collection_object_unref0 (_stmt_it);
	}
	local_vars = vala_block_get_local_variables (b);
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) local_vars);
		while (TRUE) {
			ValaLocalVariable* local;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			vala_symbol_set_active ((ValaSymbol*) local, FALSE);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	cblock = vala_ccode_block_new ();
	if (vala_block_get_captured (b)) {
		ValaBlock* parent_block;
		gint block_id;
		char* struct_name;
		ValaCCodeBlock* free_block;
		char* _tmp2_;
		ValaCCodeStruct* _tmp3_;
		ValaCCodeStruct* data;
		ValaCCodeIdentifier* _tmp36_;
		ValaCCodeFunctionCall* _tmp37_;
		ValaCCodeFunctionCall* data_alloc;
		char* _tmp38_;
		ValaCCodeIdentifier* _tmp39_;
		ValaCCodeFunctionCall* _tmp40_;
		char* _tmp41_;
		ValaCCodeDeclaration* _tmp42_;
		ValaCCodeDeclaration* data_decl;
		char* _tmp43_;
		ValaCCodeVariableDeclarator* _tmp44_;
		char* _tmp70_;
		ValaCCodeVariableDeclarator* _tmp71_;
		ValaCCodeTypeDefinition* _tmp72_;
		ValaCCodeTypeDefinition* _typedef_;
		ValaCCodeIdentifier* _tmp73_;
		ValaCCodeFunctionCall* _tmp74_;
		ValaCCodeFunctionCall* data_free;
		char* _tmp75_;
		ValaCCodeIdentifier* _tmp76_;
		ValaCCodeExpressionStatement* _tmp77_;
		char* _tmp78_;
		ValaCCodeFunction* _tmp79_;
		ValaCCodeFunction* type_get_fun;
		ValaCCodeFunction* _tmp80_;
		ValaCCodeBlock* _tmp81_;
		ValaCCodeDeclaration* _cdecl_;
		char* _tmp82_;
		ValaCCodeConstant* _tmp83_;
		ValaCCodeVariableDeclarator* _tmp84_;
		ValaCCodeDeclaration* _tmp85_;
		char* _tmp86_;
		ValaCCodeConstant* _tmp87_;
		ValaCCodeVariableDeclarator* _tmp88_;
		ValaCCodeDeclaration* _tmp89_;
		char* _tmp90_;
		ValaCCodeConstant* _tmp91_;
		ValaCCodeVariableDeclarator* _tmp92_;
		ValaCCodeBlock* type_init_block;
		ValaCCodeIdentifier* _tmp93_;
		ValaCCodeFunctionCall* _tmp94_;
		ValaCCodeFunctionCall* alloc_call;
		ValaCCodeIdentifier* _tmp95_;
		ValaCCodeFunctionCall* _tmp96_;
		char* _tmp97_;
		ValaCCodeConstant* _tmp98_;
		ValaCCodeConstant* _tmp99_;
		char* _tmp100_;
		ValaCCodeIdentifier* _tmp101_;
		ValaCCodeUnaryExpression* _tmp102_;
		char* _tmp103_;
		ValaCCodeIdentifier* _tmp104_;
		ValaCCodeUnaryExpression* _tmp105_;
		char* _tmp106_;
		ValaCCodeIdentifier* _tmp107_;
		ValaCCodeUnaryExpression* _tmp108_;
		ValaCCodeExpressionStatement* _tmp109_;
		ValaCCodeIdentifier* _tmp110_;
		ValaCCodeFunctionCall* _tmp111_;
		ValaCCodeFunctionCall* type_init_call;
		char* _tmp112_;
		ValaCCodeIdentifier* _tmp113_;
		ValaCCodeExpressionStatement* _tmp114_;
		char* _tmp115_;
		ValaCCodeIdentifier* _tmp116_;
		ValaCCodeUnaryExpression* _tmp117_;
		ValaCCodeIfStatement* _tmp118_;
		char* _tmp119_;
		ValaCCodeIdentifier* _tmp120_;
		ValaCCodeReturnStatement* _tmp121_;
		char* _tmp122_;
		ValaCCodeFunction* _tmp123_;
		ValaCCodeFunction* unref_fun;
		char* _tmp124_;
		char* _tmp125_;
		ValaCCodeFormalParameter* _tmp126_;
		ValaCCodeFunction* _tmp127_;
		parent_block = _vala_code_node_ref0 (vala_dova_base_module_next_closure_block (self, vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
		block_id = vala_dova_base_module_get_block_id (self, b);
		struct_name = g_strdup_printf ("Block%dData", block_id);
		free_block = vala_ccode_block_new ();
		data = (_tmp3_ = vala_ccode_struct_new (_tmp2_ = g_strconcat ("_", struct_name, NULL)), _g_free0 (_tmp2_), _tmp3_);
		vala_ccode_struct_add_field (data, "DovaType*", "type", NULL);
		vala_ccode_struct_add_field (data, "int", "_ref_count_", NULL);
		if (parent_block != NULL) {
			gint parent_block_id;
			char* _tmp4_;
			char* _tmp5_;
			ValaCCodeIdentifier* _tmp6_;
			ValaCCodeFunctionCall* _tmp7_;
			ValaCCodeFunctionCall* unref_call;
			char* _tmp8_;
			ValaCCodeIdentifier* _tmp9_;
			char* _tmp10_;
			ValaCCodeMemberAccess* _tmp11_;
			ValaCCodeExpressionStatement* _tmp12_;
			parent_block_id = vala_dova_base_module_get_block_id (self, parent_block);
			vala_ccode_struct_add_field (data, _tmp4_ = g_strdup_printf ("Block%dData *", parent_block_id), _tmp5_ = g_strdup_printf ("_data%d_", parent_block_id), NULL);
			_g_free0 (_tmp5_);
			_g_free0 (_tmp4_);
			unref_call = (_tmp7_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("dova_object_unref"))), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
			vala_ccode_function_call_add_argument (unref_call, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new (_tmp8_ = g_strdup_printf ("_data%d_", block_id))), _tmp10_ = g_strdup_printf ("_data%d_", parent_block_id))));
			_vala_ccode_node_unref0 (_tmp11_);
			_g_free0 (_tmp10_);
			_vala_ccode_node_unref0 (_tmp9_);
			_g_free0 (_tmp8_);
			vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp12_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) unref_call)));
			_vala_ccode_node_unref0 (_tmp12_);
			_vala_ccode_node_unref0 (unref_call);
		} else {
			gboolean _tmp13_ = FALSE;
			gboolean _tmp14_ = FALSE;
			if (vala_dova_base_module_get_current_method (self) != NULL) {
				_tmp14_ = vala_method_get_binding (vala_dova_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
			} else {
				_tmp14_ = FALSE;
			}
			if (_tmp14_) {
				_tmp13_ = TRUE;
			} else {
				gboolean _tmp15_ = FALSE;
				if (vala_dova_base_module_get_current_property_accessor (self) != NULL) {
					_tmp15_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_dova_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp15_ = FALSE;
				}
				_tmp13_ = _tmp15_;
			}
			if (_tmp13_) {
				char* _tmp16_;
				char* _tmp17_;
				ValaMemberAccess* ma;
				char* _tmp18_;
				ValaCCodeIdentifier* _tmp19_;
				ValaCCodeMemberAccess* _tmp20_;
				ValaObjectType* _tmp21_;
				ValaCCodeExpression* _tmp22_;
				ValaCCodeExpressionStatement* _tmp23_;
				vala_ccode_struct_add_field (data, _tmp17_ = g_strdup_printf ("%s *", _tmp16_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) vala_dova_base_module_get_current_class (self), FALSE)), "this", NULL);
				_g_free0 (_tmp17_);
				_g_free0 (_tmp16_);
				ma = vala_member_access_new_simple ("this", NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) vala_dova_base_module_get_current_class (self));
				vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp23_ = vala_ccode_expression_statement_new (_tmp22_ = vala_dova_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new (_tmp18_ = g_strdup_printf ("_data%d_", block_id))), "this")), (ValaDataType*) (_tmp21_ = vala_object_type_new ((ValaObjectTypeSymbol*) vala_dova_base_module_get_current_class (self))), (ValaExpression*) ma))));
				_vala_ccode_node_unref0 (_tmp23_);
				_vala_ccode_node_unref0 (_tmp22_);
				_vala_code_node_unref0 (_tmp21_);
				_vala_ccode_node_unref0 (_tmp20_);
				_vala_ccode_node_unref0 (_tmp19_);
				_g_free0 (_tmp18_);
				_vala_code_node_unref0 (ma);
			}
		}
		{
			ValaIterator* _local_it;
			_local_it = vala_iterable_iterator ((ValaIterable*) local_vars);
			while (TRUE) {
				ValaLocalVariable* local;
				if (!vala_iterator_next (_local_it)) {
					break;
				}
				local = (ValaLocalVariable*) vala_iterator_get (_local_it);
				if (vala_local_variable_get_captured (local)) {
					char* _tmp24_;
					char* _tmp25_;
					char* _tmp26_;
					char* _tmp27_;
					vala_dova_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) local), self->source_declarations);
					vala_ccode_struct_add_field (data, _tmp24_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local)), _tmp27_ = g_strconcat (_tmp25_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), _tmp26_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local)), NULL), NULL);
					_g_free0 (_tmp27_);
					_g_free0 (_tmp26_);
					_g_free0 (_tmp25_);
					_g_free0 (_tmp24_);
				}
				_vala_code_node_unref0 (local);
			}
			_vala_collection_object_unref0 (_local_it);
		}
		{
			gint i;
			i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
			{
				gboolean _tmp28_;
				_tmp28_ = TRUE;
				while (TRUE) {
					ValaLocalVariable* local;
					if (!_tmp28_) {
						i--;
					}
					_tmp28_ = FALSE;
					if (!(i >= 0)) {
						break;
					}
					local = (ValaLocalVariable*) vala_list_get (local_vars, i);
					if (vala_local_variable_get_captured (local)) {
						if (vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local))) {
							ValaMemberAccess* ma;
							ValaDataType* _tmp29_;
							char* _tmp30_;
							ValaCCodeIdentifier* _tmp31_;
							char* _tmp32_;
							ValaCCodeMemberAccess* _tmp33_;
							ValaCCodeExpression* _tmp34_;
							ValaCCodeExpressionStatement* _tmp35_;
							ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
							vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
							vala_expression_set_value_type ((ValaExpression*) ma, _tmp29_ = vala_data_type_copy (vala_variable_get_variable_type ((ValaVariable*) local)));
							_vala_code_node_unref0 (_tmp29_);
							vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp35_ = vala_ccode_expression_statement_new (_tmp34_ = vala_dova_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp33_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp31_ = vala_ccode_identifier_new (_tmp30_ = g_strdup_printf ("_data%d_", block_id))), _tmp32_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)))), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma))));
							_vala_ccode_node_unref0 (_tmp35_);
							_vala_ccode_node_unref0 (_tmp34_);
							_vala_ccode_node_unref0 (_tmp33_);
							_g_free0 (_tmp32_);
							_vala_ccode_node_unref0 (_tmp31_);
							_g_free0 (_tmp30_);
							_vala_code_node_unref0 (ma);
						}
					}
					_vala_code_node_unref0 (local);
				}
			}
		}
		data_alloc = (_tmp37_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp36_ = vala_ccode_identifier_new ("dova_object_alloc"))), _vala_ccode_node_unref0 (_tmp36_), _tmp37_);
		vala_ccode_function_call_add_argument (data_alloc, (ValaCCodeExpression*) (_tmp40_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp39_ = vala_ccode_identifier_new (_tmp38_ = g_strdup_printf ("block%d_data_type_get", block_id))))));
		_vala_ccode_node_unref0 (_tmp40_);
		_vala_ccode_node_unref0 (_tmp39_);
		_g_free0 (_tmp38_);
		data_decl = (_tmp42_ = vala_ccode_declaration_new (_tmp41_ = g_strconcat (struct_name, "*", NULL)), _g_free0 (_tmp41_), _tmp42_);
		vala_ccode_declaration_add_declarator (data_decl, (ValaCCodeDeclarator*) (_tmp44_ = vala_ccode_variable_declarator_new (_tmp43_ = g_strdup_printf ("_data%d_", block_id), (ValaCCodeExpression*) data_alloc, NULL)));
		_vala_ccode_node_unref0 (_tmp44_);
		_g_free0 (_tmp43_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) data_decl);
		if (parent_block != NULL) {
			gint parent_block_id;
			ValaCCodeIdentifier* _tmp45_;
			ValaCCodeFunctionCall* _tmp46_;
			ValaCCodeFunctionCall* ref_call;
			char* _tmp47_;
			ValaCCodeExpression* _tmp48_;
			char* _tmp49_;
			ValaCCodeExpression* _tmp50_;
			char* _tmp51_;
			ValaCCodeMemberAccess* _tmp52_;
			ValaCCodeAssignment* _tmp53_;
			ValaCCodeExpressionStatement* _tmp54_;
			parent_block_id = vala_dova_base_module_get_block_id (self, parent_block);
			ref_call = (_tmp46_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp45_ = vala_ccode_identifier_new ("dova_object_ref"))), _vala_ccode_node_unref0 (_tmp45_), _tmp46_);
			vala_ccode_function_call_add_argument (ref_call, _tmp48_ = vala_dova_base_module_get_variable_cexpression (self, _tmp47_ = g_strdup_printf ("_data%d_", parent_block_id)));
			_vala_ccode_node_unref0 (_tmp48_);
			_g_free0 (_tmp47_);
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp54_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp53_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp52_ = vala_ccode_member_access_new_pointer (_tmp50_ = vala_dova_base_module_get_variable_cexpression (self, _tmp49_ = g_strdup_printf ("_data%d_", block_id)), _tmp51_ = g_strdup_printf ("_data%d_", parent_block_id))), (ValaCCodeExpression*) ref_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp54_);
			_vala_ccode_node_unref0 (_tmp53_);
			_vala_ccode_node_unref0 (_tmp52_);
			_g_free0 (_tmp51_);
			_vala_ccode_node_unref0 (_tmp50_);
			_g_free0 (_tmp49_);
			_vala_ccode_node_unref0 (ref_call);
		} else {
			gboolean _tmp55_ = FALSE;
			gboolean _tmp56_ = FALSE;
			if (vala_dova_base_module_get_current_method (self) != NULL) {
				_tmp56_ = vala_method_get_binding (vala_dova_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
			} else {
				_tmp56_ = FALSE;
			}
			if (_tmp56_) {
				_tmp55_ = TRUE;
			} else {
				gboolean _tmp57_ = FALSE;
				if (vala_dova_base_module_get_current_property_accessor (self) != NULL) {
					_tmp57_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_dova_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
				} else {
					_tmp57_ = FALSE;
				}
				_tmp55_ = _tmp57_;
			}
			if (_tmp55_) {
				ValaObjectType* _tmp58_;
				ValaCCodeExpression* _tmp59_;
				ValaCCodeFunctionCall* _tmp60_;
				ValaCCodeFunctionCall* ref_call;
				ValaCCodeIdentifier* _tmp61_;
				char* _tmp62_;
				ValaCCodeExpression* _tmp63_;
				ValaCCodeMemberAccess* _tmp64_;
				ValaCCodeAssignment* _tmp65_;
				ValaCCodeExpressionStatement* _tmp66_;
				ref_call = (_tmp60_ = vala_ccode_function_call_new (_tmp59_ = vala_dova_base_module_get_dup_func_expression (self, (ValaDataType*) (_tmp58_ = vala_object_type_new ((ValaObjectTypeSymbol*) vala_dova_base_module_get_current_class (self))), vala_code_node_get_source_reference ((ValaCodeNode*) b), FALSE)), _vala_ccode_node_unref0 (_tmp59_), _vala_code_node_unref0 (_tmp58_), _tmp60_);
				vala_ccode_function_call_add_argument (ref_call, (ValaCCodeExpression*) (_tmp61_ = vala_ccode_identifier_new ("this")));
				_vala_ccode_node_unref0 (_tmp61_);
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp66_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp65_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp64_ = vala_ccode_member_access_new_pointer (_tmp63_ = vala_dova_base_module_get_variable_cexpression (self, _tmp62_ = g_strdup_printf ("_data%d_", block_id)), "this")), (ValaCCodeExpression*) ref_call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp66_);
				_vala_ccode_node_unref0 (_tmp65_);
				_vala_ccode_node_unref0 (_tmp64_);
				_vala_ccode_node_unref0 (_tmp63_);
				_g_free0 (_tmp62_);
				_vala_ccode_node_unref0 (ref_call);
			}
		}
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
			ValaMethod* m;
			ValaCCodeFragment* cfrag;
			m = _vala_code_node_ref0 (VALA_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
			{
				ValaList* _tmp67_;
				ValaIterator* _tmp68_;
				ValaIterator* _param_it;
				_param_it = (_tmp68_ = vala_iterable_iterator ((ValaIterable*) (_tmp67_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp67_), _tmp68_);
				while (TRUE) {
					ValaFormalParameter* param;
					if (!vala_iterator_next (_param_it)) {
						break;
					}
					param = (ValaFormalParameter*) vala_iterator_get (_param_it);
					if (vala_formal_parameter_get_captured (param)) {
						vala_dova_base_module_capture_parameter (self, param, data, cblock, block_id, free_block);
					}
					_vala_code_node_unref0 (param);
				}
				_vala_collection_object_unref0 (_param_it);
			}
			cfrag = vala_ccode_fragment_new ();
			vala_dova_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_dova_base_module_get_temp_vars (self));
			vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
			vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
			_vala_ccode_node_unref0 (cfrag);
			_vala_code_node_unref0 (m);
		} else {
			if (VALA_IS_PROPERTY_ACCESSOR (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
				ValaPropertyAccessor* acc;
				gboolean _tmp69_ = FALSE;
				ValaCCodeFragment* cfrag;
				acc = _vala_code_node_ref0 (VALA_PROPERTY_ACCESSOR (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
				if (!vala_property_accessor_get_readable (acc)) {
					_tmp69_ = vala_formal_parameter_get_captured (vala_property_accessor_get_value_parameter (acc));
				} else {
					_tmp69_ = FALSE;
				}
				if (_tmp69_) {
					vala_dova_base_module_capture_parameter (self, vala_property_accessor_get_value_parameter (acc), data, cblock, block_id, free_block);
				}
				cfrag = vala_ccode_fragment_new ();
				vala_dova_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_dova_base_module_get_temp_vars (self));
				vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
				vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) cfrag);
				_vala_ccode_node_unref0 (cfrag);
				_vala_code_node_unref0 (acc);
			}
		}
		_typedef_ = (_tmp72_ = vala_ccode_type_definition_new (_tmp70_ = g_strconcat ("struct _", struct_name, NULL), (ValaCCodeDeclarator*) (_tmp71_ = vala_ccode_variable_declarator_new (struct_name, NULL, NULL))), _vala_ccode_node_unref0 (_tmp71_), _g_free0 (_tmp70_), _tmp72_);
		vala_ccode_declaration_space_add_type_declaration (self->source_declarations, (ValaCCodeNode*) _typedef_);
		vala_ccode_declaration_space_add_type_definition (self->source_declarations, (ValaCCodeNode*) data);
		data_free = (_tmp74_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp73_ = vala_ccode_identifier_new ("free"))), _vala_ccode_node_unref0 (_tmp73_), _tmp74_);
		vala_ccode_function_call_add_argument (data_free, (ValaCCodeExpression*) (_tmp76_ = vala_ccode_identifier_new (_tmp75_ = g_strdup_printf ("_data%d_", block_id))));
		_vala_ccode_node_unref0 (_tmp76_);
		_g_free0 (_tmp75_);
		vala_ccode_block_add_statement (free_block, (ValaCCodeNode*) (_tmp77_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_free)));
		_vala_ccode_node_unref0 (_tmp77_);
		type_get_fun = (_tmp79_ = vala_ccode_function_new (_tmp78_ = g_strdup_printf ("block%d_data_type_get", block_id), "DovaType*"), _g_free0 (_tmp78_), _tmp79_);
		vala_ccode_function_set_modifiers (type_get_fun, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp80_ = vala_ccode_function_copy (type_get_fun)));
		_vala_ccode_node_unref0 (_tmp80_);
		vala_ccode_function_set_block (type_get_fun, _tmp81_ = vala_ccode_block_new ());
		_vala_ccode_node_unref0 (_tmp81_);
		_cdecl_ = vala_ccode_declaration_new ("int");
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp84_ = vala_ccode_variable_declarator_new (_tmp82_ = g_strdup_printf ("_block%d_data_object_offset", block_id), (ValaCCodeExpression*) (_tmp83_ = vala_ccode_constant_new ("0")), NULL)));
		_vala_ccode_node_unref0 (_tmp84_);
		_vala_ccode_node_unref0 (_tmp83_);
		_g_free0 (_tmp82_);
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) _cdecl_);
		_cdecl_ = (_tmp85_ = vala_ccode_declaration_new ("int"), _vala_ccode_node_unref0 (_cdecl_), _tmp85_);
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp88_ = vala_ccode_variable_declarator_new (_tmp86_ = g_strdup_printf ("_block%d_data_type_offset", block_id), (ValaCCodeExpression*) (_tmp87_ = vala_ccode_constant_new ("0")), NULL)));
		_vala_ccode_node_unref0 (_tmp88_);
		_vala_ccode_node_unref0 (_tmp87_);
		_g_free0 (_tmp86_);
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) _cdecl_);
		_cdecl_ = (_tmp89_ = vala_ccode_declaration_new ("DovaType *"), _vala_ccode_node_unref0 (_cdecl_), _tmp89_);
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp92_ = vala_ccode_variable_declarator_new (_tmp90_ = g_strdup_printf ("block%d_data_type", block_id), (ValaCCodeExpression*) (_tmp91_ = vala_ccode_constant_new ("NULL")), NULL)));
		_vala_ccode_node_unref0 (_tmp92_);
		_vala_ccode_node_unref0 (_tmp91_);
		_g_free0 (_tmp90_);
		vala_ccode_declaration_set_modifiers (_cdecl_, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) _cdecl_);
		type_init_block = vala_ccode_block_new ();
		alloc_call = (_tmp94_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp93_ = vala_ccode_identifier_new ("dova_type_alloc"))), _vala_ccode_node_unref0 (_tmp93_), _tmp94_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp96_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp95_ = vala_ccode_identifier_new ("dova_object_type_get")))));
		_vala_ccode_node_unref0 (_tmp96_);
		_vala_ccode_node_unref0 (_tmp95_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp98_ = vala_ccode_constant_new (_tmp97_ = g_strdup_printf ("sizeof (%s)", struct_name))));
		_vala_ccode_node_unref0 (_tmp98_);
		_g_free0 (_tmp97_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp99_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp99_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp102_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp101_ = vala_ccode_identifier_new (_tmp100_ = g_strdup_printf ("block%d_data_type", block_id))))));
		_vala_ccode_node_unref0 (_tmp102_);
		_vala_ccode_node_unref0 (_tmp101_);
		_g_free0 (_tmp100_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp105_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp104_ = vala_ccode_identifier_new (_tmp103_ = g_strdup_printf ("_block%d_data_object_offset", block_id))))));
		_vala_ccode_node_unref0 (_tmp105_);
		_vala_ccode_node_unref0 (_tmp104_);
		_g_free0 (_tmp103_);
		vala_ccode_function_call_add_argument (alloc_call, (ValaCCodeExpression*) (_tmp108_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp107_ = vala_ccode_identifier_new (_tmp106_ = g_strdup_printf ("_block%d_data_type_offset", block_id))))));
		_vala_ccode_node_unref0 (_tmp108_);
		_vala_ccode_node_unref0 (_tmp107_);
		_g_free0 (_tmp106_);
		vala_ccode_block_add_statement (type_init_block, (ValaCCodeNode*) (_tmp109_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) alloc_call)));
		_vala_ccode_node_unref0 (_tmp109_);
		type_init_call = (_tmp111_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp110_ = vala_ccode_identifier_new ("dova_object_type_init"))), _vala_ccode_node_unref0 (_tmp110_), _tmp111_);
		vala_ccode_function_call_add_argument (type_init_call, (ValaCCodeExpression*) (_tmp113_ = vala_ccode_identifier_new (_tmp112_ = g_strdup_printf ("block%d_data_type", block_id))));
		_vala_ccode_node_unref0 (_tmp113_);
		_g_free0 (_tmp112_);
		vala_ccode_block_add_statement (type_init_block, (ValaCCodeNode*) (_tmp114_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) type_init_call)));
		_vala_ccode_node_unref0 (_tmp114_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (type_get_fun), (ValaCCodeNode*) (_tmp118_ = vala_ccode_if_statement_new ((ValaCCodeExpression*) (_tmp117_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_LOGICAL_NEGATION, (ValaCCodeExpression*) (_tmp116_ = vala_ccode_identifier_new (_tmp115_ = g_strdup_printf ("block%d_data_type", block_id))))), (ValaCCodeStatement*) type_init_block, NULL)));
		_vala_ccode_node_unref0 (_tmp118_);
		_vala_ccode_node_unref0 (_tmp117_);
		_vala_ccode_node_unref0 (_tmp116_);
		_g_free0 (_tmp115_);
		vala_ccode_block_add_statement (vala_ccode_function_get_block (type_get_fun), (ValaCCodeNode*) (_tmp121_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp120_ = vala_ccode_identifier_new (_tmp119_ = g_strdup_printf ("block%d_data_type", block_id))))));
		_vala_ccode_node_unref0 (_tmp121_);
		_vala_ccode_node_unref0 (_tmp120_);
		_g_free0 (_tmp119_);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) type_get_fun);
		unref_fun = (_tmp123_ = vala_ccode_function_new (_tmp122_ = g_strdup_printf ("block%d_data_finalize", block_id), "void"), _g_free0 (_tmp122_), _tmp123_);
		vala_ccode_function_add_parameter (unref_fun, _tmp126_ = vala_ccode_formal_parameter_new (_tmp124_ = g_strdup_printf ("_data%d_", block_id), _tmp125_ = g_strconcat (struct_name, "*", NULL)));
		_vala_ccode_node_unref0 (_tmp126_);
		_g_free0 (_tmp125_);
		_g_free0 (_tmp124_);
		vala_ccode_function_set_modifiers (unref_fun, VALA_CCODE_MODIFIERS_STATIC);
		vala_ccode_declaration_space_add_type_member_declaration (self->source_declarations, (ValaCCodeNode*) (_tmp127_ = vala_ccode_function_copy (unref_fun)));
		_vala_ccode_node_unref0 (_tmp127_);
		vala_ccode_function_set_block (unref_fun, free_block);
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) unref_fun);
		_vala_ccode_node_unref0 (unref_fun);
		_vala_ccode_node_unref0 (type_init_call);
		_vala_ccode_node_unref0 (alloc_call);
		_vala_ccode_node_unref0 (type_init_block);
		_vala_ccode_node_unref0 (_cdecl_);
		_vala_ccode_node_unref0 (type_get_fun);
		_vala_ccode_node_unref0 (data_free);
		_vala_ccode_node_unref0 (_typedef_);
		_vala_ccode_node_unref0 (data_decl);
		_vala_ccode_node_unref0 (data_alloc);
		_vala_ccode_node_unref0 (data);
		_vala_ccode_node_unref0 (free_block);
		_g_free0 (struct_name);
		_vala_code_node_unref0 (parent_block);
	}
	{
		ValaList* _tmp128_;
		ValaIterator* _tmp129_;
		ValaIterator* _stmt_it;
		_stmt_it = (_tmp129_ = vala_iterable_iterator ((ValaIterable*) (_tmp128_ = vala_block_get_statements (b))), _vala_collection_object_unref0 (_tmp128_), _tmp129_);
		while (TRUE) {
			ValaCodeNode* stmt;
			if (!vala_iterator_next (_stmt_it)) {
				break;
			}
			stmt = (ValaCodeNode*) ((ValaStatement*) vala_iterator_get (_stmt_it));
			if (vala_code_node_get_error (stmt)) {
				_vala_code_node_unref0 (stmt);
				continue;
			}
			if (VALA_IS_CCODE_FRAGMENT (vala_code_node_get_ccodenode (stmt))) {
				{
					ValaList* _tmp130_;
					ValaIterator* _tmp131_;
					ValaIterator* _cstmt_it;
					_cstmt_it = (_tmp131_ = vala_iterable_iterator ((ValaIterable*) (_tmp130_ = vala_ccode_fragment_get_children (VALA_CCODE_FRAGMENT (vala_code_node_get_ccodenode (stmt))))), _vala_collection_object_unref0 (_tmp130_), _tmp131_);
					while (TRUE) {
						ValaCCodeNode* cstmt;
						if (!vala_iterator_next (_cstmt_it)) {
							break;
						}
						cstmt = (ValaCCodeNode*) vala_iterator_get (_cstmt_it);
						vala_ccode_block_add_statement (cblock, cstmt);
						_vala_ccode_node_unref0 (cstmt);
					}
					_vala_collection_object_unref0 (_cstmt_it);
				}
			} else {
				vala_ccode_block_add_statement (cblock, vala_code_node_get_ccodenode (stmt));
			}
			_vala_code_node_unref0 (stmt);
		}
		_vala_collection_object_unref0 (_stmt_it);
	}
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp132_;
			_tmp132_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp133_ = FALSE;
				gboolean _tmp134_ = FALSE;
				if (!_tmp132_) {
					i--;
				}
				_tmp132_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (!vala_local_variable_get_floating (local)) {
					_tmp134_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp134_ = FALSE;
				}
				if (_tmp134_) {
					_tmp133_ = vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp133_ = FALSE;
				}
				if (_tmp133_) {
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp135_;
					ValaCCodeExpression* _tmp136_;
					ValaCCodeExpressionStatement* _tmp137_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp137_ = vala_ccode_expression_statement_new (_tmp136_ = vala_dova_base_module_get_unref_expression (self, _tmp135_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma))));
					_vala_ccode_node_unref0 (_tmp137_);
					_vala_ccode_node_unref0 (_tmp136_);
					_vala_ccode_node_unref0 (_tmp135_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (VALA_IS_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b))) {
		ValaMethod* m;
		m = _vala_code_node_ref0 (VALA_METHOD (vala_symbol_get_parent_symbol ((ValaSymbol*) b)));
		{
			ValaList* _tmp138_;
			ValaIterator* _tmp139_;
			ValaIterator* _param_it;
			_param_it = (_tmp139_ = vala_iterable_iterator ((ValaIterable*) (_tmp138_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp138_), _tmp139_);
			while (TRUE) {
				ValaFormalParameter* param;
				gboolean _tmp140_ = FALSE;
				gboolean _tmp141_ = FALSE;
				if (!vala_iterator_next (_param_it)) {
					break;
				}
				param = (ValaFormalParameter*) vala_iterator_get (_param_it);
				if (!vala_formal_parameter_get_captured (param)) {
					_tmp141_ = vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) param));
				} else {
					_tmp141_ = FALSE;
				}
				if (_tmp141_) {
					_tmp140_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
				} else {
					_tmp140_ = FALSE;
				}
				if (_tmp140_) {
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp142_;
					ValaCCodeExpression* _tmp143_;
					ValaCCodeExpressionStatement* _tmp144_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
					vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp144_ = vala_ccode_expression_statement_new (_tmp143_ = vala_dova_base_module_get_unref_expression (self, _tmp142_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param)), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma))));
					_vala_ccode_node_unref0 (_tmp144_);
					_vala_ccode_node_unref0 (_tmp143_);
					_vala_ccode_node_unref0 (_tmp142_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (param);
			}
			_vala_collection_object_unref0 (_param_it);
		}
		_vala_code_node_unref0 (m);
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		ValaCCodeIdentifier* _tmp145_;
		ValaCCodeFunctionCall* _tmp146_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp147_;
		ValaCCodeExpression* _tmp148_;
		ValaCCodeExpressionStatement* _tmp149_;
		block_id = vala_dova_base_module_get_block_id (self, b);
		data_unref = (_tmp146_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp145_ = vala_ccode_identifier_new ("dova_object_unref"))), _vala_ccode_node_unref0 (_tmp145_), _tmp146_);
		vala_ccode_function_call_add_argument (data_unref, _tmp148_ = vala_dova_base_module_get_variable_cexpression (self, _tmp147_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp148_);
		_g_free0 (_tmp147_);
		vala_ccode_block_add_statement (cblock, (ValaCCodeNode*) (_tmp149_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp149_);
		_vala_ccode_node_unref0 (data_unref);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) b, (ValaCCodeNode*) cblock);
	vala_dova_base_module_emit_context_pop_symbol (self->emit_context);
	_vala_ccode_node_unref0 (cblock);
	_vala_collection_object_unref0 (local_vars);
}


static void vala_dova_base_module_real_visit_empty_statement (ValaCodeVisitor* base, ValaEmptyStatement* stmt) {
	ValaDovaBaseModule * self;
	ValaCCodeEmptyStatement* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_empty_statement_new ()));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_declaration_statement (ValaCodeVisitor* base, ValaDeclarationStatement* stmt) {
	ValaDovaBaseModule * self;
	ValaSymbol* _tmp0_;
	ValaLocalVariable* local;
	gboolean _tmp1_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	vala_code_node_accept ((ValaCodeNode*) vala_declaration_statement_get_declaration (stmt), (ValaCodeVisitor*) self);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_declaration_statement_get_declaration (stmt)));
	local = _vala_code_node_ref0 ((_tmp0_ = vala_declaration_statement_get_declaration (stmt), VALA_IS_LOCAL_VARIABLE (_tmp0_) ? ((ValaLocalVariable*) _tmp0_) : NULL));
	if (local != NULL) {
		_tmp1_ = vala_variable_get_initializer ((ValaVariable*) local) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		vala_dova_base_module_create_temp_decl (self, (ValaStatement*) stmt, (ValaList*) vala_variable_get_initializer ((ValaVariable*) local)->temp_vars);
	}
	vala_dova_base_module_create_temp_decl (self, (ValaStatement*) stmt, (ValaList*) vala_dova_base_module_get_temp_vars (self));
	vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
	_vala_code_node_unref0 (local);
}


ValaCCodeExpression* vala_dova_base_module_get_variable_cexpression (ValaDovaBaseModule* self, const char* name) {
	ValaCCodeExpression* result = NULL;
	char* _tmp0_;
	ValaCCodeExpression* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	result = (_tmp1_ = (ValaCCodeExpression*) vala_ccode_identifier_new (_tmp0_ = vala_dova_base_module_get_variable_cname (self, name)), _g_free0 (_tmp0_), _tmp1_);
	return result;
}


char* vala_dova_base_module_get_variable_cname (ValaDovaBaseModule* self, const char* name) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	if (g_utf8_get_char (g_utf8_offset_to_pointer (name, 0)) == '.') {
		if (!vala_map_contains (vala_dova_base_module_get_variable_name_map (self), name)) {
			char* _tmp0_;
			gint _tmp1_;
			vala_map_set (vala_dova_base_module_get_variable_name_map (self), name, _tmp0_ = g_strdup_printf ("_tmp%d_", vala_dova_base_module_get_next_temp_var_id (self)));
			_g_free0 (_tmp0_);
			_tmp1_ = vala_dova_base_module_get_next_temp_var_id (self);
			vala_dova_base_module_set_next_temp_var_id (self, _tmp1_ + 1);
			_tmp1_;
		}
		result = (char*) vala_map_get (vala_dova_base_module_get_variable_name_map (self), name);
		return result;
	} else {
		if (vala_collection_contains ((ValaCollection*) self->priv->reserved_identifiers, name)) {
			result = g_strdup_printf ("_%s_", name);
			return result;
		} else {
			result = g_strdup (name);
			return result;
		}
	}
}


static void vala_dova_base_module_real_visit_local_variable (ValaCodeVisitor* base, ValaLocalVariable* local) {
	ValaDovaBaseModule * self;
	ValaCCodeExpression* rhs;
	gboolean _tmp0_ = FALSE;
	ValaCCodeFragment* cfrag;
	gboolean _tmp15_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (local != NULL);
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local), (ValaCodeGenerator*) self);
		vala_code_visitor_visit_end_full_expression ((ValaCodeVisitor*) self, vala_variable_get_initializer ((ValaVariable*) local));
	}
	vala_dova_base_module_generate_type_declaration (self, vala_variable_get_variable_type ((ValaVariable*) local), self->source_declarations);
	rhs = NULL;
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		_tmp0_ = vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local)) != NULL;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeExpression* _tmp1_;
		rhs = (_tmp1_ = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local)))), _vala_ccode_node_unref0 (rhs), _tmp1_);
	}
	cfrag = vala_ccode_fragment_new ();
	if (self->pre_statement_fragment != NULL) {
		ValaCCodeFragment* _tmp2_;
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) self->pre_statement_fragment);
		self->pre_statement_fragment = (_tmp2_ = NULL, _vala_ccode_node_unref0 (self->pre_statement_fragment), _tmp2_);
	}
	if (vala_local_variable_get_captured (local)) {
		if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
			char* _tmp3_;
			ValaCCodeExpression* _tmp4_;
			char* _tmp5_;
			ValaCCodeMemberAccess* _tmp6_;
			ValaCCodeAssignment* _tmp7_;
			ValaCCodeExpressionStatement* _tmp8_;
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp8_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_member_access_new_pointer (_tmp4_ = vala_dova_base_module_get_variable_cexpression (self, _tmp3_ = g_strdup_printf ("_data%d_", vala_dova_base_module_get_block_id (self, VALA_BLOCK (vala_symbol_get_parent_symbol ((ValaSymbol*) local))))), _tmp5_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)))), rhs, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
			_vala_ccode_node_unref0 (_tmp8_);
			_vala_ccode_node_unref0 (_tmp7_);
			_vala_ccode_node_unref0 (_tmp6_);
			_g_free0 (_tmp5_);
			_vala_ccode_node_unref0 (_tmp4_);
			_g_free0 (_tmp3_);
		}
	} else {
		char* _tmp9_;
		char* _tmp10_;
		ValaCCodeVariableDeclarator* _tmp11_;
		ValaCCodeVariableDeclarator* cvar;
		char* _tmp12_;
		ValaCCodeDeclaration* _tmp13_;
		ValaCCodeDeclaration* _cdecl_;
		cvar = (_tmp11_ = vala_ccode_variable_declarator_new (_tmp9_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) local)), rhs, _tmp10_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp10_), _g_free0 (_tmp9_), _tmp11_);
		_cdecl_ = (_tmp13_ = vala_ccode_declaration_new (_tmp12_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp12_), _tmp13_);
		vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) cvar);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) _cdecl_);
		if (vala_ccode_variable_declarator_get_initializer (cvar) == NULL) {
			ValaCCodeExpression* _tmp14_;
			vala_ccode_variable_declarator_set_initializer (cvar, _tmp14_ = vala_dova_base_module_default_value_for_type (self, vala_variable_get_variable_type ((ValaVariable*) local), TRUE));
			_vala_ccode_node_unref0 (_tmp14_);
			vala_ccode_variable_declarator_set_init0 (cvar, TRUE);
		}
		_vala_ccode_node_unref0 (_cdecl_);
		_vala_ccode_node_unref0 (cvar);
	}
	if (vala_variable_get_initializer ((ValaVariable*) local) != NULL) {
		_tmp15_ = vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local));
	} else {
		_tmp15_ = FALSE;
	}
	if (_tmp15_) {
		vala_dova_base_module_add_simple_check (self, (ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) local), cfrag, FALSE);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) local, (ValaCCodeNode*) cfrag);
	vala_symbol_set_active ((ValaSymbol*) local, TRUE);
	_vala_ccode_node_unref0 (cfrag);
	_vala_ccode_node_unref0 (rhs);
}


static void vala_dova_base_module_real_visit_initializer_list (ValaCodeVisitor* base, ValaInitializerList* list) {
	ValaDovaBaseModule * self;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (list != NULL);
	if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_expression_get_target_type ((ValaExpression*) list)))) {
		ValaStruct* st;
		ValaCCodeInitializerList* clist;
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* field_it;
		st = _vala_code_node_ref0 (VALA_STRUCT (vala_data_type_get_data_type (vala_expression_get_target_type ((ValaExpression*) list))));
		clist = vala_ccode_initializer_list_new ();
		field_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_struct_get_fields (st))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		{
			ValaList* _tmp2_;
			ValaIterator* _tmp3_;
			ValaIterator* _expr_it;
			_expr_it = (_tmp3_ = vala_iterable_iterator ((ValaIterable*) (_tmp2_ = vala_initializer_list_get_initializers (list))), _vala_collection_object_unref0 (_tmp2_), _tmp3_);
			while (TRUE) {
				ValaExpression* expr;
				ValaField* field;
				ValaCCodeExpression* cexpr;
				char* ctype;
				if (!vala_iterator_next (_expr_it)) {
					break;
				}
				expr = (ValaExpression*) vala_iterator_get (_expr_it);
				field = NULL;
				while (TRUE) {
					ValaField* _tmp4_;
					if (!(field == NULL)) {
						break;
					}
					vala_iterator_next (field_it);
					field = (_tmp4_ = (ValaField*) vala_iterator_get (field_it), _vala_code_node_unref0 (field), _tmp4_);
					if (vala_field_get_binding (field) != MEMBER_BINDING_INSTANCE) {
						ValaField* _tmp5_;
						field = (_tmp5_ = NULL, _vala_code_node_unref0 (field), _tmp5_);
					}
				}
				cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
				ctype = vala_field_get_ctype (field);
				if (ctype != NULL) {
					ValaCCodeExpression* _tmp6_;
					cexpr = (_tmp6_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, ctype), _vala_ccode_node_unref0 (cexpr), _tmp6_);
				}
				vala_ccode_initializer_list_append (clist, cexpr);
				_g_free0 (ctype);
				_vala_ccode_node_unref0 (cexpr);
				_vala_code_node_unref0 (field);
				_vala_code_node_unref0 (expr);
			}
			_vala_collection_object_unref0 (_expr_it);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) list, (ValaCCodeNode*) clist);
		_vala_collection_object_unref0 (field_it);
		_vala_ccode_node_unref0 (clist);
		_vala_code_node_unref0 (st);
	} else {
		ValaCCodeInitializerList* clist;
		clist = vala_ccode_initializer_list_new ();
		{
			ValaList* _tmp7_;
			ValaIterator* _tmp8_;
			ValaIterator* _expr_it;
			_expr_it = (_tmp8_ = vala_iterable_iterator ((ValaIterable*) (_tmp7_ = vala_initializer_list_get_initializers (list))), _vala_collection_object_unref0 (_tmp7_), _tmp8_);
			while (TRUE) {
				ValaExpression* expr;
				if (!vala_iterator_next (_expr_it)) {
					break;
				}
				expr = (ValaExpression*) vala_iterator_get (_expr_it);
				vala_ccode_initializer_list_append (clist, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
				_vala_code_node_unref0 (expr);
			}
			_vala_collection_object_unref0 (_expr_it);
		}
		vala_code_node_set_ccodenode ((ValaCodeNode*) list, (ValaCCodeNode*) clist);
		_vala_ccode_node_unref0 (clist);
	}
}


ValaLocalVariable* vala_dova_base_module_get_temp_variable (ValaDovaBaseModule* self, ValaDataType* type, gboolean value_owned, ValaCodeNode* node_reference) {
	ValaLocalVariable* result = NULL;
	ValaDataType* var_type;
	char* _tmp0_;
	ValaLocalVariable* _tmp1_;
	ValaLocalVariable* local;
	gint _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	var_type = vala_data_type_copy (type);
	vala_data_type_set_value_owned (var_type, value_owned);
	local = (_tmp1_ = vala_local_variable_new (var_type, _tmp0_ = g_strdup_printf ("_tmp%d_", vala_dova_base_module_get_next_temp_var_id (self)), NULL, NULL), _g_free0 (_tmp0_), _tmp1_);
	if (node_reference != NULL) {
		vala_code_node_set_source_reference ((ValaCodeNode*) local, vala_code_node_get_source_reference (node_reference));
	}
	_tmp2_ = vala_dova_base_module_get_next_temp_var_id (self);
	vala_dova_base_module_set_next_temp_var_id (self, _tmp2_ + 1);
	_tmp2_;
	result = local;
	_vala_code_node_unref0 (var_type);
	return result;
}


static gboolean vala_dova_base_module_is_in_generic_type (ValaDovaBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (VALA_IS_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (type)))) {
		gboolean _tmp1_ = FALSE;
		if (vala_dova_base_module_get_current_method (self) == NULL) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = vala_method_get_binding (vala_dova_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
		}
		_tmp0_ = _tmp1_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


ValaCCodeExpression* vala_dova_base_module_get_type_private_from_type (ValaDovaBaseModule* self, ValaObjectTypeSymbol* type_symbol, ValaCCodeExpression* type_expression) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type_symbol != NULL, NULL);
	g_return_val_if_fail (type_expression != NULL, NULL);
	if (VALA_IS_CLASS (type_symbol)) {
		ValaCCodeCastExpression* _tmp0_;
		char* _tmp1_;
		char* _tmp2_;
		ValaCCodeIdentifier* _tmp3_;
		ValaCCodeBinaryExpression* _tmp4_;
		char* _tmp5_;
		char* _tmp6_;
		ValaCCodeExpression* _tmp7_;
		result = (_tmp7_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new ((ValaCCodeExpression*) (_tmp4_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, (ValaCCodeExpression*) (_tmp0_ = vala_ccode_cast_expression_new (type_expression, "char *")), (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new (_tmp2_ = g_strdup_printf ("_%s_type_offset", _tmp1_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) VALA_CLASS (type_symbol), NULL)))))), _tmp6_ = g_strdup_printf ("%sTypePrivate *", _tmp5_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) VALA_CLASS (type_symbol), FALSE))), _g_free0 (_tmp6_), _g_free0 (_tmp5_), _vala_ccode_node_unref0 (_tmp4_), _vala_ccode_node_unref0 (_tmp3_), _g_free0 (_tmp2_), _g_free0 (_tmp1_), _vala_ccode_node_unref0 (_tmp0_), _tmp7_);
		return result;
	} else {
		ValaCCodeIdentifier* _tmp8_;
		ValaCCodeFunctionCall* _tmp9_;
		ValaCCodeFunctionCall* get_interface;
		char* _tmp10_;
		char* _tmp11_;
		ValaCCodeIdentifier* _tmp12_;
		char* _tmp13_;
		char* _tmp14_;
		ValaCCodeExpression* _tmp15_;
		get_interface = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("dova_type_get_interface"))), _vala_ccode_node_unref0 (_tmp8_), _tmp9_);
		vala_ccode_function_call_add_argument (get_interface, type_expression);
		vala_ccode_function_call_add_argument (get_interface, (ValaCCodeExpression*) (_tmp12_ = vala_ccode_identifier_new (_tmp11_ = g_strdup_printf ("%s_type", _tmp10_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) VALA_INTERFACE (type_symbol), NULL)))));
		_vala_ccode_node_unref0 (_tmp12_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp10_);
		result = (_tmp15_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new ((ValaCCodeExpression*) get_interface, _tmp14_ = g_strdup_printf ("%sTypePrivate *", _tmp13_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) VALA_INTERFACE (type_symbol), FALSE))), _g_free0 (_tmp14_), _g_free0 (_tmp13_), _tmp15_);
		_vala_ccode_node_unref0 (get_interface);
		return result;
		_vala_ccode_node_unref0 (get_interface);
	}
}


ValaCCodeExpression* vala_dova_base_module_get_type_id_expression (ValaDovaBaseModule* self, ValaDataType* type, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (VALA_IS_GENERIC_TYPE (type)) {
		char* _tmp0_;
		char* _tmp1_;
		char* var_name;
		gboolean _tmp2_ = FALSE;
		var_name = (_tmp1_ = g_strdup_printf ("%s_type", _tmp0_ = g_utf8_strdown (vala_symbol_get_name ((ValaSymbol*) vala_data_type_get_type_parameter (type)), -1)), _g_free0 (_tmp0_), _tmp1_);
		if (vala_dova_base_module_is_in_generic_type (self, type)) {
			_tmp2_ = !is_chainup;
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			ValaCCodeIdentifier* _tmp3_;
			ValaCCodeMemberAccess* _tmp4_;
			ValaCCodeExpression* _tmp5_;
			ValaCCodeExpression* _tmp6_;
			result = (_tmp6_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (_tmp5_ = vala_dova_base_module_get_type_private_from_type (self, VALA_OBJECT_TYPE_SYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) vala_data_type_get_type_parameter (type))), (ValaCCodeExpression*) (_tmp4_ = vala_ccode_member_access_new_pointer ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("this")), "type"))), var_name), _vala_ccode_node_unref0 (_tmp5_), _vala_ccode_node_unref0 (_tmp4_), _vala_ccode_node_unref0 (_tmp3_), _tmp6_);
			_g_free0 (var_name);
			return result;
		} else {
			result = (ValaCCodeExpression*) vala_ccode_identifier_new (var_name);
			_g_free0 (var_name);
			return result;
		}
		_g_free0 (var_name);
	} else {
		char* _tmp7_;
		char* _tmp8_;
		ValaCCodeIdentifier* _tmp9_;
		ValaCCodeFunctionCall* _tmp10_;
		ValaCCodeFunctionCall* ccall;
		ValaTypeSymbol* _tmp11_;
		ValaObjectTypeSymbol* object_type_symbol;
		ccall = (_tmp10_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new (_tmp8_ = g_strdup_printf ("%s_type_get", _tmp7_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) vala_data_type_get_data_type (type), NULL))))), _vala_ccode_node_unref0 (_tmp9_), _g_free0 (_tmp8_), _g_free0 (_tmp7_), _tmp10_);
		object_type_symbol = _vala_code_node_ref0 ((_tmp11_ = vala_data_type_get_data_type (type), VALA_IS_OBJECT_TYPE_SYMBOL (_tmp11_) ? ((ValaObjectTypeSymbol*) _tmp11_) : NULL));
		if (object_type_symbol != NULL) {
			{
				gint i;
				i = 0;
				{
					gboolean _tmp12_;
					_tmp12_ = TRUE;
					while (TRUE) {
						ValaList* _tmp13_;
						gboolean _tmp14_;
						ValaList* _tmp15_;
						gboolean _tmp16_;
						if (!_tmp12_) {
							i++;
						}
						_tmp12_ = FALSE;
						if ((_tmp14_ = !(i < vala_collection_get_size ((ValaCollection*) (_tmp13_ = vala_object_type_symbol_get_type_parameters (object_type_symbol)))), _vala_collection_object_unref0 (_tmp13_), _tmp14_)) {
							break;
						}
						if ((_tmp16_ = vala_collection_get_size ((ValaCollection*) (_tmp15_ = vala_data_type_get_type_arguments (type))) == 0, _vala_collection_object_unref0 (_tmp15_), _tmp16_)) {
							ValaCCodeConstant* _tmp17_;
							vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_constant_new ("NULL")));
							_vala_ccode_node_unref0 (_tmp17_);
						} else {
							ValaList* _tmp18_;
							ValaDataType* _tmp19_;
							ValaCCodeExpression* _tmp20_;
							vala_ccode_function_call_add_argument (ccall, _tmp20_ = vala_dova_base_module_get_type_id_expression (self, _tmp19_ = (ValaDataType*) vala_list_get (_tmp18_ = vala_data_type_get_type_arguments (type), i), FALSE));
							_vala_ccode_node_unref0 (_tmp20_);
							_vala_code_node_unref0 (_tmp19_);
							_vala_collection_object_unref0 (_tmp18_);
						}
					}
				}
			}
		}
		result = (ValaCCodeExpression*) ccall;
		_vala_code_node_unref0 (object_type_symbol);
		return result;
	}
}


static ValaCCodeExpression* vala_dova_base_module_real_get_dup_func_expression (ValaDovaBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (vala_data_type_get_data_type (type) != NULL) {
		char* dup_function;
		dup_function = g_strdup ("");
		if (vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type))) {
			char* _tmp0_;
			dup_function = (_tmp0_ = vala_typesymbol_get_ref_function (vala_data_type_get_data_type (type)), _g_free0 (dup_function), _tmp0_);
		} else {
			if (VALA_IS_VALUE_TYPE (type)) {
				char* _tmp1_;
				dup_function = (_tmp1_ = vala_typesymbol_get_dup_function (vala_data_type_get_data_type (type)), _g_free0 (dup_function), _tmp1_);
				if (dup_function == NULL) {
					char* _tmp2_;
					dup_function = (_tmp2_ = g_strdup (""), _g_free0 (dup_function), _tmp2_);
				}
			}
		}
		result = (ValaCCodeExpression*) vala_ccode_identifier_new (dup_function);
		_g_free0 (dup_function);
		return result;
	} else {
		if (vala_data_type_get_type_parameter (type) != NULL) {
			result = NULL;
			return result;
		} else {
			if (VALA_IS_ARRAY_TYPE (type)) {
				result = (ValaCCodeExpression*) vala_ccode_identifier_new ("dova_object_ref");
				return result;
			} else {
				if (VALA_IS_DELEGATE_TYPE (type)) {
					result = (ValaCCodeExpression*) vala_ccode_identifier_new ("dova_object_ref");
					return result;
				} else {
					if (VALA_IS_POINTER_TYPE (type)) {
						ValaPointerType* pointer_type;
						pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (type));
						result = vala_dova_base_module_get_dup_func_expression (self, vala_pointer_type_get_base_type (pointer_type), source_reference, FALSE);
						_vala_code_node_unref0 (pointer_type);
						return result;
					} else {
						result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
						return result;
					}
				}
			}
		}
	}
}


ValaCCodeExpression* vala_dova_base_module_get_dup_func_expression (ValaDovaBaseModule* self, ValaDataType* type, ValaSourceReference* source_reference, gboolean is_chainup) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->get_dup_func_expression (self, type, source_reference, is_chainup);
}


ValaCCodeExpression* vala_dova_base_module_get_destroy_func_expression (ValaDovaBaseModule* self, ValaDataType* type, gboolean is_chainup) {
	ValaCCodeExpression* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	if (vala_data_type_get_data_type (type) != NULL) {
		char* unref_function;
		unref_function = NULL;
		if (VALA_IS_REFERENCE_TYPE (type)) {
			if (vala_typesymbol_is_reference_counting (vala_data_type_get_data_type (type))) {
				char* _tmp0_;
				unref_function = (_tmp0_ = vala_typesymbol_get_unref_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp0_);
			} else {
				char* _tmp1_;
				unref_function = (_tmp1_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp1_);
			}
		} else {
			if (vala_data_type_get_nullable (type)) {
				char* _tmp2_;
				unref_function = (_tmp2_ = vala_typesymbol_get_free_function (vala_data_type_get_data_type (type)), _g_free0 (unref_function), _tmp2_);
				if (unref_function == NULL) {
					char* _tmp3_;
					unref_function = (_tmp3_ = g_strdup ("free"), _g_free0 (unref_function), _tmp3_);
				}
			} else {
				ValaStruct* st;
				char* _tmp4_;
				st = _vala_code_node_ref0 (VALA_STRUCT (vala_data_type_get_data_type (type)));
				unref_function = (_tmp4_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st), _g_free0 (unref_function), _tmp4_);
				_vala_code_node_unref0 (st);
			}
		}
		if (unref_function == NULL) {
			result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
			_g_free0 (unref_function);
			return result;
		}
		result = (ValaCCodeExpression*) vala_ccode_identifier_new (unref_function);
		_g_free0 (unref_function);
		return result;
	} else {
		gboolean _tmp5_ = FALSE;
		if (vala_data_type_get_type_parameter (type) != NULL) {
			_tmp5_ = VALA_IS_CLASS (vala_dova_base_module_get_current_type_symbol (self));
		} else {
			_tmp5_ = FALSE;
		}
		if (_tmp5_) {
			result = (ValaCCodeExpression*) vala_ccode_identifier_new ("dova_object_unref");
			return result;
		} else {
			if (VALA_IS_ARRAY_TYPE (type)) {
				result = (ValaCCodeExpression*) vala_ccode_identifier_new ("dova_object_unref");
				return result;
			} else {
				if (VALA_IS_DELEGATE_TYPE (type)) {
					result = (ValaCCodeExpression*) vala_ccode_identifier_new ("dova_object_unref");
					return result;
				} else {
					if (VALA_IS_POINTER_TYPE (type)) {
						result = (ValaCCodeExpression*) vala_ccode_identifier_new ("free");
						return result;
					} else {
						result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
						return result;
					}
				}
			}
		}
	}
}


static ValaCCodeExpression* vala_dova_base_module_real_get_unref_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* ccall;
	gboolean _tmp2_ = FALSE;
	ValaCCodeConstant* _tmp7_;
	ValaCCodeBinaryExpression* _tmp8_;
	ValaCCodeBinaryExpression* cisnull;
	ValaCCodeCommaExpression* ccomma;
	ValaCCodeConstant* _tmp14_;
	ValaCCodeAssignment* cassign;
	ValaCCodeConstant* _tmp15_;
	ValaCCodeExpression* _tmp16_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (cvar != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	ccall = (_tmp1_ = vala_ccode_function_call_new (_tmp0_ = vala_dova_base_module_get_destroy_func_expression (self, type, FALSE)), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	if (VALA_IS_VALUE_TYPE (type)) {
		_tmp2_ = !vala_data_type_get_nullable (type);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		ValaCCodeUnaryExpression* _tmp3_;
		ValaCCodeConstant* _tmp4_;
		ValaCCodeConstant* _tmp5_;
		ValaCCodeConstant* _tmp6_;
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cvar)));
		_vala_ccode_node_unref0 (_tmp3_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp4_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_constant_new ("NULL")));
		_vala_ccode_node_unref0 (_tmp5_);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp6_);
		result = (ValaCCodeExpression*) ccall;
		return result;
	}
	cisnull = (_tmp8_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, cvar, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
	if (vala_data_type_get_type_parameter (type) != NULL) {
		gboolean _tmp9_ = FALSE;
		ValaCCodeExpression* _tmp10_;
		ValaCCodeConstant* _tmp11_;
		ValaCCodeBinaryExpression* _tmp12_;
		ValaCCodeBinaryExpression* cunrefisnull;
		ValaCCodeBinaryExpression* _tmp13_;
		if (!VALA_IS_CLASS (vala_dova_base_module_get_current_type_symbol (self))) {
			_tmp9_ = TRUE;
		} else {
			_tmp9_ = vala_class_get_is_compact (vala_dova_base_module_get_current_class (self));
		}
		if (_tmp9_) {
			result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
			_vala_ccode_node_unref0 (cisnull);
			_vala_ccode_node_unref0 (ccall);
			return result;
		}
		cunrefisnull = (_tmp12_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, _tmp10_ = vala_dova_base_module_get_destroy_func_expression (self, type, FALSE), (ValaCCodeExpression*) (_tmp11_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp11_), _vala_ccode_node_unref0 (_tmp10_), _tmp12_);
		cisnull = (_tmp13_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) cunrefisnull), _vala_ccode_node_unref0 (cisnull), _tmp13_);
		_vala_ccode_node_unref0 (cunrefisnull);
	}
	vala_ccode_function_call_add_argument (ccall, cvar);
	ccomma = vala_ccode_comma_expression_new ();
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp14_ = vala_ccode_constant_new ("NULL")));
	_vala_ccode_node_unref0 (_tmp14_);
	cassign = vala_ccode_assignment_new (cvar, (ValaCCodeExpression*) ccomma, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE);
	result = (_tmp16_ = (ValaCCodeExpression*) vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) (_tmp15_ = vala_ccode_constant_new ("NULL")), (ValaCCodeExpression*) cassign), _vala_ccode_node_unref0 (_tmp15_), _tmp16_);
	_vala_ccode_node_unref0 (cassign);
	_vala_ccode_node_unref0 (ccomma);
	_vala_ccode_node_unref0 (cisnull);
	_vala_ccode_node_unref0 (ccall);
	return result;
	_vala_ccode_node_unref0 (cassign);
	_vala_ccode_node_unref0 (ccomma);
	_vala_ccode_node_unref0 (cisnull);
	_vala_ccode_node_unref0 (ccall);
}


ValaCCodeExpression* vala_dova_base_module_get_unref_expression (ValaDovaBaseModule* self, ValaCCodeExpression* cvar, ValaDataType* type, ValaExpression* expr) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->get_unref_expression (self, cvar, type, expr);
}


static void vala_dova_base_module_real_visit_end_full_expression (ValaCodeVisitor* base, ValaExpression* expr) {
	ValaDovaBaseModule * self;
	ValaDataType* expr_type;
	ValaLocalVariable* full_expr_var;
	ValaCCodeCommaExpression* expr_list;
	ValaCCodeExpression* _tmp2_;
	ValaCCodeAssignment* _tmp3_;
	ValaCCodeExpression* _tmp6_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_collection_get_size ((ValaCollection*) vala_dova_base_module_get_temp_vars (self)) > 0) {
		if (expr->temp_vars == NULL) {
			ValaArrayList* _tmp0_;
			expr->temp_vars = (_tmp0_ = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal), _vala_collection_object_unref0 (expr->temp_vars), _tmp0_);
		} else {
			vala_collection_clear ((ValaCollection*) expr->temp_vars);
		}
		{
			ValaIterator* _local_it;
			_local_it = vala_iterable_iterator ((ValaIterable*) vala_dova_base_module_get_temp_vars (self));
			while (TRUE) {
				ValaLocalVariable* local;
				if (!vala_iterator_next (_local_it)) {
					break;
				}
				local = (ValaLocalVariable*) vala_iterator_get (_local_it);
				vala_collection_add ((ValaCollection*) expr->temp_vars, local);
				_vala_code_node_unref0 (local);
			}
			_vala_collection_object_unref0 (_local_it);
		}
		vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
	}
	if (vala_collection_get_size ((ValaCollection*) VALA_LIST (vala_dova_base_module_get_temp_ref_vars (self))) == 0) {
		return;
	}
	expr_type = _vala_code_node_ref0 (vala_expression_get_value_type (expr));
	if (vala_expression_get_target_type (expr) != NULL) {
		ValaDataType* _tmp1_;
		expr_type = (_tmp1_ = _vala_code_node_ref0 (vala_expression_get_target_type (expr)), _vala_code_node_unref0 (expr_type), _tmp1_);
	}
	full_expr_var = vala_dova_base_module_get_temp_variable (self, expr_type, TRUE, (ValaCodeNode*) expr);
	vala_expression_add_temp_var (expr, full_expr_var);
	expr_list = vala_ccode_comma_expression_new ();
	vala_ccode_comma_expression_append_expression (expr_list, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_assignment_new (_tmp2_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) full_expr_var)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp3_);
	_vala_ccode_node_unref0 (_tmp2_);
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) vala_dova_base_module_get_temp_ref_vars (self));
		while (TRUE) {
			ValaLocalVariable* local;
			ValaMemberAccess* ma;
			ValaCCodeExpression* _tmp4_;
			ValaCCodeExpression* _tmp5_;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
			vala_ccode_comma_expression_append_expression (expr_list, _tmp5_ = vala_dova_base_module_get_unref_expression (self, _tmp4_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma));
			_vala_ccode_node_unref0 (_tmp5_);
			_vala_ccode_node_unref0 (_tmp4_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	vala_ccode_comma_expression_append_expression (expr_list, _tmp6_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) full_expr_var)));
	_vala_ccode_node_unref0 (_tmp6_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) expr_list);
	vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_ref_vars (self));
	_vala_ccode_node_unref0 (expr_list);
	_vala_code_node_unref0 (full_expr_var);
	_vala_code_node_unref0 (expr_type);
}


void vala_dova_base_module_append_temp_decl (ValaDovaBaseModule* self, ValaCCodeFragment* cfrag, ValaList* temp_vars) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (cfrag != NULL);
	if (temp_vars == NULL) {
		return;
	}
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) temp_vars);
		while (TRUE) {
			ValaLocalVariable* local;
			char* _tmp0_;
			ValaCCodeDeclaration* _tmp1_;
			ValaCCodeDeclaration* _cdecl_;
			char* _tmp2_;
			ValaCCodeVariableDeclarator* _tmp3_;
			ValaCCodeVariableDeclarator* vardecl;
			ValaTypeSymbol* _tmp4_;
			ValaStruct* st;
			ValaDataType* _tmp5_;
			ValaArrayType* array_type;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			_cdecl_ = (_tmp1_ = vala_ccode_declaration_new (_tmp0_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp0_), _tmp1_);
			vardecl = (_tmp3_ = vala_ccode_variable_declarator_new (vala_symbol_get_name ((ValaSymbol*) local), NULL, _tmp2_ = vala_data_type_get_cdeclarator_suffix (vala_variable_get_variable_type ((ValaVariable*) local))), _g_free0 (_tmp2_), _tmp3_);
			vala_code_node_set_ccodenode ((ValaCodeNode*) local, (ValaCCodeNode*) vardecl);
			vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) vardecl);
			st = _vala_code_node_ref0 ((_tmp4_ = vala_data_type_get_data_type (vala_variable_get_variable_type ((ValaVariable*) local)), VALA_IS_STRUCT (_tmp4_) ? ((ValaStruct*) _tmp4_) : NULL));
			array_type = _vala_code_node_ref0 ((_tmp5_ = vala_variable_get_variable_type ((ValaVariable*) local), VALA_IS_ARRAY_TYPE (_tmp5_) ? ((ValaArrayType*) _tmp5_) : NULL));
			if (g_str_has_prefix (vala_symbol_get_name ((ValaSymbol*) local), "*")) {
			} else {
				if (VALA_IS_GENERIC_TYPE (vala_variable_get_variable_type ((ValaVariable*) local))) {
					ValaCCodeIdentifier* _tmp6_;
					ValaCCodeFunctionCall* _tmp7_;
					ValaCCodeFunctionCall* value_size;
					ValaCCodeExpression* _tmp8_;
					ValaCCodeIdentifier* _tmp9_;
					ValaCCodeFunctionCall* _tmp10_;
					ValaCCodeFunctionCall* alloca_call;
					ValaCCodeIdentifier* _tmp11_;
					ValaCCodeFunctionCall* _tmp12_;
					ValaCCodeFunctionCall* memset_call;
					ValaCCodeConstant* _tmp13_;
					value_size = (_tmp7_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new ("dova_type_get_value_size"))), _vala_ccode_node_unref0 (_tmp6_), _tmp7_);
					vala_ccode_function_call_add_argument (value_size, _tmp8_ = vala_dova_base_module_get_type_id_expression (self, vala_variable_get_variable_type ((ValaVariable*) local), FALSE));
					_vala_ccode_node_unref0 (_tmp8_);
					alloca_call = (_tmp10_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp9_ = vala_ccode_identifier_new ("alloca"))), _vala_ccode_node_unref0 (_tmp9_), _tmp10_);
					vala_ccode_function_call_add_argument (alloca_call, (ValaCCodeExpression*) value_size);
					memset_call = (_tmp12_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp11_), _tmp12_);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) alloca_call);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_constant_new ("0")));
					_vala_ccode_node_unref0 (_tmp13_);
					vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) value_size);
					vala_ccode_variable_declarator_set_initializer (vardecl, (ValaCCodeExpression*) memset_call);
					vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
					_vala_ccode_node_unref0 (memset_call);
					_vala_ccode_node_unref0 (alloca_call);
					_vala_ccode_node_unref0 (value_size);
				} else {
					gboolean _tmp14_ = FALSE;
					gboolean _tmp15_ = FALSE;
					if (!vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) local))) {
						gboolean _tmp16_ = FALSE;
						if (st != NULL) {
							ValaList* _tmp17_;
							_tmp16_ = vala_collection_get_size ((ValaCollection*) (_tmp17_ = vala_struct_get_fields (st))) > 0;
							_vala_collection_object_unref0 (_tmp17_);
						} else {
							_tmp16_ = FALSE;
						}
						_tmp15_ = _tmp16_;
					} else {
						_tmp15_ = FALSE;
					}
					if (_tmp15_) {
						_tmp14_ = TRUE;
					} else {
						gboolean _tmp18_ = FALSE;
						if (array_type != NULL) {
							_tmp18_ = vala_array_type_get_fixed_length (array_type);
						} else {
							_tmp18_ = FALSE;
						}
						_tmp14_ = _tmp18_;
					}
					if (_tmp14_) {
						ValaCCodeInitializerList* clist;
						ValaCCodeConstant* _tmp19_;
						clist = vala_ccode_initializer_list_new ();
						vala_ccode_initializer_list_append (clist, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_constant_new ("0")));
						_vala_ccode_node_unref0 (_tmp19_);
						vala_ccode_variable_declarator_set_initializer (vardecl, (ValaCCodeExpression*) clist);
						vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
						_vala_ccode_node_unref0 (clist);
					} else {
						gboolean _tmp20_ = FALSE;
						if (vala_data_type_is_reference_type_or_type_parameter (vala_variable_get_variable_type ((ValaVariable*) local))) {
							_tmp20_ = TRUE;
						} else {
							_tmp20_ = vala_data_type_get_nullable (vala_variable_get_variable_type ((ValaVariable*) local));
						}
						if (_tmp20_) {
							ValaCCodeConstant* _tmp21_;
							vala_ccode_variable_declarator_set_initializer (vardecl, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_constant_new ("NULL")));
							_vala_ccode_node_unref0 (_tmp21_);
							vala_ccode_variable_declarator_set_init0 (vardecl, TRUE);
						}
					}
				}
			}
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) _cdecl_);
			_vala_code_node_unref0 (array_type);
			_vala_code_node_unref0 (st);
			_vala_ccode_node_unref0 (vardecl);
			_vala_ccode_node_unref0 (_cdecl_);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
}


static void vala_dova_base_module_real_visit_expression_statement (ValaCodeVisitor* base, ValaExpressionStatement* stmt) {
	ValaDovaBaseModule * self;
	ValaCCodeExpressionStatement* _tmp0_;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	ValaCCodeFragment* cfrag;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	if (vala_code_node_get_error ((ValaCodeNode*) vala_expression_statement_get_expression (stmt))) {
		vala_code_node_set_error ((ValaCodeNode*) stmt, TRUE);
		return;
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp0_ = vala_ccode_expression_statement_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_expression_statement_get_expression (stmt))))));
	_vala_ccode_node_unref0 (_tmp0_);
	if (vala_code_node_get_tree_can_fail ((ValaCodeNode*) stmt)) {
		_tmp1_ = vala_code_node_get_tree_can_fail ((ValaCodeNode*) vala_expression_statement_get_expression (stmt));
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		ValaCCodeFragment* cfrag;
		cfrag = vala_ccode_fragment_new ();
		vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) stmt));
		vala_dova_base_module_add_simple_check (self, (ValaCodeNode*) vala_expression_statement_get_expression (stmt), cfrag, FALSE);
		vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
		_vala_ccode_node_unref0 (cfrag);
	}
	if (vala_collection_get_size ((ValaCollection*) VALA_LIST (vala_dova_base_module_get_temp_vars (self))) == 0) {
		_tmp2_ = self->pre_statement_fragment == NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		return;
	}
	cfrag = vala_ccode_fragment_new ();
	vala_dova_base_module_append_temp_decl (self, cfrag, (ValaList*) vala_dova_base_module_get_temp_vars (self));
	if (self->pre_statement_fragment != NULL) {
		ValaCCodeFragment* _tmp3_;
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) self->pre_statement_fragment);
		self->pre_statement_fragment = (_tmp3_ = NULL, _vala_ccode_node_unref0 (self->pre_statement_fragment), _tmp3_);
	}
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) stmt));
	{
		ValaIterator* _local_it;
		_local_it = vala_iterable_iterator ((ValaIterable*) vala_dova_base_module_get_temp_ref_vars (self));
		while (TRUE) {
			ValaLocalVariable* local;
			ValaMemberAccess* ma;
			ValaCCodeIdentifier* _tmp4_;
			ValaCCodeExpression* _tmp5_;
			ValaCCodeExpressionStatement* _tmp6_;
			if (!vala_iterator_next (_local_it)) {
				break;
			}
			local = (ValaLocalVariable*) vala_iterator_get (_local_it);
			ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
			vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
			vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp6_ = vala_ccode_expression_statement_new (_tmp5_ = vala_dova_base_module_get_unref_expression (self, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) local))), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma))));
			_vala_ccode_node_unref0 (_tmp6_);
			_vala_ccode_node_unref0 (_tmp5_);
			_vala_ccode_node_unref0 (_tmp4_);
			_vala_code_node_unref0 (ma);
			_vala_code_node_unref0 (local);
		}
		_vala_collection_object_unref0 (_local_it);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_vars (self));
	vala_collection_clear ((ValaCollection*) vala_dova_base_module_get_temp_ref_vars (self));
	_vala_ccode_node_unref0 (cfrag);
}


void vala_dova_base_module_create_temp_decl (ValaDovaBaseModule* self, ValaStatement* stmt, ValaList* temp_vars) {
	gboolean _tmp0_ = FALSE;
	ValaCCodeFragment* cfrag;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stmt != NULL);
	if (temp_vars == NULL) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = vala_collection_get_size ((ValaCollection*) temp_vars) == 0;
	}
	if (_tmp0_) {
		return;
	}
	cfrag = vala_ccode_fragment_new ();
	vala_dova_base_module_append_temp_decl (self, cfrag, temp_vars);
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode ((ValaCodeNode*) stmt));
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (cfrag);
}


static void vala_dova_base_module_real_append_local_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop) {
	ValaBlock* b;
	ValaList* local_vars;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	g_return_if_fail (cfrag != NULL);
	b = _vala_code_node_ref0 (VALA_BLOCK (sym));
	local_vars = vala_block_get_local_variables (b);
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp0_;
			_tmp0_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp1_ = FALSE;
				gboolean _tmp2_ = FALSE;
				gboolean _tmp3_ = FALSE;
				if (!_tmp0_) {
					i--;
				}
				_tmp0_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (vala_symbol_get_active ((ValaSymbol*) local)) {
					_tmp3_ = !vala_local_variable_get_floating (local);
				} else {
					_tmp3_ = FALSE;
				}
				if (_tmp3_) {
					_tmp2_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					_tmp1_ = vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp4_;
					ValaCCodeExpression* _tmp5_;
					ValaCCodeExpressionStatement* _tmp6_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp6_ = vala_ccode_expression_statement_new (_tmp5_ = vala_dova_base_module_get_unref_expression (self, _tmp4_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma))));
					_vala_ccode_node_unref0 (_tmp6_);
					_vala_ccode_node_unref0 (_tmp5_);
					_vala_ccode_node_unref0 (_tmp4_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		ValaCCodeIdentifier* _tmp7_;
		ValaCCodeFunctionCall* _tmp8_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp9_;
		ValaCCodeExpression* _tmp10_;
		ValaCCodeExpressionStatement* _tmp11_;
		block_id = vala_dova_base_module_get_block_id (self, b);
		data_unref = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("dova_object_unref"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
		vala_ccode_function_call_add_argument (data_unref, _tmp10_ = vala_dova_base_module_get_variable_cexpression (self, _tmp9_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp10_);
		_g_free0 (_tmp9_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp11_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (data_unref);
	}
	if (stop_at_loop) {
		gboolean _tmp12_ = FALSE;
		gboolean _tmp13_ = FALSE;
		if (VALA_IS_LOOP (vala_code_node_get_parent_node ((ValaCodeNode*) b))) {
			_tmp13_ = TRUE;
		} else {
			_tmp13_ = VALA_IS_FOREACH_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) b));
		}
		if (_tmp13_) {
			_tmp12_ = TRUE;
		} else {
			_tmp12_ = VALA_IS_SWITCH_STATEMENT (vala_code_node_get_parent_node ((ValaCodeNode*) b));
		}
		if (_tmp12_) {
			_vala_collection_object_unref0 (local_vars);
			_vala_code_node_unref0 (b);
			return;
		}
	}
	if (VALA_IS_BLOCK (vala_symbol_get_parent_symbol (sym))) {
		vala_dova_base_module_append_local_free (self, vala_symbol_get_parent_symbol (sym), cfrag, stop_at_loop);
	} else {
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol (sym))) {
			vala_dova_base_module_append_param_free (self, VALA_METHOD (vala_symbol_get_parent_symbol (sym)), cfrag);
		}
	}
	_vala_collection_object_unref0 (local_vars);
	_vala_code_node_unref0 (b);
}


void vala_dova_base_module_append_local_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, gboolean stop_at_loop) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->append_local_free (self, sym, cfrag, stop_at_loop);
}


void vala_dova_base_module_append_error_free (ValaDovaBaseModule* self, ValaSymbol* sym, ValaCCodeFragment* cfrag, ValaTryStatement* current_try) {
	ValaBlock* b;
	ValaList* local_vars;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	g_return_if_fail (cfrag != NULL);
	g_return_if_fail (current_try != NULL);
	b = _vala_code_node_ref0 (VALA_BLOCK (sym));
	local_vars = vala_block_get_local_variables (b);
	{
		gint i;
		i = vala_collection_get_size ((ValaCollection*) local_vars) - 1;
		{
			gboolean _tmp0_;
			_tmp0_ = TRUE;
			while (TRUE) {
				ValaLocalVariable* local;
				gboolean _tmp1_ = FALSE;
				gboolean _tmp2_ = FALSE;
				gboolean _tmp3_ = FALSE;
				if (!_tmp0_) {
					i--;
				}
				_tmp0_ = FALSE;
				if (!(i >= 0)) {
					break;
				}
				local = (ValaLocalVariable*) vala_list_get (local_vars, i);
				if (vala_symbol_get_active ((ValaSymbol*) local)) {
					_tmp3_ = !vala_local_variable_get_floating (local);
				} else {
					_tmp3_ = FALSE;
				}
				if (_tmp3_) {
					_tmp2_ = !vala_local_variable_get_captured (local);
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					_tmp1_ = vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) local));
				} else {
					_tmp1_ = FALSE;
				}
				if (_tmp1_) {
					ValaMemberAccess* ma;
					ValaCCodeExpression* _tmp4_;
					ValaCCodeExpression* _tmp5_;
					ValaCCodeExpressionStatement* _tmp6_;
					ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) local), NULL);
					vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) local);
					vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp6_ = vala_ccode_expression_statement_new (_tmp5_ = vala_dova_base_module_get_unref_expression (self, _tmp4_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) local)), vala_variable_get_variable_type ((ValaVariable*) local), (ValaExpression*) ma))));
					_vala_ccode_node_unref0 (_tmp6_);
					_vala_ccode_node_unref0 (_tmp5_);
					_vala_ccode_node_unref0 (_tmp4_);
					_vala_code_node_unref0 (ma);
				}
				_vala_code_node_unref0 (local);
			}
		}
	}
	if (vala_block_get_captured (b)) {
		gint block_id;
		ValaCCodeIdentifier* _tmp7_;
		ValaCCodeFunctionCall* _tmp8_;
		ValaCCodeFunctionCall* data_unref;
		char* _tmp9_;
		ValaCCodeExpression* _tmp10_;
		ValaCCodeExpressionStatement* _tmp11_;
		block_id = vala_dova_base_module_get_block_id (self, b);
		data_unref = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("dova_object_unref"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
		vala_ccode_function_call_add_argument (data_unref, _tmp10_ = vala_dova_base_module_get_variable_cexpression (self, _tmp9_ = g_strdup_printf ("_data%d_", block_id)));
		_vala_ccode_node_unref0 (_tmp10_);
		_g_free0 (_tmp9_);
		vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp11_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) data_unref)));
		_vala_ccode_node_unref0 (_tmp11_);
		_vala_ccode_node_unref0 (data_unref);
	}
	if (sym == VALA_SYMBOL (vala_try_statement_get_body (current_try))) {
		_vala_collection_object_unref0 (local_vars);
		_vala_code_node_unref0 (b);
		return;
	}
	if (VALA_IS_BLOCK (vala_symbol_get_parent_symbol (sym))) {
		vala_dova_base_module_append_error_free (self, vala_symbol_get_parent_symbol (sym), cfrag, current_try);
	} else {
		if (VALA_IS_METHOD (vala_symbol_get_parent_symbol (sym))) {
			vala_dova_base_module_append_param_free (self, VALA_METHOD (vala_symbol_get_parent_symbol (sym)), cfrag);
		}
	}
	_vala_collection_object_unref0 (local_vars);
	_vala_code_node_unref0 (b);
}


static void vala_dova_base_module_append_param_free (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeFragment* cfrag) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (cfrag != NULL);
	{
		ValaList* _tmp0_;
		ValaIterator* _tmp1_;
		ValaIterator* _param_it;
		_param_it = (_tmp1_ = vala_iterable_iterator ((ValaIterable*) (_tmp0_ = vala_method_get_parameters (m))), _vala_collection_object_unref0 (_tmp0_), _tmp1_);
		while (TRUE) {
			ValaFormalParameter* param;
			gboolean _tmp2_ = FALSE;
			if (!vala_iterator_next (_param_it)) {
				break;
			}
			param = (ValaFormalParameter*) vala_iterator_get (_param_it);
			if (vala_dova_base_module_requires_destroy (self, vala_variable_get_variable_type ((ValaVariable*) param))) {
				_tmp2_ = vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN;
			} else {
				_tmp2_ = FALSE;
			}
			if (_tmp2_) {
				ValaMemberAccess* ma;
				ValaCCodeExpression* _tmp3_;
				ValaCCodeExpression* _tmp4_;
				ValaCCodeExpressionStatement* _tmp5_;
				ma = vala_member_access_new_simple (vala_symbol_get_name ((ValaSymbol*) param), NULL);
				vala_expression_set_symbol_reference ((ValaExpression*) ma, (ValaSymbol*) param);
				vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp5_ = vala_ccode_expression_statement_new (_tmp4_ = vala_dova_base_module_get_unref_expression (self, _tmp3_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) param)), vala_variable_get_variable_type ((ValaVariable*) param), (ValaExpression*) ma))));
				_vala_ccode_node_unref0 (_tmp5_);
				_vala_ccode_node_unref0 (_tmp4_);
				_vala_ccode_node_unref0 (_tmp3_);
				_vala_code_node_unref0 (ma);
			}
			_vala_code_node_unref0 (param);
		}
		_vala_collection_object_unref0 (_param_it);
	}
}


void vala_dova_base_module_create_local_free (ValaDovaBaseModule* self, ValaCodeNode* stmt, gboolean stop_at_loop) {
	ValaCCodeFragment* cfrag;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stmt != NULL);
	cfrag = vala_ccode_fragment_new ();
	vala_dova_base_module_append_local_free (self, vala_dova_base_module_get_current_symbol (self), cfrag, stop_at_loop);
	vala_ccode_fragment_append (cfrag, vala_code_node_get_ccodenode (stmt));
	vala_code_node_set_ccodenode (stmt, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (cfrag);
}


static void vala_dova_base_module_real_visit_return_statement (ValaCodeVisitor* base, ValaReturnStatement* stmt) {
	ValaDovaBaseModule * self;
	ValaCCodeFragment* cfrag;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeReturnStatement* _tmp3_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	cfrag = vala_ccode_fragment_new ();
	vala_dova_base_module_append_local_free (self, vala_dova_base_module_get_current_symbol (self), cfrag, FALSE);
	_tmp0_ = NULL;
	if (VALA_IS_VOID_TYPE (vala_dova_base_module_get_current_return_type (self))) {
		ValaCCodeIdentifier* _tmp1_;
		_tmp0_ = (_tmp1_ = NULL, _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	} else {
		ValaCCodeIdentifier* _tmp2_;
		_tmp0_ = (_tmp2_ = vala_ccode_identifier_new ("result"), _vala_ccode_node_unref0 (_tmp0_), _tmp2_);
	}
	vala_ccode_fragment_append (cfrag, (ValaCCodeNode*) (_tmp3_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) _tmp0_)));
	_vala_ccode_node_unref0 (_tmp3_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) cfrag);
	_vala_ccode_node_unref0 (_tmp0_);
	_vala_ccode_node_unref0 (cfrag);
}


static void vala_dova_base_module_real_visit_delete_statement (ValaCodeVisitor* base, ValaDeleteStatement* stmt) {
	ValaDovaBaseModule * self;
	ValaPointerType* pointer_type;
	ValaDataType* type;
	gboolean _tmp0_ = FALSE;
	ValaCCodeExpression* _tmp2_;
	ValaCCodeFunctionCall* _tmp3_;
	ValaCCodeFunctionCall* ccall;
	ValaCCodeExpressionStatement* _tmp4_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (stmt != NULL);
	pointer_type = _vala_code_node_ref0 (VALA_POINTER_TYPE (vala_expression_get_value_type (vala_delete_statement_get_expression (stmt))));
	type = _vala_code_node_ref0 ((ValaDataType*) pointer_type);
	if (vala_data_type_get_data_type (vala_pointer_type_get_base_type (pointer_type)) != NULL) {
		_tmp0_ = vala_typesymbol_is_reference_type (vala_data_type_get_data_type (vala_pointer_type_get_base_type (pointer_type)));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaDataType* _tmp1_;
		type = (_tmp1_ = _vala_code_node_ref0 (vala_pointer_type_get_base_type (pointer_type)), _vala_code_node_unref0 (type), _tmp1_);
	}
	ccall = (_tmp3_ = vala_ccode_function_call_new (_tmp2_ = vala_dova_base_module_get_destroy_func_expression (self, type, FALSE)), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	vala_ccode_function_call_add_argument (ccall, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_delete_statement_get_expression (stmt))));
	vala_code_node_set_ccodenode ((ValaCodeNode*) stmt, (ValaCCodeNode*) (_tmp4_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) ccall)));
	_vala_ccode_node_unref0 (_tmp4_);
	_vala_ccode_node_unref0 (ccall);
	_vala_code_node_unref0 (type);
	_vala_code_node_unref0 (pointer_type);
}


static void vala_dova_base_module_real_visit_expression (ValaCodeVisitor* base, ValaExpression* expr) {
	ValaDovaBaseModule * self;
	gboolean _tmp0_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_code_node_get_ccodenode ((ValaCodeNode*) expr) != NULL) {
		_tmp0_ = !vala_expression_get_lvalue (expr);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeExpression* _tmp1_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_dova_base_module_transform_expression (self, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)), vala_expression_get_value_type (expr), vala_expression_get_target_type (expr), expr)));
		_vala_ccode_node_unref0 (_tmp1_);
	}
}


static void vala_dova_base_module_real_visit_boolean_literal (ValaCodeVisitor* base, ValaBooleanLiteral* expr) {
	ValaDovaBaseModule * self;
	const char* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = NULL;
	if (vala_boolean_literal_get_value (expr)) {
		_tmp0_ = "true";
	} else {
		_tmp0_ = "false";
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new (_tmp0_)));
	_vala_ccode_node_unref0 (_tmp1_);
}


static void vala_dova_base_module_real_visit_character_literal (ValaCodeVisitor* base, ValaCharacterLiteral* expr) {
	ValaDovaBaseModule * self;
	gboolean _tmp0_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_character_literal_get_char (expr) >= 0x20) {
		_tmp0_ = vala_character_literal_get_char (expr) < 0x80;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaCCodeConstant* _tmp1_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_constant_new (vala_character_literal_get_value (expr))));
		_vala_ccode_node_unref0 (_tmp1_);
	} else {
		char* _tmp2_;
		ValaCCodeConstant* _tmp3_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp3_ = vala_ccode_constant_new (_tmp2_ = g_strdup_printf ("%uU", (guint) vala_character_literal_get_char (expr)))));
		_vala_ccode_node_unref0 (_tmp3_);
		_g_free0 (_tmp2_);
	}
}


static void vala_dova_base_module_real_visit_integer_literal (ValaCodeVisitor* base, ValaIntegerLiteral* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeConstant* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_constant_new (vala_integer_literal_get_value (expr))));
	_vala_ccode_node_unref0 (_tmp0_);
}


static char* string_substring (const char* self, glong offset, glong len) {
	char* result = NULL;
	glong string_length;
	const char* start;
	g_return_val_if_fail (self != NULL, NULL);
	string_length = string_get_length (self);
	if (offset < 0) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= 0, NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < 0) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	start = g_utf8_offset_to_pointer (self, offset);
	result = g_strndup (start, ((gchar*) g_utf8_offset_to_pointer (start, len)) - ((gchar*) start));
	return result;
}


static gboolean string_contains (const char* self, const char* needle) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	result = strstr (self, needle) != NULL;
	return result;
}


static void vala_dova_base_module_real_visit_real_literal (ValaCodeVisitor* base, ValaRealLiteral* expr) {
	ValaDovaBaseModule * self;
	char* c_literal;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	ValaCCodeConstant* _tmp8_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	c_literal = g_strdup (vala_real_literal_get_value (expr));
	if (g_str_has_suffix (c_literal, "d")) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = g_str_has_suffix (c_literal, "D");
	}
	if (_tmp0_) {
		char* _tmp1_;
		c_literal = (_tmp1_ = string_substring (c_literal, (glong) 0, string_get_length (c_literal) - 1), _g_free0 (c_literal), _tmp1_);
	}
	if (string_contains (c_literal, ".")) {
		_tmp3_ = TRUE;
	} else {
		_tmp3_ = string_contains (c_literal, "e");
	}
	if (_tmp3_) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = string_contains (c_literal, "E");
	}
	if (!_tmp2_) {
		gboolean _tmp4_ = FALSE;
		if (string_contains (c_literal, "f")) {
			_tmp4_ = TRUE;
		} else {
			_tmp4_ = string_contains (c_literal, "F");
		}
		if (_tmp4_) {
			char* _tmp5_;
			char* _tmp6_;
			c_literal = (_tmp6_ = g_strconcat (_tmp5_ = string_substring (c_literal, (glong) 0, string_get_length (c_literal) - 1), ".f", NULL), _g_free0 (c_literal), _tmp6_);
			_g_free0 (_tmp5_);
		} else {
			char* _tmp7_;
			c_literal = (_tmp7_ = g_strconcat (c_literal, ".", NULL), _g_free0 (c_literal), _tmp7_);
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp8_ = vala_ccode_constant_new (c_literal)));
	_vala_ccode_node_unref0 (_tmp8_);
	_g_free0 (c_literal);
}


static void vala_dova_base_module_real_visit_string_literal (ValaCodeVisitor* base, ValaStringLiteral* expr) {
	ValaDovaBaseModule * self;
	char* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	ValaCCodeConstant* cliteral;
	ValaCCodeConstant* _tmp2_;
	ValaCCodeBinaryExpression* _tmp3_;
	ValaCCodeBinaryExpression* cbinary;
	ValaCCodeCastExpression* _tmp4_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	cliteral = (_tmp1_ = vala_ccode_constant_new (_tmp0_ = g_strconcat ("\"\\0\" ", vala_string_literal_get_value (expr), NULL)), _g_free0 (_tmp0_), _tmp1_);
	cbinary = (_tmp3_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_PLUS, (ValaCCodeExpression*) cliteral, (ValaCCodeExpression*) (_tmp2_ = vala_ccode_constant_new ("1"))), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp4_ = vala_ccode_cast_expression_new ((ValaCCodeExpression*) cbinary, "string_t")));
	_vala_ccode_node_unref0 (_tmp4_);
	_vala_ccode_node_unref0 (cbinary);
	_vala_ccode_node_unref0 (cliteral);
}


static void vala_dova_base_module_real_visit_null_literal (ValaCodeVisitor* base, ValaNullLiteral* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeConstant* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_constant_new ("NULL")));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_base_access (ValaCodeVisitor* base, ValaBaseAccess* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeIdentifier* _tmp0_;
	char* _tmp1_;
	ValaCCodeCastExpression* _tmp2_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_dova_base_module_generate_type_declaration (self, vala_expression_get_value_type ((ValaExpression*) expr), self->source_declarations);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp2_ = vala_ccode_cast_expression_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("this")), _tmp1_ = vala_data_type_get_cname (vala_expression_get_value_type ((ValaExpression*) expr)))));
	_vala_ccode_node_unref0 (_tmp2_);
	_g_free0 (_tmp1_);
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_postfix_expression (ValaCodeVisitor* base, ValaPostfixExpression* expr) {
	ValaDovaBaseModule * self;
	ValaMemberAccess* ma;
	ValaCCodeUnaryOperator _tmp7_ = 0;
	ValaCCodeUnaryOperator op;
	ValaCCodeUnaryExpression* _tmp8_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	ma = vala_dova_base_module_find_property_access (self, vala_postfix_expression_get_inner (expr));
	if (ma != NULL) {
		ValaProperty* prop;
		ValaCCodeCommaExpression* ccomma;
		ValaLocalVariable* temp_decl;
		ValaCCodeExpression* _tmp0_;
		ValaCCodeAssignment* _tmp1_;
		ValaCCodeBinaryOperator _tmp2_ = 0;
		ValaCCodeBinaryOperator op;
		ValaCCodeExpression* _tmp3_;
		ValaCCodeConstant* _tmp4_;
		ValaCCodeBinaryExpression* _tmp5_;
		ValaCCodeBinaryExpression* cexpr;
		ValaCCodeFunctionCall* ccall;
		ValaCCodeIdentifier* _tmp6_;
		prop = _vala_code_node_ref0 (VALA_PROPERTY (vala_expression_get_symbol_reference ((ValaExpression*) ma)));
		ccomma = vala_ccode_comma_expression_new ();
		temp_decl = vala_dova_base_module_get_temp_variable (self, vala_property_get_property_type (prop), TRUE, (ValaCodeNode*) expr);
		vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_decl);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp1_ = vala_ccode_assignment_new (_tmp0_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)), VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_postfix_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp1_);
		_vala_ccode_node_unref0 (_tmp0_);
		if (vala_postfix_expression_get_increment (expr)) {
			_tmp2_ = VALA_CCODE_BINARY_OPERATOR_PLUS;
		} else {
			_tmp2_ = VALA_CCODE_BINARY_OPERATOR_MINUS;
		}
		op = _tmp2_;
		cexpr = (_tmp5_ = vala_ccode_binary_expression_new (op, _tmp3_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl)), (ValaCCodeExpression*) (_tmp4_ = vala_ccode_constant_new ("1"))), _vala_ccode_node_unref0 (_tmp4_), _vala_ccode_node_unref0 (_tmp3_), _tmp5_);
		ccall = vala_dova_base_module_get_property_set_call (self, prop, ma, (ValaCCodeExpression*) cexpr, NULL);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) ccall);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) temp_decl))));
		_vala_ccode_node_unref0 (_tmp6_);
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (cexpr);
		_vala_code_node_unref0 (temp_decl);
		_vala_ccode_node_unref0 (ccomma);
		_vala_code_node_unref0 (prop);
		_vala_code_node_unref0 (ma);
		return;
	}
	if (vala_postfix_expression_get_increment (expr)) {
		_tmp7_ = VALA_CCODE_UNARY_OPERATOR_POSTFIX_INCREMENT;
	} else {
		_tmp7_ = VALA_CCODE_UNARY_OPERATOR_POSTFIX_DECREMENT;
	}
	op = _tmp7_;
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp8_ = vala_ccode_unary_expression_new (op, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_postfix_expression_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp8_);
	_vala_code_node_unref0 (ma);
}


static ValaMemberAccess* vala_dova_base_module_find_property_access (ValaDovaBaseModule* self, ValaExpression* expr) {
	ValaMemberAccess* result = NULL;
	ValaMemberAccess* ma;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expr != NULL, NULL);
	if (!VALA_IS_MEMBER_ACCESS (expr)) {
		result = NULL;
		return result;
	}
	ma = _vala_code_node_ref0 (VALA_MEMBER_ACCESS (expr));
	if (VALA_IS_PROPERTY (vala_expression_get_symbol_reference ((ValaExpression*) ma))) {
		result = ma;
		return result;
	}
	result = NULL;
	_vala_code_node_unref0 (ma);
	return result;
}


gboolean vala_dova_base_module_requires_copy (ValaDovaBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (!vala_data_type_is_disposable (type)) {
		result = FALSE;
		return result;
	}
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp2_ = vala_typesymbol_is_reference_counting ((ValaTypeSymbol*) cl);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		char* _tmp3_;
		_tmp1_ = _vala_strcmp0 (_tmp3_ = vala_typesymbol_get_ref_function ((ValaTypeSymbol*) cl), "") == 0;
		_g_free0 (_tmp3_);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		return result;
	}
	if (vala_data_type_get_type_parameter (type) != NULL) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		return result;
	}
	result = TRUE;
	_vala_code_node_unref0 (cl);
	return result;
}


gboolean vala_dova_base_module_requires_destroy (ValaDovaBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaDataType* _tmp0_;
	ValaArrayType* array_type;
	gboolean _tmp1_ = FALSE;
	ValaTypeSymbol* _tmp2_;
	ValaClass* cl;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	if (!vala_data_type_is_disposable (type)) {
		result = FALSE;
		return result;
	}
	array_type = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_ARRAY_TYPE (_tmp0_) ? ((ValaArrayType*) _tmp0_) : NULL));
	if (array_type != NULL) {
		_tmp1_ = vala_array_type_get_inline_allocated (array_type);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = vala_dova_base_module_requires_destroy (self, vala_array_type_get_element_type (array_type));
		_vala_code_node_unref0 (array_type);
		return result;
	}
	cl = _vala_code_node_ref0 ((_tmp2_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp2_) ? ((ValaClass*) _tmp2_) : NULL));
	if (cl != NULL) {
		_tmp4_ = vala_typesymbol_is_reference_counting ((ValaTypeSymbol*) cl);
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		char* _tmp5_;
		_tmp3_ = _vala_strcmp0 (_tmp5_ = vala_typesymbol_get_unref_function ((ValaTypeSymbol*) cl), "") == 0;
		_g_free0 (_tmp5_);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		_vala_code_node_unref0 (array_type);
		return result;
	}
	if (vala_data_type_get_type_parameter (type) != NULL) {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		_vala_code_node_unref0 (array_type);
		return result;
	}
	result = TRUE;
	_vala_code_node_unref0 (cl);
	_vala_code_node_unref0 (array_type);
	return result;
}


static gboolean vala_dova_base_module_is_ref_function_void (ValaDovaBaseModule* self, ValaDataType* type) {
	gboolean result = FALSE;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (type != NULL, FALSE);
	cl = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp1_ = vala_class_get_ref_function_void (cl);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = TRUE;
		_vala_code_node_unref0 (cl);
		return result;
	} else {
		result = FALSE;
		_vala_code_node_unref0 (cl);
		return result;
	}
	_vala_code_node_unref0 (cl);
}


static ValaCCodeExpression* vala_dova_base_module_real_get_ref_cexpression (ValaDovaBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	ValaCCodeExpression* dupexpr;
	ValaCCodeFunctionCall* ccall;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp9_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expression_type != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	if (VALA_IS_VALUE_TYPE (expression_type)) {
		_tmp0_ = !vala_data_type_get_nullable (expression_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaLocalVariable* decl;
		ValaCCodeExpression* ctemp;
		ValaValueType* vt;
		ValaStruct* st;
		char* _tmp1_;
		ValaCCodeIdentifier* _tmp2_;
		ValaCCodeFunctionCall* _tmp3_;
		ValaCCodeFunctionCall* copy_call;
		ValaCCodeUnaryExpression* _tmp4_;
		ValaCCodeConstant* _tmp5_;
		ValaCCodeUnaryExpression* _tmp6_;
		ValaCCodeConstant* _tmp7_;
		ValaCCodeCommaExpression* ccomma;
		decl = vala_dova_base_module_get_temp_variable (self, expression_type, FALSE, node);
		vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), decl);
		ctemp = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl));
		vt = _vala_code_node_ref0 (VALA_VALUE_TYPE (expression_type));
		st = _vala_code_node_ref0 (VALA_STRUCT (vala_value_type_get_type_symbol (vt)));
		copy_call = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new (_tmp1_ = vala_typesymbol_get_copy_function ((ValaTypeSymbol*) st)))), _vala_ccode_node_unref0 (_tmp2_), _g_free0 (_tmp1_), _tmp3_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp4_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, ctemp)));
		_vala_ccode_node_unref0 (_tmp4_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp5_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr)));
		_vala_ccode_node_unref0 (_tmp6_);
		vala_ccode_function_call_add_argument (copy_call, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp7_);
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) copy_call);
		vala_ccode_comma_expression_append_expression (ccomma, ctemp);
		result = (ValaCCodeExpression*) ccomma;
		_vala_ccode_node_unref0 (copy_call);
		_vala_code_node_unref0 (st);
		_vala_code_node_unref0 (vt);
		_vala_ccode_node_unref0 (ctemp);
		_vala_code_node_unref0 (decl);
		return result;
	}
	dupexpr = vala_dova_base_module_get_dup_func_expression (self, expression_type, vala_code_node_get_source_reference (node), FALSE);
	if (dupexpr == NULL) {
		vala_code_node_set_error (node, TRUE);
		result = NULL;
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	}
	ccall = vala_ccode_function_call_new (dupexpr);
	if (expr != NULL) {
		_tmp9_ = vala_expression_is_non_null (expr);
	} else {
		_tmp9_ = FALSE;
	}
	if (_tmp9_) {
		_tmp8_ = !vala_dova_base_module_is_ref_function_void (self, expression_type);
	} else {
		_tmp8_ = FALSE;
	}
	if (_tmp8_) {
		vala_ccode_function_call_add_argument (ccall, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr)));
		result = (ValaCCodeExpression*) ccall;
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	} else {
		ValaLocalVariable* decl;
		ValaCCodeExpression* ctemp;
		ValaCCodeConstant* _tmp10_;
		ValaCCodeBinaryExpression* _tmp11_;
		ValaCCodeBinaryExpression* cisnull;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeAssignment* _tmp16_;
		ValaCCodeConstant* cifnull;
		ValaCCodeConditionalExpression* _tmp17_;
		decl = vala_dova_base_module_get_temp_variable (self, expression_type, FALSE, node);
		vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), decl);
		ctemp = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl));
		cisnull = (_tmp11_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, ctemp, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp10_), _tmp11_);
		if (vala_data_type_get_type_parameter (expression_type) != NULL) {
			ValaCCodeExpression* _tmp12_;
			ValaCCodeConstant* _tmp13_;
			ValaCCodeBinaryExpression* _tmp14_;
			ValaCCodeBinaryExpression* cdupisnull;
			ValaCCodeBinaryExpression* _tmp15_;
			cdupisnull = (_tmp14_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, _tmp12_ = vala_dova_base_module_get_dup_func_expression (self, expression_type, vala_code_node_get_source_reference (node), FALSE), (ValaCCodeExpression*) (_tmp13_ = vala_ccode_constant_new ("NULL"))), _vala_ccode_node_unref0 (_tmp13_), _vala_ccode_node_unref0 (_tmp12_), _tmp14_);
			cisnull = (_tmp15_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_OR, (ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) cdupisnull), _vala_ccode_node_unref0 (cisnull), _tmp15_);
			_vala_ccode_node_unref0 (cdupisnull);
		}
		vala_ccode_function_call_add_argument (ccall, ctemp);
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_assignment_new (ctemp, cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp16_);
		cifnull = vala_ccode_constant_new ("NULL");
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_conditional_expression_new ((ValaCCodeExpression*) cisnull, (ValaCCodeExpression*) cifnull, (ValaCCodeExpression*) ccall)));
		_vala_ccode_node_unref0 (_tmp17_);
		if (vala_dova_base_module_is_ref_function_void (self, expression_type)) {
			vala_ccode_comma_expression_append_expression (ccomma, ctemp);
		}
		result = (ValaCCodeExpression*) ccomma;
		_vala_ccode_node_unref0 (cifnull);
		_vala_ccode_node_unref0 (cisnull);
		_vala_ccode_node_unref0 (ctemp);
		_vala_code_node_unref0 (decl);
		_vala_ccode_node_unref0 (ccall);
		_vala_ccode_node_unref0 (dupexpr);
		return result;
	}
	_vala_ccode_node_unref0 (ccall);
	_vala_ccode_node_unref0 (dupexpr);
}


ValaCCodeExpression* vala_dova_base_module_get_ref_cexpression (ValaDovaBaseModule* self, ValaDataType* expression_type, ValaCCodeExpression* cexpr, ValaExpression* expr, ValaCodeNode* node) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->get_ref_cexpression (self, expression_type, cexpr, expr, node);
}


static void vala_dova_base_module_real_generate_class_declaration (ValaDovaBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	char* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (cl != NULL);
	g_return_if_fail (decl_space != NULL);
	if ((_tmp1_ = vala_ccode_declaration_space_add_symbol_declaration (decl_space, (ValaSymbol*) cl, _tmp0_ = vala_typesymbol_get_cname ((ValaTypeSymbol*) cl, FALSE)), _g_free0 (_tmp0_), _tmp1_)) {
		return;
	}
}


void vala_dova_base_module_generate_class_declaration (ValaDovaBaseModule* self, ValaClass* cl, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_class_declaration (self, cl, decl_space);
}


static void vala_dova_base_module_real_generate_interface_declaration (ValaDovaBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (iface != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_dova_base_module_generate_interface_declaration (ValaDovaBaseModule* self, ValaInterface* iface, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_interface_declaration (self, iface, decl_space);
}


static void vala_dova_base_module_real_generate_method_declaration (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (m != NULL);
	g_return_if_fail (decl_space != NULL);
}


void vala_dova_base_module_generate_method_declaration (ValaDovaBaseModule* self, ValaMethod* m, ValaCCodeDeclarationSpace* decl_space) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->generate_method_declaration (self, m, decl_space);
}


void vala_dova_base_module_add_generic_type_arguments (ValaDovaBaseModule* self, ValaCCodeFunctionCall* ccall, ValaList* type_args, ValaCodeNode* expr, gboolean is_chainup) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (ccall != NULL);
	g_return_if_fail (type_args != NULL);
	g_return_if_fail (expr != NULL);
	{
		ValaIterator* _type_arg_it;
		_type_arg_it = vala_iterable_iterator ((ValaIterable*) type_args);
		while (TRUE) {
			ValaDataType* type_arg;
			ValaCCodeExpression* _tmp0_;
			if (!vala_iterator_next (_type_arg_it)) {
				break;
			}
			type_arg = (ValaDataType*) vala_iterator_get (_type_arg_it);
			vala_ccode_function_call_add_argument (ccall, _tmp0_ = vala_dova_base_module_get_type_id_expression (self, type_arg, is_chainup));
			_vala_ccode_node_unref0 (_tmp0_);
			_vala_code_node_unref0 (type_arg);
		}
		_vala_collection_object_unref0 (_type_arg_it);
	}
}


static void vala_dova_base_module_real_visit_object_creation_expression (ValaCodeVisitor* base, ValaObjectCreationExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeExpression* instance;
	ValaCCodeExpression* creation_expr;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	gboolean struct_by_ref;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	instance = NULL;
	creation_expr = NULL;
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	struct_by_ref = FALSE;
	if (st != NULL) {
		_tmp3_ = !vala_struct_is_boolean_type (st);
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		_tmp2_ = !vala_struct_is_integer_type (st);
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		_tmp1_ = !vala_struct_is_floating_type (st);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		struct_by_ref = TRUE;
	}
	if (struct_by_ref) {
		_tmp4_ = TRUE;
	} else {
		ValaList* _tmp5_;
		_tmp4_ = vala_collection_get_size ((ValaCollection*) (_tmp5_ = vala_object_creation_expression_get_object_initializer (expr))) > 0;
		_vala_collection_object_unref0 (_tmp5_);
	}
	if (_tmp4_) {
		ValaLocalVariable* temp_decl;
		char* _tmp6_;
		ValaCCodeExpression* _tmp7_;
		temp_decl = vala_dova_base_module_get_temp_variable (self, vala_object_creation_expression_get_type_reference (expr), FALSE, (ValaCodeNode*) expr);
		vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_decl);
		instance = (_tmp7_ = vala_dova_base_module_get_variable_cexpression (self, _tmp6_ = vala_dova_base_module_get_variable_cname (self, vala_symbol_get_name ((ValaSymbol*) temp_decl))), _vala_ccode_node_unref0 (instance), _tmp7_);
		_g_free0 (_tmp6_);
		_vala_code_node_unref0 (temp_decl);
	}
	if (vala_expression_get_symbol_reference ((ValaExpression*) expr) == NULL) {
		if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
			ValaCCodeIdentifier* _tmp8_;
			ValaCCodeFunctionCall* _tmp9_;
			ValaCCodeFunctionCall* creation_call;
			ValaCCodeUnaryExpression* _tmp10_;
			ValaCCodeConstant* _tmp11_;
			char* _tmp12_;
			char* _tmp13_;
			ValaCCodeIdentifier* _tmp14_;
			ValaCCodeExpression* _tmp15_;
			creation_call = (_tmp9_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp8_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp8_), _tmp9_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp10_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
			_vala_ccode_node_unref0 (_tmp10_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_constant_new ("0")));
			_vala_ccode_node_unref0 (_tmp11_);
			vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new (_tmp13_ = g_strdup_printf ("sizeof (%s)", _tmp12_ = vala_data_type_get_cname (vala_object_creation_expression_get_type_reference (expr))))));
			_vala_ccode_node_unref0 (_tmp14_);
			_g_free0 (_tmp13_);
			_g_free0 (_tmp12_);
			creation_expr = (_tmp15_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) creation_call), _vala_ccode_node_unref0 (creation_expr), _tmp15_);
			_vala_ccode_node_unref0 (creation_call);
		}
	} else {
		if (VALA_IS_METHOD (vala_expression_get_symbol_reference ((ValaExpression*) expr))) {
			ValaMethod* m;
			ValaList* params;
			ValaCCodeFunctionCall* creation_call;
			ValaTypeSymbol* _tmp16_;
			ValaClass* cl;
			gboolean _tmp25_ = FALSE;
			gboolean _tmp27_ = FALSE;
			gboolean ellipsis;
			gint i;
			ValaIterator* params_it;
			gboolean _tmp34_ = FALSE;
			ValaCCodeExpression* _tmp39_;
			char* _tmp40_;
			gboolean _tmp41_;
			m = _vala_code_node_ref0 (VALA_METHOD (vala_expression_get_symbol_reference ((ValaExpression*) expr)));
			params = vala_method_get_parameters (m);
			creation_call = NULL;
			vala_dova_base_module_generate_method_declaration (self, m, self->source_declarations);
			cl = _vala_code_node_ref0 ((_tmp16_ = vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)), VALA_IS_CLASS (_tmp16_) ? ((ValaClass*) _tmp16_) : NULL));
			if (!vala_method_get_has_new_function (m)) {
				char* _tmp17_;
				ValaCCodeIdentifier* _tmp18_;
				ValaCCodeFunctionCall* _tmp19_;
				char* _tmp20_;
				ValaCCodeIdentifier* _tmp21_;
				creation_call = (_tmp19_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp18_ = vala_ccode_identifier_new (_tmp17_ = vala_method_get_real_cname (m)))), _vala_ccode_node_unref0 (creation_call), _tmp19_);
				_vala_ccode_node_unref0 (_tmp18_);
				_g_free0 (_tmp17_);
				vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp21_ = vala_ccode_identifier_new (_tmp20_ = vala_typesymbol_get_type_id ((ValaTypeSymbol*) cl))));
				_vala_ccode_node_unref0 (_tmp21_);
				_g_free0 (_tmp20_);
			} else {
				char* _tmp22_;
				ValaCCodeIdentifier* _tmp23_;
				ValaCCodeFunctionCall* _tmp24_;
				creation_call = (_tmp24_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp23_ = vala_ccode_identifier_new (_tmp22_ = vala_method_get_cname (m)))), _vala_ccode_node_unref0 (creation_call), _tmp24_);
				_vala_ccode_node_unref0 (_tmp23_);
				_g_free0 (_tmp22_);
			}
			if (struct_by_ref) {
				_tmp25_ = !(vala_method_get_cinstance_parameter_position (m) < 0);
			} else {
				_tmp25_ = FALSE;
			}
			if (_tmp25_) {
				ValaCCodeUnaryExpression* _tmp26_;
				vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp26_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
				_vala_ccode_node_unref0 (_tmp26_);
			}
			vala_dova_base_module_generate_type_declaration (self, vala_object_creation_expression_get_type_reference (expr), self->source_declarations);
			if (cl != NULL) {
				_tmp27_ = !vala_class_get_is_compact (cl);
			} else {
				_tmp27_ = FALSE;
			}
			if (_tmp27_) {
				ValaList* _tmp28_;
				vala_dova_base_module_add_generic_type_arguments (self, creation_call, _tmp28_ = vala_data_type_get_type_arguments (vala_object_creation_expression_get_type_reference (expr)), (ValaCodeNode*) expr, FALSE);
				_vala_collection_object_unref0 (_tmp28_);
			}
			ellipsis = FALSE;
			i = 1;
			params_it = vala_iterable_iterator ((ValaIterable*) params);
			{
				ValaList* _tmp29_;
				ValaIterator* _tmp30_;
				ValaIterator* _arg_it;
				_arg_it = (_tmp30_ = vala_iterable_iterator ((ValaIterable*) (_tmp29_ = vala_object_creation_expression_get_argument_list (expr))), _vala_collection_object_unref0 (_tmp29_), _tmp30_);
				while (TRUE) {
					ValaExpression* arg;
					ValaCCodeExpression* cexpr;
					ValaFormalParameter* param;
					if (!vala_iterator_next (_arg_it)) {
						break;
					}
					arg = (ValaExpression*) vala_iterator_get (_arg_it);
					cexpr = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) arg)));
					param = NULL;
					if (vala_iterator_next (params_it)) {
						ValaFormalParameter* _tmp31_;
						param = (_tmp31_ = (ValaFormalParameter*) vala_iterator_get (params_it), _vala_code_node_unref0 (param), _tmp31_);
						ellipsis = vala_formal_parameter_get_ellipsis (param);
						if (!ellipsis) {
							ValaCCodeExpression* _tmp32_;
							cexpr = (_tmp32_ = vala_dova_base_module_handle_struct_argument (self, param, arg, cexpr), _vala_ccode_node_unref0 (cexpr), _tmp32_);
						}
					}
					vala_ccode_function_call_add_argument (creation_call, cexpr);
					i++;
					_vala_code_node_unref0 (param);
					_vala_ccode_node_unref0 (cexpr);
					_vala_code_node_unref0 (arg);
				}
				_vala_collection_object_unref0 (_arg_it);
			}
			while (TRUE) {
				ValaFormalParameter* param;
				if (!vala_iterator_next (params_it)) {
					break;
				}
				param = (ValaFormalParameter*) vala_iterator_get (params_it);
				if (vala_formal_parameter_get_ellipsis (param)) {
					ellipsis = TRUE;
					_vala_code_node_unref0 (param);
					break;
				}
				if (vala_variable_get_initializer ((ValaVariable*) param) == NULL) {
					char* _tmp33_;
					vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), _tmp33_ = g_strdup_printf ("no default expression for argument %d", i));
					_g_free0 (_tmp33_);
					_vala_code_node_unref0 (param);
					_vala_collection_object_unref0 (params_it);
					_vala_code_node_unref0 (cl);
					_vala_ccode_node_unref0 (creation_call);
					_vala_collection_object_unref0 (params);
					_vala_code_node_unref0 (m);
					_vala_code_node_unref0 (st);
					_vala_ccode_node_unref0 (creation_expr);
					_vala_ccode_node_unref0 (instance);
					return;
				}
				vala_code_node_emit ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) param), (ValaCodeGenerator*) self);
				vala_ccode_function_call_add_argument (creation_call, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_variable_get_initializer ((ValaVariable*) param))));
				i++;
				_vala_code_node_unref0 (param);
			}
			if (struct_by_ref) {
				_tmp34_ = vala_method_get_cinstance_parameter_position (m) < 0;
			} else {
				_tmp34_ = FALSE;
			}
			if (_tmp34_) {
				ValaCCodeUnaryExpression* _tmp35_;
				vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp35_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, instance)));
				_vala_ccode_node_unref0 (_tmp35_);
			}
			if (ellipsis) {
				gboolean _tmp36_ = FALSE;
				gboolean _tmp37_ = FALSE;
				if (!vala_method_get_printf_format (m)) {
					_tmp37_ = !vala_method_get_scanf_format (m);
				} else {
					_tmp37_ = FALSE;
				}
				if (_tmp37_) {
					_tmp36_ = _vala_strcmp0 (vala_method_get_sentinel (m), "") != 0;
				} else {
					_tmp36_ = FALSE;
				}
				if (_tmp36_) {
					ValaCCodeConstant* _tmp38_;
					vala_ccode_function_call_add_argument (creation_call, (ValaCCodeExpression*) (_tmp38_ = vala_ccode_constant_new (vala_method_get_sentinel (m))));
					_vala_ccode_node_unref0 (_tmp38_);
				}
			}
			creation_expr = (_tmp39_ = _vala_ccode_node_ref0 ((ValaCCodeExpression*) creation_call), _vala_ccode_node_unref0 (creation_expr), _tmp39_);
			if ((_tmp41_ = (_tmp40_ = vala_dova_base_module_get_custom_creturn_type (self, m)) != NULL, _g_free0 (_tmp40_), _tmp41_)) {
				char* _tmp42_;
				ValaCCodeExpression* _tmp43_;
				creation_expr = (_tmp43_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (creation_expr, _tmp42_ = vala_data_type_get_cname (vala_object_creation_expression_get_type_reference (expr))), _vala_ccode_node_unref0 (creation_expr), _tmp43_);
				_g_free0 (_tmp42_);
			}
			_vala_collection_object_unref0 (params_it);
			_vala_code_node_unref0 (cl);
			_vala_ccode_node_unref0 (creation_call);
			_vala_collection_object_unref0 (params);
			_vala_code_node_unref0 (m);
		} else {
			g_assert (FALSE);
		}
	}
	if (instance != NULL) {
		ValaCCodeCommaExpression* ccomma;
		ccomma = vala_ccode_comma_expression_new ();
		if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
			vala_ccode_comma_expression_append_expression (ccomma, creation_expr);
		} else {
			ValaCCodeAssignment* _tmp44_;
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp44_ = vala_ccode_assignment_new (instance, creation_expr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
			_vala_ccode_node_unref0 (_tmp44_);
		}
		{
			ValaList* _tmp45_;
			ValaIterator* _tmp46_;
			ValaIterator* _init_it;
			_init_it = (_tmp46_ = vala_iterable_iterator ((ValaIterable*) (_tmp45_ = vala_object_creation_expression_get_object_initializer (expr))), _vala_collection_object_unref0 (_tmp45_), _tmp46_);
			while (TRUE) {
				ValaMemberInitializer* init;
				if (!vala_iterator_next (_init_it)) {
					break;
				}
				init = (ValaMemberInitializer*) vala_iterator_get (_init_it);
				if (VALA_IS_FIELD (vala_member_initializer_get_symbol_reference (init))) {
					ValaField* f;
					ValaDataType* instance_target_type;
					ValaCCodeExpression* typed_inst;
					ValaCCodeExpression* lhs;
					ValaCCodeAssignment* _tmp51_;
					f = _vala_code_node_ref0 (VALA_FIELD (vala_member_initializer_get_symbol_reference (init)));
					instance_target_type = vala_dova_base_module_get_data_type_for_symbol (VALA_TYPESYMBOL (vala_symbol_get_parent_symbol ((ValaSymbol*) f)));
					typed_inst = vala_dova_base_module_transform_expression (self, instance, vala_object_creation_expression_get_type_reference (expr), instance_target_type, NULL);
					lhs = NULL;
					if (VALA_IS_STRUCT (vala_data_type_get_data_type (vala_object_creation_expression_get_type_reference (expr)))) {
						char* _tmp47_;
						ValaCCodeExpression* _tmp48_;
						lhs = (_tmp48_ = (ValaCCodeExpression*) vala_ccode_member_access_new (typed_inst, _tmp47_ = vala_field_get_cname (f), FALSE), _vala_ccode_node_unref0 (lhs), _tmp48_);
						_g_free0 (_tmp47_);
					} else {
						char* _tmp49_;
						ValaCCodeExpression* _tmp50_;
						lhs = (_tmp50_ = (ValaCCodeExpression*) vala_ccode_member_access_new_pointer (typed_inst, _tmp49_ = vala_field_get_cname (f)), _vala_ccode_node_unref0 (lhs), _tmp50_);
						_g_free0 (_tmp49_);
					}
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp51_ = vala_ccode_assignment_new (lhs, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_member_initializer_get_initializer (init))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp51_);
					_vala_ccode_node_unref0 (lhs);
					_vala_ccode_node_unref0 (typed_inst);
					_vala_code_node_unref0 (instance_target_type);
					_vala_code_node_unref0 (f);
				} else {
					if (VALA_IS_PROPERTY (vala_member_initializer_get_symbol_reference (init))) {
						ValaMemberAccess* inst_ma;
						ValaMemberAccess* ma;
						ValaCCodeFunctionCall* _tmp52_;
						inst_ma = vala_member_access_new_simple ("new", NULL);
						vala_expression_set_value_type ((ValaExpression*) inst_ma, vala_object_creation_expression_get_type_reference (expr));
						vala_code_node_set_ccodenode ((ValaCodeNode*) inst_ma, (ValaCCodeNode*) instance);
						ma = vala_member_access_new ((ValaExpression*) inst_ma, vala_member_initializer_get_name (init), NULL);
						vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp52_ = vala_dova_base_module_get_property_set_call (self, VALA_PROPERTY (vala_member_initializer_get_symbol_reference (init)), ma, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_member_initializer_get_initializer (init))), NULL)));
						_vala_ccode_node_unref0 (_tmp52_);
						_vala_code_node_unref0 (ma);
						_vala_code_node_unref0 (inst_ma);
					}
				}
				_vala_code_node_unref0 (init);
			}
			_vala_collection_object_unref0 (_init_it);
		}
		vala_ccode_comma_expression_append_expression (ccomma, instance);
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
		_vala_ccode_node_unref0 (ccomma);
	} else {
		if (creation_expr != NULL) {
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) creation_expr);
		}
	}
	_vala_code_node_unref0 (st);
	_vala_ccode_node_unref0 (creation_expr);
	_vala_ccode_node_unref0 (instance);
}


ValaCCodeExpression* vala_dova_base_module_handle_struct_argument (ValaDovaBaseModule* self, ValaFormalParameter* param, ValaExpression* arg, ValaCCodeExpression* cexpr) {
	ValaCCodeExpression* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (param != NULL, NULL);
	g_return_val_if_fail (arg != NULL, NULL);
	if (VALA_IS_GENERIC_TYPE (vala_expression_get_formal_target_type (arg))) {
		_tmp0_ = !VALA_IS_GENERIC_TYPE (vala_expression_get_target_type (arg));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		if (vala_formal_parameter_get_direction (param) == VALA_PARAMETER_DIRECTION_IN) {
			ValaCCodeExpression* _tmp1_;
			ValaCCodeUnaryExpression* unary;
			gboolean _tmp2_ = FALSE;
			unary = _vala_ccode_node_ref0 ((_tmp1_ = cexpr, VALA_IS_CCODE_UNARY_EXPRESSION (_tmp1_) ? ((ValaCCodeUnaryExpression*) _tmp1_) : NULL));
			if (unary != NULL) {
				_tmp2_ = vala_ccode_unary_expression_get_operator (unary) == VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION;
			} else {
				_tmp2_ = FALSE;
			}
			if (_tmp2_) {
				result = _vala_ccode_node_ref0 (vala_ccode_unary_expression_get_inner (unary));
				_vala_ccode_node_unref0 (unary);
				return result;
			} else {
				gboolean _tmp3_ = FALSE;
				if (VALA_IS_CCODE_IDENTIFIER (cexpr)) {
					_tmp3_ = TRUE;
				} else {
					_tmp3_ = VALA_IS_CCODE_MEMBER_ACCESS (cexpr);
				}
				if (_tmp3_) {
					result = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cexpr);
					_vala_ccode_node_unref0 (unary);
					return result;
				} else {
					ValaCCodeCommaExpression* ccomma;
					ValaLocalVariable* temp_var;
					ValaCCodeExpression* _tmp4_;
					ValaCCodeAssignment* _tmp5_;
					ValaCCodeIdentifier* _tmp6_;
					ValaCCodeUnaryExpression* _tmp7_;
					ccomma = vala_ccode_comma_expression_new ();
					temp_var = vala_dova_base_module_get_temp_variable (self, vala_expression_get_target_type (arg), TRUE, NULL);
					vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_var);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp5_ = vala_ccode_assignment_new (_tmp4_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_var)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
					_vala_ccode_node_unref0 (_tmp5_);
					_vala_ccode_node_unref0 (_tmp4_);
					vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) temp_var))))));
					_vala_ccode_node_unref0 (_tmp7_);
					_vala_ccode_node_unref0 (_tmp6_);
					result = (ValaCCodeExpression*) ccomma;
					_vala_code_node_unref0 (temp_var);
					_vala_ccode_node_unref0 (unary);
					return result;
				}
			}
			_vala_ccode_node_unref0 (unary);
		}
	}
	result = _vala_ccode_node_ref0 (cexpr);
	return result;
}


static void vala_dova_base_module_real_visit_sizeof_expression (ValaCodeVisitor* base, ValaSizeofExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* csizeof;
	char* _tmp2_;
	ValaCCodeIdentifier* _tmp3_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	csizeof = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	vala_ccode_function_call_add_argument (csizeof, (ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new (_tmp2_ = vala_data_type_get_cname (vala_sizeof_expression_get_type_reference (expr)))));
	_vala_ccode_node_unref0 (_tmp3_);
	_g_free0 (_tmp2_);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) csizeof);
	_vala_ccode_node_unref0 (csizeof);
}


static void vala_dova_base_module_real_visit_typeof_expression (ValaCodeVisitor* base, ValaTypeofExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeExpression* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_dova_base_module_get_type_id_expression (self, vala_typeof_expression_get_type_reference (expr), FALSE)));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_unary_expression (ValaCodeVisitor* base, ValaUnaryExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeUnaryOperator op = 0;
	ValaCCodeUnaryExpression* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_PLUS) {
		op = VALA_CCODE_UNARY_OPERATOR_PLUS;
	} else {
		if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_MINUS) {
			op = VALA_CCODE_UNARY_OPERATOR_MINUS;
		} else {
			if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_LOGICAL_NEGATION) {
				op = VALA_CCODE_UNARY_OPERATOR_LOGICAL_NEGATION;
			} else {
				if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_BITWISE_COMPLEMENT) {
					op = VALA_CCODE_UNARY_OPERATOR_BITWISE_COMPLEMENT;
				} else {
					if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_INCREMENT) {
						op = VALA_CCODE_UNARY_OPERATOR_PREFIX_INCREMENT;
					} else {
						if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_DECREMENT) {
							op = VALA_CCODE_UNARY_OPERATOR_PREFIX_DECREMENT;
						} else {
							if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_REF) {
								op = VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF;
							} else {
								if (vala_unary_expression_get_operator (expr) == VALA_UNARY_OPERATOR_OUT) {
									op = VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF;
								} else {
									g_assert_not_reached ();
								}
							}
						}
					}
				}
			}
		}
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_unary_expression_new (op, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_unary_expression_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_cast_expression (ValaCodeVisitor* base, ValaCastExpression* expr) {
	ValaDovaBaseModule * self;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp19_ = FALSE;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	if (vala_cast_expression_get_is_silent_cast (expr)) {
		vala_code_node_set_error ((ValaCodeNode*) expr, TRUE);
		vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), "Operation not supported for this type");
		return;
	}
	if (vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr)) != NULL) {
		char* _tmp1_;
		_tmp0_ = _vala_strcmp0 (_tmp1_ = vala_symbol_get_full_name ((ValaSymbol*) vala_data_type_get_data_type (vala_cast_expression_get_type_reference (expr))), "Dova.Value") == 0;
		_g_free0 (_tmp1_);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaLocalVariable* temp_decl;
		ValaCCodeExpression* cvar;
		ValaCCodeCommaExpression* ccomma;
		ValaCCodeAssignment* _tmp2_;
		ValaCCodeIdentifier* _tmp3_;
		ValaCCodeFunctionCall* _tmp4_;
		ValaCCodeFunctionCall* to_any;
		ValaCCodeExpression* _tmp5_;
		ValaCCodeUnaryExpression* _tmp6_;
		ValaCCodeConstant* _tmp7_;
		temp_decl = vala_dova_base_module_get_temp_variable (self, vala_expression_get_value_type (vala_cast_expression_get_inner (expr)), TRUE, (ValaCodeNode*) expr);
		vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_decl);
		cvar = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
		ccomma = vala_ccode_comma_expression_new ();
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp2_ = vala_ccode_assignment_new (cvar, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
		_vala_ccode_node_unref0 (_tmp2_);
		to_any = (_tmp4_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new ("dova_type_value_to_any"))), _vala_ccode_node_unref0 (_tmp3_), _tmp4_);
		vala_ccode_function_call_add_argument (to_any, _tmp5_ = vala_dova_base_module_get_type_id_expression (self, vala_expression_get_value_type (vala_cast_expression_get_inner (expr)), FALSE));
		_vala_ccode_node_unref0 (_tmp5_);
		vala_ccode_function_call_add_argument (to_any, (ValaCCodeExpression*) (_tmp6_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cvar)));
		_vala_ccode_node_unref0 (_tmp6_);
		vala_ccode_function_call_add_argument (to_any, (ValaCCodeExpression*) (_tmp7_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp7_);
		vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) to_any);
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
		_vala_ccode_node_unref0 (to_any);
		_vala_ccode_node_unref0 (ccomma);
		_vala_ccode_node_unref0 (cvar);
		_vala_code_node_unref0 (temp_decl);
		return;
	} else {
		gboolean _tmp8_ = FALSE;
		if (vala_data_type_get_data_type (vala_expression_get_value_type (vala_cast_expression_get_inner (expr))) != NULL) {
			char* _tmp9_;
			_tmp8_ = _vala_strcmp0 (_tmp9_ = vala_symbol_get_full_name ((ValaSymbol*) vala_data_type_get_data_type (vala_expression_get_value_type (vala_cast_expression_get_inner (expr)))), "Dova.Value") == 0;
			_g_free0 (_tmp9_);
		} else {
			_tmp8_ = FALSE;
		}
		if (_tmp8_) {
			ValaLocalVariable* temp_decl;
			ValaCCodeExpression* cvar;
			ValaCCodeCommaExpression* ccomma;
			ValaCCodeIdentifier* _tmp10_;
			ValaCCodeFunctionCall* _tmp11_;
			ValaCCodeFunctionCall* sizeof_call;
			char* _tmp12_;
			ValaCCodeIdentifier* _tmp13_;
			ValaCCodeIdentifier* _tmp14_;
			ValaCCodeFunctionCall* _tmp15_;
			ValaCCodeFunctionCall* to_any;
			ValaCCodeExpression* _tmp16_;
			ValaCCodeUnaryExpression* _tmp17_;
			ValaCCodeConstant* _tmp18_;
			temp_decl = vala_dova_base_module_get_temp_variable (self, vala_cast_expression_get_type_reference (expr), TRUE, (ValaCodeNode*) expr);
			vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_decl);
			cvar = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
			ccomma = vala_ccode_comma_expression_new ();
			sizeof_call = (_tmp11_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp10_ = vala_ccode_identifier_new ("sizeof"))), _vala_ccode_node_unref0 (_tmp10_), _tmp11_);
			vala_ccode_function_call_add_argument (sizeof_call, (ValaCCodeExpression*) (_tmp13_ = vala_ccode_identifier_new (_tmp12_ = vala_data_type_get_cname (vala_cast_expression_get_type_reference (expr)))));
			_vala_ccode_node_unref0 (_tmp13_);
			_g_free0 (_tmp12_);
			to_any = (_tmp15_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp14_ = vala_ccode_identifier_new ("dova_type_value_from_any"))), _vala_ccode_node_unref0 (_tmp14_), _tmp15_);
			vala_ccode_function_call_add_argument (to_any, _tmp16_ = vala_dova_base_module_get_type_id_expression (self, vala_cast_expression_get_type_reference (expr), FALSE));
			_vala_ccode_node_unref0 (_tmp16_);
			vala_ccode_function_call_add_argument (to_any, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))));
			vala_ccode_function_call_add_argument (to_any, (ValaCCodeExpression*) (_tmp17_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, cvar)));
			_vala_ccode_node_unref0 (_tmp17_);
			vala_ccode_function_call_add_argument (to_any, (ValaCCodeExpression*) (_tmp18_ = vala_ccode_constant_new ("0")));
			_vala_ccode_node_unref0 (_tmp18_);
			vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) to_any);
			vala_ccode_comma_expression_append_expression (ccomma, cvar);
			vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
			_vala_ccode_node_unref0 (to_any);
			_vala_ccode_node_unref0 (sizeof_call);
			_vala_ccode_node_unref0 (ccomma);
			_vala_ccode_node_unref0 (cvar);
			_vala_code_node_unref0 (temp_decl);
			return;
		}
	}
	vala_dova_base_module_generate_type_declaration (self, vala_cast_expression_get_type_reference (expr), self->source_declarations);
	if (VALA_IS_GENERIC_TYPE (vala_expression_get_value_type (vala_cast_expression_get_inner (expr)))) {
		_tmp19_ = !VALA_IS_GENERIC_TYPE (vala_cast_expression_get_type_reference (expr));
	} else {
		_tmp19_ = FALSE;
	}
	if (_tmp19_) {
		char* _tmp20_;
		char* _tmp21_;
		ValaCCodeCastExpression* _tmp22_;
		ValaCCodeUnaryExpression* _tmp23_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp23_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_cast_expression_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), _tmp21_ = g_strconcat (_tmp20_ = vala_data_type_get_cname (vala_cast_expression_get_type_reference (expr)), "*", NULL))))));
		_vala_ccode_node_unref0 (_tmp23_);
		_vala_ccode_node_unref0 (_tmp22_);
		_g_free0 (_tmp21_);
		_g_free0 (_tmp20_);
	} else {
		char* _tmp24_;
		ValaCCodeCastExpression* _tmp25_;
		vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp25_ = vala_ccode_cast_expression_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_cast_expression_get_inner (expr))), _tmp24_ = vala_data_type_get_cname (vala_cast_expression_get_type_reference (expr)))));
		_vala_ccode_node_unref0 (_tmp25_);
		_g_free0 (_tmp24_);
	}
}


static void vala_dova_base_module_real_visit_pointer_indirection (ValaCodeVisitor* base, ValaPointerIndirection* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeUnaryExpression* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_pointer_indirection_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_addressof_expression (ValaCodeVisitor* base, ValaAddressofExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeUnaryExpression* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_addressof_expression_get_inner (expr))))));
	_vala_ccode_node_unref0 (_tmp0_);
}


static void vala_dova_base_module_real_visit_reference_transfer_expression (ValaCodeVisitor* base, ValaReferenceTransferExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeCommaExpression* ccomma;
	ValaLocalVariable* temp_decl;
	ValaCCodeExpression* cvar;
	ValaCCodeAssignment* _tmp0_;
	ValaCCodeConstant* _tmp1_;
	ValaCCodeAssignment* _tmp2_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	ccomma = vala_ccode_comma_expression_new ();
	temp_decl = vala_dova_base_module_get_temp_variable (self, vala_expression_get_value_type ((ValaExpression*) expr), TRUE, (ValaCodeNode*) expr);
	vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), temp_decl);
	cvar = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) temp_decl));
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp0_ = vala_ccode_assignment_new (cvar, VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_reference_transfer_expression_get_inner (expr))), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp0_);
	vala_ccode_comma_expression_append_expression (ccomma, (ValaCCodeExpression*) (_tmp2_ = vala_ccode_assignment_new (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_reference_transfer_expression_get_inner (expr))), (ValaCCodeExpression*) (_tmp1_ = vala_ccode_constant_new ("NULL")), VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)));
	_vala_ccode_node_unref0 (_tmp2_);
	_vala_ccode_node_unref0 (_tmp1_);
	vala_ccode_comma_expression_append_expression (ccomma, cvar);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) ccomma);
	_vala_ccode_node_unref0 (cvar);
	_vala_code_node_unref0 (temp_decl);
	_vala_ccode_node_unref0 (ccomma);
}


static void vala_dova_base_module_real_visit_binary_expression (ValaCodeVisitor* base, ValaBinaryExpression* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeExpression* cleft;
	ValaCCodeExpression* cright;
	ValaCCodeBinaryOperator op = 0;
	gboolean _tmp2_ = FALSE;
	ValaCCodeBinaryExpression* _tmp14_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	cleft = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_binary_expression_get_left (expr))));
	cright = _vala_ccode_node_ref0 (VALA_CCODE_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) vala_binary_expression_get_right (expr))));
	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_PLUS) {
		op = VALA_CCODE_BINARY_OPERATOR_PLUS;
	} else {
		if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MINUS) {
			op = VALA_CCODE_BINARY_OPERATOR_MINUS;
		} else {
			if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MUL) {
				op = VALA_CCODE_BINARY_OPERATOR_MUL;
			} else {
				if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_DIV) {
					op = VALA_CCODE_BINARY_OPERATOR_DIV;
				} else {
					if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_MOD) {
						op = VALA_CCODE_BINARY_OPERATOR_MOD;
					} else {
						if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_SHIFT_LEFT) {
							op = VALA_CCODE_BINARY_OPERATOR_SHIFT_LEFT;
						} else {
							if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_SHIFT_RIGHT) {
								op = VALA_CCODE_BINARY_OPERATOR_SHIFT_RIGHT;
							} else {
								if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN) {
									op = VALA_CCODE_BINARY_OPERATOR_LESS_THAN;
								} else {
									if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN) {
										op = VALA_CCODE_BINARY_OPERATOR_GREATER_THAN;
									} else {
										if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_LESS_THAN_OR_EQUAL) {
											op = VALA_CCODE_BINARY_OPERATOR_LESS_THAN_OR_EQUAL;
										} else {
											if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_GREATER_THAN_OR_EQUAL) {
												op = VALA_CCODE_BINARY_OPERATOR_GREATER_THAN_OR_EQUAL;
											} else {
												if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_EQUALITY) {
													op = VALA_CCODE_BINARY_OPERATOR_EQUALITY;
												} else {
													if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_INEQUALITY) {
														op = VALA_CCODE_BINARY_OPERATOR_INEQUALITY;
													} else {
														if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_AND) {
															op = VALA_CCODE_BINARY_OPERATOR_BITWISE_AND;
														} else {
															if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_OR) {
																op = VALA_CCODE_BINARY_OPERATOR_BITWISE_OR;
															} else {
																if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_BITWISE_XOR) {
																	op = VALA_CCODE_BINARY_OPERATOR_BITWISE_XOR;
																} else {
																	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_AND) {
																		op = VALA_CCODE_BINARY_OPERATOR_AND;
																	} else {
																		if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_OR) {
																			op = VALA_CCODE_BINARY_OPERATOR_OR;
																		} else {
																			if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_IN) {
																				ValaCCodeBinaryExpression* _tmp0_;
																				ValaCCodeBinaryExpression* _tmp1_;
																				vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp1_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_EQUALITY, (ValaCCodeExpression*) (_tmp0_ = vala_ccode_binary_expression_new (VALA_CCODE_BINARY_OPERATOR_BITWISE_AND, cright, cleft)), cleft)));
																				_vala_ccode_node_unref0 (_tmp1_);
																				_vala_ccode_node_unref0 (_tmp0_);
																				_vala_ccode_node_unref0 (cright);
																				_vala_ccode_node_unref0 (cleft);
																				return;
																			} else {
																				g_assert_not_reached ();
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	if (vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_EQUALITY) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = vala_binary_expression_get_operator (expr) == VALA_BINARY_OPERATOR_INEQUALITY;
	}
	if (_tmp2_) {
		ValaTypeSymbol* _tmp3_;
		ValaStruct* left_type_as_struct;
		ValaTypeSymbol* _tmp4_;
		ValaStruct* right_type_as_struct;
		gboolean _tmp5_ = FALSE;
		gboolean _tmp6_ = FALSE;
		gboolean _tmp7_ = FALSE;
		left_type_as_struct = _vala_code_node_ref0 ((_tmp3_ = vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_left (expr))), VALA_IS_STRUCT (_tmp3_) ? ((ValaStruct*) _tmp3_) : NULL));
		right_type_as_struct = _vala_code_node_ref0 ((_tmp4_ = vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_right (expr))), VALA_IS_STRUCT (_tmp4_) ? ((ValaStruct*) _tmp4_) : NULL));
		if (VALA_IS_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_left (expr))))) {
			_tmp7_ = !vala_class_get_is_compact (VALA_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_left (expr)))));
		} else {
			_tmp7_ = FALSE;
		}
		if (_tmp7_) {
			_tmp6_ = VALA_IS_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_right (expr))));
		} else {
			_tmp6_ = FALSE;
		}
		if (_tmp6_) {
			_tmp5_ = !vala_class_get_is_compact (VALA_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_right (expr)))));
		} else {
			_tmp5_ = FALSE;
		}
		if (_tmp5_) {
			ValaClass* left_cl;
			ValaClass* right_cl;
			left_cl = _vala_code_node_ref0 (VALA_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_left (expr)))));
			right_cl = _vala_code_node_ref0 (VALA_CLASS (vala_data_type_get_data_type (vala_expression_get_value_type (vala_binary_expression_get_right (expr)))));
			if (left_cl != right_cl) {
				if (vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) left_cl, (ValaTypeSymbol*) right_cl)) {
					ValaCCodeExpression* _tmp8_;
					cleft = (_tmp8_ = vala_dova_base_module_generate_instance_cast (self, cleft, (ValaTypeSymbol*) right_cl), _vala_ccode_node_unref0 (cleft), _tmp8_);
				} else {
					if (vala_typesymbol_is_subtype_of ((ValaTypeSymbol*) right_cl, (ValaTypeSymbol*) left_cl)) {
						ValaCCodeExpression* _tmp9_;
						cright = (_tmp9_ = vala_dova_base_module_generate_instance_cast (self, cright, (ValaTypeSymbol*) left_cl), _vala_ccode_node_unref0 (cright), _tmp9_);
					}
				}
			}
			_vala_code_node_unref0 (right_cl);
			_vala_code_node_unref0 (left_cl);
		} else {
			gboolean _tmp10_ = FALSE;
			if (left_type_as_struct != NULL) {
				_tmp10_ = right_type_as_struct != NULL;
			} else {
				_tmp10_ = FALSE;
			}
			if (_tmp10_) {
				gboolean _tmp11_ = FALSE;
				if (vala_data_type_get_nullable (vala_expression_get_value_type (vala_binary_expression_get_left (expr)))) {
					_tmp11_ = vala_data_type_get_nullable (vala_expression_get_value_type (vala_binary_expression_get_right (expr)));
				} else {
					_tmp11_ = FALSE;
				}
				if (_tmp11_) {
				} else {
					if (vala_data_type_get_nullable (vala_expression_get_value_type (vala_binary_expression_get_left (expr)))) {
						ValaCCodeExpression* _tmp12_;
						cleft = (_tmp12_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, cleft), _vala_ccode_node_unref0 (cleft), _tmp12_);
					} else {
						if (vala_data_type_get_nullable (vala_expression_get_value_type (vala_binary_expression_get_right (expr)))) {
							ValaCCodeExpression* _tmp13_;
							cright = (_tmp13_ = (ValaCCodeExpression*) vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, cright), _vala_ccode_node_unref0 (cright), _tmp13_);
						}
					}
				}
			}
		}
		_vala_code_node_unref0 (right_type_as_struct);
		_vala_code_node_unref0 (left_type_as_struct);
	}
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp14_ = vala_ccode_binary_expression_new (op, cleft, cright)));
	_vala_ccode_node_unref0 (_tmp14_);
	_vala_ccode_node_unref0 (cright);
	_vala_ccode_node_unref0 (cleft);
}


char* vala_dova_base_module_get_type_check_function (ValaDovaBaseModule* self, ValaTypeSymbol* type) {
	char* result = NULL;
	ValaTypeSymbol* _tmp0_;
	ValaClass* cl;
	gboolean _tmp1_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	cl = _vala_code_node_ref0 ((_tmp0_ = type, VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL));
	if (cl != NULL) {
		_tmp1_ = vala_class_get_type_check_function (cl) != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		result = g_strdup (vala_class_get_type_check_function (cl));
		_vala_code_node_unref0 (cl);
		return result;
	} else {
		gboolean _tmp2_ = FALSE;
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		gboolean _tmp5_ = FALSE;
		if (cl != NULL) {
			_tmp5_ = vala_class_get_is_compact (cl);
		} else {
			_tmp5_ = FALSE;
		}
		if (_tmp5_) {
			_tmp4_ = TRUE;
		} else {
			_tmp4_ = VALA_IS_STRUCT (type);
		}
		if (_tmp4_) {
			_tmp3_ = TRUE;
		} else {
			_tmp3_ = VALA_IS_ENUM (type);
		}
		if (_tmp3_) {
			_tmp2_ = TRUE;
		} else {
			_tmp2_ = VALA_IS_DELEGATE (type);
		}
		if (_tmp2_) {
			result = NULL;
			_vala_code_node_unref0 (cl);
			return result;
		} else {
			result = vala_typesymbol_get_upper_case_cname (type, "IS_");
			_vala_code_node_unref0 (cl);
			return result;
		}
	}
	_vala_code_node_unref0 (cl);
}


static ValaCCodeExpression* vala_dova_base_module_create_type_check (ValaDovaBaseModule* self, ValaCCodeNode* ccodenode, ValaDataType* type) {
	ValaCCodeExpression* result = NULL;
	char* type_check_func;
	ValaCCodeIdentifier* _tmp0_;
	ValaCCodeFunctionCall* _tmp1_;
	ValaCCodeFunctionCall* ccheck;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (ccodenode != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	type_check_func = vala_dova_base_module_get_type_check_function (self, vala_data_type_get_data_type (type));
	if (type_check_func == NULL) {
		result = (ValaCCodeExpression*) vala_ccode_invalid_expression_new ();
		_g_free0 (type_check_func);
		return result;
	}
	ccheck = (_tmp1_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp0_ = vala_ccode_identifier_new (type_check_func))), _vala_ccode_node_unref0 (_tmp0_), _tmp1_);
	vala_ccode_function_call_add_argument (ccheck, VALA_CCODE_EXPRESSION (ccodenode));
	result = (ValaCCodeExpression*) ccheck;
	_g_free0 (type_check_func);
	return result;
}


static void vala_dova_base_module_real_visit_type_check (ValaCodeVisitor* base, ValaTypeCheck* expr) {
	ValaDovaBaseModule * self;
	ValaCCodeExpression* _tmp0_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (expr != NULL);
	vala_dova_base_module_generate_type_declaration (self, vala_typecheck_get_type_reference (expr), self->source_declarations);
	vala_code_node_set_ccodenode ((ValaCodeNode*) expr, (ValaCCodeNode*) (_tmp0_ = vala_dova_base_module_create_type_check (self, vala_code_node_get_ccodenode ((ValaCodeNode*) vala_typecheck_get_expression (expr)), vala_typecheck_get_type_reference (expr))));
	_vala_ccode_node_unref0 (_tmp0_);
	if (VALA_IS_CCODE_INVALID_EXPRESSION (vala_code_node_get_ccodenode ((ValaCodeNode*) expr))) {
		vala_report_error (vala_code_node_get_source_reference ((ValaCodeNode*) expr), "type check expressions not supported for compact classes, structs, and" \
" enums");
	}
}


static void vala_dova_base_module_real_visit_lambda_expression (ValaCodeVisitor* base, ValaLambdaExpression* l) {
	ValaDovaBaseModule * self;
	ValaDelegateType* dt;
	char* _tmp0_;
	ValaCCodeIdentifier* _tmp1_;
	self = (ValaDovaBaseModule*) base;
	g_return_if_fail (l != NULL);
	dt = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (vala_expression_get_target_type ((ValaExpression*) l)));
	vala_method_set_cinstance_parameter_position (vala_lambda_expression_get_method (l), vala_delegate_get_cinstance_parameter_position (vala_delegate_type_get_delegate_symbol (dt)));
	vala_code_node_accept_children ((ValaCodeNode*) l, (ValaCodeVisitor*) self);
	vala_code_node_set_ccodenode ((ValaCodeNode*) l, (ValaCCodeNode*) (_tmp1_ = vala_ccode_identifier_new (_tmp0_ = vala_method_get_cname (vala_lambda_expression_get_method (l)))));
	_vala_ccode_node_unref0 (_tmp1_);
	_g_free0 (_tmp0_);
	_vala_code_node_unref0 (dt);
}


ValaCCodeExpression* vala_dova_base_module_transform_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* cexpr;
	gboolean _tmp0_ = FALSE;
	ValaCCodeExpression* _tmp6_;
	gboolean _tmp7_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (source_cexpr != NULL, NULL);
	cexpr = _vala_ccode_node_ref0 (source_cexpr);
	if (expression_type == NULL) {
		result = cexpr;
		return result;
	}
	if (vala_data_type_get_value_owned (expression_type)) {
		gboolean _tmp1_ = FALSE;
		if (target_type == NULL) {
			_tmp1_ = TRUE;
		} else {
			_tmp1_ = !vala_data_type_get_value_owned (target_type);
		}
		_tmp0_ = _tmp1_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		ValaDataType* _tmp2_;
		ValaPointerType* pointer_type;
		gboolean _tmp3_ = FALSE;
		pointer_type = _vala_code_node_ref0 ((_tmp2_ = target_type, VALA_IS_POINTER_TYPE (_tmp2_) ? ((ValaPointerType*) _tmp2_) : NULL));
		if (pointer_type != NULL) {
			_tmp3_ = !VALA_IS_VOID_TYPE (vala_pointer_type_get_base_type (pointer_type));
		} else {
			_tmp3_ = FALSE;
		}
		if (_tmp3_) {
		} else {
			if (vala_dova_base_module_requires_destroy (self, expression_type)) {
				ValaLocalVariable* decl;
				ValaCCodeExpression* _tmp4_;
				ValaCCodeExpression* _tmp5_;
				decl = vala_dova_base_module_get_temp_variable (self, expression_type, TRUE, (ValaCodeNode*) expression_type);
				vala_collection_add ((ValaCollection*) vala_dova_base_module_get_temp_vars (self), decl);
				vala_list_insert ((ValaList*) vala_dova_base_module_get_temp_ref_vars (self), 0, decl);
				cexpr = (_tmp5_ = (ValaCCodeExpression*) vala_ccode_assignment_new (_tmp4_ = vala_dova_base_module_get_variable_cexpression (self, vala_symbol_get_name ((ValaSymbol*) decl)), cexpr, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE), _vala_ccode_node_unref0 (cexpr), _tmp5_);
				_vala_ccode_node_unref0 (_tmp4_);
				_vala_code_node_unref0 (decl);
			}
		}
		_vala_code_node_unref0 (pointer_type);
	}
	if (target_type == NULL) {
		result = cexpr;
		return result;
	}
	cexpr = (_tmp6_ = vala_dova_base_module_get_implicit_cast_expression (self, cexpr, expression_type, target_type, expr), _vala_ccode_node_unref0 (cexpr), _tmp6_);
	if (vala_data_type_get_value_owned (target_type)) {
		_tmp7_ = !vala_data_type_get_value_owned (expression_type);
	} else {
		_tmp7_ = FALSE;
	}
	if (_tmp7_) {
		gboolean _tmp8_ = FALSE;
		if (vala_dova_base_module_requires_copy (self, target_type)) {
			_tmp8_ = !VALA_IS_NULL_TYPE (expression_type);
		} else {
			_tmp8_ = FALSE;
		}
		if (_tmp8_) {
			ValaCodeNode* node;
			ValaCCodeExpression* _tmp10_;
			node = _vala_code_node_ref0 ((ValaCodeNode*) expr);
			if (node == NULL) {
				ValaCodeNode* _tmp9_;
				node = (_tmp9_ = _vala_code_node_ref0 ((ValaCodeNode*) expression_type), _vala_code_node_unref0 (node), _tmp9_);
			}
			cexpr = (_tmp10_ = vala_dova_base_module_get_ref_cexpression (self, target_type, cexpr, expr, node), _vala_ccode_node_unref0 (cexpr), _tmp10_);
			_vala_code_node_unref0 (node);
		}
	}
	result = cexpr;
	return result;
}


static ValaCCodeExpression* vala_dova_base_module_real_get_implicit_cast_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	ValaCCodeExpression* result = NULL;
	ValaCCodeExpression* cexpr;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	ValaTypeSymbol* _tmp55_;
	ValaClass* cl;
	ValaTypeSymbol* _tmp56_;
	ValaInterface* iface;
	gboolean _tmp57_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (source_cexpr != NULL, NULL);
	cexpr = _vala_ccode_node_ref0 (source_cexpr);
	if (vala_data_type_get_data_type (expression_type) != NULL) {
		_tmp0_ = vala_data_type_get_data_type (expression_type) == vala_data_type_get_data_type (target_type);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = cexpr;
		return result;
	}
	if (VALA_IS_NULL_TYPE (expression_type)) {
		result = cexpr;
		return result;
	}
	vala_dova_base_module_generate_type_declaration (self, target_type, self->source_declarations);
	if (VALA_IS_DELEGATE_TYPE (target_type)) {
		_tmp1_ = VALA_IS_METHOD_TYPE (expression_type);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		ValaDelegateType* deleg_type;
		ValaMethodType* method_type;
		ValaCCodeExpression* delegate_target;
		ValaDelegate* d;
		char* wrapper_name;
		ValaCCodeFunction* wrapper;
		ValaCCodeFunctionCall* call;
		ValaList* _tmp12_;
		ValaIterator* _tmp13_;
		ValaIterator* method_param_iter;
		ValaCCodeBlock* _tmp26_;
		char* _tmp50_;
		char* _tmp51_;
		ValaCCodeIdentifier* _tmp52_;
		ValaCCodeFunctionCall* _tmp53_;
		ValaCCodeFunctionCall* ccall;
		ValaCCodeIdentifier* _tmp54_;
		deleg_type = _vala_code_node_ref0 (VALA_DELEGATE_TYPE (target_type));
		method_type = _vala_code_node_ref0 (VALA_METHOD_TYPE (expression_type));
		delegate_target = NULL;
		if (VALA_IS_LAMBDA_EXPRESSION (expr)) {
			ValaLambdaExpression* lambda;
			lambda = _vala_code_node_ref0 (VALA_LAMBDA_EXPRESSION (expr));
			if (vala_method_get_closure (vala_lambda_expression_get_method (lambda))) {
				gint block_id;
				char* _tmp2_;
				ValaCCodeExpression* _tmp3_;
				block_id = vala_dova_base_module_get_block_id (self, vala_dova_base_module_get_current_closure_block (self));
				delegate_target = (_tmp3_ = vala_dova_base_module_get_variable_cexpression (self, _tmp2_ = g_strdup_printf ("_data%d_", block_id)), _vala_ccode_node_unref0 (delegate_target), _tmp3_);
				_g_free0 (_tmp2_);
			} else {
				ValaDataType* _tmp4_;
				gboolean _tmp5_;
				if ((_tmp5_ = (_tmp4_ = vala_dova_base_module_get_this_type (self)) != NULL, _vala_code_node_unref0 (_tmp4_), _tmp5_)) {
					ValaCCodeExpression* _tmp6_;
					delegate_target = (_tmp6_ = (ValaCCodeExpression*) vala_ccode_identifier_new ("this"), _vala_ccode_node_unref0 (delegate_target), _tmp6_);
				} else {
					ValaCCodeExpression* _tmp7_;
					delegate_target = (_tmp7_ = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL"), _vala_ccode_node_unref0 (delegate_target), _tmp7_);
				}
			}
			_vala_code_node_unref0 (lambda);
		} else {
			if (vala_method_get_binding (vala_method_type_get_method_symbol (method_type)) == MEMBER_BINDING_INSTANCE) {
				ValaMemberAccess* ma;
				ValaCCodeExpression* _tmp8_;
				ma = _vala_code_node_ref0 (VALA_MEMBER_ACCESS (expr));
				delegate_target = (_tmp8_ = VALA_CCODE_EXPRESSION (vala_dova_base_module_get_ccodenode (self, (ValaCodeNode*) vala_member_access_get_inner (ma))), _vala_ccode_node_unref0 (delegate_target), _tmp8_);
				_vala_code_node_unref0 (ma);
			} else {
				ValaCCodeExpression* _tmp9_;
				delegate_target = (_tmp9_ = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL"), _vala_ccode_node_unref0 (delegate_target), _tmp9_);
			}
		}
		d = _vala_code_node_ref0 (vala_delegate_type_get_delegate_symbol (deleg_type));
		wrapper_name = g_strdup_printf ("_wrapper%d_", self->next_wrapper_id++);
		wrapper = vala_ccode_function_new (wrapper_name, "void");
		vala_ccode_function_set_modifiers (wrapper, VALA_CCODE_MODIFIERS_STATIC);
		call = vala_ccode_function_call_new (source_cexpr);
		if (vala_method_get_binding (vala_method_type_get_method_symbol (method_type)) == MEMBER_BINDING_INSTANCE) {
			ValaCCodeFormalParameter* _tmp10_;
			ValaCCodeIdentifier* _tmp11_;
			vala_ccode_function_add_parameter (wrapper, _tmp10_ = vala_ccode_formal_parameter_new ("this", "void *"));
			_vala_ccode_node_unref0 (_tmp10_);
			vala_ccode_function_call_add_argument (call, (ValaCCodeExpression*) (_tmp11_ = vala_ccode_identifier_new ("this")));
			_vala_ccode_node_unref0 (_tmp11_);
		}
		method_param_iter = (_tmp13_ = vala_iterable_iterator ((ValaIterable*) (_tmp12_ = vala_method_get_parameters (vala_method_type_get_method_symbol (method_type)))), _vala_collection_object_unref0 (_tmp12_), _tmp13_);
		{
			ValaList* _tmp14_;
			ValaIterator* _tmp15_;
			ValaIterator* _param_it;
			_param_it = (_tmp15_ = vala_iterable_iterator ((ValaIterable*) (_tmp14_ = vala_delegate_get_parameters (d))), _vala_collection_object_unref0 (_tmp14_), _tmp15_);
			while (TRUE) {
				ValaFormalParameter* param;
				ValaFormalParameter* method_param;
				char* ctype;
				gboolean _tmp16_ = FALSE;
				ValaCCodeFormalParameter* _tmp25_;
				if (!vala_iterator_next (_param_it)) {
					break;
				}
				param = (ValaFormalParameter*) vala_iterator_get (_param_it);
				vala_iterator_next (method_param_iter);
				method_param = (ValaFormalParameter*) vala_iterator_get (method_param_iter);
				ctype = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) param));
				if (VALA_IS_GENERIC_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
					_tmp16_ = !VALA_IS_GENERIC_TYPE (vala_variable_get_variable_type ((ValaVariable*) method_param));
				} else {
					_tmp16_ = FALSE;
				}
				if (_tmp16_) {
					char* _tmp17_;
					char* _tmp18_;
					ValaCCodeIdentifier* _tmp19_;
					ValaCCodeUnaryExpression* _tmp20_;
					ctype = (_tmp18_ = g_strconcat (_tmp17_ = vala_data_type_get_cname (vala_variable_get_variable_type ((ValaVariable*) method_param)), "*", NULL), _g_free0 (ctype), _tmp18_);
					_g_free0 (_tmp17_);
					vala_ccode_function_call_add_argument (call, (ValaCCodeExpression*) (_tmp20_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp19_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) param))))));
					_vala_ccode_node_unref0 (_tmp20_);
					_vala_ccode_node_unref0 (_tmp19_);
				} else {
					gboolean _tmp21_ = FALSE;
					if (!VALA_IS_GENERIC_TYPE (vala_variable_get_variable_type ((ValaVariable*) param))) {
						_tmp21_ = VALA_IS_GENERIC_TYPE (vala_variable_get_variable_type ((ValaVariable*) method_param));
					} else {
						_tmp21_ = FALSE;
					}
					if (_tmp21_) {
						ValaCCodeIdentifier* _tmp22_;
						ValaCCodeUnaryExpression* _tmp23_;
						vala_ccode_function_call_add_argument (call, (ValaCCodeExpression*) (_tmp23_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp22_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) param))))));
						_vala_ccode_node_unref0 (_tmp23_);
						_vala_ccode_node_unref0 (_tmp22_);
					} else {
						ValaCCodeIdentifier* _tmp24_;
						vala_ccode_function_call_add_argument (call, (ValaCCodeExpression*) (_tmp24_ = vala_ccode_identifier_new (vala_symbol_get_name ((ValaSymbol*) param))));
						_vala_ccode_node_unref0 (_tmp24_);
					}
				}
				vala_ccode_function_add_parameter (wrapper, _tmp25_ = vala_ccode_formal_parameter_new (vala_symbol_get_name ((ValaSymbol*) param), ctype));
				_vala_ccode_node_unref0 (_tmp25_);
				_g_free0 (ctype);
				_vala_code_node_unref0 (method_param);
				_vala_code_node_unref0 (param);
			}
			_vala_collection_object_unref0 (_param_it);
		}
		vala_ccode_function_set_block (wrapper, _tmp26_ = vala_ccode_block_new ());
		_vala_ccode_node_unref0 (_tmp26_);
		if (VALA_IS_VOID_TYPE (vala_delegate_get_return_type (d))) {
			ValaCCodeExpressionStatement* _tmp27_;
			vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp27_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) call)));
			_vala_ccode_node_unref0 (_tmp27_);
		} else {
			ValaDataType* method_return_type;
			gboolean _tmp28_ = FALSE;
			method_return_type = _vala_code_node_ref0 (vala_method_get_return_type (vala_method_type_get_method_symbol (method_type)));
			if (VALA_IS_GENERIC_TYPE (vala_delegate_get_return_type (d))) {
				_tmp28_ = !VALA_IS_GENERIC_TYPE (method_return_type);
			} else {
				_tmp28_ = FALSE;
			}
			if (_tmp28_) {
				char* _tmp29_;
				char* _tmp30_;
				ValaCCodeFormalParameter* _tmp31_;
				ValaCCodeIdentifier* _tmp32_;
				ValaCCodeUnaryExpression* _tmp33_;
				ValaCCodeAssignment* _tmp34_;
				ValaCCodeExpressionStatement* _tmp35_;
				vala_ccode_function_add_parameter (wrapper, _tmp31_ = vala_ccode_formal_parameter_new ("result", _tmp30_ = g_strconcat (_tmp29_ = vala_data_type_get_cname (method_return_type), "*", NULL)));
				_vala_ccode_node_unref0 (_tmp31_);
				_g_free0 (_tmp30_);
				_g_free0 (_tmp29_);
				vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp35_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) (_tmp34_ = vala_ccode_assignment_new ((ValaCCodeExpression*) (_tmp33_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_POINTER_INDIRECTION, (ValaCCodeExpression*) (_tmp32_ = vala_ccode_identifier_new ("result")))), (ValaCCodeExpression*) call, VALA_CCODE_ASSIGNMENT_OPERATOR_SIMPLE)))));
				_vala_ccode_node_unref0 (_tmp35_);
				_vala_ccode_node_unref0 (_tmp34_);
				_vala_ccode_node_unref0 (_tmp33_);
				_vala_ccode_node_unref0 (_tmp32_);
			} else {
				gboolean _tmp36_ = FALSE;
				if (!VALA_IS_GENERIC_TYPE (vala_delegate_get_return_type (d))) {
					_tmp36_ = VALA_IS_GENERIC_TYPE (method_return_type);
				} else {
					_tmp36_ = FALSE;
				}
				if (_tmp36_) {
					char* _tmp37_;
					char* _tmp38_;
					ValaCCodeDeclaration* _tmp39_;
					ValaCCodeDeclaration* _cdecl_;
					ValaCCodeVariableDeclarator* _tmp40_;
					ValaCCodeIdentifier* _tmp41_;
					ValaCCodeUnaryExpression* _tmp42_;
					ValaCCodeExpressionStatement* _tmp43_;
					ValaCCodeIdentifier* _tmp44_;
					ValaCCodeReturnStatement* _tmp45_;
					vala_ccode_function_set_return_type (wrapper, _tmp37_ = vala_data_type_get_cname (vala_delegate_get_return_type (d)));
					_g_free0 (_tmp37_);
					_cdecl_ = (_tmp39_ = vala_ccode_declaration_new (_tmp38_ = vala_data_type_get_cname (vala_delegate_get_return_type (d))), _g_free0 (_tmp38_), _tmp39_);
					vala_ccode_declaration_add_declarator (_cdecl_, (ValaCCodeDeclarator*) (_tmp40_ = vala_ccode_variable_declarator_new ("result", NULL, NULL)));
					_vala_ccode_node_unref0 (_tmp40_);
					vala_ccode_function_call_add_argument (call, (ValaCCodeExpression*) (_tmp42_ = vala_ccode_unary_expression_new (VALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, (ValaCCodeExpression*) (_tmp41_ = vala_ccode_identifier_new ("result")))));
					_vala_ccode_node_unref0 (_tmp42_);
					_vala_ccode_node_unref0 (_tmp41_);
					vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp43_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) call)));
					_vala_ccode_node_unref0 (_tmp43_);
					vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp45_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) (_tmp44_ = vala_ccode_identifier_new ("result")))));
					_vala_ccode_node_unref0 (_tmp45_);
					_vala_ccode_node_unref0 (_tmp44_);
					_vala_ccode_node_unref0 (_cdecl_);
				} else {
					if (VALA_IS_GENERIC_TYPE (vala_delegate_get_return_type (d))) {
						ValaCCodeFormalParameter* _tmp46_;
						ValaCCodeExpressionStatement* _tmp47_;
						vala_ccode_function_add_parameter (wrapper, _tmp46_ = vala_ccode_formal_parameter_new ("result", "void *"));
						_vala_ccode_node_unref0 (_tmp46_);
						vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp47_ = vala_ccode_expression_statement_new ((ValaCCodeExpression*) call)));
						_vala_ccode_node_unref0 (_tmp47_);
					} else {
						char* _tmp48_;
						ValaCCodeReturnStatement* _tmp49_;
						vala_ccode_function_set_return_type (wrapper, _tmp48_ = vala_data_type_get_cname (vala_delegate_get_return_type (d)));
						_g_free0 (_tmp48_);
						vala_ccode_block_add_statement (vala_ccode_function_get_block (wrapper), (ValaCCodeNode*) (_tmp49_ = vala_ccode_return_statement_new ((ValaCCodeExpression*) call)));
						_vala_ccode_node_unref0 (_tmp49_);
					}
				}
			}
			_vala_code_node_unref0 (method_return_type);
		}
		vala_ccode_fragment_append (self->source_type_member_definition, (ValaCCodeNode*) wrapper);
		ccall = (_tmp53_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp52_ = vala_ccode_identifier_new (_tmp51_ = g_strdup_printf ("%s_new", _tmp50_ = vala_symbol_get_lower_case_cname ((ValaSymbol*) vala_delegate_type_get_delegate_symbol (deleg_type), NULL))))), _vala_ccode_node_unref0 (_tmp52_), _g_free0 (_tmp51_), _g_free0 (_tmp50_), _tmp53_);
		vala_ccode_function_call_add_argument (ccall, delegate_target);
		vala_ccode_function_call_add_argument (ccall, (ValaCCodeExpression*) (_tmp54_ = vala_ccode_identifier_new (wrapper_name)));
		_vala_ccode_node_unref0 (_tmp54_);
		result = (ValaCCodeExpression*) ccall;
		_vala_collection_object_unref0 (method_param_iter);
		_vala_ccode_node_unref0 (call);
		_vala_ccode_node_unref0 (wrapper);
		_g_free0 (wrapper_name);
		_vala_code_node_unref0 (d);
		_vala_ccode_node_unref0 (delegate_target);
		_vala_code_node_unref0 (method_type);
		_vala_code_node_unref0 (deleg_type);
		_vala_ccode_node_unref0 (cexpr);
		return result;
	}
	cl = _vala_code_node_ref0 ((_tmp55_ = vala_data_type_get_data_type (target_type), VALA_IS_CLASS (_tmp55_) ? ((ValaClass*) _tmp55_) : NULL));
	iface = _vala_code_node_ref0 ((_tmp56_ = vala_data_type_get_data_type (target_type), VALA_IS_INTERFACE (_tmp56_) ? ((ValaInterface*) _tmp56_) : NULL));
	if (vala_code_context_get_checking (self->priv->_context)) {
		gboolean _tmp58_ = FALSE;
		if (iface != NULL) {
			_tmp58_ = TRUE;
		} else {
			gboolean _tmp59_ = FALSE;
			if (cl != NULL) {
				_tmp59_ = !vala_class_get_is_compact (cl);
			} else {
				_tmp59_ = FALSE;
			}
			_tmp58_ = _tmp59_;
		}
		_tmp57_ = _tmp58_;
	} else {
		_tmp57_ = FALSE;
	}
	if (_tmp57_) {
		result = vala_dova_base_module_generate_instance_cast (self, cexpr, vala_data_type_get_data_type (target_type));
		_vala_code_node_unref0 (iface);
		_vala_code_node_unref0 (cl);
		_vala_ccode_node_unref0 (cexpr);
		return result;
	} else {
		gboolean _tmp60_ = FALSE;
		if (vala_data_type_get_data_type (target_type) != NULL) {
			char* _tmp61_;
			char* _tmp62_;
			_tmp60_ = _vala_strcmp0 (_tmp61_ = vala_data_type_get_cname (expression_type), _tmp62_ = vala_data_type_get_cname (target_type)) != 0;
			_g_free0 (_tmp62_);
			_g_free0 (_tmp61_);
		} else {
			_tmp60_ = FALSE;
		}
		if (_tmp60_) {
			ValaTypeSymbol* _tmp63_;
			ValaStruct* st;
			gboolean _tmp64_ = FALSE;
			st = _vala_code_node_ref0 ((_tmp63_ = vala_data_type_get_data_type (target_type), VALA_IS_STRUCT (_tmp63_) ? ((ValaStruct*) _tmp63_) : NULL));
			if (vala_typesymbol_is_reference_type (vala_data_type_get_data_type (target_type))) {
				_tmp64_ = TRUE;
			} else {
				gboolean _tmp65_ = FALSE;
				if (st != NULL) {
					_tmp65_ = vala_struct_is_simple_type (st);
				} else {
					_tmp65_ = FALSE;
				}
				_tmp64_ = _tmp65_;
			}
			if (_tmp64_) {
				char* _tmp66_;
				ValaCCodeExpression* _tmp67_;
				result = (_tmp67_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (cexpr, _tmp66_ = vala_data_type_get_cname (target_type)), _g_free0 (_tmp66_), _tmp67_);
				_vala_code_node_unref0 (st);
				_vala_code_node_unref0 (iface);
				_vala_code_node_unref0 (cl);
				_vala_ccode_node_unref0 (cexpr);
				return result;
			} else {
				result = cexpr;
				_vala_code_node_unref0 (st);
				_vala_code_node_unref0 (iface);
				_vala_code_node_unref0 (cl);
				return result;
			}
			_vala_code_node_unref0 (st);
		} else {
			result = cexpr;
			_vala_code_node_unref0 (iface);
			_vala_code_node_unref0 (cl);
			return result;
		}
	}
	_vala_code_node_unref0 (iface);
	_vala_code_node_unref0 (cl);
	_vala_ccode_node_unref0 (cexpr);
}


ValaCCodeExpression* vala_dova_base_module_get_implicit_cast_expression (ValaDovaBaseModule* self, ValaCCodeExpression* source_cexpr, ValaDataType* expression_type, ValaDataType* target_type, ValaExpression* expr) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->get_implicit_cast_expression (self, source_cexpr, expression_type, target_type, expr);
}


ValaCCodeFunctionCall* vala_dova_base_module_get_property_set_call (ValaDovaBaseModule* self, ValaProperty* prop, ValaMemberAccess* ma, ValaCCodeExpression* cexpr, ValaExpression* rhs) {
	ValaCCodeFunctionCall* result = NULL;
	char* set_func;
	ValaProperty* base_property;
	char* _tmp2_;
	ValaCCodeIdentifier* _tmp3_;
	ValaCCodeFunctionCall* _tmp4_;
	ValaCCodeFunctionCall* ccall;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (prop != NULL, NULL);
	g_return_val_if_fail (ma != NULL, NULL);
	g_return_val_if_fail (cexpr != NULL, NULL);
	set_func = NULL;
	base_property = _vala_code_node_ref0 (prop);
	if (vala_property_get_base_property (prop) != NULL) {
		ValaProperty* _tmp0_;
		base_property = (_tmp0_ = _vala_code_node_ref0 (vala_property_get_base_property (prop)), _vala_code_node_unref0 (base_property), _tmp0_);
	} else {
		if (vala_property_get_base_interface_property (prop) != NULL) {
			ValaProperty* _tmp1_;
			base_property = (_tmp1_ = _vala_code_node_ref0 (vala_property_get_base_interface_property (prop)), _vala_code_node_unref0 (base_property), _tmp1_);
		}
	}
	vala_dova_base_module_generate_property_accessor_declaration (self, vala_property_get_set_accessor (base_property), self->source_declarations);
	set_func = (_tmp2_ = vala_property_accessor_get_cname (vala_property_get_set_accessor (base_property)), _g_free0 (set_func), _tmp2_);
	ccall = (_tmp4_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp3_ = vala_ccode_identifier_new (set_func))), _vala_ccode_node_unref0 (_tmp3_), _tmp4_);
	if (vala_property_get_binding (prop) == MEMBER_BINDING_INSTANCE) {
		ValaCCodeExpression* _tmp5_;
		vala_ccode_function_call_add_argument (ccall, _tmp5_ = VALA_CCODE_EXPRESSION (vala_dova_base_module_get_ccodenode (self, (ValaCodeNode*) vala_member_access_get_inner (ma))));
		_vala_ccode_node_unref0 (_tmp5_);
	}
	vala_ccode_function_call_add_argument (ccall, cexpr);
	result = ccall;
	_vala_code_node_unref0 (base_property);
	_g_free0 (set_func);
	return result;
}


gboolean vala_dova_base_module_add_generated_external_symbol (ValaDovaBaseModule* self, ValaSymbol* external_symbol) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (external_symbol != NULL, FALSE);
	result = vala_collection_add ((ValaCollection*) self->priv->generated_external_symbols, external_symbol);
	return result;
}


ValaDataType* vala_dova_base_module_get_data_type_for_symbol (ValaTypeSymbol* sym) {
	ValaDataType* result = NULL;
	ValaDataType* type;
	g_return_val_if_fail (sym != NULL, NULL);
	type = NULL;
	if (VALA_IS_CLASS (sym)) {
		ValaDataType* _tmp0_;
		type = (_tmp0_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_CLASS (sym)), _vala_code_node_unref0 (type), _tmp0_);
	} else {
		if (VALA_IS_INTERFACE (sym)) {
			ValaDataType* _tmp1_;
			type = (_tmp1_ = (ValaDataType*) vala_object_type_new ((ValaObjectTypeSymbol*) VALA_INTERFACE (sym)), _vala_code_node_unref0 (type), _tmp1_);
		} else {
			if (VALA_IS_STRUCT (sym)) {
				ValaStruct* st;
				st = _vala_code_node_ref0 (VALA_STRUCT (sym));
				if (vala_struct_is_boolean_type (st)) {
					ValaDataType* _tmp2_;
					type = (_tmp2_ = (ValaDataType*) vala_boolean_type_new (st), _vala_code_node_unref0 (type), _tmp2_);
				} else {
					if (vala_struct_is_integer_type (st)) {
						ValaDataType* _tmp3_;
						type = (_tmp3_ = (ValaDataType*) vala_integer_type_new (st, NULL, NULL), _vala_code_node_unref0 (type), _tmp3_);
					} else {
						if (vala_struct_is_floating_type (st)) {
							ValaDataType* _tmp4_;
							type = (_tmp4_ = (ValaDataType*) vala_floating_type_new (st), _vala_code_node_unref0 (type), _tmp4_);
						} else {
							ValaDataType* _tmp5_;
							type = (_tmp5_ = (ValaDataType*) vala_struct_value_type_new (st), _vala_code_node_unref0 (type), _tmp5_);
						}
					}
				}
				_vala_code_node_unref0 (st);
			} else {
				if (VALA_IS_ENUM (sym)) {
					ValaDataType* _tmp6_;
					type = (_tmp6_ = (ValaDataType*) vala_enum_value_type_new (VALA_ENUM (sym)), _vala_code_node_unref0 (type), _tmp6_);
				} else {
					char* _tmp7_;
					char* _tmp8_;
					vala_report_error (NULL, _tmp8_ = g_strdup_printf ("internal error: `%s' is not a supported type", _tmp7_ = vala_symbol_get_full_name ((ValaSymbol*) sym)));
					_g_free0 (_tmp8_);
					_g_free0 (_tmp7_);
					result = (ValaDataType*) vala_invalid_type_new ();
					_vala_code_node_unref0 (type);
					return result;
				}
			}
		}
	}
	result = type;
	return result;
}


ValaCCodeExpression* vala_dova_base_module_default_value_for_type (ValaDovaBaseModule* self, ValaDataType* type, gboolean initializer_expression) {
	ValaCCodeExpression* result = NULL;
	ValaTypeSymbol* _tmp0_;
	ValaStruct* st;
	ValaDataType* _tmp1_;
	ValaArrayType* array_type;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	st = _vala_code_node_ref0 ((_tmp0_ = vala_data_type_get_data_type (type), VALA_IS_STRUCT (_tmp0_) ? ((ValaStruct*) _tmp0_) : NULL));
	array_type = _vala_code_node_ref0 ((_tmp1_ = type, VALA_IS_ARRAY_TYPE (_tmp1_) ? ((ValaArrayType*) _tmp1_) : NULL));
	if (VALA_IS_GENERIC_TYPE (type)) {
		ValaCCodeIdentifier* _tmp2_;
		ValaCCodeFunctionCall* _tmp3_;
		ValaCCodeFunctionCall* value_size;
		ValaCCodeExpression* _tmp4_;
		ValaCCodeIdentifier* _tmp5_;
		ValaCCodeFunctionCall* _tmp6_;
		ValaCCodeFunctionCall* alloca_call;
		ValaCCodeIdentifier* _tmp7_;
		ValaCCodeFunctionCall* _tmp8_;
		ValaCCodeFunctionCall* memset_call;
		ValaCCodeConstant* _tmp9_;
		value_size = (_tmp3_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp2_ = vala_ccode_identifier_new ("dova_type_get_value_size"))), _vala_ccode_node_unref0 (_tmp2_), _tmp3_);
		vala_ccode_function_call_add_argument (value_size, _tmp4_ = vala_dova_base_module_get_type_id_expression (self, type, FALSE));
		_vala_ccode_node_unref0 (_tmp4_);
		alloca_call = (_tmp6_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp5_ = vala_ccode_identifier_new ("alloca"))), _vala_ccode_node_unref0 (_tmp5_), _tmp6_);
		vala_ccode_function_call_add_argument (alloca_call, (ValaCCodeExpression*) value_size);
		memset_call = (_tmp8_ = vala_ccode_function_call_new ((ValaCCodeExpression*) (_tmp7_ = vala_ccode_identifier_new ("memset"))), _vala_ccode_node_unref0 (_tmp7_), _tmp8_);
		vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) alloca_call);
		vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) (_tmp9_ = vala_ccode_constant_new ("0")));
		_vala_ccode_node_unref0 (_tmp9_);
		vala_ccode_function_call_add_argument (memset_call, (ValaCCodeExpression*) value_size);
		result = (ValaCCodeExpression*) memset_call;
		_vala_ccode_node_unref0 (alloca_call);
		_vala_ccode_node_unref0 (value_size);
		_vala_code_node_unref0 (array_type);
		_vala_code_node_unref0 (st);
		return result;
	} else {
		gboolean _tmp10_ = FALSE;
		gboolean _tmp11_ = FALSE;
		if (initializer_expression) {
			_tmp11_ = !vala_data_type_get_nullable (type);
		} else {
			_tmp11_ = FALSE;
		}
		if (_tmp11_) {
			gboolean _tmp12_ = FALSE;
			gboolean _tmp13_ = FALSE;
			if (st != NULL) {
				ValaList* _tmp14_;
				_tmp13_ = vala_collection_get_size ((ValaCollection*) (_tmp14_ = vala_struct_get_fields (st))) > 0;
				_vala_collection_object_unref0 (_tmp14_);
			} else {
				_tmp13_ = FALSE;
			}
			if (_tmp13_) {
				_tmp12_ = TRUE;
			} else {
				gboolean _tmp15_ = FALSE;
				if (array_type != NULL) {
					_tmp15_ = vala_array_type_get_fixed_length (array_type);
				} else {
					_tmp15_ = FALSE;
				}
				_tmp12_ = _tmp15_;
			}
			_tmp10_ = _tmp12_;
		} else {
			_tmp10_ = FALSE;
		}
		if (_tmp10_) {
			ValaCCodeInitializerList* clist;
			ValaCCodeConstant* _tmp16_;
			clist = vala_ccode_initializer_list_new ();
			vala_ccode_initializer_list_append (clist, (ValaCCodeExpression*) (_tmp16_ = vala_ccode_constant_new ("0")));
			_vala_ccode_node_unref0 (_tmp16_);
			result = (ValaCCodeExpression*) clist;
			_vala_code_node_unref0 (array_type);
			_vala_code_node_unref0 (st);
			return result;
		} else {
			gboolean _tmp17_ = FALSE;
			gboolean _tmp18_ = FALSE;
			gboolean _tmp19_ = FALSE;
			gboolean _tmp20_ = FALSE;
			gboolean _tmp21_ = FALSE;
			if (vala_data_type_get_data_type (type) != NULL) {
				_tmp21_ = vala_typesymbol_is_reference_type (vala_data_type_get_data_type (type));
			} else {
				_tmp21_ = FALSE;
			}
			if (_tmp21_) {
				_tmp20_ = TRUE;
			} else {
				_tmp20_ = vala_data_type_get_nullable (type);
			}
			if (_tmp20_) {
				_tmp19_ = TRUE;
			} else {
				_tmp19_ = VALA_IS_POINTER_TYPE (type);
			}
			if (_tmp19_) {
				_tmp18_ = TRUE;
			} else {
				_tmp18_ = VALA_IS_DELEGATE_TYPE (type);
			}
			if (_tmp18_) {
				_tmp17_ = TRUE;
			} else {
				gboolean _tmp22_ = FALSE;
				if (array_type != NULL) {
					_tmp22_ = !vala_array_type_get_fixed_length (array_type);
				} else {
					_tmp22_ = FALSE;
				}
				_tmp17_ = _tmp22_;
			}
			if (_tmp17_) {
				result = (ValaCCodeExpression*) vala_ccode_constant_new ("NULL");
				_vala_code_node_unref0 (array_type);
				_vala_code_node_unref0 (st);
				return result;
			} else {
				gboolean _tmp23_ = FALSE;
				if (vala_data_type_get_data_type (type) != NULL) {
					char* _tmp24_;
					_tmp23_ = (_tmp24_ = vala_typesymbol_get_default_value (vala_data_type_get_data_type (type))) != NULL;
					_g_free0 (_tmp24_);
				} else {
					_tmp23_ = FALSE;
				}
				if (_tmp23_) {
					char* _tmp25_;
					ValaCCodeExpression* _tmp26_;
					result = (_tmp26_ = (ValaCCodeExpression*) vala_ccode_constant_new (_tmp25_ = vala_typesymbol_get_default_value (vala_data_type_get_data_type (type))), _g_free0 (_tmp25_), _tmp26_);
					_vala_code_node_unref0 (array_type);
					_vala_code_node_unref0 (st);
					return result;
				}
			}
		}
	}
	result = NULL;
	_vala_code_node_unref0 (array_type);
	_vala_code_node_unref0 (st);
	return result;
}


ValaCCodeNode* vala_dova_base_module_get_ccodenode (ValaDovaBaseModule* self, ValaCodeNode* node) {
	ValaCCodeNode* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	if (vala_code_node_get_ccodenode (node) == NULL) {
		vala_code_node_emit (node, (ValaCodeGenerator*) self);
	}
	result = _vala_ccode_node_ref0 (vala_code_node_get_ccodenode (node));
	return result;
}


ValaDataType* vala_dova_base_module_get_this_type (ValaDovaBaseModule* self) {
	ValaDataType* result = NULL;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	if (vala_dova_base_module_get_current_method (self) != NULL) {
		_tmp0_ = vala_method_get_binding (vala_dova_base_module_get_current_method (self)) == MEMBER_BINDING_INSTANCE;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = _vala_code_node_ref0 (vala_variable_get_variable_type ((ValaVariable*) vala_method_get_this_parameter (vala_dova_base_module_get_current_method (self))));
		return result;
	} else {
		gboolean _tmp1_ = FALSE;
		if (vala_dova_base_module_get_current_property_accessor (self) != NULL) {
			_tmp1_ = vala_property_get_binding (vala_property_accessor_get_prop (vala_dova_base_module_get_current_property_accessor (self))) == MEMBER_BINDING_INSTANCE;
		} else {
			_tmp1_ = FALSE;
		}
		if (_tmp1_) {
			result = _vala_code_node_ref0 (vala_variable_get_variable_type ((ValaVariable*) vala_property_get_this_parameter (vala_property_accessor_get_prop (vala_dova_base_module_get_current_property_accessor (self)))));
			return result;
		}
	}
	result = NULL;
	return result;
}


ValaCCodeExpression* vala_dova_base_module_generate_instance_cast (ValaDovaBaseModule* self, ValaCCodeExpression* expr, ValaTypeSymbol* type) {
	ValaCCodeExpression* result = NULL;
	char* _tmp0_;
	char* _tmp1_;
	ValaCCodeExpression* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (expr != NULL, NULL);
	g_return_val_if_fail (type != NULL, NULL);
	result = (_tmp2_ = (ValaCCodeExpression*) vala_ccode_cast_expression_new (expr, _tmp1_ = g_strconcat (_tmp0_ = vala_typesymbol_get_cname (type, FALSE), "*", NULL)), _g_free0 (_tmp1_), _g_free0 (_tmp0_), _tmp2_);
	return result;
}


static char* vala_dova_base_module_real_get_custom_creturn_type (ValaDovaBaseModule* self, ValaMethod* m) {
	char* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (m != NULL, NULL);
	result = NULL;
	return result;
}


char* vala_dova_base_module_get_custom_creturn_type (ValaDovaBaseModule* self, ValaMethod* m) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->get_custom_creturn_type (self, m);
}


static gboolean vala_dova_base_module_real_method_has_wrapper (ValaDovaBaseModule* self, ValaMethod* method) {
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (method != NULL, FALSE);
	result = FALSE;
	return result;
}


gboolean vala_dova_base_module_method_has_wrapper (ValaDovaBaseModule* self, ValaMethod* method) {
	return VALA_DOVA_BASE_MODULE_GET_CLASS (self)->method_has_wrapper (self, method);
}


static void vala_dova_base_module_real_add_simple_check (ValaDovaBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (node != NULL);
	g_return_if_fail (cfrag != NULL);
}


void vala_dova_base_module_add_simple_check (ValaDovaBaseModule* self, ValaCodeNode* node, ValaCCodeFragment* cfrag, gboolean always_fails) {
	VALA_DOVA_BASE_MODULE_GET_CLASS (self)->add_simple_check (self, node, cfrag, always_fails);
}


ValaCodeContext* vala_dova_base_module_get_context (ValaDovaBaseModule* self) {
	ValaCodeContext* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->priv->_context;
	return result;
}


static gpointer _vala_code_context_ref0 (gpointer self) {
	return self ? vala_code_context_ref (self) : NULL;
}


void vala_dova_base_module_set_context (ValaDovaBaseModule* self, ValaCodeContext* value) {
	ValaCodeContext* _tmp0_;
	g_return_if_fail (self != NULL);
	self->priv->_context = (_tmp0_ = _vala_code_context_ref0 (value), _vala_code_context_unref0 (self->priv->_context), _tmp0_);
}


ValaSymbol* vala_dova_base_module_get_current_symbol (ValaDovaBaseModule* self) {
	ValaSymbol* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->current_symbol;
	return result;
}


ValaTryStatement* vala_dova_base_module_get_current_try (ValaDovaBaseModule* self) {
	ValaTryStatement* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->current_try;
	return result;
}


void vala_dova_base_module_set_current_try (ValaDovaBaseModule* self, ValaTryStatement* value) {
	ValaTryStatement* _tmp0_;
	g_return_if_fail (self != NULL);
	self->emit_context->current_try = (_tmp0_ = _vala_code_node_ref0 (value), _vala_code_node_unref0 (self->emit_context->current_try), _tmp0_);
}


ValaTypeSymbol* vala_dova_base_module_get_current_type_symbol (ValaDovaBaseModule* self) {
	ValaTypeSymbol* result;
	ValaSymbol* sym;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_dova_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!(sym != NULL)) {
			break;
		}
		if (VALA_IS_TYPESYMBOL (sym)) {
			result = VALA_TYPESYMBOL (sym);
			_vala_code_node_unref0 (sym);
			return result;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = NULL;
	_vala_code_node_unref0 (sym);
	return result;
}


ValaClass* vala_dova_base_module_get_current_class (ValaDovaBaseModule* self) {
	ValaClass* result;
	ValaTypeSymbol* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	result = (_tmp0_ = vala_dova_base_module_get_current_type_symbol (self), VALA_IS_CLASS (_tmp0_) ? ((ValaClass*) _tmp0_) : NULL);
	return result;
}


ValaMethod* vala_dova_base_module_get_current_method (ValaDovaBaseModule* self) {
	ValaMethod* result;
	ValaSymbol* sym;
	ValaSymbol* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_dova_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!VALA_IS_BLOCK (sym)) {
			break;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = (_tmp1_ = sym, VALA_IS_METHOD (_tmp1_) ? ((ValaMethod*) _tmp1_) : NULL);
	_vala_code_node_unref0 (sym);
	return result;
	_vala_code_node_unref0 (sym);
}


ValaPropertyAccessor* vala_dova_base_module_get_current_property_accessor (ValaDovaBaseModule* self) {
	ValaPropertyAccessor* result;
	ValaSymbol* sym;
	ValaSymbol* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	sym = _vala_code_node_ref0 (vala_dova_base_module_get_current_symbol (self));
	while (TRUE) {
		ValaSymbol* _tmp0_;
		if (!VALA_IS_BLOCK (sym)) {
			break;
		}
		sym = (_tmp0_ = _vala_code_node_ref0 (vala_symbol_get_parent_symbol (sym)), _vala_code_node_unref0 (sym), _tmp0_);
	}
	result = (_tmp1_ = sym, VALA_IS_PROPERTY_ACCESSOR (_tmp1_) ? ((ValaPropertyAccessor*) _tmp1_) : NULL);
	_vala_code_node_unref0 (sym);
	return result;
	_vala_code_node_unref0 (sym);
}


ValaDataType* vala_dova_base_module_get_current_return_type (ValaDovaBaseModule* self) {
	ValaDataType* result;
	ValaMethod* m;
	ValaPropertyAccessor* acc;
	g_return_val_if_fail (self != NULL, NULL);
	m = _vala_code_node_ref0 (vala_dova_base_module_get_current_method (self));
	if (m != NULL) {
		result = vala_method_get_return_type (m);
		_vala_code_node_unref0 (m);
		return result;
	}
	acc = _vala_code_node_ref0 (vala_dova_base_module_get_current_property_accessor (self));
	if (acc != NULL) {
		if (vala_property_accessor_get_readable (acc)) {
			result = vala_property_accessor_get_value_type (acc);
			_vala_code_node_unref0 (acc);
			_vala_code_node_unref0 (m);
			return result;
		} else {
			result = self->void_type;
			_vala_code_node_unref0 (acc);
			_vala_code_node_unref0 (m);
			return result;
		}
	}
	result = NULL;
	_vala_code_node_unref0 (acc);
	_vala_code_node_unref0 (m);
	return result;
}


ValaBlock* vala_dova_base_module_get_current_closure_block (ValaDovaBaseModule* self) {
	ValaBlock* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = vala_dova_base_module_next_closure_block (self, vala_dova_base_module_get_current_symbol (self));
	return result;
}


ValaArrayList* vala_dova_base_module_get_temp_vars (ValaDovaBaseModule* self) {
	ValaArrayList* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->temp_vars;
	return result;
}


ValaArrayList* vala_dova_base_module_get_temp_ref_vars (ValaDovaBaseModule* self) {
	ValaArrayList* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->temp_ref_vars;
	return result;
}


gint vala_dova_base_module_get_next_temp_var_id (ValaDovaBaseModule* self) {
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->emit_context->next_temp_var_id;
	return result;
}


void vala_dova_base_module_set_next_temp_var_id (ValaDovaBaseModule* self, gint value) {
	g_return_if_fail (self != NULL);
	self->emit_context->next_temp_var_id = value;
}


gboolean vala_dova_base_module_get_in_creation_method (ValaDovaBaseModule* self) {
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = VALA_IS_CREATION_METHOD (vala_dova_base_module_get_current_method (self));
	return result;
}


ValaMap* vala_dova_base_module_get_variable_name_map (ValaDovaBaseModule* self) {
	ValaMap* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->emit_context->variable_name_map;
	return result;
}


ValaDovaBaseModuleEmitContext* vala_dova_base_module_emit_context_construct (GType object_type, ValaSymbol* symbol) {
	ValaDovaBaseModuleEmitContext* self = (ValaDovaBaseModuleEmitContext*) g_type_create_instance (object_type);
	ValaSymbol* _tmp0_;
	self->current_symbol = (_tmp0_ = _vala_code_node_ref0 (symbol), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
	return self;
}


ValaDovaBaseModuleEmitContext* vala_dova_base_module_emit_context_new (ValaSymbol* symbol) {
	return vala_dova_base_module_emit_context_construct (VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT, symbol);
}


void vala_dova_base_module_emit_context_push_symbol (ValaDovaBaseModuleEmitContext* self, ValaSymbol* symbol) {
	ValaSymbol* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (symbol != NULL);
	vala_collection_add ((ValaCollection*) self->symbol_stack, self->current_symbol);
	self->current_symbol = (_tmp0_ = _vala_code_node_ref0 (symbol), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
}


void vala_dova_base_module_emit_context_pop_symbol (ValaDovaBaseModuleEmitContext* self) {
	ValaSymbol* _tmp0_;
	g_return_if_fail (self != NULL);
	self->current_symbol = (_tmp0_ = (ValaSymbol*) vala_list_get ((ValaList*) self->symbol_stack, vala_collection_get_size ((ValaCollection*) self->symbol_stack) - 1), _vala_code_node_unref0 (self->current_symbol), _tmp0_);
	vala_list_remove_at ((ValaList*) self->symbol_stack, vala_collection_get_size ((ValaCollection*) self->symbol_stack) - 1);
}


static void vala_dova_base_module_value_emit_context_init (GValue* value) {
	value->data[0].v_pointer = NULL;
}


static void vala_dova_base_module_value_emit_context_free_value (GValue* value) {
	if (value->data[0].v_pointer) {
		vala_dova_base_module_emit_context_unref (value->data[0].v_pointer);
	}
}


static void vala_dova_base_module_value_emit_context_copy_value (const GValue* src_value, GValue* dest_value) {
	if (src_value->data[0].v_pointer) {
		dest_value->data[0].v_pointer = vala_dova_base_module_emit_context_ref (src_value->data[0].v_pointer);
	} else {
		dest_value->data[0].v_pointer = NULL;
	}
}


static gpointer vala_dova_base_module_value_emit_context_peek_pointer (const GValue* value) {
	return value->data[0].v_pointer;
}


static gchar* vala_dova_base_module_value_emit_context_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	if (collect_values[0].v_pointer) {
		ValaDovaBaseModuleEmitContext* object;
		object = collect_values[0].v_pointer;
		if (object->parent_instance.g_class == NULL) {
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		}
		value->data[0].v_pointer = vala_dova_base_module_emit_context_ref (object);
	} else {
		value->data[0].v_pointer = NULL;
	}
	return NULL;
}


static gchar* vala_dova_base_module_value_emit_context_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	ValaDovaBaseModuleEmitContext** object_p;
	object_p = collect_values[0].v_pointer;
	if (!object_p) {
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
	}
	if (!value->data[0].v_pointer) {
		*object_p = NULL;
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
		*object_p = value->data[0].v_pointer;
	} else {
		*object_p = vala_dova_base_module_emit_context_ref (value->data[0].v_pointer);
	}
	return NULL;
}


GParamSpec* vala_dova_base_module_param_spec_emit_context (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	ValaDovaBaseModuleParamSpecEmitContext* spec;
	g_return_val_if_fail (g_type_is_a (object_type, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT), NULL);
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
	G_PARAM_SPEC (spec)->value_type = object_type;
	return G_PARAM_SPEC (spec);
}


gpointer vala_dova_base_module_value_get_emit_context (const GValue* value) {
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT), NULL);
	return value->data[0].v_pointer;
}


void vala_dova_base_module_value_set_emit_context (GValue* value, gpointer v_object) {
	ValaDovaBaseModuleEmitContext* old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
		vala_dova_base_module_emit_context_ref (value->data[0].v_pointer);
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		vala_dova_base_module_emit_context_unref (old);
	}
}


void vala_dova_base_module_value_take_emit_context (GValue* value, gpointer v_object) {
	ValaDovaBaseModuleEmitContext* old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		vala_dova_base_module_emit_context_unref (old);
	}
}


static void vala_dova_base_module_emit_context_class_init (ValaDovaBaseModuleEmitContextClass * klass) {
	vala_dova_base_module_emit_context_parent_class = g_type_class_peek_parent (klass);
	VALA_DOVA_BASE_MODULE_EMIT_CONTEXT_CLASS (klass)->finalize = vala_dova_base_module_emit_context_finalize;
}


static void vala_dova_base_module_emit_context_instance_init (ValaDovaBaseModuleEmitContext * self) {
	self->symbol_stack = vala_array_list_new (VALA_TYPE_SYMBOL, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->temp_vars = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->temp_ref_vars = vala_array_list_new (VALA_TYPE_LOCAL_VARIABLE, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, g_direct_equal);
	self->variable_name_map = (ValaMap*) vala_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, g_str_hash, g_str_equal, g_direct_equal);
	self->ref_count = 1;
}


static void vala_dova_base_module_emit_context_finalize (ValaDovaBaseModuleEmitContext* obj) {
	ValaDovaBaseModuleEmitContext * self;
	self = VALA_DOVA_BASE_MODULE_EMIT_CONTEXT (obj);
	_vala_code_node_unref0 (self->current_symbol);
	_vala_collection_object_unref0 (self->symbol_stack);
	_vala_code_node_unref0 (self->current_try);
	_vala_collection_object_unref0 (self->temp_vars);
	_vala_collection_object_unref0 (self->temp_ref_vars);
	_vala_collection_object_unref0 (self->variable_name_map);
}


GType vala_dova_base_module_emit_context_get_type (void) {
	static volatile gsize vala_dova_base_module_emit_context_type_id__volatile = 0;
	if (g_once_init_enter (&vala_dova_base_module_emit_context_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { vala_dova_base_module_value_emit_context_init, vala_dova_base_module_value_emit_context_free_value, vala_dova_base_module_value_emit_context_copy_value, vala_dova_base_module_value_emit_context_peek_pointer, "p", vala_dova_base_module_value_emit_context_collect_value, "p", vala_dova_base_module_value_emit_context_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (ValaDovaBaseModuleEmitContextClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_dova_base_module_emit_context_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaDovaBaseModuleEmitContext), 0, (GInstanceInitFunc) vala_dova_base_module_emit_context_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType vala_dova_base_module_emit_context_type_id;
		vala_dova_base_module_emit_context_type_id = g_type_register_fundamental (g_type_fundamental_next (), "ValaDovaBaseModuleEmitContext", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&vala_dova_base_module_emit_context_type_id__volatile, vala_dova_base_module_emit_context_type_id);
	}
	return vala_dova_base_module_emit_context_type_id__volatile;
}


gpointer vala_dova_base_module_emit_context_ref (gpointer instance) {
	ValaDovaBaseModuleEmitContext* self;
	self = instance;
	g_atomic_int_inc (&self->ref_count);
	return instance;
}


void vala_dova_base_module_emit_context_unref (gpointer instance) {
	ValaDovaBaseModuleEmitContext* self;
	self = instance;
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
		VALA_DOVA_BASE_MODULE_EMIT_CONTEXT_GET_CLASS (self)->finalize (self);
		g_type_free_instance ((GTypeInstance *) self);
	}
}


static void vala_dova_base_module_class_init (ValaDovaBaseModuleClass * klass) {
	vala_dova_base_module_parent_class = g_type_class_peek_parent (klass);
	VALA_CODE_VISITOR_CLASS (klass)->finalize = vala_dova_base_module_finalize;
	g_type_class_add_private (klass, sizeof (ValaDovaBaseModulePrivate));
	VALA_CODE_GENERATOR_CLASS (klass)->emit = vala_dova_base_module_real_emit;
	VALA_CODE_VISITOR_CLASS (klass)->visit_source_file = vala_dova_base_module_real_visit_source_file;
	VALA_CODE_VISITOR_CLASS (klass)->visit_enum = vala_dova_base_module_real_visit_enum;
	VALA_CODE_VISITOR_CLASS (klass)->visit_constant = vala_dova_base_module_real_visit_constant;
	VALA_CODE_VISITOR_CLASS (klass)->visit_field = vala_dova_base_module_real_visit_field;
	VALA_CODE_VISITOR_CLASS (klass)->visit_formal_parameter = vala_dova_base_module_real_visit_formal_parameter;
	VALA_CODE_VISITOR_CLASS (klass)->visit_property = vala_dova_base_module_real_visit_property;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_struct_declaration = vala_dova_base_module_real_generate_struct_declaration;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_delegate_declaration = vala_dova_base_module_real_generate_delegate_declaration;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_cparameters = vala_dova_base_module_real_generate_cparameters;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_property_accessor_declaration = vala_dova_base_module_real_generate_property_accessor_declaration;
	VALA_CODE_VISITOR_CLASS (klass)->visit_destructor = vala_dova_base_module_real_visit_destructor;
	VALA_CODE_VISITOR_CLASS (klass)->visit_block = vala_dova_base_module_real_visit_block;
	VALA_CODE_VISITOR_CLASS (klass)->visit_empty_statement = vala_dova_base_module_real_visit_empty_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_declaration_statement = vala_dova_base_module_real_visit_declaration_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_local_variable = vala_dova_base_module_real_visit_local_variable;
	VALA_CODE_VISITOR_CLASS (klass)->visit_initializer_list = vala_dova_base_module_real_visit_initializer_list;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->get_dup_func_expression = vala_dova_base_module_real_get_dup_func_expression;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->get_unref_expression = vala_dova_base_module_real_get_unref_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_end_full_expression = vala_dova_base_module_real_visit_end_full_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_expression_statement = vala_dova_base_module_real_visit_expression_statement;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->append_local_free = vala_dova_base_module_real_append_local_free;
	VALA_CODE_VISITOR_CLASS (klass)->visit_return_statement = vala_dova_base_module_real_visit_return_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_delete_statement = vala_dova_base_module_real_visit_delete_statement;
	VALA_CODE_VISITOR_CLASS (klass)->visit_expression = vala_dova_base_module_real_visit_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_boolean_literal = vala_dova_base_module_real_visit_boolean_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_character_literal = vala_dova_base_module_real_visit_character_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_integer_literal = vala_dova_base_module_real_visit_integer_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_real_literal = vala_dova_base_module_real_visit_real_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_string_literal = vala_dova_base_module_real_visit_string_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_null_literal = vala_dova_base_module_real_visit_null_literal;
	VALA_CODE_VISITOR_CLASS (klass)->visit_base_access = vala_dova_base_module_real_visit_base_access;
	VALA_CODE_VISITOR_CLASS (klass)->visit_postfix_expression = vala_dova_base_module_real_visit_postfix_expression;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->get_ref_cexpression = vala_dova_base_module_real_get_ref_cexpression;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_class_declaration = vala_dova_base_module_real_generate_class_declaration;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_interface_declaration = vala_dova_base_module_real_generate_interface_declaration;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->generate_method_declaration = vala_dova_base_module_real_generate_method_declaration;
	VALA_CODE_VISITOR_CLASS (klass)->visit_object_creation_expression = vala_dova_base_module_real_visit_object_creation_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_sizeof_expression = vala_dova_base_module_real_visit_sizeof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_typeof_expression = vala_dova_base_module_real_visit_typeof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_unary_expression = vala_dova_base_module_real_visit_unary_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_cast_expression = vala_dova_base_module_real_visit_cast_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_pointer_indirection = vala_dova_base_module_real_visit_pointer_indirection;
	VALA_CODE_VISITOR_CLASS (klass)->visit_addressof_expression = vala_dova_base_module_real_visit_addressof_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_reference_transfer_expression = vala_dova_base_module_real_visit_reference_transfer_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_binary_expression = vala_dova_base_module_real_visit_binary_expression;
	VALA_CODE_VISITOR_CLASS (klass)->visit_type_check = vala_dova_base_module_real_visit_type_check;
	VALA_CODE_VISITOR_CLASS (klass)->visit_lambda_expression = vala_dova_base_module_real_visit_lambda_expression;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->get_implicit_cast_expression = vala_dova_base_module_real_get_implicit_cast_expression;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->get_custom_creturn_type = vala_dova_base_module_real_get_custom_creturn_type;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->method_has_wrapper = vala_dova_base_module_real_method_has_wrapper;
	VALA_DOVA_BASE_MODULE_CLASS (klass)->add_simple_check = vala_dova_base_module_real_add_simple_check;
}


static void vala_dova_base_module_instance_init (ValaDovaBaseModule * self) {
	self->priv = VALA_DOVA_BASE_MODULE_GET_PRIVATE (self);
	self->emit_context = vala_dova_base_module_emit_context_new (NULL);
	self->priv->emit_context_stack = (ValaList*) vala_array_list_new (VALA_DOVA_BASE_MODULE_TYPE_EMIT_CONTEXT, (GBoxedCopyFunc) vala_dova_base_module_emit_context_ref, vala_dova_base_module_emit_context_unref, g_direct_equal);
	self->next_wrapper_id = 0;
	self->priv->next_block_id = 0;
	self->priv->block_map = (ValaMap*) vala_hash_map_new (VALA_TYPE_BLOCK, (GBoxedCopyFunc) vala_code_node_ref, vala_code_node_unref, G_TYPE_INT, NULL, NULL, g_direct_hash, g_direct_equal, g_direct_equal);
	self->void_type = (ValaDataType*) vala_void_type_new (NULL);
}


static void vala_dova_base_module_finalize (ValaCodeVisitor* obj) {
	ValaDovaBaseModule * self;
	self = VALA_DOVA_BASE_MODULE (obj);
	_vala_code_context_unref0 (self->priv->_context);
	_vala_code_node_unref0 (self->root_symbol);
	_vala_dova_base_module_emit_context_unref0 (self->emit_context);
	_vala_collection_object_unref0 (self->priv->emit_context_stack);
	_vala_ccode_declaration_space_unref0 (self->header_declarations);
	_vala_ccode_declaration_space_unref0 (self->source_declarations);
	_g_free0 (self->priv->csource_filename);
	_vala_ccode_node_unref0 (self->source_type_member_definition);
	_vala_ccode_node_unref0 (self->module_init_fragment);
	_vala_ccode_node_unref0 (self->instance_init_fragment);
	_vala_ccode_node_unref0 (self->instance_finalize_fragment);
	_vala_ccode_node_unref0 (self->pre_statement_fragment);
	_vala_collection_object_unref0 (self->priv->reserved_identifiers);
	_vala_collection_object_unref0 (self->priv->block_map);
	_vala_code_node_unref0 (self->void_type);
	_vala_code_node_unref0 (self->bool_type);
	_vala_code_node_unref0 (self->char_type);
	_vala_code_node_unref0 (self->short_type);
	_vala_code_node_unref0 (self->ushort_type);
	_vala_code_node_unref0 (self->int_type);
	_vala_code_node_unref0 (self->uint_type);
	_vala_code_node_unref0 (self->long_type);
	_vala_code_node_unref0 (self->ulong_type);
	_vala_code_node_unref0 (self->string_type);
	_vala_code_node_unref0 (self->float_type);
	_vala_code_node_unref0 (self->double_type);
	_vala_code_node_unref0 (self->object_class);
	_vala_code_node_unref0 (self->type_class);
	_vala_code_node_unref0 (self->value_class);
	_vala_code_node_unref0 (self->string_class);
	_vala_code_node_unref0 (self->array_class);
	_vala_code_node_unref0 (self->delegate_class);
	_vala_code_node_unref0 (self->error_class);
	_vala_collection_object_unref0 (self->priv->generated_external_symbols);
	VALA_CODE_VISITOR_CLASS (vala_dova_base_module_parent_class)->finalize (obj);
}


/**
 * Code visitor generating C Code.
 */
GType vala_dova_base_module_get_type (void) {
	static volatile gsize vala_dova_base_module_type_id__volatile = 0;
	if (g_once_init_enter (&vala_dova_base_module_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ValaDovaBaseModuleClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) vala_dova_base_module_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ValaDovaBaseModule), 0, (GInstanceInitFunc) vala_dova_base_module_instance_init, NULL };
		GType vala_dova_base_module_type_id;
		vala_dova_base_module_type_id = g_type_register_static (VALA_TYPE_CODE_GENERATOR, "ValaDovaBaseModule", &g_define_type_info, 0);
		g_once_init_leave (&vala_dova_base_module_type_id__volatile, vala_dova_base_module_type_id);
	}
	return vala_dova_base_module_type_id__volatile;
}


static int _vala_strcmp0 (const char * str1, const char * str2) {
	if (str1 == NULL) {
		return -(str1 != str2);
	}
	if (str2 == NULL) {
		return str1 != str2;
	}
	return strcmp (str1, str2);
}




